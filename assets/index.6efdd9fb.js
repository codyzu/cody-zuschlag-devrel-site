const Qw=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const k of y.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&u(k)}).observe(document,{childList:!0,subtree:!0});function a(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerpolicy&&(y.referrerPolicy=m.referrerpolicy),m.crossorigin==="use-credentials"?y.credentials="include":m.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function u(m){if(m.ep)return;m.ep=!0;const y=a(m);fetch(m.href,y)}};Qw();var e5=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ue={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=Symbol.for("react.element"),t5=Symbol.for("react.portal"),r5=Symbol.for("react.fragment"),n5=Symbol.for("react.strict_mode"),i5=Symbol.for("react.profiler"),o5=Symbol.for("react.provider"),a5=Symbol.for("react.context"),s5=Symbol.for("react.forward_ref"),l5=Symbol.for("react.suspense"),c5=Symbol.for("react.memo"),u5=Symbol.for("react.lazy"),hx=Symbol.iterator;function p5(e){return e===null||typeof e!="object"?null:(e=hx&&e[hx]||e["@@iterator"],typeof e=="function"?e:null)}var Qy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eb=Object.assign,tb={};function sc(e,r,a){this.props=e,this.context=r,this.refs=tb,this.updater=a||Qy}sc.prototype.isReactComponent={};sc.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")};sc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rb(){}rb.prototype=sc.prototype;function Eg(e,r,a){this.props=e,this.context=r,this.refs=tb,this.updater=a||Qy}var Sg=Eg.prototype=new rb;Sg.constructor=Eg;eb(Sg,sc.prototype);Sg.isPureReactComponent=!0;var mx=Array.isArray,nb=Object.prototype.hasOwnProperty,Cg={current:null},ib={key:!0,ref:!0,__self:!0,__source:!0};function ob(e,r,a){var u,m={},y=null,k=null;if(r!=null)for(u in r.ref!==void 0&&(k=r.ref),r.key!==void 0&&(y=""+r.key),r)nb.call(r,u)&&!ib.hasOwnProperty(u)&&(m[u]=r[u]);var c=arguments.length-2;if(c===1)m.children=a;else if(1<c){for(var P=Array(c),F=0;F<c;F++)P[F]=arguments[F+2];m.children=P}if(e&&e.defaultProps)for(u in c=e.defaultProps,c)m[u]===void 0&&(m[u]=c[u]);return{$$typeof:ip,type:e,key:y,ref:k,props:m,_owner:Cg.current}}function d5(e,r){return{$$typeof:ip,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function Tg(e){return typeof e=="object"&&e!==null&&e.$$typeof===ip}function h5(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return r[a]})}var fx=/\/+/g;function Km(e,r){return typeof e=="object"&&e!==null&&e.key!=null?h5(""+e.key):r.toString(36)}function Md(e,r,a,u,m){var y=typeof e;(y==="undefined"||y==="boolean")&&(e=null);var k=!1;if(e===null)k=!0;else switch(y){case"string":case"number":k=!0;break;case"object":switch(e.$$typeof){case ip:case t5:k=!0}}if(k)return k=e,m=m(k),e=u===""?"."+Km(k,0):u,mx(m)?(a="",e!=null&&(a=e.replace(fx,"$&/")+"/"),Md(m,r,a,"",function(F){return F})):m!=null&&(Tg(m)&&(m=d5(m,a+(!m.key||k&&k.key===m.key?"":(""+m.key).replace(fx,"$&/")+"/")+e)),r.push(m)),1;if(k=0,u=u===""?".":u+":",mx(e))for(var c=0;c<e.length;c++){y=e[c];var P=u+Km(y,c);k+=Md(y,r,a,P,m)}else if(P=p5(e),typeof P=="function")for(e=P.call(e),c=0;!(y=e.next()).done;)y=y.value,P=u+Km(y,c++),k+=Md(y,r,a,P,m);else if(y==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return k}function hd(e,r,a){if(e==null)return e;var u=[],m=0;return Md(e,u,"","",function(y){return r.call(a,y,m++)}),u}function m5(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var Vn={current:null},Ad={transition:null},f5={ReactCurrentDispatcher:Vn,ReactCurrentBatchConfig:Ad,ReactCurrentOwner:Cg};Nt.Children={map:hd,forEach:function(e,r,a){hd(e,function(){r.apply(this,arguments)},a)},count:function(e){var r=0;return hd(e,function(){r++}),r},toArray:function(e){return hd(e,function(r){return r})||[]},only:function(e){if(!Tg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=sc;Nt.Fragment=r5;Nt.Profiler=i5;Nt.PureComponent=Eg;Nt.StrictMode=n5;Nt.Suspense=l5;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f5;Nt.cloneElement=function(e,r,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var u=eb({},e.props),m=e.key,y=e.ref,k=e._owner;if(r!=null){if(r.ref!==void 0&&(y=r.ref,k=Cg.current),r.key!==void 0&&(m=""+r.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(P in r)nb.call(r,P)&&!ib.hasOwnProperty(P)&&(u[P]=r[P]===void 0&&c!==void 0?c[P]:r[P])}var P=arguments.length-2;if(P===1)u.children=a;else if(1<P){c=Array(P);for(var F=0;F<P;F++)c[F]=arguments[F+2];u.children=c}return{$$typeof:ip,type:e.type,key:m,ref:y,props:u,_owner:k}};Nt.createContext=function(e){return e={$$typeof:a5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:o5,_context:e},e.Consumer=e};Nt.createElement=ob;Nt.createFactory=function(e){var r=ob.bind(null,e);return r.type=e,r};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:s5,render:e}};Nt.isValidElement=Tg;Nt.lazy=function(e){return{$$typeof:u5,_payload:{_status:-1,_result:e},_init:m5}};Nt.memo=function(e,r){return{$$typeof:c5,type:e,compare:r===void 0?null:r}};Nt.startTransition=function(e){var r=Ad.transition;Ad.transition={};try{e()}finally{Ad.transition=r}};Nt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Nt.useCallback=function(e,r){return Vn.current.useCallback(e,r)};Nt.useContext=function(e){return Vn.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return Vn.current.useDeferredValue(e)};Nt.useEffect=function(e,r){return Vn.current.useEffect(e,r)};Nt.useId=function(){return Vn.current.useId()};Nt.useImperativeHandle=function(e,r,a){return Vn.current.useImperativeHandle(e,r,a)};Nt.useInsertionEffect=function(e,r){return Vn.current.useInsertionEffect(e,r)};Nt.useLayoutEffect=function(e,r){return Vn.current.useLayoutEffect(e,r)};Nt.useMemo=function(e,r){return Vn.current.useMemo(e,r)};Nt.useReducer=function(e,r,a){return Vn.current.useReducer(e,r,a)};Nt.useRef=function(e){return Vn.current.useRef(e)};Nt.useState=function(e){return Vn.current.useState(e)};Nt.useSyncExternalStore=function(e,r,a){return Vn.current.useSyncExternalStore(e,r,a)};Nt.useTransition=function(){return Vn.current.useTransition()};Nt.version="18.2.0";Ue.exports=Nt;var Ft=Ue.exports,Cf={},lc={exports:{}},gi={},ab={exports:{}},sb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function r(qe,lt){var dt=qe.length;qe.push(lt);e:for(;0<dt;){var Ut=dt-1>>>1,jt=qe[Ut];if(0<m(jt,lt))qe[Ut]=lt,qe[dt]=jt,dt=Ut;else break e}}function a(qe){return qe.length===0?null:qe[0]}function u(qe){if(qe.length===0)return null;var lt=qe[0],dt=qe.pop();if(dt!==lt){qe[0]=dt;e:for(var Ut=0,jt=qe.length,Br=jt>>>1;Ut<Br;){var hr=2*(Ut+1)-1,zr=qe[hr],or=hr+1,Fr=qe[or];if(0>m(zr,dt))or<jt&&0>m(Fr,zr)?(qe[Ut]=Fr,qe[or]=dt,Ut=or):(qe[Ut]=zr,qe[hr]=dt,Ut=hr);else if(or<jt&&0>m(Fr,dt))qe[Ut]=Fr,qe[or]=dt,Ut=or;else break e}}return lt}function m(qe,lt){var dt=qe.sortIndex-lt.sortIndex;return dt!==0?dt:qe.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var k=Date,c=k.now();e.unstable_now=function(){return k.now()-c}}var P=[],F=[],Z=1,H=null,V=3,pe=!1,de=!1,ye=!1,Me=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(qe){for(var lt=a(F);lt!==null;){if(lt.callback===null)u(F);else if(lt.startTime<=qe)u(F),lt.sortIndex=lt.expirationTime,r(P,lt);else break;lt=a(F)}}function he(qe){if(ye=!1,ee(qe),!de)if(a(P)!==null)de=!0,Qe(Te);else{var lt=a(F);lt!==null&&Yt(he,lt.startTime-qe)}}function Te(qe,lt){de=!1,ye&&(ye=!1,re(Be),Be=-1),pe=!0;var dt=V;try{for(ee(lt),H=a(P);H!==null&&(!(H.expirationTime>lt)||qe&&!St());){var Ut=H.callback;if(typeof Ut=="function"){H.callback=null,V=H.priorityLevel;var jt=Ut(H.expirationTime<=lt);lt=e.unstable_now(),typeof jt=="function"?H.callback=jt:H===a(P)&&u(P),ee(lt)}else u(P);H=a(P)}if(H!==null)var Br=!0;else{var hr=a(F);hr!==null&&Yt(he,hr.startTime-lt),Br=!1}return Br}finally{H=null,V=dt,pe=!1}}var Pe=!1,Le=null,Be=-1,ht=5,ot=-1;function St(){return!(e.unstable_now()-ot<ht)}function qt(){if(Le!==null){var qe=e.unstable_now();ot=qe;var lt=!0;try{lt=Le(!0,qe)}finally{lt?Rt():(Pe=!1,Le=null)}}else Pe=!1}var Rt;if(typeof K=="function")Rt=function(){K(qt)};else if(typeof MessageChannel!="undefined"){var Tr=new MessageChannel,Kr=Tr.port2;Tr.port1.onmessage=qt,Rt=function(){Kr.postMessage(null)}}else Rt=function(){Me(qt,0)};function Qe(qe){Le=qe,Pe||(Pe=!0,Rt())}function Yt(qe,lt){Be=Me(function(){qe(e.unstable_now())},lt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(qe){qe.callback=null},e.unstable_continueExecution=function(){de||pe||(de=!0,Qe(Te))},e.unstable_forceFrameRate=function(qe){0>qe||125<qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<qe?Math.floor(1e3/qe):5},e.unstable_getCurrentPriorityLevel=function(){return V},e.unstable_getFirstCallbackNode=function(){return a(P)},e.unstable_next=function(qe){switch(V){case 1:case 2:case 3:var lt=3;break;default:lt=V}var dt=V;V=lt;try{return qe()}finally{V=dt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(qe,lt){switch(qe){case 1:case 2:case 3:case 4:case 5:break;default:qe=3}var dt=V;V=qe;try{return lt()}finally{V=dt}},e.unstable_scheduleCallback=function(qe,lt,dt){var Ut=e.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?Ut+dt:Ut):dt=Ut,qe){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=dt+jt,qe={id:Z++,callback:lt,priorityLevel:qe,startTime:dt,expirationTime:jt,sortIndex:-1},dt>Ut?(qe.sortIndex=dt,r(F,qe),a(P)===null&&qe===a(F)&&(ye?(re(Be),Be=-1):ye=!0,Yt(he,dt-Ut))):(qe.sortIndex=jt,r(P,qe),de||pe||(de=!0,Qe(Te))),qe},e.unstable_shouldYield=St,e.unstable_wrapCallback=function(qe){var lt=V;return function(){var dt=V;V=lt;try{return qe.apply(this,arguments)}finally{V=dt}}}})(sb);ab.exports=sb;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb=Ue.exports,fi=ab.exports;function Re(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cb=new Set,Nu={};function As(e,r){Hl(e,r),Hl(e+"Capture",r)}function Hl(e,r){for(Nu[e]=r,e=0;e<r.length;e++)cb.add(r[e])}var Go=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Tf=Object.prototype.hasOwnProperty,g5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gx={},xx={};function x5(e){return Tf.call(xx,e)?!0:Tf.call(gx,e)?!1:g5.test(e)?xx[e]=!0:(gx[e]=!0,!1)}function y5(e,r,a,u){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b5(e,r,a,u){if(r===null||typeof r=="undefined"||y5(e,r,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function jn(e,r,a,u,m,y,k){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=m,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=y,this.removeEmptyString=k}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bn[e]=new jn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];bn[r]=new jn(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bn[e]=new jn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bn[e]=new jn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bn[e]=new jn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bn[e]=new jn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bn[e]=new jn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bn[e]=new jn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bn[e]=new jn(e,5,!1,e.toLowerCase(),null,!1,!1)});var zg=/[\-:]([a-z])/g;function Ig(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(zg,Ig);bn[r]=new jn(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(zg,Ig);bn[r]=new jn(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(zg,Ig);bn[r]=new jn(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bn[e]=new jn(e,1,!1,e.toLowerCase(),null,!1,!1)});bn.xlinkHref=new jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bn[e]=new jn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pg(e,r,a,u){var m=bn.hasOwnProperty(r)?bn[r]:null;(m!==null?m.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(b5(r,a,m,u)&&(a=null),u||m===null?x5(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):m.mustUseProperty?e[m.propertyName]=a===null?m.type===3?!1:"":a:(r=m.attributeName,u=m.attributeNamespace,a===null?e.removeAttribute(r):(m=m.type,a=m===3||m===4&&a===!0?"":""+a,u?e.setAttributeNS(u,r,a):e.setAttribute(r,a))))}var Xo=lb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,md=Symbol.for("react.element"),zl=Symbol.for("react.portal"),Il=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),zf=Symbol.for("react.profiler"),ub=Symbol.for("react.provider"),pb=Symbol.for("react.context"),Ag=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Pf=Symbol.for("react.suspense_list"),Dg=Symbol.for("react.memo"),ka=Symbol.for("react.lazy"),db=Symbol.for("react.offscreen"),yx=Symbol.iterator;function du(e){return e===null||typeof e!="object"?null:(e=yx&&e[yx]||e["@@iterator"],typeof e=="function"?e:null)}var Cr=Object.assign,Ym;function ku(e){if(Ym===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ym=r&&r[1]||""}return`
`+Ym+e}var Jm=!1;function Qm(e,r){if(!e||Jm)return"";Jm=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var u=F}Reflect.construct(e,[],r)}else{try{r.call()}catch(F){u=F}e.call(r.prototype)}else{try{throw Error()}catch(F){u=F}e()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var m=F.stack.split(`
`),y=u.stack.split(`
`),k=m.length-1,c=y.length-1;1<=k&&0<=c&&m[k]!==y[c];)c--;for(;1<=k&&0<=c;k--,c--)if(m[k]!==y[c]){if(k!==1||c!==1)do if(k--,c--,0>c||m[k]!==y[c]){var P=`
`+m[k].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=k&&0<=c);break}}}finally{Jm=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?ku(e):""}function v5(e){switch(e.tag){case 5:return ku(e.type);case 16:return ku("Lazy");case 13:return ku("Suspense");case 19:return ku("SuspenseList");case 0:case 2:case 15:return e=Qm(e.type,!1),e;case 11:return e=Qm(e.type.render,!1),e;case 1:return e=Qm(e.type,!0),e;default:return""}}function Mf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Il:return"Fragment";case zl:return"Portal";case zf:return"Profiler";case Mg:return"StrictMode";case If:return"Suspense";case Pf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pb:return(e.displayName||"Context")+".Consumer";case ub:return(e._context.displayName||"Context")+".Provider";case Ag:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dg:return r=e.displayName||null,r!==null?r:Mf(e.type)||"Memo";case ka:r=e._payload,e=e._init;try{return Mf(e(r))}catch{}}return null}function _5(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mf(r);case 8:return r===Mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Na(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hb(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function w5(e){var r=hb(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),u=""+e[r];if(!e.hasOwnProperty(r)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,y=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return m.call(this)},set:function(k){u=""+k,y.call(this,k)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(k){u=""+k},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function fd(e){e._valueTracker||(e._valueTracker=w5(e))}function mb(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return e&&(u=hb(e)?e.checked?"true":"false":e.value),e=u,e!==a?(r.setValue(e),!0):!1}function qd(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Af(e,r){var a=r.checked;return Cr({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:e._wrapperState.initialChecked})}function bx(e,r){var a=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;a=Na(r.value!=null?r.value:a),e._wrapperState={initialChecked:u,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function fb(e,r){r=r.checked,r!=null&&Pg(e,"checked",r,!1)}function Df(e,r){fb(e,r);var a=Na(r.value),u=r.type;if(a!=null)u==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Lf(e,r.type,a):r.hasOwnProperty("defaultValue")&&Lf(e,r.type,Na(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function vx(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Lf(e,r,a){(r!=="number"||qd(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Eu=Array.isArray;function Ul(e,r,a,u){if(e=e.options,r){r={};for(var m=0;m<a.length;m++)r["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=r.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&u&&(e[a].defaultSelected=!0)}else{for(a=""+Na(a),r=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,u&&(e[m].defaultSelected=!0);return}r!==null||e[m].disabled||(r=e[m])}r!==null&&(r.selected=!0)}}function Rf(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Cr({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _x(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(Re(92));if(Eu(a)){if(1<a.length)throw Error(Re(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:Na(a)}}function gb(e,r){var a=Na(r.value),u=Na(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),u!=null&&(e.defaultValue=""+u)}function wx(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function xb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Of(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?xb(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gd,yb=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(r,a,u,m){MSApp.execUnsafeLocalFunction(function(){return e(r,a,u,m)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(gd=gd||document.createElement("div"),gd.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=gd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Uu(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var zu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k5=["Webkit","ms","Moz","O"];Object.keys(zu).forEach(function(e){k5.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),zu[r]=zu[e]})});function bb(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||zu.hasOwnProperty(e)&&zu[e]?(""+r).trim():r+"px"}function vb(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var u=a.indexOf("--")===0,m=bb(a,r[a],u);a==="float"&&(a="cssFloat"),u?e.setProperty(a,m):e[a]=m}}var E5=Cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bf(e,r){if(r){if(E5[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(Re(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(Re(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(Re(61))}if(r.style!=null&&typeof r.style!="object")throw Error(Re(62))}}function Ff(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=null;function Lg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Uf=null,Vl=null,jl=null;function kx(e){if(e=sp(e)){if(typeof Uf!="function")throw Error(Re(280));var r=e.stateNode;r&&(r=Sh(r),Uf(e.stateNode,e.type,r))}}function _b(e){Vl?jl?jl.push(e):jl=[e]:Vl=e}function wb(){if(Vl){var e=Vl,r=jl;if(jl=Vl=null,kx(e),r)for(e=0;e<r.length;e++)kx(r[e])}}function kb(e,r){return e(r)}function Eb(){}var ef=!1;function Sb(e,r,a){if(ef)return e(r,a);ef=!0;try{return kb(e,r,a)}finally{ef=!1,(Vl!==null||jl!==null)&&(Eb(),wb())}}function Vu(e,r){var a=e.stateNode;if(a===null)return null;var u=Sh(a);if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(Re(231,r,typeof a));return a}var Vf=!1;if(Go)try{var hu={};Object.defineProperty(hu,"passive",{get:function(){Vf=!0}}),window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{Vf=!1}function S5(e,r,a,u,m,y,k,c,P){var F=Array.prototype.slice.call(arguments,3);try{r.apply(a,F)}catch(Z){this.onError(Z)}}var Iu=!1,Zd=null,Hd=!1,jf=null,C5={onError:function(e){Iu=!0,Zd=e}};function T5(e,r,a,u,m,y,k,c,P){Iu=!1,Zd=null,S5.apply(C5,arguments)}function z5(e,r,a,u,m,y,k,c,P){if(T5.apply(this,arguments),Iu){if(Iu){var F=Zd;Iu=!1,Zd=null}else throw Error(Re(198));Hd||(Hd=!0,jf=F)}}function Ds(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function Cb(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Ex(e){if(Ds(e)!==e)throw Error(Re(188))}function I5(e){var r=e.alternate;if(!r){if(r=Ds(e),r===null)throw Error(Re(188));return r!==e?null:e}for(var a=e,u=r;;){var m=a.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){a=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===a)return Ex(m),e;if(y===u)return Ex(m),r;y=y.sibling}throw Error(Re(188))}if(a.return!==u.return)a=m,u=y;else{for(var k=!1,c=m.child;c;){if(c===a){k=!0,a=m,u=y;break}if(c===u){k=!0,u=m,a=y;break}c=c.sibling}if(!k){for(c=y.child;c;){if(c===a){k=!0,a=y,u=m;break}if(c===u){k=!0,u=y,a=m;break}c=c.sibling}if(!k)throw Error(Re(189))}}if(a.alternate!==u)throw Error(Re(190))}if(a.tag!==3)throw Error(Re(188));return a.stateNode.current===a?e:r}function Tb(e){return e=I5(e),e!==null?zb(e):null}function zb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=zb(e);if(r!==null)return r;e=e.sibling}return null}var Ib=fi.unstable_scheduleCallback,Sx=fi.unstable_cancelCallback,P5=fi.unstable_shouldYield,M5=fi.unstable_requestPaint,$r=fi.unstable_now,A5=fi.unstable_getCurrentPriorityLevel,Rg=fi.unstable_ImmediatePriority,Pb=fi.unstable_UserBlockingPriority,Wd=fi.unstable_NormalPriority,D5=fi.unstable_LowPriority,Mb=fi.unstable_IdlePriority,_h=null,po=null;function L5(e){if(po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot(_h,e,void 0,(e.current.flags&128)===128)}catch{}}var Qi=Math.clz32?Math.clz32:B5,R5=Math.log,O5=Math.LN2;function B5(e){return e>>>=0,e===0?32:31-(R5(e)/O5|0)|0}var xd=64,yd=4194304;function Su(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xd(e,r){var a=e.pendingLanes;if(a===0)return 0;var u=0,m=e.suspendedLanes,y=e.pingedLanes,k=a&268435455;if(k!==0){var c=k&~m;c!==0?u=Su(c):(y&=k,y!==0&&(u=Su(y)))}else k=a&~m,k!==0?u=Su(k):y!==0&&(u=Su(y));if(u===0)return 0;if(r!==0&&r!==u&&(r&m)===0&&(m=u&-u,y=r&-r,m>=y||m===16&&(y&4194240)!==0))return r;if((u&4)!==0&&(u|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=u;0<r;)a=31-Qi(r),m=1<<a,u|=e[a],r&=~m;return u}function F5(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N5(e,r){for(var a=e.suspendedLanes,u=e.pingedLanes,m=e.expirationTimes,y=e.pendingLanes;0<y;){var k=31-Qi(y),c=1<<k,P=m[k];P===-1?((c&a)===0||(c&u)!==0)&&(m[k]=F5(c,r)):P<=r&&(e.expiredLanes|=c),y&=~c}}function $f(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ab(){var e=xd;return xd<<=1,(xd&4194240)===0&&(xd=64),e}function tf(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function op(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Qi(r),e[r]=a}function U5(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<a;){var m=31-Qi(a),y=1<<m;r[m]=0,u[m]=-1,e[m]=-1,a&=~y}}function Og(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var u=31-Qi(a),m=1<<u;m&r|e[u]&r&&(e[u]|=r),a&=~m}}var rr=0;function Db(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Lb,Bg,Rb,Ob,Bb,Gf=!1,bd=[],Pa=null,Ma=null,Aa=null,ju=new Map,$u=new Map,Sa=[],V5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cx(e,r){switch(e){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":ju.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(r.pointerId)}}function mu(e,r,a,u,m,y){return e===null||e.nativeEvent!==y?(e={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},r!==null&&(r=sp(r),r!==null&&Bg(r)),e):(e.eventSystemFlags|=u,r=e.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),e)}function j5(e,r,a,u,m){switch(r){case"focusin":return Pa=mu(Pa,e,r,a,u,m),!0;case"dragenter":return Ma=mu(Ma,e,r,a,u,m),!0;case"mouseover":return Aa=mu(Aa,e,r,a,u,m),!0;case"pointerover":var y=m.pointerId;return ju.set(y,mu(ju.get(y)||null,e,r,a,u,m)),!0;case"gotpointercapture":return y=m.pointerId,$u.set(y,mu($u.get(y)||null,e,r,a,u,m)),!0}return!1}function Fb(e){var r=vs(e.target);if(r!==null){var a=Ds(r);if(a!==null){if(r=a.tag,r===13){if(r=Cb(a),r!==null){e.blockedOn=r,Bb(e.priority,function(){Rb(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dd(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=qf(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a);Nf=u,a.target.dispatchEvent(u),Nf=null}else return r=sp(a),r!==null&&Bg(r),e.blockedOn=a,!1;r.shift()}return!0}function Tx(e,r,a){Dd(e)&&a.delete(r)}function $5(){Gf=!1,Pa!==null&&Dd(Pa)&&(Pa=null),Ma!==null&&Dd(Ma)&&(Ma=null),Aa!==null&&Dd(Aa)&&(Aa=null),ju.forEach(Tx),$u.forEach(Tx)}function fu(e,r){e.blockedOn===r&&(e.blockedOn=null,Gf||(Gf=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,$5)))}function Gu(e){function r(m){return fu(m,e)}if(0<bd.length){fu(bd[0],e);for(var a=1;a<bd.length;a++){var u=bd[a];u.blockedOn===e&&(u.blockedOn=null)}}for(Pa!==null&&fu(Pa,e),Ma!==null&&fu(Ma,e),Aa!==null&&fu(Aa,e),ju.forEach(r),$u.forEach(r),a=0;a<Sa.length;a++)u=Sa[a],u.blockedOn===e&&(u.blockedOn=null);for(;0<Sa.length&&(a=Sa[0],a.blockedOn===null);)Fb(a),a.blockedOn===null&&Sa.shift()}var $l=Xo.ReactCurrentBatchConfig,Kd=!0;function G5(e,r,a,u){var m=rr,y=$l.transition;$l.transition=null;try{rr=1,Fg(e,r,a,u)}finally{rr=m,$l.transition=y}}function q5(e,r,a,u){var m=rr,y=$l.transition;$l.transition=null;try{rr=4,Fg(e,r,a,u)}finally{rr=m,$l.transition=y}}function Fg(e,r,a,u){if(Kd){var m=qf(e,r,a,u);if(m===null)df(e,r,u,Yd,a),Cx(e,u);else if(j5(m,e,r,a,u))u.stopPropagation();else if(Cx(e,u),r&4&&-1<V5.indexOf(e)){for(;m!==null;){var y=sp(m);if(y!==null&&Lb(y),y=qf(e,r,a,u),y===null&&df(e,r,u,Yd,a),y===m)break;m=y}m!==null&&u.stopPropagation()}else df(e,r,u,null,a)}}var Yd=null;function qf(e,r,a,u){if(Yd=null,e=Lg(u),e=vs(e),e!==null)if(r=Ds(e),r===null)e=null;else if(a=r.tag,a===13){if(e=Cb(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Yd=e,null}function Nb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A5()){case Rg:return 1;case Pb:return 4;case Wd:case D5:return 16;case Mb:return 536870912;default:return 16}default:return 16}}var za=null,Ng=null,Ld=null;function Ub(){if(Ld)return Ld;var e,r=Ng,a=r.length,u,m="value"in za?za.value:za.textContent,y=m.length;for(e=0;e<a&&r[e]===m[e];e++);var k=a-e;for(u=1;u<=k&&r[a-u]===m[y-u];u++);return Ld=m.slice(e,1<u?1-u:void 0)}function Rd(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function vd(){return!0}function zx(){return!1}function xi(e){function r(a,u,m,y,k){this._reactName=a,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(a=e[c],this[c]=a?a(y):y[c]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?vd:zx,this.isPropagationStopped=zx,this}return Cr(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),r}var cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ug=xi(cc),ap=Cr({},cc,{view:0,detail:0}),Z5=xi(ap),rf,nf,gu,wh=Cr({},ap,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gu&&(gu&&e.type==="mousemove"?(rf=e.screenX-gu.screenX,nf=e.screenY-gu.screenY):nf=rf=0,gu=e),rf)},movementY:function(e){return"movementY"in e?e.movementY:nf}}),Ix=xi(wh),H5=Cr({},wh,{dataTransfer:0}),W5=xi(H5),X5=Cr({},ap,{relatedTarget:0}),of=xi(X5),K5=Cr({},cc,{animationName:0,elapsedTime:0,pseudoElement:0}),Y5=xi(K5),J5=Cr({},cc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q5=xi(J5),e3=Cr({},cc,{data:0}),Px=xi(e3),t3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i3(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=n3[e])?!!r[e]:!1}function Vg(){return i3}var o3=Cr({},ap,{key:function(e){if(e.key){var r=t3[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Rd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?r3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vg,charCode:function(e){return e.type==="keypress"?Rd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),a3=xi(o3),s3=Cr({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mx=xi(s3),l3=Cr({},ap,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vg}),c3=xi(l3),u3=Cr({},cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),p3=xi(u3),d3=Cr({},wh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),h3=xi(d3),m3=[9,13,27,32],jg=Go&&"CompositionEvent"in window,Pu=null;Go&&"documentMode"in document&&(Pu=document.documentMode);var f3=Go&&"TextEvent"in window&&!Pu,Vb=Go&&(!jg||Pu&&8<Pu&&11>=Pu),Ax=String.fromCharCode(32),Dx=!1;function jb(e,r){switch(e){case"keyup":return m3.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $b(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pl=!1;function g3(e,r){switch(e){case"compositionend":return $b(r);case"keypress":return r.which!==32?null:(Dx=!0,Ax);case"textInput":return e=r.data,e===Ax&&Dx?null:e;default:return null}}function x3(e,r){if(Pl)return e==="compositionend"||!jg&&jb(e,r)?(e=Ub(),Ld=Ng=za=null,Pl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vb&&r.locale!=="ko"?null:r.data;default:return null}}var y3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lx(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!y3[e.type]:r==="textarea"}function Gb(e,r,a,u){_b(u),r=Jd(r,"onChange"),0<r.length&&(a=new Ug("onChange","change",null,a,u),e.push({event:a,listeners:r}))}var Mu=null,qu=null;function b3(e){tv(e,0)}function kh(e){var r=Dl(e);if(mb(r))return e}function v3(e,r){if(e==="change")return r}var qb=!1;if(Go){var af;if(Go){var sf="oninput"in document;if(!sf){var Rx=document.createElement("div");Rx.setAttribute("oninput","return;"),sf=typeof Rx.oninput=="function"}af=sf}else af=!1;qb=af&&(!document.documentMode||9<document.documentMode)}function Ox(){Mu&&(Mu.detachEvent("onpropertychange",Zb),qu=Mu=null)}function Zb(e){if(e.propertyName==="value"&&kh(qu)){var r=[];Gb(r,qu,e,Lg(e)),Sb(b3,r)}}function _3(e,r,a){e==="focusin"?(Ox(),Mu=r,qu=a,Mu.attachEvent("onpropertychange",Zb)):e==="focusout"&&Ox()}function w3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kh(qu)}function k3(e,r){if(e==="click")return kh(r)}function E3(e,r){if(e==="input"||e==="change")return kh(r)}function S3(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var to=typeof Object.is=="function"?Object.is:S3;function Zu(e,r){if(to(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var m=a[u];if(!Tf.call(r,m)||!to(e[m],r[m]))return!1}return!0}function Bx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fx(e,r){var a=Bx(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=r&&u>=r)return{node:a,offset:r-e};e=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bx(a)}}function Hb(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Hb(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Wb(){for(var e=window,r=qd();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=qd(e.document)}return r}function $g(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function C3(e){var r=Wb(),a=e.focusedElem,u=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&Hb(a.ownerDocument.documentElement,a)){if(u!==null&&$g(a)){if(r=u.start,e=u.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var m=a.textContent.length,y=Math.min(u.start,m);u=u.end===void 0?y:Math.min(u.end,m),!e.extend&&y>u&&(m=u,u=y,y=m),m=Fx(a,y);var k=Fx(a,u);m&&k&&(e.rangeCount!==1||e.anchorNode!==m.node||e.anchorOffset!==m.offset||e.focusNode!==k.node||e.focusOffset!==k.offset)&&(r=r.createRange(),r.setStart(m.node,m.offset),e.removeAllRanges(),y>u?(e.addRange(r),e.extend(k.node,k.offset)):(r.setEnd(k.node,k.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T3=Go&&"documentMode"in document&&11>=document.documentMode,Ml=null,Zf=null,Au=null,Hf=!1;function Nx(e,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hf||Ml==null||Ml!==qd(u)||(u=Ml,"selectionStart"in u&&$g(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Au&&Zu(Au,u)||(Au=u,u=Jd(Zf,"onSelect"),0<u.length&&(r=new Ug("onSelect","select",null,r,a),e.push({event:r,listeners:u}),r.target=Ml)))}function _d(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var Al={animationend:_d("Animation","AnimationEnd"),animationiteration:_d("Animation","AnimationIteration"),animationstart:_d("Animation","AnimationStart"),transitionend:_d("Transition","TransitionEnd")},lf={},Xb={};Go&&(Xb=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function Eh(e){if(lf[e])return lf[e];if(!Al[e])return e;var r=Al[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Xb)return lf[e]=r[a];return e}var Kb=Eh("animationend"),Yb=Eh("animationiteration"),Jb=Eh("animationstart"),Qb=Eh("transitionend"),ev=new Map,Ux="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(e,r){ev.set(e,r),As(r,[e])}for(var cf=0;cf<Ux.length;cf++){var uf=Ux[cf],z3=uf.toLowerCase(),I3=uf[0].toUpperCase()+uf.slice(1);ja(z3,"on"+I3)}ja(Kb,"onAnimationEnd");ja(Yb,"onAnimationIteration");ja(Jb,"onAnimationStart");ja("dblclick","onDoubleClick");ja("focusin","onFocus");ja("focusout","onBlur");ja(Qb,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function Vx(e,r,a){var u=e.type||"unknown-event";e.currentTarget=a,z5(u,r,void 0,e),e.currentTarget=null}function tv(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var u=e[a],m=u.event;u=u.listeners;e:{var y=void 0;if(r)for(var k=u.length-1;0<=k;k--){var c=u[k],P=c.instance,F=c.currentTarget;if(c=c.listener,P!==y&&m.isPropagationStopped())break e;Vx(m,c,F),y=P}else for(k=0;k<u.length;k++){if(c=u[k],P=c.instance,F=c.currentTarget,c=c.listener,P!==y&&m.isPropagationStopped())break e;Vx(m,c,F),y=P}}}if(Hd)throw e=jf,Hd=!1,jf=null,e}function fr(e,r){var a=r[Jf];a===void 0&&(a=r[Jf]=new Set);var u=e+"__bubble";a.has(u)||(rv(r,e,2,!1),a.add(u))}function pf(e,r,a){var u=0;r&&(u|=4),rv(a,e,u,r)}var wd="_reactListening"+Math.random().toString(36).slice(2);function Hu(e){if(!e[wd]){e[wd]=!0,cb.forEach(function(a){a!=="selectionchange"&&(P3.has(a)||pf(a,!1,e),pf(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[wd]||(r[wd]=!0,pf("selectionchange",!1,r))}}function rv(e,r,a,u){switch(Nb(r)){case 1:var m=G5;break;case 4:m=q5;break;default:m=Fg}a=m.bind(null,r,a,e),m=void 0,!Vf||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),u?m!==void 0?e.addEventListener(r,a,{capture:!0,passive:m}):e.addEventListener(r,a,!0):m!==void 0?e.addEventListener(r,a,{passive:m}):e.addEventListener(r,a,!1)}function df(e,r,a,u,m){var y=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var k=u.tag;if(k===3||k===4){var c=u.stateNode.containerInfo;if(c===m||c.nodeType===8&&c.parentNode===m)break;if(k===4)for(k=u.return;k!==null;){var P=k.tag;if((P===3||P===4)&&(P=k.stateNode.containerInfo,P===m||P.nodeType===8&&P.parentNode===m))return;k=k.return}for(;c!==null;){if(k=vs(c),k===null)return;if(P=k.tag,P===5||P===6){u=y=k;continue e}c=c.parentNode}}u=u.return}Sb(function(){var F=y,Z=Lg(a),H=[];e:{var V=ev.get(e);if(V!==void 0){var pe=Ug,de=e;switch(e){case"keypress":if(Rd(a)===0)break e;case"keydown":case"keyup":pe=a3;break;case"focusin":de="focus",pe=of;break;case"focusout":de="blur",pe=of;break;case"beforeblur":case"afterblur":pe=of;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=W5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=c3;break;case Kb:case Yb:case Jb:pe=Y5;break;case Qb:pe=p3;break;case"scroll":pe=Z5;break;case"wheel":pe=h3;break;case"copy":case"cut":case"paste":pe=Q5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Mx}var ye=(r&4)!==0,Me=!ye&&e==="scroll",re=ye?V!==null?V+"Capture":null:V;ye=[];for(var K=F,ee;K!==null;){ee=K;var he=ee.stateNode;if(ee.tag===5&&he!==null&&(ee=he,re!==null&&(he=Vu(K,re),he!=null&&ye.push(Wu(K,he,ee)))),Me)break;K=K.return}0<ye.length&&(V=new pe(V,de,null,a,Z),H.push({event:V,listeners:ye}))}}if((r&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",V&&a!==Nf&&(de=a.relatedTarget||a.fromElement)&&(vs(de)||de[qo]))break e;if((pe||V)&&(V=Z.window===Z?Z:(V=Z.ownerDocument)?V.defaultView||V.parentWindow:window,pe?(de=a.relatedTarget||a.toElement,pe=F,de=de?vs(de):null,de!==null&&(Me=Ds(de),de!==Me||de.tag!==5&&de.tag!==6)&&(de=null)):(pe=null,de=F),pe!==de)){if(ye=Ix,he="onMouseLeave",re="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&(ye=Mx,he="onPointerLeave",re="onPointerEnter",K="pointer"),Me=pe==null?V:Dl(pe),ee=de==null?V:Dl(de),V=new ye(he,K+"leave",pe,a,Z),V.target=Me,V.relatedTarget=ee,he=null,vs(Z)===F&&(ye=new ye(re,K+"enter",de,a,Z),ye.target=ee,ye.relatedTarget=Me,he=ye),Me=he,pe&&de)t:{for(ye=pe,re=de,K=0,ee=ye;ee;ee=_l(ee))K++;for(ee=0,he=re;he;he=_l(he))ee++;for(;0<K-ee;)ye=_l(ye),K--;for(;0<ee-K;)re=_l(re),ee--;for(;K--;){if(ye===re||re!==null&&ye===re.alternate)break t;ye=_l(ye),re=_l(re)}ye=null}else ye=null;pe!==null&&jx(H,V,pe,ye,!1),de!==null&&Me!==null&&jx(H,Me,de,ye,!0)}}e:{if(V=F?Dl(F):window,pe=V.nodeName&&V.nodeName.toLowerCase(),pe==="select"||pe==="input"&&V.type==="file")var Te=v3;else if(Lx(V))if(qb)Te=E3;else{Te=w3;var Pe=_3}else(pe=V.nodeName)&&pe.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(Te=k3);if(Te&&(Te=Te(e,F))){Gb(H,Te,a,Z);break e}Pe&&Pe(e,V,F),e==="focusout"&&(Pe=V._wrapperState)&&Pe.controlled&&V.type==="number"&&Lf(V,"number",V.value)}switch(Pe=F?Dl(F):window,e){case"focusin":(Lx(Pe)||Pe.contentEditable==="true")&&(Ml=Pe,Zf=F,Au=null);break;case"focusout":Au=Zf=Ml=null;break;case"mousedown":Hf=!0;break;case"contextmenu":case"mouseup":case"dragend":Hf=!1,Nx(H,a,Z);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":Nx(H,a,Z)}var Le;if(jg)e:{switch(e){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Pl?jb(e,a)&&(Be="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Vb&&a.locale!=="ko"&&(Pl||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Pl&&(Le=Ub()):(za=Z,Ng="value"in za?za.value:za.textContent,Pl=!0)),Pe=Jd(F,Be),0<Pe.length&&(Be=new Px(Be,e,null,a,Z),H.push({event:Be,listeners:Pe}),Le?Be.data=Le:(Le=$b(a),Le!==null&&(Be.data=Le)))),(Le=f3?g3(e,a):x3(e,a))&&(F=Jd(F,"onBeforeInput"),0<F.length&&(Z=new Px("onBeforeInput","beforeinput",null,a,Z),H.push({event:Z,listeners:F}),Z.data=Le))}tv(H,r)})}function Wu(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Jd(e,r){for(var a=r+"Capture",u=[];e!==null;){var m=e,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Vu(e,a),y!=null&&u.unshift(Wu(e,y,m)),y=Vu(e,r),y!=null&&u.push(Wu(e,y,m))),e=e.return}return u}function _l(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jx(e,r,a,u,m){for(var y=r._reactName,k=[];a!==null&&a!==u;){var c=a,P=c.alternate,F=c.stateNode;if(P!==null&&P===u)break;c.tag===5&&F!==null&&(c=F,m?(P=Vu(a,y),P!=null&&k.unshift(Wu(a,P,c))):m||(P=Vu(a,y),P!=null&&k.push(Wu(a,P,c)))),a=a.return}k.length!==0&&e.push({event:r,listeners:k})}var M3=/\r\n?/g,A3=/\u0000|\uFFFD/g;function $x(e){return(typeof e=="string"?e:""+e).replace(M3,`
`).replace(A3,"")}function kd(e,r,a){if(r=$x(r),$x(e)!==r&&a)throw Error(Re(425))}function Qd(){}var Wf=null,Xf=null;function Kf(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,D3=typeof clearTimeout=="function"?clearTimeout:void 0,Gx=typeof Promise=="function"?Promise:void 0,L3=typeof queueMicrotask=="function"?queueMicrotask:typeof Gx!="undefined"?function(e){return Gx.resolve(null).then(e).catch(R3)}:Yf;function R3(e){setTimeout(function(){throw e})}function hf(e,r){var a=r,u=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(u===0){e.removeChild(m),Gu(r);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=m}while(a);Gu(r)}function Da(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function qx(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var uc=Math.random().toString(36).slice(2),uo="__reactFiber$"+uc,Xu="__reactProps$"+uc,qo="__reactContainer$"+uc,Jf="__reactEvents$"+uc,O3="__reactListeners$"+uc,B3="__reactHandles$"+uc;function vs(e){var r=e[uo];if(r)return r;for(var a=e.parentNode;a;){if(r=a[qo]||a[uo]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=qx(e);e!==null;){if(a=e[uo])return a;e=qx(e)}return r}e=a,a=e.parentNode}return null}function sp(e){return e=e[uo]||e[qo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Re(33))}function Sh(e){return e[Xu]||null}var Qf=[],Ll=-1;function $a(e){return{current:e}}function gr(e){0>Ll||(e.current=Qf[Ll],Qf[Ll]=null,Ll--)}function dr(e,r){Ll++,Qf[Ll]=e.current,e.current=r}var Ua={},zn=$a(Ua),Yn=$a(!1),Cs=Ua;function Wl(e,r){var a=e.type.contextTypes;if(!a)return Ua;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in a)m[y]=r[y];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=m),m}function Jn(e){return e=e.childContextTypes,e!=null}function eh(){gr(Yn),gr(zn)}function Zx(e,r,a){if(zn.current!==Ua)throw Error(Re(168));dr(zn,r),dr(Yn,a)}function nv(e,r,a){var u=e.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var m in u)if(!(m in r))throw Error(Re(108,_5(e)||"Unknown",m));return Cr({},a,u)}function th(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ua,Cs=zn.current,dr(zn,e),dr(Yn,Yn.current),!0}function Hx(e,r,a){var u=e.stateNode;if(!u)throw Error(Re(169));a?(e=nv(e,r,Cs),u.__reactInternalMemoizedMergedChildContext=e,gr(Yn),gr(zn),dr(zn,e)):gr(Yn),dr(Yn,a)}var No=null,Ch=!1,mf=!1;function iv(e){No===null?No=[e]:No.push(e)}function F3(e){Ch=!0,iv(e)}function Ga(){if(!mf&&No!==null){mf=!0;var e=0,r=rr;try{var a=No;for(rr=1;e<a.length;e++){var u=a[e];do u=u(!0);while(u!==null)}No=null,Ch=!1}catch(m){throw No!==null&&(No=No.slice(e+1)),Ib(Rg,Ga),m}finally{rr=r,mf=!1}}return null}var Rl=[],Ol=0,rh=null,nh=0,Ai=[],Di=0,Ts=null,Vo=1,jo="";function gs(e,r){Rl[Ol++]=nh,Rl[Ol++]=rh,rh=e,nh=r}function ov(e,r,a){Ai[Di++]=Vo,Ai[Di++]=jo,Ai[Di++]=Ts,Ts=e;var u=Vo;e=jo;var m=32-Qi(u)-1;u&=~(1<<m),a+=1;var y=32-Qi(r)+m;if(30<y){var k=m-m%5;y=(u&(1<<k)-1).toString(32),u>>=k,m-=k,Vo=1<<32-Qi(r)+m|a<<m|u,jo=y+e}else Vo=1<<y|a<<m|u,jo=e}function Gg(e){e.return!==null&&(gs(e,1),ov(e,1,0))}function qg(e){for(;e===rh;)rh=Rl[--Ol],Rl[Ol]=null,nh=Rl[--Ol],Rl[Ol]=null;for(;e===Ts;)Ts=Ai[--Di],Ai[Di]=null,jo=Ai[--Di],Ai[Di]=null,Vo=Ai[--Di],Ai[Di]=null}var mi=null,hi=null,vr=!1,Ji=null;function av(e,r){var a=Li(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function Wx(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,mi=e,hi=Da(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,mi=e,hi=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Ts!==null?{id:Vo,overflow:jo}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Li(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,mi=e,hi=null,!0):!1;default:return!1}}function eg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tg(e){if(vr){var r=hi;if(r){var a=r;if(!Wx(e,r)){if(eg(e))throw Error(Re(418));r=Da(a.nextSibling);var u=mi;r&&Wx(e,r)?av(u,a):(e.flags=e.flags&-4097|2,vr=!1,mi=e)}}else{if(eg(e))throw Error(Re(418));e.flags=e.flags&-4097|2,vr=!1,mi=e}}}function Xx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mi=e}function Ed(e){if(e!==mi)return!1;if(!vr)return Xx(e),vr=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Kf(e.type,e.memoizedProps)),r&&(r=hi)){if(eg(e))throw sv(),Error(Re(418));for(;r;)av(e,r),r=Da(r.nextSibling)}if(Xx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Re(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){hi=Da(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}hi=null}}else hi=mi?Da(e.stateNode.nextSibling):null;return!0}function sv(){for(var e=hi;e;)e=Da(e.nextSibling)}function Xl(){hi=mi=null,vr=!1}function Zg(e){Ji===null?Ji=[e]:Ji.push(e)}var N3=Xo.ReactCurrentBatchConfig;function Xi(e,r){if(e&&e.defaultProps){r=Cr({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}var ih=$a(null),oh=null,Bl=null,Hg=null;function Wg(){Hg=Bl=oh=null}function Xg(e){var r=ih.current;gr(ih),e._currentValue=r}function rg(e,r,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),e===a)break;e=e.return}}function Gl(e,r){oh=e,Hg=Bl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(Kn=!0),e.firstContext=null)}function Bi(e){var r=e._currentValue;if(Hg!==e)if(e={context:e,memoizedValue:r,next:null},Bl===null){if(oh===null)throw Error(Re(308));Bl=e,oh.dependencies={lanes:0,firstContext:e}}else Bl=Bl.next=e;return r}var _s=null;function Kg(e){_s===null?_s=[e]:_s.push(e)}function lv(e,r,a,u){var m=r.interleaved;return m===null?(a.next=a,Kg(r)):(a.next=m.next,m.next=a),r.interleaved=a,Zo(e,u)}function Zo(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Ea=!1;function Yg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cv(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $o(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function La(e,r,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(Ht&2)!==0){var m=u.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),u.pending=r,Zo(e,a)}return m=u.interleaved,m===null?(r.next=r,Kg(u)):(r.next=m.next,m.next=r),u.interleaved=r,Zo(e,a)}function Od(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var u=r.lanes;u&=e.pendingLanes,a|=u,r.lanes=a,Og(e,a)}}function Kx(e,r){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var m=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var k={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?m=y=k:y=y.next=k,a=a.next}while(a!==null);y===null?m=y=r:y=y.next=r}else m=y=r;a={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,effects:u.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function ah(e,r,a,u){var m=e.updateQueue;Ea=!1;var y=m.firstBaseUpdate,k=m.lastBaseUpdate,c=m.shared.pending;if(c!==null){m.shared.pending=null;var P=c,F=P.next;P.next=null,k===null?y=F:k.next=F,k=P;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,c=Z.lastBaseUpdate,c!==k&&(c===null?Z.firstBaseUpdate=F:c.next=F,Z.lastBaseUpdate=P))}if(y!==null){var H=m.baseState;k=0,Z=F=P=null,c=y;do{var V=c.lane,pe=c.eventTime;if((u&V)===V){Z!==null&&(Z=Z.next={eventTime:pe,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var de=e,ye=c;switch(V=r,pe=a,ye.tag){case 1:if(de=ye.payload,typeof de=="function"){H=de.call(pe,H,V);break e}H=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ye.payload,V=typeof de=="function"?de.call(pe,H,V):de,V==null)break e;H=Cr({},H,V);break e;case 2:Ea=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,V=m.effects,V===null?m.effects=[c]:V.push(c))}else pe={eventTime:pe,lane:V,tag:c.tag,payload:c.payload,callback:c.callback,next:null},Z===null?(F=Z=pe,P=H):Z=Z.next=pe,k|=V;if(c=c.next,c===null){if(c=m.shared.pending,c===null)break;V=c,c=V.next,V.next=null,m.lastBaseUpdate=V,m.shared.pending=null}}while(1);if(Z===null&&(P=H),m.baseState=P,m.firstBaseUpdate=F,m.lastBaseUpdate=Z,r=m.shared.interleaved,r!==null){m=r;do k|=m.lane,m=m.next;while(m!==r)}else y===null&&(m.shared.lanes=0);Is|=k,e.lanes=k,e.memoizedState=H}}function Yx(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var u=e[r],m=u.callback;if(m!==null){if(u.callback=null,u=a,typeof m!="function")throw Error(Re(191,m));m.call(u)}}}var uv=new lb.Component().refs;function ng(e,r,a,u){r=e.memoizedState,a=a(u,r),a=a==null?r:Cr({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Th={isMounted:function(e){return(e=e._reactInternals)?Ds(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var u=Un(),m=Oa(e),y=$o(u,m);y.payload=r,a!=null&&(y.callback=a),r=La(e,y,m),r!==null&&(eo(r,e,m,u),Od(r,e,m))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var u=Un(),m=Oa(e),y=$o(u,m);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=La(e,y,m),r!==null&&(eo(r,e,m,u),Od(r,e,m))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=Un(),u=Oa(e),m=$o(a,u);m.tag=2,r!=null&&(m.callback=r),r=La(e,m,u),r!==null&&(eo(r,e,u,a),Od(r,e,u))}};function Jx(e,r,a,u,m,y,k){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,y,k):r.prototype&&r.prototype.isPureReactComponent?!Zu(a,u)||!Zu(m,y):!0}function pv(e,r,a){var u=!1,m=Ua,y=r.contextType;return typeof y=="object"&&y!==null?y=Bi(y):(m=Jn(r)?Cs:zn.current,u=r.contextTypes,y=(u=u!=null)?Wl(e,m):Ua),r=new r(a,y),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Th,e.stateNode=r,r._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=y),r}function Qx(e,r,a,u){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==e&&Th.enqueueReplaceState(r,r.state,null)}function ig(e,r,a,u){var m=e.stateNode;m.props=a,m.state=e.memoizedState,m.refs=uv,Yg(e);var y=r.contextType;typeof y=="object"&&y!==null?m.context=Bi(y):(y=Jn(r)?Cs:zn.current,m.context=Wl(e,y)),m.state=e.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(ng(e,r,y,a),m.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(r=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),r!==m.state&&Th.enqueueReplaceState(m,m.state,null),ah(e,a,m,u),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308)}function xu(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Re(309));var u=a.stateNode}if(!u)throw Error(Re(147,e));var m=u,y=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===y?r.ref:(r=function(k){var c=m.refs;c===uv&&(c=m.refs={}),k===null?delete c[y]:c[y]=k},r._stringRef=y,r)}if(typeof e!="string")throw Error(Re(284));if(!a._owner)throw Error(Re(290,e))}return e}function Sd(e,r){throw e=Object.prototype.toString.call(r),Error(Re(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function ey(e){var r=e._init;return r(e._payload)}function dv(e){function r(re,K){if(e){var ee=re.deletions;ee===null?(re.deletions=[K],re.flags|=16):ee.push(K)}}function a(re,K){if(!e)return null;for(;K!==null;)r(re,K),K=K.sibling;return null}function u(re,K){for(re=new Map;K!==null;)K.key!==null?re.set(K.key,K):re.set(K.index,K),K=K.sibling;return re}function m(re,K){return re=Ba(re,K),re.index=0,re.sibling=null,re}function y(re,K,ee){return re.index=ee,e?(ee=re.alternate,ee!==null?(ee=ee.index,ee<K?(re.flags|=2,K):ee):(re.flags|=2,K)):(re.flags|=1048576,K)}function k(re){return e&&re.alternate===null&&(re.flags|=2),re}function c(re,K,ee,he){return K===null||K.tag!==6?(K=_f(ee,re.mode,he),K.return=re,K):(K=m(K,ee),K.return=re,K)}function P(re,K,ee,he){var Te=ee.type;return Te===Il?Z(re,K,ee.props.children,he,ee.key):K!==null&&(K.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ka&&ey(Te)===K.type)?(he=m(K,ee.props),he.ref=xu(re,K,ee),he.return=re,he):(he=jd(ee.type,ee.key,ee.props,null,re.mode,he),he.ref=xu(re,K,ee),he.return=re,he)}function F(re,K,ee,he){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=wf(ee,re.mode,he),K.return=re,K):(K=m(K,ee.children||[]),K.return=re,K)}function Z(re,K,ee,he,Te){return K===null||K.tag!==7?(K=Es(ee,re.mode,he,Te),K.return=re,K):(K=m(K,ee),K.return=re,K)}function H(re,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number")return K=_f(""+K,re.mode,ee),K.return=re,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case md:return ee=jd(K.type,K.key,K.props,null,re.mode,ee),ee.ref=xu(re,null,K),ee.return=re,ee;case zl:return K=wf(K,re.mode,ee),K.return=re,K;case ka:var he=K._init;return H(re,he(K._payload),ee)}if(Eu(K)||du(K))return K=Es(K,re.mode,ee,null),K.return=re,K;Sd(re,K)}return null}function V(re,K,ee,he){var Te=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Te!==null?null:c(re,K,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case md:return ee.key===Te?P(re,K,ee,he):null;case zl:return ee.key===Te?F(re,K,ee,he):null;case ka:return Te=ee._init,V(re,K,Te(ee._payload),he)}if(Eu(ee)||du(ee))return Te!==null?null:Z(re,K,ee,he,null);Sd(re,ee)}return null}function pe(re,K,ee,he,Te){if(typeof he=="string"&&he!==""||typeof he=="number")return re=re.get(ee)||null,c(K,re,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case md:return re=re.get(he.key===null?ee:he.key)||null,P(K,re,he,Te);case zl:return re=re.get(he.key===null?ee:he.key)||null,F(K,re,he,Te);case ka:var Pe=he._init;return pe(re,K,ee,Pe(he._payload),Te)}if(Eu(he)||du(he))return re=re.get(ee)||null,Z(K,re,he,Te,null);Sd(K,he)}return null}function de(re,K,ee,he){for(var Te=null,Pe=null,Le=K,Be=K=0,ht=null;Le!==null&&Be<ee.length;Be++){Le.index>Be?(ht=Le,Le=null):ht=Le.sibling;var ot=V(re,Le,ee[Be],he);if(ot===null){Le===null&&(Le=ht);break}e&&Le&&ot.alternate===null&&r(re,Le),K=y(ot,K,Be),Pe===null?Te=ot:Pe.sibling=ot,Pe=ot,Le=ht}if(Be===ee.length)return a(re,Le),vr&&gs(re,Be),Te;if(Le===null){for(;Be<ee.length;Be++)Le=H(re,ee[Be],he),Le!==null&&(K=y(Le,K,Be),Pe===null?Te=Le:Pe.sibling=Le,Pe=Le);return vr&&gs(re,Be),Te}for(Le=u(re,Le);Be<ee.length;Be++)ht=pe(Le,re,Be,ee[Be],he),ht!==null&&(e&&ht.alternate!==null&&Le.delete(ht.key===null?Be:ht.key),K=y(ht,K,Be),Pe===null?Te=ht:Pe.sibling=ht,Pe=ht);return e&&Le.forEach(function(St){return r(re,St)}),vr&&gs(re,Be),Te}function ye(re,K,ee,he){var Te=du(ee);if(typeof Te!="function")throw Error(Re(150));if(ee=Te.call(ee),ee==null)throw Error(Re(151));for(var Pe=Te=null,Le=K,Be=K=0,ht=null,ot=ee.next();Le!==null&&!ot.done;Be++,ot=ee.next()){Le.index>Be?(ht=Le,Le=null):ht=Le.sibling;var St=V(re,Le,ot.value,he);if(St===null){Le===null&&(Le=ht);break}e&&Le&&St.alternate===null&&r(re,Le),K=y(St,K,Be),Pe===null?Te=St:Pe.sibling=St,Pe=St,Le=ht}if(ot.done)return a(re,Le),vr&&gs(re,Be),Te;if(Le===null){for(;!ot.done;Be++,ot=ee.next())ot=H(re,ot.value,he),ot!==null&&(K=y(ot,K,Be),Pe===null?Te=ot:Pe.sibling=ot,Pe=ot);return vr&&gs(re,Be),Te}for(Le=u(re,Le);!ot.done;Be++,ot=ee.next())ot=pe(Le,re,Be,ot.value,he),ot!==null&&(e&&ot.alternate!==null&&Le.delete(ot.key===null?Be:ot.key),K=y(ot,K,Be),Pe===null?Te=ot:Pe.sibling=ot,Pe=ot);return e&&Le.forEach(function(qt){return r(re,qt)}),vr&&gs(re,Be),Te}function Me(re,K,ee,he){if(typeof ee=="object"&&ee!==null&&ee.type===Il&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case md:e:{for(var Te=ee.key,Pe=K;Pe!==null;){if(Pe.key===Te){if(Te=ee.type,Te===Il){if(Pe.tag===7){a(re,Pe.sibling),K=m(Pe,ee.props.children),K.return=re,re=K;break e}}else if(Pe.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ka&&ey(Te)===Pe.type){a(re,Pe.sibling),K=m(Pe,ee.props),K.ref=xu(re,Pe,ee),K.return=re,re=K;break e}a(re,Pe);break}else r(re,Pe);Pe=Pe.sibling}ee.type===Il?(K=Es(ee.props.children,re.mode,he,ee.key),K.return=re,re=K):(he=jd(ee.type,ee.key,ee.props,null,re.mode,he),he.ref=xu(re,K,ee),he.return=re,re=he)}return k(re);case zl:e:{for(Pe=ee.key;K!==null;){if(K.key===Pe)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){a(re,K.sibling),K=m(K,ee.children||[]),K.return=re,re=K;break e}else{a(re,K);break}else r(re,K);K=K.sibling}K=wf(ee,re.mode,he),K.return=re,re=K}return k(re);case ka:return Pe=ee._init,Me(re,K,Pe(ee._payload),he)}if(Eu(ee))return de(re,K,ee,he);if(du(ee))return ye(re,K,ee,he);Sd(re,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,K!==null&&K.tag===6?(a(re,K.sibling),K=m(K,ee),K.return=re,re=K):(a(re,K),K=_f(ee,re.mode,he),K.return=re,re=K),k(re)):a(re,K)}return Me}var Kl=dv(!0),hv=dv(!1),lp={},ho=$a(lp),Ku=$a(lp),Yu=$a(lp);function ws(e){if(e===lp)throw Error(Re(174));return e}function Jg(e,r){switch(dr(Yu,r),dr(Ku,e),dr(ho,lp),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Of(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Of(r,e)}gr(ho),dr(ho,r)}function Yl(){gr(ho),gr(Ku),gr(Yu)}function mv(e){ws(Yu.current);var r=ws(ho.current),a=Of(r,e.type);r!==a&&(dr(Ku,e),dr(ho,a))}function Qg(e){Ku.current===e&&(gr(ho),gr(Ku))}var Er=$a(0);function sh(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ff=[];function e0(){for(var e=0;e<ff.length;e++)ff[e]._workInProgressVersionPrimary=null;ff.length=0}var Bd=Xo.ReactCurrentDispatcher,gf=Xo.ReactCurrentBatchConfig,zs=0,Sr=null,tn=null,ln=null,lh=!1,Du=!1,Ju=0,U3=0;function Sn(){throw Error(Re(321))}function t0(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!to(e[a],r[a]))return!1;return!0}function r0(e,r,a,u,m,y){if(zs=y,Sr=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Bd.current=e===null||e.memoizedState===null?G3:q3,e=a(u,m),Du){y=0;do{if(Du=!1,Ju=0,25<=y)throw Error(Re(301));y+=1,ln=tn=null,r.updateQueue=null,Bd.current=Z3,e=a(u,m)}while(Du)}if(Bd.current=ch,r=tn!==null&&tn.next!==null,zs=0,ln=tn=Sr=null,lh=!1,r)throw Error(Re(300));return e}function n0(){var e=Ju!==0;return Ju=0,e}function co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Sr.memoizedState=ln=e:ln=ln.next=e,ln}function Fi(){if(tn===null){var e=Sr.alternate;e=e!==null?e.memoizedState:null}else e=tn.next;var r=ln===null?Sr.memoizedState:ln.next;if(r!==null)ln=r,tn=e;else{if(e===null)throw Error(Re(310));tn=e,e={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},ln===null?Sr.memoizedState=ln=e:ln=ln.next=e}return ln}function Qu(e,r){return typeof r=="function"?r(e):r}function xf(e){var r=Fi(),a=r.queue;if(a===null)throw Error(Re(311));a.lastRenderedReducer=e;var u=tn,m=u.baseQueue,y=a.pending;if(y!==null){if(m!==null){var k=m.next;m.next=y.next,y.next=k}u.baseQueue=m=y,a.pending=null}if(m!==null){y=m.next,u=u.baseState;var c=k=null,P=null,F=y;do{var Z=F.lane;if((zs&Z)===Z)P!==null&&(P=P.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:e(u,F.action);else{var H={lane:Z,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};P===null?(c=P=H,k=u):P=P.next=H,Sr.lanes|=Z,Is|=Z}F=F.next}while(F!==null&&F!==y);P===null?k=u:P.next=c,to(u,r.memoizedState)||(Kn=!0),r.memoizedState=u,r.baseState=k,r.baseQueue=P,a.lastRenderedState=u}if(e=a.interleaved,e!==null){m=e;do y=m.lane,Sr.lanes|=y,Is|=y,m=m.next;while(m!==e)}else m===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function yf(e){var r=Fi(),a=r.queue;if(a===null)throw Error(Re(311));a.lastRenderedReducer=e;var u=a.dispatch,m=a.pending,y=r.memoizedState;if(m!==null){a.pending=null;var k=m=m.next;do y=e(y,k.action),k=k.next;while(k!==m);to(y,r.memoizedState)||(Kn=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),a.lastRenderedState=y}return[y,u]}function fv(){}function gv(e,r){var a=Sr,u=Fi(),m=r(),y=!to(u.memoizedState,m);if(y&&(u.memoizedState=m,Kn=!0),u=u.queue,i0(bv.bind(null,a,u,e),[e]),u.getSnapshot!==r||y||ln!==null&&ln.memoizedState.tag&1){if(a.flags|=2048,ep(9,yv.bind(null,a,u,m,r),void 0,null),cn===null)throw Error(Re(349));(zs&30)!==0||xv(a,r,m)}return m}function xv(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=Sr.updateQueue,r===null?(r={lastEffect:null,stores:null},Sr.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function yv(e,r,a,u){r.value=a,r.getSnapshot=u,vv(r)&&_v(e)}function bv(e,r,a){return a(function(){vv(r)&&_v(e)})}function vv(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!to(e,a)}catch{return!0}}function _v(e){var r=Zo(e,1);r!==null&&eo(r,e,1,-1)}function ty(e){var r=co();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:e},r.queue=e,e=e.dispatch=$3.bind(null,Sr,e),[r.memoizedState,e]}function ep(e,r,a,u){return e={tag:e,create:r,destroy:a,deps:u,next:null},r=Sr.updateQueue,r===null?(r={lastEffect:null,stores:null},Sr.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,r.lastEffect=e)),e}function wv(){return Fi().memoizedState}function Fd(e,r,a,u){var m=co();Sr.flags|=e,m.memoizedState=ep(1|r,a,void 0,u===void 0?null:u)}function zh(e,r,a,u){var m=Fi();u=u===void 0?null:u;var y=void 0;if(tn!==null){var k=tn.memoizedState;if(y=k.destroy,u!==null&&t0(u,k.deps)){m.memoizedState=ep(r,a,y,u);return}}Sr.flags|=e,m.memoizedState=ep(1|r,a,y,u)}function ry(e,r){return Fd(8390656,8,e,r)}function i0(e,r){return zh(2048,8,e,r)}function kv(e,r){return zh(4,2,e,r)}function Ev(e,r){return zh(4,4,e,r)}function Sv(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Cv(e,r,a){return a=a!=null?a.concat([e]):null,zh(4,4,Sv.bind(null,r,e),a)}function o0(){}function Tv(e,r){var a=Fi();r=r===void 0?null:r;var u=a.memoizedState;return u!==null&&r!==null&&t0(r,u[1])?u[0]:(a.memoizedState=[e,r],e)}function zv(e,r){var a=Fi();r=r===void 0?null:r;var u=a.memoizedState;return u!==null&&r!==null&&t0(r,u[1])?u[0]:(e=e(),a.memoizedState=[e,r],e)}function Iv(e,r,a){return(zs&21)===0?(e.baseState&&(e.baseState=!1,Kn=!0),e.memoizedState=a):(to(a,r)||(a=Ab(),Sr.lanes|=a,Is|=a,e.baseState=!0),r)}function V3(e,r){var a=rr;rr=a!==0&&4>a?a:4,e(!0);var u=gf.transition;gf.transition={};try{e(!1),r()}finally{rr=a,gf.transition=u}}function Pv(){return Fi().memoizedState}function j3(e,r,a){var u=Oa(e);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},Mv(e))Av(r,a);else if(a=lv(e,r,a,u),a!==null){var m=Un();eo(a,e,u,m),Dv(a,r,u)}}function $3(e,r,a){var u=Oa(e),m={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mv(e))Av(r,m);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var k=r.lastRenderedState,c=y(k,a);if(m.hasEagerState=!0,m.eagerState=c,to(c,k)){var P=r.interleaved;P===null?(m.next=m,Kg(r)):(m.next=P.next,P.next=m),r.interleaved=m;return}}catch{}finally{}a=lv(e,r,m,u),a!==null&&(m=Un(),eo(a,e,u,m),Dv(a,r,u))}}function Mv(e){var r=e.alternate;return e===Sr||r!==null&&r===Sr}function Av(e,r){Du=lh=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function Dv(e,r,a){if((a&4194240)!==0){var u=r.lanes;u&=e.pendingLanes,a|=u,r.lanes=a,Og(e,a)}}var ch={readContext:Bi,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},G3={readContext:Bi,useCallback:function(e,r){return co().memoizedState=[e,r===void 0?null:r],e},useContext:Bi,useEffect:ry,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,Fd(4194308,4,Sv.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Fd(4194308,4,e,r)},useInsertionEffect:function(e,r){return Fd(4,2,e,r)},useMemo:function(e,r){var a=co();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var u=co();return r=a!==void 0?a(r):r,u.memoizedState=u.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},u.queue=e,e=e.dispatch=j3.bind(null,Sr,e),[u.memoizedState,e]},useRef:function(e){var r=co();return e={current:e},r.memoizedState=e},useState:ty,useDebugValue:o0,useDeferredValue:function(e){return co().memoizedState=e},useTransition:function(){var e=ty(!1),r=e[0];return e=V3.bind(null,e[1]),co().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var u=Sr,m=co();if(vr){if(a===void 0)throw Error(Re(407));a=a()}else{if(a=r(),cn===null)throw Error(Re(349));(zs&30)!==0||xv(u,r,a)}m.memoizedState=a;var y={value:a,getSnapshot:r};return m.queue=y,ry(bv.bind(null,u,y,e),[e]),u.flags|=2048,ep(9,yv.bind(null,u,y,a,r),void 0,null),a},useId:function(){var e=co(),r=cn.identifierPrefix;if(vr){var a=jo,u=Vo;a=(u&~(1<<32-Qi(u)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ju++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=U3++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},q3={readContext:Bi,useCallback:Tv,useContext:Bi,useEffect:i0,useImperativeHandle:Cv,useInsertionEffect:kv,useLayoutEffect:Ev,useMemo:zv,useReducer:xf,useRef:wv,useState:function(){return xf(Qu)},useDebugValue:o0,useDeferredValue:function(e){var r=Fi();return Iv(r,tn.memoizedState,e)},useTransition:function(){var e=xf(Qu)[0],r=Fi().memoizedState;return[e,r]},useMutableSource:fv,useSyncExternalStore:gv,useId:Pv,unstable_isNewReconciler:!1},Z3={readContext:Bi,useCallback:Tv,useContext:Bi,useEffect:i0,useImperativeHandle:Cv,useInsertionEffect:kv,useLayoutEffect:Ev,useMemo:zv,useReducer:yf,useRef:wv,useState:function(){return yf(Qu)},useDebugValue:o0,useDeferredValue:function(e){var r=Fi();return tn===null?r.memoizedState=e:Iv(r,tn.memoizedState,e)},useTransition:function(){var e=yf(Qu)[0],r=Fi().memoizedState;return[e,r]},useMutableSource:fv,useSyncExternalStore:gv,useId:Pv,unstable_isNewReconciler:!1};function Jl(e,r){try{var a="",u=r;do a+=v5(u),u=u.return;while(u);var m=a}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:e,source:r,stack:m,digest:null}}function bf(e,r,a){return{value:e,source:null,stack:a!=null?a:null,digest:r!=null?r:null}}function og(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var H3=typeof WeakMap=="function"?WeakMap:Map;function Lv(e,r,a){a=$o(-1,a),a.tag=3,a.payload={element:null};var u=r.value;return a.callback=function(){ph||(ph=!0,fg=u),og(e,r)},a}function Rv(e,r,a){a=$o(-1,a),a.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var m=r.value;a.payload=function(){return u(m)},a.callback=function(){og(e,r)}}var y=e.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){og(e,r),typeof u!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var k=r.stack;this.componentDidCatch(r.value,{componentStack:k!==null?k:""})}),a}function ny(e,r,a){var u=e.pingCache;if(u===null){u=e.pingCache=new H3;var m=new Set;u.set(r,m)}else m=u.get(r),m===void 0&&(m=new Set,u.set(r,m));m.has(a)||(m.add(a),e=s4.bind(null,e,r,a),r.then(e,e))}function iy(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function oy(e,r,a,u,m){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=$o(-1,1),r.tag=2,La(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=m,e)}var W3=Xo.ReactCurrentOwner,Kn=!1;function Nn(e,r,a,u){r.child=e===null?hv(r,null,a,u):Kl(r,e.child,a,u)}function ay(e,r,a,u,m){a=a.render;var y=r.ref;return Gl(r,m),u=r0(e,r,a,u,y,m),a=n0(),e!==null&&!Kn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~m,Ho(e,r,m)):(vr&&a&&Gg(r),r.flags|=1,Nn(e,r,u,m),r.child)}function sy(e,r,a,u,m){if(e===null){var y=a.type;return typeof y=="function"&&!h0(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=y,Ov(e,r,y,u,m)):(e=jd(a.type,null,u,r,r.mode,m),e.ref=r.ref,e.return=r,r.child=e)}if(y=e.child,(e.lanes&m)===0){var k=y.memoizedProps;if(a=a.compare,a=a!==null?a:Zu,a(k,u)&&e.ref===r.ref)return Ho(e,r,m)}return r.flags|=1,e=Ba(y,u),e.ref=r.ref,e.return=r,r.child=e}function Ov(e,r,a,u,m){if(e!==null){var y=e.memoizedProps;if(Zu(y,u)&&e.ref===r.ref)if(Kn=!1,r.pendingProps=u=y,(e.lanes&m)!==0)(e.flags&131072)!==0&&(Kn=!0);else return r.lanes=e.lanes,Ho(e,r,m)}return ag(e,r,a,u,m)}function Bv(e,r,a){var u=r.pendingProps,m=u.children,y=e!==null?e.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},dr(Nl,di),di|=a;else{if((a&1073741824)===0)return e=y!==null?y.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,dr(Nl,di),di|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=y!==null?y.baseLanes:a,dr(Nl,di),di|=u}else y!==null?(u=y.baseLanes|a,r.memoizedState=null):u=a,dr(Nl,di),di|=u;return Nn(e,r,m,a),r.child}function Fv(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function ag(e,r,a,u,m){var y=Jn(a)?Cs:zn.current;return y=Wl(r,y),Gl(r,m),a=r0(e,r,a,u,y,m),u=n0(),e!==null&&!Kn?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~m,Ho(e,r,m)):(vr&&u&&Gg(r),r.flags|=1,Nn(e,r,a,m),r.child)}function ly(e,r,a,u,m){if(Jn(a)){var y=!0;th(r)}else y=!1;if(Gl(r,m),r.stateNode===null)Nd(e,r),pv(r,a,u),ig(r,a,u,m),u=!0;else if(e===null){var k=r.stateNode,c=r.memoizedProps;k.props=c;var P=k.context,F=a.contextType;typeof F=="object"&&F!==null?F=Bi(F):(F=Jn(a)?Cs:zn.current,F=Wl(r,F));var Z=a.getDerivedStateFromProps,H=typeof Z=="function"||typeof k.getSnapshotBeforeUpdate=="function";H||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(c!==u||P!==F)&&Qx(r,k,u,F),Ea=!1;var V=r.memoizedState;k.state=V,ah(r,u,k,m),P=r.memoizedState,c!==u||V!==P||Yn.current||Ea?(typeof Z=="function"&&(ng(r,a,Z,u),P=r.memoizedState),(c=Ea||Jx(r,a,c,u,V,P,F))?(H||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(r.flags|=4194308)):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=P),k.props=u,k.state=P,k.context=F,u=c):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{k=r.stateNode,cv(e,r),c=r.memoizedProps,F=r.type===r.elementType?c:Xi(r.type,c),k.props=F,H=r.pendingProps,V=k.context,P=a.contextType,typeof P=="object"&&P!==null?P=Bi(P):(P=Jn(a)?Cs:zn.current,P=Wl(r,P));var pe=a.getDerivedStateFromProps;(Z=typeof pe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(c!==H||V!==P)&&Qx(r,k,u,P),Ea=!1,V=r.memoizedState,k.state=V,ah(r,u,k,m);var de=r.memoizedState;c!==H||V!==de||Yn.current||Ea?(typeof pe=="function"&&(ng(r,a,pe,u),de=r.memoizedState),(F=Ea||Jx(r,a,F,u,V,de,P)||!1)?(Z||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(u,de,P),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(u,de,P)),typeof k.componentDidUpdate=="function"&&(r.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof k.componentDidUpdate!="function"||c===e.memoizedProps&&V===e.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&V===e.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=de),k.props=u,k.state=de,k.context=P,u=F):(typeof k.componentDidUpdate!="function"||c===e.memoizedProps&&V===e.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&V===e.memoizedState||(r.flags|=1024),u=!1)}return sg(e,r,a,u,y,m)}function sg(e,r,a,u,m,y){Fv(e,r);var k=(r.flags&128)!==0;if(!u&&!k)return m&&Hx(r,a,!1),Ho(e,r,y);u=r.stateNode,W3.current=r;var c=k&&typeof a.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,e!==null&&k?(r.child=Kl(r,e.child,null,y),r.child=Kl(r,null,c,y)):Nn(e,r,c,y),r.memoizedState=u.state,m&&Hx(r,a,!0),r.child}function Nv(e){var r=e.stateNode;r.pendingContext?Zx(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Zx(e,r.context,!1),Jg(e,r.containerInfo)}function cy(e,r,a,u,m){return Xl(),Zg(m),r.flags|=256,Nn(e,r,a,u),r.child}var lg={dehydrated:null,treeContext:null,retryLane:0};function cg(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uv(e,r,a){var u=r.pendingProps,m=Er.current,y=!1,k=(r.flags&128)!==0,c;if((c=k)||(c=e!==null&&e.memoizedState===null?!1:(m&2)!==0),c?(y=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(m|=1),dr(Er,m&1),e===null)return tg(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(k=u.children,e=u.fallback,y?(u=r.mode,y=r.child,k={mode:"hidden",children:k},(u&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=Mh(k,u,0,null),e=Es(e,u,a,null),y.return=r,e.return=r,y.sibling=e,r.child=y,r.child.memoizedState=cg(a),r.memoizedState=lg,e):a0(r,k));if(m=e.memoizedState,m!==null&&(c=m.dehydrated,c!==null))return X3(e,r,k,u,c,m,a);if(y){y=u.fallback,k=r.mode,m=e.child,c=m.sibling;var P={mode:"hidden",children:u.children};return(k&1)===0&&r.child!==m?(u=r.child,u.childLanes=0,u.pendingProps=P,r.deletions=null):(u=Ba(m,P),u.subtreeFlags=m.subtreeFlags&14680064),c!==null?y=Ba(c,y):(y=Es(y,k,a,null),y.flags|=2),y.return=r,u.return=r,u.sibling=y,r.child=u,u=y,y=r.child,k=e.child.memoizedState,k=k===null?cg(a):{baseLanes:k.baseLanes|a,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=e.childLanes&~a,r.memoizedState=lg,u}return y=e.child,e=y.sibling,u=Ba(y,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=a),u.return=r,u.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=u,r.memoizedState=null,u}function a0(e,r){return r=Mh({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Cd(e,r,a,u){return u!==null&&Zg(u),Kl(r,e.child,null,a),e=a0(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function X3(e,r,a,u,m,y,k){if(a)return r.flags&256?(r.flags&=-257,u=bf(Error(Re(422))),Cd(e,r,k,u)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(y=u.fallback,m=r.mode,u=Mh({mode:"visible",children:u.children},m,0,null),y=Es(y,m,k,null),y.flags|=2,u.return=r,y.return=r,u.sibling=y,r.child=u,(r.mode&1)!==0&&Kl(r,e.child,null,k),r.child.memoizedState=cg(k),r.memoizedState=lg,y);if((r.mode&1)===0)return Cd(e,r,k,null);if(m.data==="$!"){if(u=m.nextSibling&&m.nextSibling.dataset,u)var c=u.dgst;return u=c,y=Error(Re(419)),u=bf(y,u,void 0),Cd(e,r,k,u)}if(c=(k&e.childLanes)!==0,Kn||c){if(u=cn,u!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(u.suspendedLanes|k))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Zo(e,m),eo(u,e,m,-1))}return d0(),u=bf(Error(Re(421))),Cd(e,r,k,u)}return m.data==="$?"?(r.flags|=128,r.child=e.child,r=l4.bind(null,e),m._reactRetry=r,null):(e=y.treeContext,hi=Da(m.nextSibling),mi=r,vr=!0,Ji=null,e!==null&&(Ai[Di++]=Vo,Ai[Di++]=jo,Ai[Di++]=Ts,Vo=e.id,jo=e.overflow,Ts=r),r=a0(r,u.children),r.flags|=4096,r)}function uy(e,r,a){e.lanes|=r;var u=e.alternate;u!==null&&(u.lanes|=r),rg(e.return,r,a)}function vf(e,r,a,u,m){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:m}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=a,y.tailMode=m)}function Vv(e,r,a){var u=r.pendingProps,m=u.revealOrder,y=u.tail;if(Nn(e,r,u.children,a),u=Er.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uy(e,a,r);else if(e.tag===19)uy(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(dr(Er,u),(r.mode&1)===0)r.memoizedState=null;else switch(m){case"forwards":for(a=r.child,m=null;a!==null;)e=a.alternate,e!==null&&sh(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=r.child,r.child=null):(m=a.sibling,a.sibling=null),vf(r,!1,m,a,y);break;case"backwards":for(a=null,m=r.child,r.child=null;m!==null;){if(e=m.alternate,e!==null&&sh(e)===null){r.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}vf(r,!0,a,null,y);break;case"together":vf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Nd(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Ho(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Is|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(Re(153));if(r.child!==null){for(e=r.child,a=Ba(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=Ba(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function K3(e,r,a){switch(r.tag){case 3:Nv(r),Xl();break;case 5:mv(r);break;case 1:Jn(r.type)&&th(r);break;case 4:Jg(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,m=r.memoizedProps.value;dr(ih,u._currentValue),u._currentValue=m;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(dr(Er,Er.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Uv(e,r,a):(dr(Er,Er.current&1),e=Ho(e,r,a),e!==null?e.sibling:null);dr(Er,Er.current&1);break;case 19:if(u=(a&r.childLanes)!==0,(e.flags&128)!==0){if(u)return Vv(e,r,a);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),dr(Er,Er.current),u)break;return null;case 22:case 23:return r.lanes=0,Bv(e,r,a)}return Ho(e,r,a)}var jv,ug,$v,Gv;jv=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};ug=function(){};$v=function(e,r,a,u){var m=e.memoizedProps;if(m!==u){e=r.stateNode,ws(ho.current);var y=null;switch(a){case"input":m=Af(e,m),u=Af(e,u),y=[];break;case"select":m=Cr({},m,{value:void 0}),u=Cr({},u,{value:void 0}),y=[];break;case"textarea":m=Rf(e,m),u=Rf(e,u),y=[];break;default:typeof m.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Qd)}Bf(a,u);var k;a=null;for(F in m)if(!u.hasOwnProperty(F)&&m.hasOwnProperty(F)&&m[F]!=null)if(F==="style"){var c=m[F];for(k in c)c.hasOwnProperty(k)&&(a||(a={}),a[k]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Nu.hasOwnProperty(F)?y||(y=[]):(y=y||[]).push(F,null));for(F in u){var P=u[F];if(c=m!=null?m[F]:void 0,u.hasOwnProperty(F)&&P!==c&&(P!=null||c!=null))if(F==="style")if(c){for(k in c)!c.hasOwnProperty(k)||P&&P.hasOwnProperty(k)||(a||(a={}),a[k]="");for(k in P)P.hasOwnProperty(k)&&c[k]!==P[k]&&(a||(a={}),a[k]=P[k])}else a||(y||(y=[]),y.push(F,a)),a=P;else F==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,c=c?c.__html:void 0,P!=null&&c!==P&&(y=y||[]).push(F,P)):F==="children"?typeof P!="string"&&typeof P!="number"||(y=y||[]).push(F,""+P):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Nu.hasOwnProperty(F)?(P!=null&&F==="onScroll"&&fr("scroll",e),y||c===P||(y=[])):(y=y||[]).push(F,P))}a&&(y=y||[]).push("style",a);var F=y;(r.updateQueue=F)&&(r.flags|=4)}};Gv=function(e,r,a,u){a!==u&&(r.flags|=4)};function yu(e,r){if(!vr)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Cn(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(r)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags&14680064,u|=m.flags&14680064,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=u,e.childLanes=a,r}function Y3(e,r,a){var u=r.pendingProps;switch(qg(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(r),null;case 1:return Jn(r.type)&&eh(),Cn(r),null;case 3:return u=r.stateNode,Yl(),gr(Yn),gr(zn),e0(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(Ed(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ji!==null&&(yg(Ji),Ji=null))),ug(e,r),Cn(r),null;case 5:Qg(r);var m=ws(Yu.current);if(a=r.type,e!==null&&r.stateNode!=null)$v(e,r,a,u,m),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(Re(166));return Cn(r),null}if(e=ws(ho.current),Ed(r)){u=r.stateNode,a=r.type;var y=r.memoizedProps;switch(u[uo]=r,u[Xu]=y,e=(r.mode&1)!==0,a){case"dialog":fr("cancel",u),fr("close",u);break;case"iframe":case"object":case"embed":fr("load",u);break;case"video":case"audio":for(m=0;m<Cu.length;m++)fr(Cu[m],u);break;case"source":fr("error",u);break;case"img":case"image":case"link":fr("error",u),fr("load",u);break;case"details":fr("toggle",u);break;case"input":bx(u,y),fr("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!y.multiple},fr("invalid",u);break;case"textarea":_x(u,y),fr("invalid",u)}Bf(a,y),m=null;for(var k in y)if(y.hasOwnProperty(k)){var c=y[k];k==="children"?typeof c=="string"?u.textContent!==c&&(y.suppressHydrationWarning!==!0&&kd(u.textContent,c,e),m=["children",c]):typeof c=="number"&&u.textContent!==""+c&&(y.suppressHydrationWarning!==!0&&kd(u.textContent,c,e),m=["children",""+c]):Nu.hasOwnProperty(k)&&c!=null&&k==="onScroll"&&fr("scroll",u)}switch(a){case"input":fd(u),vx(u,y,!0);break;case"textarea":fd(u),wx(u);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(u.onclick=Qd)}u=m,r.updateQueue=u,u!==null&&(r.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xb(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=k.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=k.createElement(a,{is:u.is}):(e=k.createElement(a),a==="select"&&(k=e,u.multiple?k.multiple=!0:u.size&&(k.size=u.size))):e=k.createElementNS(e,a),e[uo]=r,e[Xu]=u,jv(e,r,!1,!1),r.stateNode=e;e:{switch(k=Ff(a,u),a){case"dialog":fr("cancel",e),fr("close",e),m=u;break;case"iframe":case"object":case"embed":fr("load",e),m=u;break;case"video":case"audio":for(m=0;m<Cu.length;m++)fr(Cu[m],e);m=u;break;case"source":fr("error",e),m=u;break;case"img":case"image":case"link":fr("error",e),fr("load",e),m=u;break;case"details":fr("toggle",e),m=u;break;case"input":bx(e,u),m=Af(e,u),fr("invalid",e);break;case"option":m=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},m=Cr({},u,{value:void 0}),fr("invalid",e);break;case"textarea":_x(e,u),m=Rf(e,u),fr("invalid",e);break;default:m=u}Bf(a,m),c=m;for(y in c)if(c.hasOwnProperty(y)){var P=c[y];y==="style"?vb(e,P):y==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&yb(e,P)):y==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Uu(e,P):typeof P=="number"&&Uu(e,""+P):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Nu.hasOwnProperty(y)?P!=null&&y==="onScroll"&&fr("scroll",e):P!=null&&Pg(e,y,P,k))}switch(a){case"input":fd(e),vx(e,u,!1);break;case"textarea":fd(e),wx(e);break;case"option":u.value!=null&&e.setAttribute("value",""+Na(u.value));break;case"select":e.multiple=!!u.multiple,y=u.value,y!=null?Ul(e,!!u.multiple,y,!1):u.defaultValue!=null&&Ul(e,!!u.multiple,u.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=Qd)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Cn(r),null;case 6:if(e&&r.stateNode!=null)Gv(e,r,e.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(Re(166));if(a=ws(Yu.current),ws(ho.current),Ed(r)){if(u=r.stateNode,a=r.memoizedProps,u[uo]=r,(y=u.nodeValue!==a)&&(e=mi,e!==null))switch(e.tag){case 3:kd(u.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&kd(u.nodeValue,a,(e.mode&1)!==0)}y&&(r.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[uo]=r,r.stateNode=u}return Cn(r),null;case 13:if(gr(Er),u=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vr&&hi!==null&&(r.mode&1)!==0&&(r.flags&128)===0)sv(),Xl(),r.flags|=98560,y=!1;else if(y=Ed(r),u!==null&&u.dehydrated!==null){if(e===null){if(!y)throw Error(Re(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(Re(317));y[uo]=r}else Xl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Cn(r),y=!1}else Ji!==null&&(yg(Ji),Ji=null),y=!0;if(!y)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Er.current&1)!==0?rn===0&&(rn=3):d0())),r.updateQueue!==null&&(r.flags|=4),Cn(r),null);case 4:return Yl(),ug(e,r),e===null&&Hu(r.stateNode.containerInfo),Cn(r),null;case 10:return Xg(r.type._context),Cn(r),null;case 17:return Jn(r.type)&&eh(),Cn(r),null;case 19:if(gr(Er),y=r.memoizedState,y===null)return Cn(r),null;if(u=(r.flags&128)!==0,k=y.rendering,k===null)if(u)yu(y,!1);else{if(rn!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(k=sh(e),k!==null){for(r.flags|=128,yu(y,!1),u=k.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=a,a=r.child;a!==null;)y=a,e=u,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=e,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,e=k.dependencies,y.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return dr(Er,Er.current&1|2),r.child}e=e.sibling}y.tail!==null&&$r()>Ql&&(r.flags|=128,u=!0,yu(y,!1),r.lanes=4194304)}else{if(!u)if(e=sh(k),e!==null){if(r.flags|=128,u=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),yu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!vr)return Cn(r),null}else 2*$r()-y.renderingStartTime>Ql&&a!==1073741824&&(r.flags|=128,u=!0,yu(y,!1),r.lanes=4194304);y.isBackwards?(k.sibling=r.child,r.child=k):(a=y.last,a!==null?a.sibling=k:r.child=k,y.last=k)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=$r(),r.sibling=null,a=Er.current,dr(Er,u?a&1|2:a&1),r):(Cn(r),null);case 22:case 23:return p0(),u=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(di&1073741824)!==0&&(Cn(r),r.subtreeFlags&6&&(r.flags|=8192)):Cn(r),null;case 24:return null;case 25:return null}throw Error(Re(156,r.tag))}function J3(e,r){switch(qg(r),r.tag){case 1:return Jn(r.type)&&eh(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Yl(),gr(Yn),gr(zn),e0(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return Qg(r),null;case 13:if(gr(Er),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(Re(340));Xl()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return gr(Er),null;case 4:return Yl(),null;case 10:return Xg(r.type._context),null;case 22:case 23:return p0(),null;case 24:return null;default:return null}}var Td=!1,Tn=!1,Q3=typeof WeakSet=="function"?WeakSet:Set,it=null;function Fl(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Rr(e,r,u)}else a.current=null}function pg(e,r,a){try{a()}catch(u){Rr(e,r,u)}}var py=!1;function e4(e,r){if(Wf=Kd,e=Wb(),$g(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var k=0,c=-1,P=-1,F=0,Z=0,H=e,V=null;t:for(;;){for(var pe;H!==a||m!==0&&H.nodeType!==3||(c=k+m),H!==y||u!==0&&H.nodeType!==3||(P=k+u),H.nodeType===3&&(k+=H.nodeValue.length),(pe=H.firstChild)!==null;)V=H,H=pe;for(;;){if(H===e)break t;if(V===a&&++F===m&&(c=k),V===y&&++Z===u&&(P=k),(pe=H.nextSibling)!==null)break;H=V,V=H.parentNode}H=pe}a=c===-1||P===-1?null:{start:c,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xf={focusedElem:e,selectionRange:a},Kd=!1,it=r;it!==null;)if(r=it,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,it=e;else for(;it!==null;){r=it;try{var de=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var ye=de.memoizedProps,Me=de.memoizedState,re=r.stateNode,K=re.getSnapshotBeforeUpdate(r.elementType===r.type?ye:Xi(r.type,ye),Me);re.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var ee=r.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(he){Rr(r,r.return,he)}if(e=r.sibling,e!==null){e.return=r.return,it=e;break}it=r.return}return de=py,py=!1,de}function Lu(e,r,a){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&e)===e){var y=m.destroy;m.destroy=void 0,y!==void 0&&pg(r,a,y)}m=m.next}while(m!==u)}}function Ih(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var u=a.create;a.destroy=u()}a=a.next}while(a!==r)}}function dg(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function qv(e){var r=e.alternate;r!==null&&(e.alternate=null,qv(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[uo],delete r[Xu],delete r[Jf],delete r[O3],delete r[B3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zv(e){return e.tag===5||e.tag===3||e.tag===4}function dy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hg(e,r,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Qd));else if(u!==4&&(e=e.child,e!==null))for(hg(e,r,a),e=e.sibling;e!==null;)hg(e,r,a),e=e.sibling}function mg(e,r,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(mg(e,r,a),e=e.sibling;e!==null;)mg(e,r,a),e=e.sibling}var xn=null,Ki=!1;function wa(e,r,a){for(a=a.child;a!==null;)Hv(e,r,a),a=a.sibling}function Hv(e,r,a){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount(_h,a)}catch{}switch(a.tag){case 5:Tn||Fl(a,r);case 6:var u=xn,m=Ki;xn=null,wa(e,r,a),xn=u,Ki=m,xn!==null&&(Ki?(e=xn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):xn.removeChild(a.stateNode));break;case 18:xn!==null&&(Ki?(e=xn,a=a.stateNode,e.nodeType===8?hf(e.parentNode,a):e.nodeType===1&&hf(e,a),Gu(e)):hf(xn,a.stateNode));break;case 4:u=xn,m=Ki,xn=a.stateNode.containerInfo,Ki=!0,wa(e,r,a),xn=u,Ki=m;break;case 0:case 11:case 14:case 15:if(!Tn&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){m=u=u.next;do{var y=m,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&pg(a,r,k),m=m.next}while(m!==u)}wa(e,r,a);break;case 1:if(!Tn&&(Fl(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(c){Rr(a,r,c)}wa(e,r,a);break;case 21:wa(e,r,a);break;case 22:a.mode&1?(Tn=(u=Tn)||a.memoizedState!==null,wa(e,r,a),Tn=u):wa(e,r,a);break;default:wa(e,r,a)}}function hy(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Q3),r.forEach(function(u){var m=c4.bind(null,e,u);a.has(u)||(a.add(u),u.then(m,m))})}}function Wi(e,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var m=a[u];try{var y=e,k=r,c=k;e:for(;c!==null;){switch(c.tag){case 5:xn=c.stateNode,Ki=!1;break e;case 3:xn=c.stateNode.containerInfo,Ki=!0;break e;case 4:xn=c.stateNode.containerInfo,Ki=!0;break e}c=c.return}if(xn===null)throw Error(Re(160));Hv(y,k,m),xn=null,Ki=!1;var P=m.alternate;P!==null&&(P.return=null),m.return=null}catch(F){Rr(m,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wv(r,e),r=r.sibling}function Wv(e,r){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wi(r,e),lo(e),u&4){try{Lu(3,e,e.return),Ih(3,e)}catch(ye){Rr(e,e.return,ye)}try{Lu(5,e,e.return)}catch(ye){Rr(e,e.return,ye)}}break;case 1:Wi(r,e),lo(e),u&512&&a!==null&&Fl(a,a.return);break;case 5:if(Wi(r,e),lo(e),u&512&&a!==null&&Fl(a,a.return),e.flags&32){var m=e.stateNode;try{Uu(m,"")}catch(ye){Rr(e,e.return,ye)}}if(u&4&&(m=e.stateNode,m!=null)){var y=e.memoizedProps,k=a!==null?a.memoizedProps:y,c=e.type,P=e.updateQueue;if(e.updateQueue=null,P!==null)try{c==="input"&&y.type==="radio"&&y.name!=null&&fb(m,y),Ff(c,k);var F=Ff(c,y);for(k=0;k<P.length;k+=2){var Z=P[k],H=P[k+1];Z==="style"?vb(m,H):Z==="dangerouslySetInnerHTML"?yb(m,H):Z==="children"?Uu(m,H):Pg(m,Z,H,F)}switch(c){case"input":Df(m,y);break;case"textarea":gb(m,y);break;case"select":var V=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var pe=y.value;pe!=null?Ul(m,!!y.multiple,pe,!1):V!==!!y.multiple&&(y.defaultValue!=null?Ul(m,!!y.multiple,y.defaultValue,!0):Ul(m,!!y.multiple,y.multiple?[]:"",!1))}m[Xu]=y}catch(ye){Rr(e,e.return,ye)}}break;case 6:if(Wi(r,e),lo(e),u&4){if(e.stateNode===null)throw Error(Re(162));m=e.stateNode,y=e.memoizedProps;try{m.nodeValue=y}catch(ye){Rr(e,e.return,ye)}}break;case 3:if(Wi(r,e),lo(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Gu(r.containerInfo)}catch(ye){Rr(e,e.return,ye)}break;case 4:Wi(r,e),lo(e);break;case 13:Wi(r,e),lo(e),m=e.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(c0=$r())),u&4&&hy(e);break;case 22:if(Z=a!==null&&a.memoizedState!==null,e.mode&1?(Tn=(F=Tn)||Z,Wi(r,e),Tn=F):Wi(r,e),lo(e),u&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!Z&&(e.mode&1)!==0)for(it=e,Z=e.child;Z!==null;){for(H=it=Z;it!==null;){switch(V=it,pe=V.child,V.tag){case 0:case 11:case 14:case 15:Lu(4,V,V.return);break;case 1:Fl(V,V.return);var de=V.stateNode;if(typeof de.componentWillUnmount=="function"){u=V,a=V.return;try{r=u,de.props=r.memoizedProps,de.state=r.memoizedState,de.componentWillUnmount()}catch(ye){Rr(u,a,ye)}}break;case 5:Fl(V,V.return);break;case 22:if(V.memoizedState!==null){fy(H);continue}}pe!==null?(pe.return=V,it=pe):fy(H)}Z=Z.sibling}e:for(Z=null,H=e;;){if(H.tag===5){if(Z===null){Z=H;try{m=H.stateNode,F?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(c=H.stateNode,P=H.memoizedProps.style,k=P!=null&&P.hasOwnProperty("display")?P.display:null,c.style.display=bb("display",k))}catch(ye){Rr(e,e.return,ye)}}}else if(H.tag===6){if(Z===null)try{H.stateNode.nodeValue=F?"":H.memoizedProps}catch(ye){Rr(e,e.return,ye)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;Z===H&&(Z=null),H=H.return}Z===H&&(Z=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:Wi(r,e),lo(e),u&4&&hy(e);break;case 21:break;default:Wi(r,e),lo(e)}}function lo(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(Zv(a)){var u=a;break e}a=a.return}throw Error(Re(160))}switch(u.tag){case 5:var m=u.stateNode;u.flags&32&&(Uu(m,""),u.flags&=-33);var y=dy(e);mg(e,y,m);break;case 3:case 4:var k=u.stateNode.containerInfo,c=dy(e);hg(e,c,k);break;default:throw Error(Re(161))}}catch(P){Rr(e,e.return,P)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function t4(e,r,a){it=e,Xv(e)}function Xv(e,r,a){for(var u=(e.mode&1)!==0;it!==null;){var m=it,y=m.child;if(m.tag===22&&u){var k=m.memoizedState!==null||Td;if(!k){var c=m.alternate,P=c!==null&&c.memoizedState!==null||Tn;c=Td;var F=Tn;if(Td=k,(Tn=P)&&!F)for(it=m;it!==null;)k=it,P=k.child,k.tag===22&&k.memoizedState!==null?gy(m):P!==null?(P.return=k,it=P):gy(m);for(;y!==null;)it=y,Xv(y),y=y.sibling;it=m,Td=c,Tn=F}my(e)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,it=y):my(e)}}function my(e){for(;it!==null;){var r=it;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Tn||Ih(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Tn)if(a===null)u.componentDidMount();else{var m=r.elementType===r.type?a.memoizedProps:Xi(r.type,a.memoizedProps);u.componentDidUpdate(m,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var y=r.updateQueue;y!==null&&Yx(r,y,u);break;case 3:var k=r.updateQueue;if(k!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Yx(r,k,a)}break;case 5:var c=r.stateNode;if(a===null&&r.flags&4){a=c;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var Z=F.memoizedState;if(Z!==null){var H=Z.dehydrated;H!==null&&Gu(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Tn||r.flags&512&&dg(r)}catch(V){Rr(r,r.return,V)}}if(r===e){it=null;break}if(a=r.sibling,a!==null){a.return=r.return,it=a;break}it=r.return}}function fy(e){for(;it!==null;){var r=it;if(r===e){it=null;break}var a=r.sibling;if(a!==null){a.return=r.return,it=a;break}it=r.return}}function gy(e){for(;it!==null;){var r=it;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ih(4,r)}catch(P){Rr(r,a,P)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var m=r.return;try{u.componentDidMount()}catch(P){Rr(r,m,P)}}var y=r.return;try{dg(r)}catch(P){Rr(r,y,P)}break;case 5:var k=r.return;try{dg(r)}catch(P){Rr(r,k,P)}}}catch(P){Rr(r,r.return,P)}if(r===e){it=null;break}var c=r.sibling;if(c!==null){c.return=r.return,it=c;break}it=r.return}}var r4=Math.ceil,uh=Xo.ReactCurrentDispatcher,s0=Xo.ReactCurrentOwner,Ri=Xo.ReactCurrentBatchConfig,Ht=0,cn=null,Wr=null,yn=0,di=0,Nl=$a(0),rn=0,tp=null,Is=0,Ph=0,l0=0,Ru=null,Xn=null,c0=0,Ql=1/0,Fo=null,ph=!1,fg=null,Ra=null,zd=!1,Ia=null,dh=0,Ou=0,gg=null,Ud=-1,Vd=0;function Un(){return(Ht&6)!==0?$r():Ud!==-1?Ud:Ud=$r()}function Oa(e){return(e.mode&1)===0?1:(Ht&2)!==0&&yn!==0?yn&-yn:N3.transition!==null?(Vd===0&&(Vd=Ab()),Vd):(e=rr,e!==0||(e=window.event,e=e===void 0?16:Nb(e.type)),e)}function eo(e,r,a,u){if(50<Ou)throw Ou=0,gg=null,Error(Re(185));op(e,a,u),((Ht&2)===0||e!==cn)&&(e===cn&&((Ht&2)===0&&(Ph|=a),rn===4&&Ca(e,yn)),Qn(e,u),a===1&&Ht===0&&(r.mode&1)===0&&(Ql=$r()+500,Ch&&Ga()))}function Qn(e,r){var a=e.callbackNode;N5(e,r);var u=Xd(e,e===cn?yn:0);if(u===0)a!==null&&Sx(a),e.callbackNode=null,e.callbackPriority=0;else if(r=u&-u,e.callbackPriority!==r){if(a!=null&&Sx(a),r===1)e.tag===0?F3(xy.bind(null,e)):iv(xy.bind(null,e)),L3(function(){(Ht&6)===0&&Ga()}),a=null;else{switch(Db(u)){case 1:a=Rg;break;case 4:a=Pb;break;case 16:a=Wd;break;case 536870912:a=Mb;break;default:a=Wd}a=n_(a,Kv.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function Kv(e,r){if(Ud=-1,Vd=0,(Ht&6)!==0)throw Error(Re(327));var a=e.callbackNode;if(ql()&&e.callbackNode!==a)return null;var u=Xd(e,e===cn?yn:0);if(u===0)return null;if((u&30)!==0||(u&e.expiredLanes)!==0||r)r=hh(e,u);else{r=u;var m=Ht;Ht|=2;var y=Jv();(cn!==e||yn!==r)&&(Fo=null,Ql=$r()+500,ks(e,r));do try{o4();break}catch(c){Yv(e,c)}while(1);Wg(),uh.current=y,Ht=m,Wr!==null?r=0:(cn=null,yn=0,r=rn)}if(r!==0){if(r===2&&(m=$f(e),m!==0&&(u=m,r=xg(e,m))),r===1)throw a=tp,ks(e,0),Ca(e,u),Qn(e,$r()),a;if(r===6)Ca(e,u);else{if(m=e.current.alternate,(u&30)===0&&!n4(m)&&(r=hh(e,u),r===2&&(y=$f(e),y!==0&&(u=y,r=xg(e,y))),r===1))throw a=tp,ks(e,0),Ca(e,u),Qn(e,$r()),a;switch(e.finishedWork=m,e.finishedLanes=u,r){case 0:case 1:throw Error(Re(345));case 2:xs(e,Xn,Fo);break;case 3:if(Ca(e,u),(u&130023424)===u&&(r=c0+500-$r(),10<r)){if(Xd(e,0)!==0)break;if(m=e.suspendedLanes,(m&u)!==u){Un(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=Yf(xs.bind(null,e,Xn,Fo),r);break}xs(e,Xn,Fo);break;case 4:if(Ca(e,u),(u&4194240)===u)break;for(r=e.eventTimes,m=-1;0<u;){var k=31-Qi(u);y=1<<k,k=r[k],k>m&&(m=k),u&=~y}if(u=m,u=$r()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*r4(u/1960))-u,10<u){e.timeoutHandle=Yf(xs.bind(null,e,Xn,Fo),u);break}xs(e,Xn,Fo);break;case 5:xs(e,Xn,Fo);break;default:throw Error(Re(329))}}}return Qn(e,$r()),e.callbackNode===a?Kv.bind(null,e):null}function xg(e,r){var a=Ru;return e.current.memoizedState.isDehydrated&&(ks(e,r).flags|=256),e=hh(e,r),e!==2&&(r=Xn,Xn=a,r!==null&&yg(r)),e}function yg(e){Xn===null?Xn=e:Xn.push.apply(Xn,e)}function n4(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var m=a[u],y=m.getSnapshot;m=m.value;try{if(!to(y(),m))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ca(e,r){for(r&=~l0,r&=~Ph,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-Qi(r),u=1<<a;e[a]=-1,r&=~u}}function xy(e){if((Ht&6)!==0)throw Error(Re(327));ql();var r=Xd(e,0);if((r&1)===0)return Qn(e,$r()),null;var a=hh(e,r);if(e.tag!==0&&a===2){var u=$f(e);u!==0&&(r=u,a=xg(e,u))}if(a===1)throw a=tp,ks(e,0),Ca(e,r),Qn(e,$r()),a;if(a===6)throw Error(Re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,xs(e,Xn,Fo),Qn(e,$r()),null}function u0(e,r){var a=Ht;Ht|=1;try{return e(r)}finally{Ht=a,Ht===0&&(Ql=$r()+500,Ch&&Ga())}}function Ps(e){Ia!==null&&Ia.tag===0&&(Ht&6)===0&&ql();var r=Ht;Ht|=1;var a=Ri.transition,u=rr;try{if(Ri.transition=null,rr=1,e)return e()}finally{rr=u,Ri.transition=a,Ht=r,(Ht&6)===0&&Ga()}}function p0(){di=Nl.current,gr(Nl)}function ks(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,D3(a)),Wr!==null)for(a=Wr.return;a!==null;){var u=a;switch(qg(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&eh();break;case 3:Yl(),gr(Yn),gr(zn),e0();break;case 5:Qg(u);break;case 4:Yl();break;case 13:gr(Er);break;case 19:gr(Er);break;case 10:Xg(u.type._context);break;case 22:case 23:p0()}a=a.return}if(cn=e,Wr=e=Ba(e.current,null),yn=di=r,rn=0,tp=null,l0=Ph=Is=0,Xn=Ru=null,_s!==null){for(r=0;r<_s.length;r++)if(a=_s[r],u=a.interleaved,u!==null){a.interleaved=null;var m=u.next,y=a.pending;if(y!==null){var k=y.next;y.next=m,u.next=k}a.pending=u}_s=null}return e}function Yv(e,r){do{var a=Wr;try{if(Wg(),Bd.current=ch,lh){for(var u=Sr.memoizedState;u!==null;){var m=u.queue;m!==null&&(m.pending=null),u=u.next}lh=!1}if(zs=0,ln=tn=Sr=null,Du=!1,Ju=0,s0.current=null,a===null||a.return===null){rn=1,tp=r,Wr=null;break}e:{var y=e,k=a.return,c=a,P=r;if(r=yn,c.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var F=P,Z=c,H=Z.tag;if((Z.mode&1)===0&&(H===0||H===11||H===15)){var V=Z.alternate;V?(Z.updateQueue=V.updateQueue,Z.memoizedState=V.memoizedState,Z.lanes=V.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var pe=iy(k);if(pe!==null){pe.flags&=-257,oy(pe,k,c,y,r),pe.mode&1&&ny(y,F,r),r=pe,P=F;var de=r.updateQueue;if(de===null){var ye=new Set;ye.add(P),r.updateQueue=ye}else de.add(P);break e}else{if((r&1)===0){ny(y,F,r),d0();break e}P=Error(Re(426))}}else if(vr&&c.mode&1){var Me=iy(k);if(Me!==null){(Me.flags&65536)===0&&(Me.flags|=256),oy(Me,k,c,y,r),Zg(Jl(P,c));break e}}y=P=Jl(P,c),rn!==4&&(rn=2),Ru===null?Ru=[y]:Ru.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,r&=-r,y.lanes|=r;var re=Lv(y,P,r);Kx(y,re);break e;case 1:c=P;var K=y.type,ee=y.stateNode;if((y.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Ra===null||!Ra.has(ee)))){y.flags|=65536,r&=-r,y.lanes|=r;var he=Rv(y,c,r);Kx(y,he);break e}}y=y.return}while(y!==null)}e_(a)}catch(Te){r=Te,Wr===a&&a!==null&&(Wr=a=a.return);continue}break}while(1)}function Jv(){var e=uh.current;return uh.current=ch,e===null?ch:e}function d0(){(rn===0||rn===3||rn===2)&&(rn=4),cn===null||(Is&268435455)===0&&(Ph&268435455)===0||Ca(cn,yn)}function hh(e,r){var a=Ht;Ht|=2;var u=Jv();(cn!==e||yn!==r)&&(Fo=null,ks(e,r));do try{i4();break}catch(m){Yv(e,m)}while(1);if(Wg(),Ht=a,uh.current=u,Wr!==null)throw Error(Re(261));return cn=null,yn=0,rn}function i4(){for(;Wr!==null;)Qv(Wr)}function o4(){for(;Wr!==null&&!P5();)Qv(Wr)}function Qv(e){var r=r_(e.alternate,e,di);e.memoizedProps=e.pendingProps,r===null?e_(e):Wr=r,s0.current=null}function e_(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=Y3(a,r,di),a!==null){Wr=a;return}}else{if(a=J3(a,r),a!==null){a.flags&=32767,Wr=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rn=6,Wr=null;return}}if(r=r.sibling,r!==null){Wr=r;return}Wr=r=e}while(r!==null);rn===0&&(rn=5)}function xs(e,r,a){var u=rr,m=Ri.transition;try{Ri.transition=null,rr=1,a4(e,r,a,u)}finally{Ri.transition=m,rr=u}return null}function a4(e,r,a,u){do ql();while(Ia!==null);if((Ht&6)!==0)throw Error(Re(327));a=e.finishedWork;var m=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(Re(177));e.callbackNode=null,e.callbackPriority=0;var y=a.lanes|a.childLanes;if(U5(e,y),e===cn&&(Wr=cn=null,yn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||zd||(zd=!0,n_(Wd,function(){return ql(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=Ri.transition,Ri.transition=null;var k=rr;rr=1;var c=Ht;Ht|=4,s0.current=null,e4(e,a),Wv(a,e),C3(Xf),Kd=!!Wf,Xf=Wf=null,e.current=a,t4(a),M5(),Ht=c,rr=k,Ri.transition=y}else e.current=a;if(zd&&(zd=!1,Ia=e,dh=m),y=e.pendingLanes,y===0&&(Ra=null),L5(a.stateNode),Qn(e,$r()),r!==null)for(u=e.onRecoverableError,a=0;a<r.length;a++)m=r[a],u(m.value,{componentStack:m.stack,digest:m.digest});if(ph)throw ph=!1,e=fg,fg=null,e;return(dh&1)!==0&&e.tag!==0&&ql(),y=e.pendingLanes,(y&1)!==0?e===gg?Ou++:(Ou=0,gg=e):Ou=0,Ga(),null}function ql(){if(Ia!==null){var e=Db(dh),r=Ri.transition,a=rr;try{if(Ri.transition=null,rr=16>e?16:e,Ia===null)var u=!1;else{if(e=Ia,Ia=null,dh=0,(Ht&6)!==0)throw Error(Re(331));var m=Ht;for(Ht|=4,it=e.current;it!==null;){var y=it,k=y.child;if((it.flags&16)!==0){var c=y.deletions;if(c!==null){for(var P=0;P<c.length;P++){var F=c[P];for(it=F;it!==null;){var Z=it;switch(Z.tag){case 0:case 11:case 15:Lu(8,Z,y)}var H=Z.child;if(H!==null)H.return=Z,it=H;else for(;it!==null;){Z=it;var V=Z.sibling,pe=Z.return;if(qv(Z),Z===F){it=null;break}if(V!==null){V.return=pe,it=V;break}it=pe}}}var de=y.alternate;if(de!==null){var ye=de.child;if(ye!==null){de.child=null;do{var Me=ye.sibling;ye.sibling=null,ye=Me}while(ye!==null)}}it=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,it=k;else e:for(;it!==null;){if(y=it,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Lu(9,y,y.return)}var re=y.sibling;if(re!==null){re.return=y.return,it=re;break e}it=y.return}}var K=e.current;for(it=K;it!==null;){k=it;var ee=k.child;if((k.subtreeFlags&2064)!==0&&ee!==null)ee.return=k,it=ee;else e:for(k=K;it!==null;){if(c=it,(c.flags&2048)!==0)try{switch(c.tag){case 0:case 11:case 15:Ih(9,c)}}catch(Te){Rr(c,c.return,Te)}if(c===k){it=null;break e}var he=c.sibling;if(he!==null){he.return=c.return,it=he;break e}it=c.return}}if(Ht=m,Ga(),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot(_h,e)}catch{}u=!0}return u}finally{rr=a,Ri.transition=r}}return!1}function yy(e,r,a){r=Jl(a,r),r=Lv(e,r,1),e=La(e,r,1),r=Un(),e!==null&&(op(e,1,r),Qn(e,r))}function Rr(e,r,a){if(e.tag===3)yy(e,e,a);else for(;r!==null;){if(r.tag===3){yy(r,e,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ra===null||!Ra.has(u))){e=Jl(a,e),e=Rv(r,e,1),r=La(r,e,1),e=Un(),r!==null&&(op(r,1,e),Qn(r,e));break}}r=r.return}}function s4(e,r,a){var u=e.pingCache;u!==null&&u.delete(r),r=Un(),e.pingedLanes|=e.suspendedLanes&a,cn===e&&(yn&a)===a&&(rn===4||rn===3&&(yn&130023424)===yn&&500>$r()-c0?ks(e,0):l0|=a),Qn(e,r)}function t_(e,r){r===0&&((e.mode&1)===0?r=1:(r=yd,yd<<=1,(yd&130023424)===0&&(yd=4194304)));var a=Un();e=Zo(e,r),e!==null&&(op(e,r,a),Qn(e,a))}function l4(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),t_(e,a)}function c4(e,r){var a=0;switch(e.tag){case 13:var u=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(Re(314))}u!==null&&u.delete(r),t_(e,a)}var r_;r_=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||Yn.current)Kn=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return Kn=!1,K3(e,r,a);Kn=(e.flags&131072)!==0}else Kn=!1,vr&&(r.flags&1048576)!==0&&ov(r,nh,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;Nd(e,r),e=r.pendingProps;var m=Wl(r,zn.current);Gl(r,a),m=r0(null,r,u,e,m,a);var y=n0();return r.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Jn(u)?(y=!0,th(r)):y=!1,r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Yg(r),m.updater=Th,r.stateNode=m,m._reactInternals=r,ig(r,u,e,a),r=sg(null,r,u,!0,y,a)):(r.tag=0,vr&&y&&Gg(r),Nn(null,r,m,a),r=r.child),r;case 16:u=r.elementType;e:{switch(Nd(e,r),e=r.pendingProps,m=u._init,u=m(u._payload),r.type=u,m=r.tag=p4(u),e=Xi(u,e),m){case 0:r=ag(null,r,u,e,a);break e;case 1:r=ly(null,r,u,e,a);break e;case 11:r=ay(null,r,u,e,a);break e;case 14:r=sy(null,r,u,Xi(u.type,e),a);break e}throw Error(Re(306,u,""))}return r;case 0:return u=r.type,m=r.pendingProps,m=r.elementType===u?m:Xi(u,m),ag(e,r,u,m,a);case 1:return u=r.type,m=r.pendingProps,m=r.elementType===u?m:Xi(u,m),ly(e,r,u,m,a);case 3:e:{if(Nv(r),e===null)throw Error(Re(387));u=r.pendingProps,y=r.memoizedState,m=y.element,cv(e,r),ah(r,u,null,a);var k=r.memoizedState;if(u=k.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){m=Jl(Error(Re(423)),r),r=cy(e,r,u,a,m);break e}else if(u!==m){m=Jl(Error(Re(424)),r),r=cy(e,r,u,a,m);break e}else for(hi=Da(r.stateNode.containerInfo.firstChild),mi=r,vr=!0,Ji=null,a=hv(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xl(),u===m){r=Ho(e,r,a);break e}Nn(e,r,u,a)}r=r.child}return r;case 5:return mv(r),e===null&&tg(r),u=r.type,m=r.pendingProps,y=e!==null?e.memoizedProps:null,k=m.children,Kf(u,m)?k=null:y!==null&&Kf(u,y)&&(r.flags|=32),Fv(e,r),Nn(e,r,k,a),r.child;case 6:return e===null&&tg(r),null;case 13:return Uv(e,r,a);case 4:return Jg(r,r.stateNode.containerInfo),u=r.pendingProps,e===null?r.child=Kl(r,null,u,a):Nn(e,r,u,a),r.child;case 11:return u=r.type,m=r.pendingProps,m=r.elementType===u?m:Xi(u,m),ay(e,r,u,m,a);case 7:return Nn(e,r,r.pendingProps,a),r.child;case 8:return Nn(e,r,r.pendingProps.children,a),r.child;case 12:return Nn(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(u=r.type._context,m=r.pendingProps,y=r.memoizedProps,k=m.value,dr(ih,u._currentValue),u._currentValue=k,y!==null)if(to(y.value,k)){if(y.children===m.children&&!Yn.current){r=Ho(e,r,a);break e}}else for(y=r.child,y!==null&&(y.return=r);y!==null;){var c=y.dependencies;if(c!==null){k=y.child;for(var P=c.firstContext;P!==null;){if(P.context===u){if(y.tag===1){P=$o(-1,a&-a),P.tag=2;var F=y.updateQueue;if(F!==null){F=F.shared;var Z=F.pending;Z===null?P.next=P:(P.next=Z.next,Z.next=P),F.pending=P}}y.lanes|=a,P=y.alternate,P!==null&&(P.lanes|=a),rg(y.return,a,r),c.lanes|=a;break}P=P.next}}else if(y.tag===10)k=y.type===r.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(Re(341));k.lanes|=a,c=k.alternate,c!==null&&(c.lanes|=a),rg(k,a,r),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===r){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}Nn(e,r,m.children,a),r=r.child}return r;case 9:return m=r.type,u=r.pendingProps.children,Gl(r,a),m=Bi(m),u=u(m),r.flags|=1,Nn(e,r,u,a),r.child;case 14:return u=r.type,m=Xi(u,r.pendingProps),m=Xi(u.type,m),sy(e,r,u,m,a);case 15:return Ov(e,r,r.type,r.pendingProps,a);case 17:return u=r.type,m=r.pendingProps,m=r.elementType===u?m:Xi(u,m),Nd(e,r),r.tag=1,Jn(u)?(e=!0,th(r)):e=!1,Gl(r,a),pv(r,u,m),ig(r,u,m,a),sg(null,r,u,!0,e,a);case 19:return Vv(e,r,a);case 22:return Bv(e,r,a)}throw Error(Re(156,r.tag))};function n_(e,r){return Ib(e,r)}function u4(e,r,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(e,r,a,u){return new u4(e,r,a,u)}function h0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p4(e){if(typeof e=="function")return h0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ag)return 11;if(e===Dg)return 14}return 2}function Ba(e,r){var a=e.alternate;return a===null?(a=Li(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function jd(e,r,a,u,m,y){var k=2;if(u=e,typeof e=="function")h0(e)&&(k=1);else if(typeof e=="string")k=5;else e:switch(e){case Il:return Es(a.children,m,y,r);case Mg:k=8,m|=8;break;case zf:return e=Li(12,a,r,m|2),e.elementType=zf,e.lanes=y,e;case If:return e=Li(13,a,r,m),e.elementType=If,e.lanes=y,e;case Pf:return e=Li(19,a,r,m),e.elementType=Pf,e.lanes=y,e;case db:return Mh(a,m,y,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ub:k=10;break e;case pb:k=9;break e;case Ag:k=11;break e;case Dg:k=14;break e;case ka:k=16,u=null;break e}throw Error(Re(130,e==null?e:typeof e,""))}return r=Li(k,a,r,m),r.elementType=e,r.type=u,r.lanes=y,r}function Es(e,r,a,u){return e=Li(7,e,u,r),e.lanes=a,e}function Mh(e,r,a,u){return e=Li(22,e,u,r),e.elementType=db,e.lanes=a,e.stateNode={isHidden:!1},e}function _f(e,r,a){return e=Li(6,e,null,r),e.lanes=a,e}function wf(e,r,a){return r=Li(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function d4(e,r,a,u,m){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=u,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function m0(e,r,a,u,m,y,k,c,P){return e=new d4(e,r,a,c,P),r===1?(r=1,y===!0&&(r|=8)):r=0,y=Li(3,null,null,r),e.current=y,y.stateNode=e,y.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yg(y),e}function h4(e,r,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zl,key:u==null?null:""+u,children:e,containerInfo:r,implementation:a}}function i_(e){if(!e)return Ua;e=e._reactInternals;e:{if(Ds(e)!==e||e.tag!==1)throw Error(Re(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Jn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(Re(171))}if(e.tag===1){var a=e.type;if(Jn(a))return nv(e,a,r)}return r}function o_(e,r,a,u,m,y,k,c,P){return e=m0(a,u,!0,e,m,y,k,c,P),e.context=i_(null),a=e.current,u=Un(),m=Oa(a),y=$o(u,m),y.callback=r!=null?r:null,La(a,y,m),e.current.lanes=m,op(e,m,u),Qn(e,u),e}function Ah(e,r,a,u){var m=r.current,y=Un(),k=Oa(m);return a=i_(a),r.context===null?r.context=a:r.pendingContext=a,r=$o(y,k),r.payload={element:e},u=u===void 0?null:u,u!==null&&(r.callback=u),e=La(m,r,k),e!==null&&(eo(e,m,k,y),Od(e,m,k)),k}function mh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function by(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function f0(e,r){by(e,r),(e=e.alternate)&&by(e,r)}function m4(){return null}var a_=typeof reportError=="function"?reportError:function(e){console.error(e)};function g0(e){this._internalRoot=e}Dh.prototype.render=g0.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(Re(409));Ah(e,r,null,null)};Dh.prototype.unmount=g0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ps(function(){Ah(null,e,null,null)}),r[qo]=null}};function Dh(e){this._internalRoot=e}Dh.prototype.unstable_scheduleHydration=function(e){if(e){var r=Ob();e={blockedOn:null,target:e,priority:r};for(var a=0;a<Sa.length&&r!==0&&r<Sa[a].priority;a++);Sa.splice(a,0,e),a===0&&Fb(e)}};function x0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vy(){}function f4(e,r,a,u,m){if(m){if(typeof u=="function"){var y=u;u=function(){var F=mh(k);y.call(F)}}var k=o_(r,u,e,0,null,!1,!1,"",vy);return e._reactRootContainer=k,e[qo]=k.current,Hu(e.nodeType===8?e.parentNode:e),Ps(),k}for(;m=e.lastChild;)e.removeChild(m);if(typeof u=="function"){var c=u;u=function(){var F=mh(P);c.call(F)}}var P=m0(e,0,!1,null,null,!1,!1,"",vy);return e._reactRootContainer=P,e[qo]=P.current,Hu(e.nodeType===8?e.parentNode:e),Ps(function(){Ah(r,P,a,u)}),P}function Rh(e,r,a,u,m){var y=a._reactRootContainer;if(y){var k=y;if(typeof m=="function"){var c=m;m=function(){var P=mh(k);c.call(P)}}Ah(r,k,e,m)}else k=f4(a,r,e,m,u);return mh(k)}Lb=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=Su(r.pendingLanes);a!==0&&(Og(r,a|1),Qn(r,$r()),(Ht&6)===0&&(Ql=$r()+500,Ga()))}break;case 13:Ps(function(){var u=Zo(e,1);if(u!==null){var m=Un();eo(u,e,1,m)}}),f0(e,1)}};Bg=function(e){if(e.tag===13){var r=Zo(e,134217728);if(r!==null){var a=Un();eo(r,e,134217728,a)}f0(e,134217728)}};Rb=function(e){if(e.tag===13){var r=Oa(e),a=Zo(e,r);if(a!==null){var u=Un();eo(a,e,r,u)}f0(e,r)}};Ob=function(){return rr};Bb=function(e,r){var a=rr;try{return rr=e,r()}finally{rr=a}};Uf=function(e,r,a){switch(r){case"input":if(Df(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==e&&u.form===e.form){var m=Sh(u);if(!m)throw Error(Re(90));mb(u),Df(u,m)}}}break;case"textarea":gb(e,a);break;case"select":r=a.value,r!=null&&Ul(e,!!a.multiple,r,!1)}};kb=u0;Eb=Ps;var g4={usingClientEntryPoint:!1,Events:[sp,Dl,Sh,_b,wb,u0]},bu={findFiberByHostInstance:vs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},x4={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tb(e),e===null?null:e.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||m4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{_h=Id.inject(x4),po=Id}catch{}}gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g4;gi.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x0(r))throw Error(Re(200));return h4(e,r,null,a)};gi.createRoot=function(e,r){if(!x0(e))throw Error(Re(299));var a=!1,u="",m=a_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),r=m0(e,1,!1,null,null,a,!1,u,m),e[qo]=r.current,Hu(e.nodeType===8?e.parentNode:e),new g0(r)};gi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(Re(188)):(e=Object.keys(e).join(","),Error(Re(268,e)));return e=Tb(r),e=e===null?null:e.stateNode,e};gi.flushSync=function(e){return Ps(e)};gi.hydrate=function(e,r,a){if(!Lh(r))throw Error(Re(200));return Rh(null,e,r,!0,a)};gi.hydrateRoot=function(e,r,a){if(!x0(e))throw Error(Re(405));var u=a!=null&&a.hydratedSources||null,m=!1,y="",k=a_;if(a!=null&&(a.unstable_strictMode===!0&&(m=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(k=a.onRecoverableError)),r=o_(r,null,e,1,a!=null?a:null,m,!1,y,k),e[qo]=r.current,Hu(e),u)for(e=0;e<u.length;e++)a=u[e],m=a._getVersion,m=m(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,m]:r.mutableSourceEagerHydrationData.push(a,m);return new Dh(r)};gi.render=function(e,r,a){if(!Lh(r))throw Error(Re(200));return Rh(null,e,r,!1,a)};gi.unmountComponentAtNode=function(e){if(!Lh(e))throw Error(Re(40));return e._reactRootContainer?(Ps(function(){Rh(null,null,e,!1,function(){e._reactRootContainer=null,e[qo]=null})}),!0):!1};gi.unstable_batchedUpdates=u0;gi.unstable_renderSubtreeIntoContainer=function(e,r,a,u){if(!Lh(a))throw Error(Re(200));if(e==null||e._reactInternals===void 0)throw Error(Re(38));return Rh(e,r,a,!1,u)};gi.version="18.2.0-next-9e3b772b8-20220608";function s_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s_)}catch(e){console.error(e)}}s_(),lc.exports=gi;var Zl=lc.exports,_y=lc.exports;Cf.createRoot=_y.createRoot,Cf.hydrateRoot=_y.hydrateRoot;var l_={exports:{}},y4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",b4=y4,v4=b4;function c_(){}function u_(){}u_.resetWarningCache=c_;var _4=function(){function e(u,m,y,k,c,P){if(P!==v4){var F=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw F.name="Invariant Violation",F}}e.isRequired=e;function r(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:u_,resetWarningCache:c_};return a.PropTypes=a,a};l_.exports=_4();var w=l_.exports,p_={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var r={}.hasOwnProperty;function a(){for(var u=[],m=0;m<arguments.length;m++){var y=arguments[m];if(!!y){var k=typeof y;if(k==="string"||k==="number")u.push(y);else if(Array.isArray(y)){if(y.length){var c=a.apply(null,y);c&&u.push(c)}}else if(k==="object")if(y.toString===Object.prototype.toString)for(var P in y)r.call(y,P)&&y[P]&&u.push(P);else u.push(y.toString())}}return u.join(" ")}e.exports?(a.default=a,e.exports=a):window.classNames=a})()})(p_);var wt=p_.exports,d_=Ue.exports.createContext(),h_=Ue.exports.createContext();function w4(e){var r=e.children,a=Ue.exports.useState(null),u=a[0],m=a[1],y=Ue.exports.useRef(!1);Ue.exports.useEffect(function(){return function(){y.current=!0}},[]);var k=Ue.exports.useCallback(function(c){y.current||m(c)},[]);return Ue.exports.createElement(d_.Provider,{value:u},Ue.exports.createElement(h_.Provider,{value:k},r))}var m_=function(r){return Array.isArray(r)?r[0]:r},f_=function(r){if(typeof r=="function"){for(var a=arguments.length,u=new Array(a>1?a-1:0),m=1;m<a;m++)u[m-1]=arguments[m];return r.apply(void 0,u)}},bg=function(r,a){if(typeof r=="function")return f_(r,a);r!=null&&(r.current=a)},wy=function(r){return r.reduce(function(a,u){var m=u[0],y=u[1];return a[m]=y,a},{})},ky=typeof window!="undefined"&&window.document&&window.document.createElement?Ue.exports.useLayoutEffect:Ue.exports.useEffect,ei="top",Ni="bottom",Ui="right",ti="left",y0="auto",cp=[ei,Ni,Ui,ti],ec="start",rp="end",k4="clippingParents",g_="viewport",vu="popper",E4="reference",Ey=cp.reduce(function(e,r){return e.concat([r+"-"+ec,r+"-"+rp])},[]),x_=[].concat(cp,[y0]).reduce(function(e,r){return e.concat([r,r+"-"+ec,r+"-"+rp])},[]),S4="beforeRead",C4="read",T4="afterRead",z4="beforeMain",I4="main",P4="afterMain",M4="beforeWrite",A4="write",D4="afterWrite",L4=[S4,C4,T4,z4,I4,P4,M4,A4,D4];function fo(e){return e?(e.nodeName||"").toLowerCase():null}function ro(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var r=e.ownerDocument;return r&&r.defaultView||window}return e}function tc(e){var r=ro(e).Element;return e instanceof r||e instanceof Element}function Oi(e){var r=ro(e).HTMLElement;return e instanceof r||e instanceof HTMLElement}function b0(e){if(typeof ShadowRoot=="undefined")return!1;var r=ro(e).ShadowRoot;return e instanceof r||e instanceof ShadowRoot}function R4(e){var r=e.state;Object.keys(r.elements).forEach(function(a){var u=r.styles[a]||{},m=r.attributes[a]||{},y=r.elements[a];!Oi(y)||!fo(y)||(Object.assign(y.style,u),Object.keys(m).forEach(function(k){var c=m[k];c===!1?y.removeAttribute(k):y.setAttribute(k,c===!0?"":c)}))})}function O4(e){var r=e.state,a={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,a.popper),r.styles=a,r.elements.arrow&&Object.assign(r.elements.arrow.style,a.arrow),function(){Object.keys(r.elements).forEach(function(u){var m=r.elements[u],y=r.attributes[u]||{},k=Object.keys(r.styles.hasOwnProperty(u)?r.styles[u]:a[u]),c=k.reduce(function(P,F){return P[F]="",P},{});!Oi(m)||!fo(m)||(Object.assign(m.style,c),Object.keys(y).forEach(function(P){m.removeAttribute(P)}))})}}var B4={name:"applyStyles",enabled:!0,phase:"write",fn:R4,effect:O4,requires:["computeStyles"]};function mo(e){return e.split("-")[0]}var Ss=Math.max,fh=Math.min,rc=Math.round;function nc(e,r){r===void 0&&(r=!1);var a=e.getBoundingClientRect(),u=1,m=1;if(Oi(e)&&r){var y=e.offsetHeight,k=e.offsetWidth;k>0&&(u=rc(a.width)/k||1),y>0&&(m=rc(a.height)/y||1)}return{width:a.width/u,height:a.height/m,top:a.top/m,right:a.right/u,bottom:a.bottom/m,left:a.left/u,x:a.left/u,y:a.top/m}}function v0(e){var r=nc(e),a=e.offsetWidth,u=e.offsetHeight;return Math.abs(r.width-a)<=1&&(a=r.width),Math.abs(r.height-u)<=1&&(u=r.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:u}}function y_(e,r){var a=r.getRootNode&&r.getRootNode();if(e.contains(r))return!0;if(a&&b0(a)){var u=r;do{if(u&&e.isSameNode(u))return!0;u=u.parentNode||u.host}while(u)}return!1}function Wo(e){return ro(e).getComputedStyle(e)}function F4(e){return["table","td","th"].indexOf(fo(e))>=0}function qa(e){return((tc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Oh(e){return fo(e)==="html"?e:e.assignedSlot||e.parentNode||(b0(e)?e.host:null)||qa(e)}function Sy(e){return!Oi(e)||Wo(e).position==="fixed"?null:e.offsetParent}function N4(e){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,a=navigator.userAgent.indexOf("Trident")!==-1;if(a&&Oi(e)){var u=Wo(e);if(u.position==="fixed")return null}var m=Oh(e);for(b0(m)&&(m=m.host);Oi(m)&&["html","body"].indexOf(fo(m))<0;){var y=Wo(m);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||r&&y.willChange==="filter"||r&&y.filter&&y.filter!=="none")return m;m=m.parentNode}return null}function up(e){for(var r=ro(e),a=Sy(e);a&&F4(a)&&Wo(a).position==="static";)a=Sy(a);return a&&(fo(a)==="html"||fo(a)==="body"&&Wo(a).position==="static")?r:a||N4(e)||r}function _0(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Bu(e,r,a){return Ss(e,fh(r,a))}function U4(e,r,a){var u=Bu(e,r,a);return u>a?a:u}function b_(){return{top:0,right:0,bottom:0,left:0}}function v_(e){return Object.assign({},b_(),e)}function __(e,r){return r.reduce(function(a,u){return a[u]=e,a},{})}var V4=function(r,a){return r=typeof r=="function"?r(Object.assign({},a.rects,{placement:a.placement})):r,v_(typeof r!="number"?r:__(r,cp))};function j4(e){var r,a=e.state,u=e.name,m=e.options,y=a.elements.arrow,k=a.modifiersData.popperOffsets,c=mo(a.placement),P=_0(c),F=[ti,Ui].indexOf(c)>=0,Z=F?"height":"width";if(!(!y||!k)){var H=V4(m.padding,a),V=v0(y),pe=P==="y"?ei:ti,de=P==="y"?Ni:Ui,ye=a.rects.reference[Z]+a.rects.reference[P]-k[P]-a.rects.popper[Z],Me=k[P]-a.rects.reference[P],re=up(y),K=re?P==="y"?re.clientHeight||0:re.clientWidth||0:0,ee=ye/2-Me/2,he=H[pe],Te=K-V[Z]-H[de],Pe=K/2-V[Z]/2+ee,Le=Bu(he,Pe,Te),Be=P;a.modifiersData[u]=(r={},r[Be]=Le,r.centerOffset=Le-Pe,r)}}function $4(e){var r=e.state,a=e.options,u=a.element,m=u===void 0?"[data-popper-arrow]":u;m!=null&&(typeof m=="string"&&(m=r.elements.popper.querySelector(m),!m)||!y_(r.elements.popper,m)||(r.elements.arrow=m))}var G4={name:"arrow",enabled:!0,phase:"main",fn:j4,effect:$4,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ic(e){return e.split("-")[1]}var q4={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Z4(e){var r=e.x,a=e.y,u=window,m=u.devicePixelRatio||1;return{x:rc(r*m)/m||0,y:rc(a*m)/m||0}}function Cy(e){var r,a=e.popper,u=e.popperRect,m=e.placement,y=e.variation,k=e.offsets,c=e.position,P=e.gpuAcceleration,F=e.adaptive,Z=e.roundOffsets,H=e.isFixed,V=k.x,pe=V===void 0?0:V,de=k.y,ye=de===void 0?0:de,Me=typeof Z=="function"?Z({x:pe,y:ye}):{x:pe,y:ye};pe=Me.x,ye=Me.y;var re=k.hasOwnProperty("x"),K=k.hasOwnProperty("y"),ee=ti,he=ei,Te=window;if(F){var Pe=up(a),Le="clientHeight",Be="clientWidth";if(Pe===ro(a)&&(Pe=qa(a),Wo(Pe).position!=="static"&&c==="absolute"&&(Le="scrollHeight",Be="scrollWidth")),Pe=Pe,m===ei||(m===ti||m===Ui)&&y===rp){he=Ni;var ht=H&&Pe===Te&&Te.visualViewport?Te.visualViewport.height:Pe[Le];ye-=ht-u.height,ye*=P?1:-1}if(m===ti||(m===ei||m===Ni)&&y===rp){ee=Ui;var ot=H&&Pe===Te&&Te.visualViewport?Te.visualViewport.width:Pe[Be];pe-=ot-u.width,pe*=P?1:-1}}var St=Object.assign({position:c},F&&q4),qt=Z===!0?Z4({x:pe,y:ye}):{x:pe,y:ye};if(pe=qt.x,ye=qt.y,P){var Rt;return Object.assign({},St,(Rt={},Rt[he]=K?"0":"",Rt[ee]=re?"0":"",Rt.transform=(Te.devicePixelRatio||1)<=1?"translate("+pe+"px, "+ye+"px)":"translate3d("+pe+"px, "+ye+"px, 0)",Rt))}return Object.assign({},St,(r={},r[he]=K?ye+"px":"",r[ee]=re?pe+"px":"",r.transform="",r))}function H4(e){var r=e.state,a=e.options,u=a.gpuAcceleration,m=u===void 0?!0:u,y=a.adaptive,k=y===void 0?!0:y,c=a.roundOffsets,P=c===void 0?!0:c,F={placement:mo(r.placement),variation:ic(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:m,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,Cy(Object.assign({},F,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:k,roundOffsets:P})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,Cy(Object.assign({},F,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:P})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var W4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:H4,data:{}},Pd={passive:!0};function X4(e){var r=e.state,a=e.instance,u=e.options,m=u.scroll,y=m===void 0?!0:m,k=u.resize,c=k===void 0?!0:k,P=ro(r.elements.popper),F=[].concat(r.scrollParents.reference,r.scrollParents.popper);return y&&F.forEach(function(Z){Z.addEventListener("scroll",a.update,Pd)}),c&&P.addEventListener("resize",a.update,Pd),function(){y&&F.forEach(function(Z){Z.removeEventListener("scroll",a.update,Pd)}),c&&P.removeEventListener("resize",a.update,Pd)}}var K4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:X4,data:{}},Y4={left:"right",right:"left",bottom:"top",top:"bottom"};function $d(e){return e.replace(/left|right|bottom|top/g,function(r){return Y4[r]})}var J4={start:"end",end:"start"};function Ty(e){return e.replace(/start|end/g,function(r){return J4[r]})}function w0(e){var r=ro(e),a=r.pageXOffset,u=r.pageYOffset;return{scrollLeft:a,scrollTop:u}}function k0(e){return nc(qa(e)).left+w0(e).scrollLeft}function Q4(e){var r=ro(e),a=qa(e),u=r.visualViewport,m=a.clientWidth,y=a.clientHeight,k=0,c=0;return u&&(m=u.width,y=u.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(k=u.offsetLeft,c=u.offsetTop)),{width:m,height:y,x:k+k0(e),y:c}}function e6(e){var r,a=qa(e),u=w0(e),m=(r=e.ownerDocument)==null?void 0:r.body,y=Ss(a.scrollWidth,a.clientWidth,m?m.scrollWidth:0,m?m.clientWidth:0),k=Ss(a.scrollHeight,a.clientHeight,m?m.scrollHeight:0,m?m.clientHeight:0),c=-u.scrollLeft+k0(e),P=-u.scrollTop;return Wo(m||a).direction==="rtl"&&(c+=Ss(a.clientWidth,m?m.clientWidth:0)-y),{width:y,height:k,x:c,y:P}}function E0(e){var r=Wo(e),a=r.overflow,u=r.overflowX,m=r.overflowY;return/auto|scroll|overlay|hidden/.test(a+m+u)}function w_(e){return["html","body","#document"].indexOf(fo(e))>=0?e.ownerDocument.body:Oi(e)&&E0(e)?e:w_(Oh(e))}function Fu(e,r){var a;r===void 0&&(r=[]);var u=w_(e),m=u===((a=e.ownerDocument)==null?void 0:a.body),y=ro(u),k=m?[y].concat(y.visualViewport||[],E0(u)?u:[]):u,c=r.concat(k);return m?c:c.concat(Fu(Oh(k)))}function vg(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function t6(e){var r=nc(e);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function zy(e,r){return r===g_?vg(Q4(e)):tc(r)?t6(r):vg(e6(qa(e)))}function r6(e){var r=Fu(Oh(e)),a=["absolute","fixed"].indexOf(Wo(e).position)>=0,u=a&&Oi(e)?up(e):e;return tc(u)?r.filter(function(m){return tc(m)&&y_(m,u)&&fo(m)!=="body"}):[]}function n6(e,r,a){var u=r==="clippingParents"?r6(e):[].concat(r),m=[].concat(u,[a]),y=m[0],k=m.reduce(function(c,P){var F=zy(e,P);return c.top=Ss(F.top,c.top),c.right=fh(F.right,c.right),c.bottom=fh(F.bottom,c.bottom),c.left=Ss(F.left,c.left),c},zy(e,y));return k.width=k.right-k.left,k.height=k.bottom-k.top,k.x=k.left,k.y=k.top,k}function k_(e){var r=e.reference,a=e.element,u=e.placement,m=u?mo(u):null,y=u?ic(u):null,k=r.x+r.width/2-a.width/2,c=r.y+r.height/2-a.height/2,P;switch(m){case ei:P={x:k,y:r.y-a.height};break;case Ni:P={x:k,y:r.y+r.height};break;case Ui:P={x:r.x+r.width,y:c};break;case ti:P={x:r.x-a.width,y:c};break;default:P={x:r.x,y:r.y}}var F=m?_0(m):null;if(F!=null){var Z=F==="y"?"height":"width";switch(y){case ec:P[F]=P[F]-(r[Z]/2-a[Z]/2);break;case rp:P[F]=P[F]+(r[Z]/2-a[Z]/2);break}}return P}function np(e,r){r===void 0&&(r={});var a=r,u=a.placement,m=u===void 0?e.placement:u,y=a.boundary,k=y===void 0?k4:y,c=a.rootBoundary,P=c===void 0?g_:c,F=a.elementContext,Z=F===void 0?vu:F,H=a.altBoundary,V=H===void 0?!1:H,pe=a.padding,de=pe===void 0?0:pe,ye=v_(typeof de!="number"?de:__(de,cp)),Me=Z===vu?E4:vu,re=e.rects.popper,K=e.elements[V?Me:Z],ee=n6(tc(K)?K:K.contextElement||qa(e.elements.popper),k,P),he=nc(e.elements.reference),Te=k_({reference:he,element:re,strategy:"absolute",placement:m}),Pe=vg(Object.assign({},re,Te)),Le=Z===vu?Pe:he,Be={top:ee.top-Le.top+ye.top,bottom:Le.bottom-ee.bottom+ye.bottom,left:ee.left-Le.left+ye.left,right:Le.right-ee.right+ye.right},ht=e.modifiersData.offset;if(Z===vu&&ht){var ot=ht[m];Object.keys(Be).forEach(function(St){var qt=[Ui,Ni].indexOf(St)>=0?1:-1,Rt=[ei,Ni].indexOf(St)>=0?"y":"x";Be[St]+=ot[Rt]*qt})}return Be}function i6(e,r){r===void 0&&(r={});var a=r,u=a.placement,m=a.boundary,y=a.rootBoundary,k=a.padding,c=a.flipVariations,P=a.allowedAutoPlacements,F=P===void 0?x_:P,Z=ic(u),H=Z?c?Ey:Ey.filter(function(de){return ic(de)===Z}):cp,V=H.filter(function(de){return F.indexOf(de)>=0});V.length===0&&(V=H);var pe=V.reduce(function(de,ye){return de[ye]=np(e,{placement:ye,boundary:m,rootBoundary:y,padding:k})[mo(ye)],de},{});return Object.keys(pe).sort(function(de,ye){return pe[de]-pe[ye]})}function o6(e){if(mo(e)===y0)return[];var r=$d(e);return[Ty(e),r,Ty(r)]}function a6(e){var r=e.state,a=e.options,u=e.name;if(!r.modifiersData[u]._skip){for(var m=a.mainAxis,y=m===void 0?!0:m,k=a.altAxis,c=k===void 0?!0:k,P=a.fallbackPlacements,F=a.padding,Z=a.boundary,H=a.rootBoundary,V=a.altBoundary,pe=a.flipVariations,de=pe===void 0?!0:pe,ye=a.allowedAutoPlacements,Me=r.options.placement,re=mo(Me),K=re===Me,ee=P||(K||!de?[$d(Me)]:o6(Me)),he=[Me].concat(ee).reduce(function(hr,zr){return hr.concat(mo(zr)===y0?i6(r,{placement:zr,boundary:Z,rootBoundary:H,padding:F,flipVariations:de,allowedAutoPlacements:ye}):zr)},[]),Te=r.rects.reference,Pe=r.rects.popper,Le=new Map,Be=!0,ht=he[0],ot=0;ot<he.length;ot++){var St=he[ot],qt=mo(St),Rt=ic(St)===ec,Tr=[ei,Ni].indexOf(qt)>=0,Kr=Tr?"width":"height",Qe=np(r,{placement:St,boundary:Z,rootBoundary:H,altBoundary:V,padding:F}),Yt=Tr?Rt?Ui:ti:Rt?Ni:ei;Te[Kr]>Pe[Kr]&&(Yt=$d(Yt));var qe=$d(Yt),lt=[];if(y&&lt.push(Qe[qt]<=0),c&&lt.push(Qe[Yt]<=0,Qe[qe]<=0),lt.every(function(hr){return hr})){ht=St,Be=!1;break}Le.set(St,lt)}if(Be)for(var dt=de?3:1,Ut=function(zr){var or=he.find(function(Fr){var Yr=Le.get(Fr);if(Yr)return Yr.slice(0,zr).every(function(bi){return bi})});if(or)return ht=or,"break"},jt=dt;jt>0;jt--){var Br=Ut(jt);if(Br==="break")break}r.placement!==ht&&(r.modifiersData[u]._skip=!0,r.placement=ht,r.reset=!0)}}var s6={name:"flip",enabled:!0,phase:"main",fn:a6,requiresIfExists:["offset"],data:{_skip:!1}};function Iy(e,r,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-r.height-a.y,right:e.right-r.width+a.x,bottom:e.bottom-r.height+a.y,left:e.left-r.width-a.x}}function Py(e){return[ei,Ui,Ni,ti].some(function(r){return e[r]>=0})}function l6(e){var r=e.state,a=e.name,u=r.rects.reference,m=r.rects.popper,y=r.modifiersData.preventOverflow,k=np(r,{elementContext:"reference"}),c=np(r,{altBoundary:!0}),P=Iy(k,u),F=Iy(c,m,y),Z=Py(P),H=Py(F);r.modifiersData[a]={referenceClippingOffsets:P,popperEscapeOffsets:F,isReferenceHidden:Z,hasPopperEscaped:H},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":Z,"data-popper-escaped":H})}var c6={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:l6};function u6(e,r,a){var u=mo(e),m=[ti,ei].indexOf(u)>=0?-1:1,y=typeof a=="function"?a(Object.assign({},r,{placement:e})):a,k=y[0],c=y[1];return k=k||0,c=(c||0)*m,[ti,Ui].indexOf(u)>=0?{x:c,y:k}:{x:k,y:c}}function p6(e){var r=e.state,a=e.options,u=e.name,m=a.offset,y=m===void 0?[0,0]:m,k=x_.reduce(function(Z,H){return Z[H]=u6(H,r.rects,y),Z},{}),c=k[r.placement],P=c.x,F=c.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=P,r.modifiersData.popperOffsets.y+=F),r.modifiersData[u]=k}var d6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:p6};function h6(e){var r=e.state,a=e.name;r.modifiersData[a]=k_({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var m6={name:"popperOffsets",enabled:!0,phase:"read",fn:h6,data:{}};function f6(e){return e==="x"?"y":"x"}function g6(e){var r=e.state,a=e.options,u=e.name,m=a.mainAxis,y=m===void 0?!0:m,k=a.altAxis,c=k===void 0?!1:k,P=a.boundary,F=a.rootBoundary,Z=a.altBoundary,H=a.padding,V=a.tether,pe=V===void 0?!0:V,de=a.tetherOffset,ye=de===void 0?0:de,Me=np(r,{boundary:P,rootBoundary:F,padding:H,altBoundary:Z}),re=mo(r.placement),K=ic(r.placement),ee=!K,he=_0(re),Te=f6(he),Pe=r.modifiersData.popperOffsets,Le=r.rects.reference,Be=r.rects.popper,ht=typeof ye=="function"?ye(Object.assign({},r.rects,{placement:r.placement})):ye,ot=typeof ht=="number"?{mainAxis:ht,altAxis:ht}:Object.assign({mainAxis:0,altAxis:0},ht),St=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,qt={x:0,y:0};if(!!Pe){if(y){var Rt,Tr=he==="y"?ei:ti,Kr=he==="y"?Ni:Ui,Qe=he==="y"?"height":"width",Yt=Pe[he],qe=Yt+Me[Tr],lt=Yt-Me[Kr],dt=pe?-Be[Qe]/2:0,Ut=K===ec?Le[Qe]:Be[Qe],jt=K===ec?-Be[Qe]:-Le[Qe],Br=r.elements.arrow,hr=pe&&Br?v0(Br):{width:0,height:0},zr=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:b_(),or=zr[Tr],Fr=zr[Kr],Yr=Bu(0,Le[Qe],hr[Qe]),bi=ee?Le[Qe]/2-dt-Yr-or-ot.mainAxis:Ut-Yr-or-ot.mainAxis,Jo=ee?-Le[Qe]/2+dt+Yr+Fr+ot.mainAxis:jt+Yr+Fr+ot.mainAxis,Vi=r.elements.arrow&&up(r.elements.arrow),Qo=Vi?he==="y"?Vi.clientTop||0:Vi.clientLeft||0:0,_r=(Rt=St==null?void 0:St[he])!=null?Rt:0,vi=Yt+bi-_r-Qo,go=Yt+Jo-_r,_i=Bu(pe?fh(qe,vi):qe,Yt,pe?Ss(lt,go):lt);Pe[he]=_i,qt[he]=_i-Yt}if(c){var In,ea=he==="x"?ei:ti,ri=he==="x"?Ni:Ui,Gr=Pe[Te],un=Te==="y"?"height":"width",no=Gr+Me[ea],zt=Gr-Me[ri],ni=[ei,ti].indexOf(re)!==-1,ii=(In=St==null?void 0:St[Te])!=null?In:0,wi=ni?no:Gr-Le[un]-Be[un]-ii+ot.altAxis,io=ni?Gr+Le[un]+Be[un]-ii-ot.altAxis:zt,be=pe&&ni?U4(wi,Gr,io):Bu(pe?wi:no,Gr,pe?io:zt);Pe[Te]=be,qt[Te]=be-Gr}r.modifiersData[u]=qt}}var x6={name:"preventOverflow",enabled:!0,phase:"main",fn:g6,requiresIfExists:["offset"]};function y6(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function b6(e){return e===ro(e)||!Oi(e)?w0(e):y6(e)}function v6(e){var r=e.getBoundingClientRect(),a=rc(r.width)/e.offsetWidth||1,u=rc(r.height)/e.offsetHeight||1;return a!==1||u!==1}function _6(e,r,a){a===void 0&&(a=!1);var u=Oi(r),m=Oi(r)&&v6(r),y=qa(r),k=nc(e,m),c={scrollLeft:0,scrollTop:0},P={x:0,y:0};return(u||!u&&!a)&&((fo(r)!=="body"||E0(y))&&(c=b6(r)),Oi(r)?(P=nc(r,!0),P.x+=r.clientLeft,P.y+=r.clientTop):y&&(P.x=k0(y))),{x:k.left+c.scrollLeft-P.x,y:k.top+c.scrollTop-P.y,width:k.width,height:k.height}}function w6(e){var r=new Map,a=new Set,u=[];e.forEach(function(y){r.set(y.name,y)});function m(y){a.add(y.name);var k=[].concat(y.requires||[],y.requiresIfExists||[]);k.forEach(function(c){if(!a.has(c)){var P=r.get(c);P&&m(P)}}),u.push(y)}return e.forEach(function(y){a.has(y.name)||m(y)}),u}function k6(e){var r=w6(e);return L4.reduce(function(a,u){return a.concat(r.filter(function(m){return m.phase===u}))},[])}function E6(e){var r;return function(){return r||(r=new Promise(function(a){Promise.resolve().then(function(){r=void 0,a(e())})})),r}}function S6(e){var r=e.reduce(function(a,u){var m=a[u.name];return a[u.name]=m?Object.assign({},m,u,{options:Object.assign({},m.options,u.options),data:Object.assign({},m.data,u.data)}):u,a},{});return Object.keys(r).map(function(a){return r[a]})}var My={placement:"bottom",modifiers:[],strategy:"absolute"};function Ay(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return!r.some(function(u){return!(u&&typeof u.getBoundingClientRect=="function")})}function C6(e){e===void 0&&(e={});var r=e,a=r.defaultModifiers,u=a===void 0?[]:a,m=r.defaultOptions,y=m===void 0?My:m;return function(c,P,F){F===void 0&&(F=y);var Z={placement:"bottom",orderedModifiers:[],options:Object.assign({},My,y),modifiersData:{},elements:{reference:c,popper:P},attributes:{},styles:{}},H=[],V=!1,pe={state:Z,setOptions:function(re){var K=typeof re=="function"?re(Z.options):re;ye(),Z.options=Object.assign({},y,Z.options,K),Z.scrollParents={reference:tc(c)?Fu(c):c.contextElement?Fu(c.contextElement):[],popper:Fu(P)};var ee=k6(S6([].concat(u,Z.options.modifiers)));return Z.orderedModifiers=ee.filter(function(he){return he.enabled}),de(),pe.update()},forceUpdate:function(){if(!V){var re=Z.elements,K=re.reference,ee=re.popper;if(!!Ay(K,ee)){Z.rects={reference:_6(K,up(ee),Z.options.strategy==="fixed"),popper:v0(ee)},Z.reset=!1,Z.placement=Z.options.placement,Z.orderedModifiers.forEach(function(ot){return Z.modifiersData[ot.name]=Object.assign({},ot.data)});for(var he=0;he<Z.orderedModifiers.length;he++){if(Z.reset===!0){Z.reset=!1,he=-1;continue}var Te=Z.orderedModifiers[he],Pe=Te.fn,Le=Te.options,Be=Le===void 0?{}:Le,ht=Te.name;typeof Pe=="function"&&(Z=Pe({state:Z,options:Be,name:ht,instance:pe})||Z)}}}},update:E6(function(){return new Promise(function(Me){pe.forceUpdate(),Me(Z)})}),destroy:function(){ye(),V=!0}};if(!Ay(c,P))return pe;pe.setOptions(F).then(function(Me){!V&&F.onFirstUpdate&&F.onFirstUpdate(Me)});function de(){Z.orderedModifiers.forEach(function(Me){var re=Me.name,K=Me.options,ee=K===void 0?{}:K,he=Me.effect;if(typeof he=="function"){var Te=he({state:Z,name:re,instance:pe,options:ee}),Pe=function(){};H.push(Te||Pe)}})}function ye(){H.forEach(function(Me){return Me()}),H=[]}return pe}}var T6=[K4,m6,W4,B4,d6,s6,x6,G4,c6],z6=C6({defaultModifiers:T6}),I6=typeof Element!="undefined",P6=typeof Map=="function",M6=typeof Set=="function",A6=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Gd(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var a,u,m;if(Array.isArray(e)){if(a=e.length,a!=r.length)return!1;for(u=a;u--!==0;)if(!Gd(e[u],r[u]))return!1;return!0}var y;if(P6&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(y=e.entries();!(u=y.next()).done;)if(!r.has(u.value[0]))return!1;for(y=e.entries();!(u=y.next()).done;)if(!Gd(u.value[1],r.get(u.value[0])))return!1;return!0}if(M6&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(y=e.entries();!(u=y.next()).done;)if(!r.has(u.value[0]))return!1;return!0}if(A6&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(a=e.length,a!=r.length)return!1;for(u=a;u--!==0;)if(e[u]!==r[u])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(m=Object.keys(e),a=m.length,a!==Object.keys(r).length)return!1;for(u=a;u--!==0;)if(!Object.prototype.hasOwnProperty.call(r,m[u]))return!1;if(I6&&e instanceof Element)return!1;for(u=a;u--!==0;)if(!((m[u]==="_owner"||m[u]==="__v"||m[u]==="__o")&&e.$$typeof)&&!Gd(e[m[u]],r[m[u]]))return!1;return!0}return e!==e&&r!==r}var D6=function(r,a){try{return Gd(r,a)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},L6=[],R6=function(r,a,u){u===void 0&&(u={});var m=Ue.exports.useRef(null),y={onFirstUpdate:u.onFirstUpdate,placement:u.placement||"bottom",strategy:u.strategy||"absolute",modifiers:u.modifiers||L6},k=Ue.exports.useState({styles:{popper:{position:y.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),c=k[0],P=k[1],F=Ue.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(pe){var de=pe.state,ye=Object.keys(de.elements);lc.exports.flushSync(function(){P({styles:wy(ye.map(function(Me){return[Me,de.styles[Me]||{}]})),attributes:wy(ye.map(function(Me){return[Me,de.attributes[Me]]}))})})},requires:["computeStyles"]}},[]),Z=Ue.exports.useMemo(function(){var V={onFirstUpdate:y.onFirstUpdate,placement:y.placement,strategy:y.strategy,modifiers:[].concat(y.modifiers,[F,{name:"applyStyles",enabled:!1}])};return D6(m.current,V)?m.current||V:(m.current=V,V)},[y.onFirstUpdate,y.placement,y.strategy,y.modifiers,F]),H=Ue.exports.useRef();return ky(function(){H.current&&H.current.setOptions(Z)},[Z]),ky(function(){if(!(r==null||a==null)){var V=u.createPopper||z6,pe=V(r,a,Z);return H.current=pe,function(){pe.destroy(),H.current=null}}},[r,a,u.createPopper]),{state:H.current?H.current.state:null,styles:c.styles,attributes:c.attributes,update:H.current?H.current.update:null,forceUpdate:H.current?H.current.forceUpdate:null}},O6=function(){},B6=function(){return Promise.resolve(null)},F6=[];function E_(e){var r=e.placement,a=r===void 0?"bottom":r,u=e.strategy,m=u===void 0?"absolute":u,y=e.modifiers,k=y===void 0?F6:y,c=e.referenceElement,P=e.onFirstUpdate,F=e.innerRef,Z=e.children,H=Ue.exports.useContext(d_),V=Ue.exports.useState(null),pe=V[0],de=V[1],ye=Ue.exports.useState(null),Me=ye[0],re=ye[1];Ue.exports.useEffect(function(){bg(F,pe)},[F,pe]);var K=Ue.exports.useMemo(function(){return{placement:a,strategy:m,onFirstUpdate:P,modifiers:[].concat(k,[{name:"arrow",enabled:Me!=null,options:{element:Me}}])}},[a,m,P,k,Me]),ee=R6(c||H,pe,K),he=ee.state,Te=ee.styles,Pe=ee.forceUpdate,Le=ee.update,Be=Ue.exports.useMemo(function(){return{ref:de,style:Te.popper,placement:he?he.placement:a,hasPopperEscaped:he&&he.modifiersData.hide?he.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:he&&he.modifiersData.hide?he.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:Te.arrow,ref:re},forceUpdate:Pe||O6,update:Le||B6}},[de,re,a,he,Te,Le,Pe]);return m_(Z)(Be)}function N6(e){var r=e.children,a=e.innerRef,u=Ue.exports.useContext(h_),m=Ue.exports.useCallback(function(y){bg(a,y),f_(u,y)},[a,u]);return Ue.exports.useEffect(function(){return function(){return bg(a,null)}},[]),Ue.exports.useEffect(function(){},[u]),m_(r)({ref:m})}function U6(e,r){if(e==null)return{};var a={},u=Object.keys(e),m,y;for(y=0;y<u.length;y++)m=u[y],!(r.indexOf(m)>=0)&&(a[m]=e[m]);return a}function _g(e,r){return _g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,m){return u.__proto__=m,u},_g(e,r)}function V6(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,_g(e,r)}var Dy={disabled:!1},S_=Ft.createContext(null),Tu="unmounted",ys="exited",bs="entering",Tl="entered",wg="exiting",Ko=function(e){V6(r,e);function r(u,m){var y;y=e.call(this,u,m)||this;var k=m,c=k&&!k.isMounting?u.enter:u.appear,P;return y.appearStatus=null,u.in?c?(P=ys,y.appearStatus=bs):P=Tl:u.unmountOnExit||u.mountOnEnter?P=Tu:P=ys,y.state={status:P},y.nextCallback=null,y}r.getDerivedStateFromProps=function(m,y){var k=m.in;return k&&y.status===Tu?{status:ys}:null};var a=r.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(m){var y=null;if(m!==this.props){var k=this.state.status;this.props.in?k!==bs&&k!==Tl&&(y=bs):(k===bs||k===Tl)&&(y=wg)}this.updateStatus(!1,y)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var m=this.props.timeout,y,k,c;return y=k=c=m,m!=null&&typeof m!="number"&&(y=m.exit,k=m.enter,c=m.appear!==void 0?m.appear:k),{exit:y,enter:k,appear:c}},a.updateStatus=function(m,y){m===void 0&&(m=!1),y!==null?(this.cancelNextCallback(),y===bs?this.performEnter(m):this.performExit()):this.props.unmountOnExit&&this.state.status===ys&&this.setState({status:Tu})},a.performEnter=function(m){var y=this,k=this.props.enter,c=this.context?this.context.isMounting:m,P=this.props.nodeRef?[c]:[Zl.findDOMNode(this),c],F=P[0],Z=P[1],H=this.getTimeouts(),V=c?H.appear:H.enter;if(!m&&!k||Dy.disabled){this.safeSetState({status:Tl},function(){y.props.onEntered(F)});return}this.props.onEnter(F,Z),this.safeSetState({status:bs},function(){y.props.onEntering(F,Z),y.onTransitionEnd(V,function(){y.safeSetState({status:Tl},function(){y.props.onEntered(F,Z)})})})},a.performExit=function(){var m=this,y=this.props.exit,k=this.getTimeouts(),c=this.props.nodeRef?void 0:Zl.findDOMNode(this);if(!y||Dy.disabled){this.safeSetState({status:ys},function(){m.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:wg},function(){m.props.onExiting(c),m.onTransitionEnd(k.exit,function(){m.safeSetState({status:ys},function(){m.props.onExited(c)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(m,y){y=this.setNextCallback(y),this.setState(m,y)},a.setNextCallback=function(m){var y=this,k=!0;return this.nextCallback=function(c){k&&(k=!1,y.nextCallback=null,m(c))},this.nextCallback.cancel=function(){k=!1},this.nextCallback},a.onTransitionEnd=function(m,y){this.setNextCallback(y);var k=this.props.nodeRef?this.props.nodeRef.current:Zl.findDOMNode(this),c=m==null&&!this.props.addEndListener;if(!k||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var P=this.props.nodeRef?[this.nextCallback]:[k,this.nextCallback],F=P[0],Z=P[1];this.props.addEndListener(F,Z)}m!=null&&setTimeout(this.nextCallback,m)},a.render=function(){var m=this.state.status;if(m===Tu)return null;var y=this.props,k=y.children;y.in,y.mountOnEnter,y.unmountOnExit,y.appear,y.enter,y.exit,y.timeout,y.addEndListener,y.onEnter,y.onEntering,y.onEntered,y.onExit,y.onExiting,y.onExited,y.nodeRef;var c=U6(y,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ft.createElement(S_.Provider,{value:null},typeof k=="function"?k(m,c):Ft.cloneElement(Ft.Children.only(k),c))},r}(Ft.Component);Ko.contextType=S_;Ko.propTypes={};function wl(){}Ko.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wl,onEntering:wl,onEntered:wl,onExit:wl,onExiting:wl,onExited:wl};Ko.UNMOUNTED=Tu;Ko.EXITED=ys;Ko.ENTERING=bs;Ko.ENTERED=Tl;Ko.EXITING=wg;var Yo=Ko,Bh={exports:{}},Fh={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j6=Ue.exports,$6=Symbol.for("react.element"),G6=Symbol.for("react.fragment"),q6=Object.prototype.hasOwnProperty,Z6=j6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H6={key:!0,ref:!0,__self:!0,__source:!0};function C_(e,r,a){var u,m={},y=null,k=null;a!==void 0&&(y=""+a),r.key!==void 0&&(y=""+r.key),r.ref!==void 0&&(k=r.ref);for(u in r)q6.call(r,u)&&!H6.hasOwnProperty(u)&&(m[u]=r[u]);if(e&&e.defaultProps)for(u in r=e.defaultProps,r)m[u]===void 0&&(m[u]=r[u]);return{$$typeof:$6,type:e,key:y,ref:k,props:m,_owner:Z6.current}}Fh.Fragment=G6;Fh.jsx=C_;Fh.jsxs=C_;Bh.exports=Fh;const ke=Bh.exports.jsx,Wt=Bh.exports.jsxs,W6=Bh.exports.Fragment;function Ly(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),a.push.apply(a,u)}return a}function Et(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ly(Object(a),!0).forEach(function(u){X6(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ly(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function X6(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function gh(){return gh=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},gh.apply(this,arguments)}function K6(e,r){if(e==null)return{};var a={},u=Object.keys(e),m,y;for(y=0;y<u.length;y++)m=u[y],!(r.indexOf(m)>=0)&&(a[m]=e[m]);return a}function Or(e,r){if(e==null)return{};var a=K6(e,r),u,m;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(m=0;m<y.length;m++)u=y[m],!(r.indexOf(u)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,u)||(a[u]=e[u]))}return a}function Y6(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);const r=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),r}function S0(e){document.body.style.paddingRight=e>0?`${e}px`:null}function J6(){return document.body.clientWidth<window.innerWidth}function T_(){const e=window.getComputedStyle(document.body,null);return parseInt(e&&e.getPropertyValue("padding-right")||0,10)}function z_(){const e=Y6(),r=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],a=r?parseInt(r.style.paddingRight||0,10):0;J6()&&S0(a+e)}let Q6;function _t(e="",r=Q6){return r?e.split(" ").map(a=>r[a]||a).join(" "):e}function yi(e,r){const a={};return Object.keys(e).forEach(u=>{r.indexOf(u)===-1&&(a[u]=e[u])}),a}function I_(e,r){const a=Array.isArray(r)?r:[r];let u=a.length,m;const y={};for(;u>0;)u-=1,m=a[u],y[m]=e[m];return y}let Ry={};function kg(e){Ry[e]||(typeof console!="undefined"&&console.error(e),Ry[e]=!0)}function P_(e,r){return function(u,m,y,...k){return u[m]!==null&&typeof u[m]!="undefined"&&kg(`"${m}" property of "${y}" has been deprecated.
${r}`),e(u,m,y,...k)}}const ek=typeof window=="object"&&window.Element||function(){};function C0(e,r,a){if(!(e[r]instanceof ek))return new Error("Invalid prop `"+r+"` supplied to `"+a+"`. Expected prop to be an instance of Element. Validation failed.")}const Va=w.oneOfType([w.string,w.func,C0,w.shape({current:w.any})]),je=w.oneOfType([w.func,w.string,w.shape({$$typeof:w.symbol,render:w.func}),w.arrayOf(w.oneOfType([w.func,w.string,w.shape({$$typeof:w.symbol,render:w.func})]))]),Ms={Fade:150,Collapse:350,Modal:300,Carousel:600,Offcanvas:300},xh=["in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Uo={ENTERING:"entering",ENTERED:"entered",EXITING:"exiting",EXITED:"exited"},tr={esc:27,space:32,enter:13,tab:9,up:38,down:40,home:36,end:35,n:78,p:80},tk=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],T0=!!(typeof window!="undefined"&&window.document&&window.document.createElement);function rk(e){return e&&typeof e=="object"?"current"in e:!1}function nk(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function M_(e){const r=typeof e;return e!=null&&(r==="object"||r==="function")}function ik(e){if(!M_(e))return!1;const r=nk(e);return r==="[object Function]"||r==="[object AsyncFunction]"||r==="[object GeneratorFunction]"||r==="[object Proxy]"}function A_(e){if(rk(e))return e.current;if(ik(e))return e();if(typeof e=="string"&&T0){let r=document.querySelectorAll(e);if(r.length||(r=document.querySelectorAll(`#${e}`)),!r.length)throw new Error(`The target '${e}' could not be identified in the dom, tip: check spelling`);return r}return e}function yh(e){return e===null?!1:Array.isArray(e)||T0&&typeof e.length=="number"}function oc(e,r){const a=A_(e);return r?yh(a)?a:a===null?[]:[a]:yh(a)?a[0]:a}const ok=["touchstart","click"];function ak(e,r,a,u){let m=e;yh(m)||(m=[m]);let y=a;if(typeof y=="string"&&(y=y.split(/\s+/)),!yh(m)||typeof r!="function"||!Array.isArray(y))throw new Error(`
      The first argument of this function must be DOM node or an array on DOM nodes or NodeList.
      The second must be a function.
      The third is a string or an array of strings that represents DOM events
    `);return Array.prototype.forEach.call(y,k=>{Array.prototype.forEach.call(m,c=>{c.addEventListener(k,r,u)})}),function(){Array.prototype.forEach.call(y,c=>{Array.prototype.forEach.call(m,P=>{P.removeEventListener(c,r,u)})})}}const D_=["a[href]","area[href]","input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","object","embed","[tabindex]:not(.modal)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],sk=["className","cssModule","fluid","tag"],lk={tag:je,fluid:w.oneOfType([w.bool,w.string]),className:w.string,cssModule:w.object},ck={tag:"div"},z0=e=>{const{className:r,cssModule:a,fluid:u,tag:m}=e,y=Or(e,sk);let k="container";u===!0?k="container-fluid":u&&(k=`container-${u}`);const c=_t(wt(r,k),a);return ke(m,{...y,className:c})};z0.propTypes=lk;z0.defaultProps=ck;var Oy=z0;const uk=["className","cssModule","noGutters","tag","widths"],pk=["xs","sm","md","lg","xl","xxl"],kl=w.oneOfType([w.number,w.string]),dk={tag:je,noGutters:P_(w.bool,"Please use Bootstrap 5 gutter utility classes. https://getbootstrap.com/docs/5.0/layout/gutters/"),className:w.string,cssModule:w.object,xs:kl,sm:kl,md:kl,lg:kl,xl:kl,xxl:kl},hk={tag:"div",widths:pk},I0=e=>{const{className:r,cssModule:a,noGutters:u,tag:m,widths:y}=e,k=Or(e,uk),c=[];y.forEach((F,Z)=>{let H=e[F];if(delete k[F],!H)return;const V=!Z;c.push(V?`row-cols-${H}`:`row-cols-${F}-${H}`)});const P=_t(wt(r,u?"gx-0":null,"row",c),a);return ke(m,{...k,className:P})};I0.propTypes=dk;I0.defaultProps=hk;var _u=I0;const mk=["className","cssModule","widths","tag"],L_=["xs","sm","md","lg","xl","xxl"],By=w.oneOfType([w.number,w.string]),El=w.oneOfType([w.bool,w.number,w.string,w.shape({size:w.oneOfType([w.bool,w.number,w.string]),order:By,offset:By})]),fk={tag:je,xs:El,sm:El,md:El,lg:El,xl:El,xxl:El,className:w.string,cssModule:w.object,widths:w.array},gk={tag:"div",widths:L_},Fy=(e,r,a)=>a===!0||a===""?e?"col":`col-${r}`:a==="auto"?e?"col-auto":`col-${r}-auto`:e?`col-${a}`:`col-${r}-${a}`,xk=(e,r,a=L_)=>{const u=[];return a.forEach((m,y)=>{let k=e[m];if(delete e[m],!k&&k!=="")return;const c=!y;if(M_(k)){const P=c?"-":`-${m}-`,F=Fy(c,m,k.size);u.push(_t(wt({[F]:k.size||k.size==="",[`order${P}${k.order}`]:k.order||k.order===0,[`offset${P}${k.offset}`]:k.offset||k.offset===0}),r))}else{const P=Fy(c,m,k);u.push(P)}}),{colClasses:u,attributes:e}},P0=e=>{const{className:r,cssModule:a,widths:u,tag:m}=e,y=Or(e,mk);let{attributes:k,colClasses:c}=xk(y,a,u);c.length||c.push("col");const P=_t(wt(r,c),a);return ke(m,{...k,className:P})};P0.propTypes=fk;P0.defaultProps=gk;var Pi=P0;w.bool,w.bool,w.bool,w.string,w.string,w.string,w.string,w.oneOfType([w.bool,w.string]),w.string,w.object,w.oneOfType([w.bool,w.string]),w.node;w.string,w.object;w.string,w.object;w.string,w.string,w.object,w.node;w.bool,w.bool,w.oneOfType([w.bool,w.string]),w.string,w.bool,w.bool,w.bool,w.bool,w.string,w.object;w.bool,w.string,w.object;const yk=["className","cssModule","active","tag","innerRef"],bk={tag:je,innerRef:w.oneOfType([w.object,w.func,w.string]),disabled:w.bool,active:w.bool,className:w.string,cssModule:w.object,onClick:w.func,href:w.any},vk={tag:"a"};class R_ extends Ft.Component{constructor(r){super(r),this.onClick=this.onClick.bind(this)}onClick(r){if(this.props.disabled){r.preventDefault();return}this.props.href==="#"&&r.preventDefault(),this.props.onClick&&this.props.onClick(r)}render(){let r=this.props,{className:a,cssModule:u,active:m,tag:y,innerRef:k}=r,c=Or(r,yk);const P=_t(wt(a,"nav-link",{disabled:c.disabled,active:m}),u);return ke(y,{...c,ref:k,onClick:this.onClick,className:P})}}R_.propTypes=bk;R_.defaultProps=vk;w.string,w.string,w.object,w.node,w.string;w.bool,w.string,w.object;const _k=["className","cssModule","variant","innerRef"],wk={active:w.bool,"aria-label":w.string,onClick:w.func,variant:w.oneOf(["white"])},kk={"aria-label":"close"},M0=e=>{const{className:r,cssModule:a,variant:u,innerRef:m}=e,y=Or(e,_k),k=_t(wt(r,"btn-close",u&&`btn-close-${u}`));return ke("button",{ref:m,type:"button",className:k,...y})};M0.propTypes=wk;M0.defaultProps=kk;var Ek=M0;const Sk=["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"],Ck={active:w.bool,"aria-label":w.string,block:w.bool,color:w.string,disabled:w.bool,outline:w.bool,tag:je,innerRef:w.oneOfType([w.object,w.func,w.string]),onClick:w.func,size:w.string,children:w.node,className:w.string,cssModule:w.object,close:w.bool},Tk={color:"secondary",tag:"button"};function Nh(e){const r=Ue.exports.useCallback(Me=>{if(e.disabled){Me.preventDefault();return}if(e.onClick)return e.onClick(Me)},[e.onClick,e.disabled]);let{active:a,"aria-label":u,block:m,className:y,close:k,cssModule:c,color:P,outline:F,size:Z,tag:H,innerRef:V}=e,pe=Or(e,Sk);if(k)return ke(Ek,{...pe});const de=`btn${F?"-outline":""}-${P}`,ye=_t(wt(y,"btn",de,Z?`btn-${Z}`:!1,m?"d-block w-100":!1,{active:a,disabled:e.disabled}),c);return pe.href&&H==="button"&&(H="a"),ke(H,{type:H==="button"&&pe.onClick?"button":void 0,...pe,className:ye,ref:V,onClick:r,"aria-label":u})}Nh.propTypes=Ck;Nh.defaultProps=Tk;const zk=["className"],Ik={onClick:w.func,onBlur:w.func,onFocus:w.func,defaultValue:w.bool},Pk={defaultValue:!1};class O_ extends Ft.Component{constructor(r){super(r),this.state={toggled:r.defaultValue,focus:!1},this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onClick=this.onClick.bind(this)}onBlur(r){this.props.onBlur&&this.props.onBlur(r),this.setState({focus:!1})}onFocus(r){this.props.onFocus&&this.props.onFocus(r),this.setState({focus:!0})}onClick(r){this.props.onClick&&this.props.onClick(r),this.setState(({toggled:a})=>({toggled:!a}))}render(){const r=this.props,{className:a}=r,u=Or(r,zk),m=_t(wt(a,{focus:this.state.focus}),this.props.cssModule);return ke(Nh,{active:this.state.toggled,onBlur:this.onBlur,onFocus:this.onFocus,onClick:this.onClick,className:m,...u})}}O_.propTypes=Ik;O_.defaultProps=Pk;const Uh=Ft.createContext({}),Mk=["className","cssModule","direction","isOpen","group","size","nav","setActiveFromChild","active","tag","menuRole"],Ak={a11y:w.bool,disabled:w.bool,direction:w.oneOf(["up","down","start","end","left","right"]),group:w.bool,isOpen:w.bool,nav:w.bool,active:w.bool,size:w.string,tag:je,toggle:w.func,children:w.node,className:w.string,cssModule:w.object,inNavbar:w.bool,setActiveFromChild:w.bool,menuRole:w.oneOf(["listbox","menu"])},Dk={a11y:!0,isOpen:!1,direction:"down",nav:!1,active:!1,inNavbar:!1,setActiveFromChild:!1},Lk=[tr.space,tr.enter,tr.up,tr.down,tr.end,tr.home];class A0 extends Ft.Component{constructor(r){super(r),this.addEvents=this.addEvents.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.removeEvents=this.removeEvents.bind(this),this.toggle=this.toggle.bind(this),this.handleMenuRef=this.handleMenuRef.bind(this),this.containerRef=Ft.createRef(),this.menuRef=Ft.createRef()}handleMenuRef(r){this.menuRef.current=r}getContextValue(){return{toggle:this.toggle,isOpen:this.props.isOpen,direction:this.props.direction==="down"&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar,disabled:this.props.disabled,onMenuRef:this.handleMenuRef,menuRole:this.props.menuRole}}componentDidMount(){this.handleProps()}componentDidUpdate(r){this.props.isOpen!==r.isOpen&&this.handleProps()}componentWillUnmount(){this.removeEvents()}getContainer(){return this.containerRef.current}getMenu(){return this.menuRef.current}getMenuCtrl(){return this._$menuCtrl?this._$menuCtrl:(this._$menuCtrl=this.getContainer().querySelector("[aria-expanded]"),this._$menuCtrl)}getItemType(){return this.context.menuRole==="listbox"?"option":"menuitem"}getMenuItems(){const r=this.getMenu()||this.getContainer();return[].slice.call(r.querySelectorAll(`[role="${this.getItemType()}"]`))}addEvents(){["click","touchstart","keyup"].forEach(r=>document.addEventListener(r,this.handleDocumentClick,!0))}removeEvents(){["click","touchstart","keyup"].forEach(r=>document.removeEventListener(r,this.handleDocumentClick,!0))}handleDocumentClick(r){if(r&&(r.which===3||r.type==="keyup"&&r.which!==tr.tab))return;const a=this.getContainer(),u=this.getMenu(),m=a.contains(r.target)&&a!==r.target,y=a.classList.contains("input-group")&&a.classList.contains("dropdown")&&r.target.tagName==="INPUT",k=u&&u.contains(r.target)&&u!==r.target;(m&&!y||k)&&(r.type!=="keyup"||r.which===tr.tab)||this.toggle(r)}handleKeyDown(r){const a=r.target.getAttribute("role")==="menuitem"||r.target.getAttribute("role")==="option",u=this.getMenuCtrl()===r.target,m=tr.tab===r.which;if(!(/input|textarea/i.test(r.target.tagName)||m&&!this.props.a11y||m&&!(a||u))&&((Lk.indexOf(r.which)!==-1||r.which>=48&&r.which<=90)&&r.preventDefault(),!this.props.disabled&&(u&&([tr.space,tr.enter,tr.up,tr.down].indexOf(r.which)>-1?(this.props.isOpen||this.toggle(r),setTimeout(()=>this.getMenuItems()[0].focus())):this.props.isOpen&&m?(r.preventDefault(),this.getMenuItems()[0].focus()):this.props.isOpen&&r.which===tr.esc&&this.toggle(r)),this.props.isOpen&&a))){if([tr.tab,tr.esc].indexOf(r.which)>-1)this.toggle(r),this.getMenuCtrl().focus();else if([tr.space,tr.enter].indexOf(r.which)>-1)r.target.click(),this.getMenuCtrl().focus();else if([tr.down,tr.up].indexOf(r.which)>-1||[tr.n,tr.p].indexOf(r.which)>-1&&r.ctrlKey){const y=this.getMenuItems();let k=y.indexOf(r.target);tr.up===r.which||tr.p===r.which&&r.ctrlKey?k=k!==0?k-1:y.length-1:(tr.down===r.which||tr.n===r.which&&r.ctrlKey)&&(k=k===y.length-1?0:k+1),y[k].focus()}else if(tr.end===r.which){const y=this.getMenuItems();y[y.length-1].focus()}else if(tr.home===r.which)this.getMenuItems()[0].focus();else if(r.which>=48&&r.which<=90){const y=this.getMenuItems(),k=String.fromCharCode(r.which).toLowerCase();for(let c=0;c<y.length;c+=1)if((y[c].textContent&&y[c].textContent[0].toLowerCase())===k){y[c].focus();break}}}}handleProps(){this.props.isOpen?this.addEvents():this.removeEvents()}toggle(r){return this.props.disabled?r&&r.preventDefault():this.props.toggle(r)}render(){const r=yi(this.props,["toggle","disabled","inNavbar","a11y"]),{className:a,cssModule:u,direction:m,isOpen:y,group:k,size:c,nav:P,setActiveFromChild:F,active:Z,tag:H,menuRole:V}=r,pe=Or(r,Mk),de=H||(P?"li":"div");let ye=!1;F&&Ft.Children.map(this.props.children[1].props.children,re=>{re&&re.props.active&&(ye=!0)});const Me=_t(wt(a,P&&Z?"active":!1,F&&ye?"active":!1,{"btn-group":k,[`btn-group-${c}`]:!!c,dropdown:!k,dropup:m==="up",dropstart:m==="start"||m==="left",dropend:m==="end"||m==="right",show:y,"nav-item":P}),u);return ke(Uh.Provider,{value:this.getContextValue(),children:ke(w4,{children:ke(de,{...gh({},pe,{[typeof de=="string"?"ref":"innerRef"]:this.containerRef,onKeyDown:this.handleKeyDown,className:Me})})})})}}A0.propTypes=Ak;A0.defaultProps=Dk;var D0=A0;const Rk={children:w.node},B_=e=>ke(D0,{group:!0,...e});B_.propTypes=Rk;var F_=B_;w.string,w.string,w.object,w.string,w.string,w.bool;w.string,w.string,w.object,w.string;const Ok=["className","cssModule","divider","tag","header","active","text"],Bk={children:w.node,active:w.bool,disabled:w.bool,divider:w.bool,tag:je,header:w.bool,onClick:w.func,className:w.string,cssModule:w.object,toggle:w.bool,text:w.bool},Fk={tag:"button",toggle:!0};class L0 extends Ft.Component{constructor(r){super(r),this.onClick=this.onClick.bind(this),this.getTabIndex=this.getTabIndex.bind(this)}getRole(){return this.context.menuRole==="listbox"?"option":"menuitem"}onClick(r){const{disabled:a,header:u,divider:m,text:y}=this.props;if(a||u||m||y){r.preventDefault();return}this.props.onClick&&this.props.onClick(r),this.props.toggle&&this.context.toggle(r)}getTabIndex(){const{disabled:r,header:a,divider:u,text:m}=this.props;return r||a||u||m?"-1":"0"}render(){const r=this.getTabIndex(),a=r>-1?this.getRole():void 0;let u=yi(this.props,["toggle"]),{className:m,cssModule:y,divider:k,tag:c,header:P,active:F,text:Z}=u,H=Or(u,Ok);const V=_t(wt(m,{disabled:H.disabled,"dropdown-item":!k&&!P&&!Z,active:F,"dropdown-header":P,"dropdown-divider":k,"dropdown-item-text":Z}),y);return c==="button"&&(P?c="h6":k?c="div":H.href?c="a":Z&&(c="span")),ke(c,{type:c==="button"&&(H.onClick||this.props.toggle)?"button":void 0,...H,tabIndex:r,role:a,className:V,onClick:this.onClick})}}L0.propTypes=Bk;L0.defaultProps=Fk;L0.contextType=Uh;const Nk=["className","cssModule","dark","end","right","tag","flip","modifiers","persist","strategy","container","updateOnSelect"],Uk={tag:je,children:w.node.isRequired,dark:w.bool,end:w.bool,flip:w.bool,modifiers:w.array,className:w.string,cssModule:w.object,persist:w.bool,strategy:w.string,container:Va,updateOnSelect:w.bool,right:P_(w.bool,'Please use "end" instead.')},Vk={tag:"div",flip:!0,modifiers:[]},jk={up:"top",left:"left",right:"right",start:"left",end:"right",down:"bottom"};class R0 extends Ft.Component{getRole(){return this.context.menuRole==="listbox"?"listbox":"menu"}render(){const r=this.props,{className:a,cssModule:u,dark:m,end:y,right:k,tag:c,flip:P,modifiers:F,persist:Z,strategy:H,container:V,updateOnSelect:pe}=r,de=Or(r,Nk),ye=_t(wt(a,"dropdown-menu",{"dropdown-menu-dark":m,"dropdown-menu-end":y||k,show:this.context.isOpen}),u),Me=c;if(Z||this.context.isOpen&&!this.context.inNavbar){const ee=`${jk[this.context.direction]||"bottom"}-${y||k?"end":"start"}`,he=[...F,{name:"flip",enabled:!!P}],Te=ke(E_,{placement:ee,modifiers:he,strategy:H,children:({ref:Pe,style:Le,placement:Be,update:ht})=>{let ot=Et(Et({},this.props.style),Le);const St=qt=>{Pe(qt);const{onMenuRef:Rt}=this.context;Rt&&Rt(qt)};return ke(Me,{tabIndex:"-1",role:this.getRole(),ref:St,...de,style:ot,"aria-hidden":!this.context.isOpen,className:ye,"data-popper-placement":Be,onClick:()=>pe&&ht()})}});return V?Zl.createPortal(Te,oc(V)):Te}return ke(Me,{tabIndex:"-1",role:this.getRole(),...de,"aria-hidden":!this.context.isOpen,className:ye,"data-popper-placement":de.placement})}}R0.propTypes=Uk;R0.defaultProps=Vk;R0.contextType=Uh;const $k=["className","color","cssModule","caret","split","nav","tag","innerRef"],Gk={caret:w.bool,color:w.string,children:w.node,className:w.string,cssModule:w.object,disabled:w.bool,onClick:w.func,"aria-haspopup":w.bool,split:w.bool,tag:je,nav:w.bool},qk={color:"secondary","aria-haspopup":!0};class O0 extends Ft.Component{constructor(r){super(r),this.onClick=this.onClick.bind(this)}onClick(r){if(this.props.disabled||this.context.disabled){r.preventDefault();return}this.props.nav&&!this.props.tag&&r.preventDefault(),this.props.onClick&&this.props.onClick(r),this.context.toggle(r)}getRole(){return this.context.menuRole||this.props["aria-haspopup"]}render(){const r=this.props,{className:a,color:u,cssModule:m,caret:y,split:k,nav:c,tag:P,innerRef:F}=r,Z=Or(r,$k),H=Z["aria-label"]||"Toggle Dropdown",V=_t(wt(a,{"dropdown-toggle":y||k,"dropdown-toggle-split":k,"nav-link":c}),m),pe=typeof Z.children!="undefined"?Z.children:ke("span",{className:"visually-hidden",children:H});let de;return c&&!P?(de="a",Z.href="#"):P?de=P:(de=Nh,Z.color=u,Z.cssModule=m),this.context.inNavbar?ke(de,{...Z,className:V,onClick:this.onClick,"aria-expanded":this.context.isOpen,"aria-haspopup":this.getRole(),children:pe}):ke(N6,{innerRef:F,children:({ref:ye})=>ke(de,{...gh({},Z,{[typeof de=="string"?"ref":"innerRef"]:ye,className:V,onClick:this.onClick,"aria-expanded":this.context.isOpen,"aria-haspopup":this.getRole(),children:pe})})})}}O0.propTypes=Gk;O0.defaultProps=qk;O0.contextType=Uh;const Zk=["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"],Hk=Et(Et({},Yo.propTypes),{},{children:w.oneOfType([w.arrayOf(w.node),w.node]),tag:je,baseClass:w.string,baseClassActive:w.string,className:w.string,cssModule:w.object,innerRef:w.oneOfType([w.object,w.string,w.func])}),Wk=Et(Et({},Yo.defaultProps),{},{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:Ms.Fade,appear:!0,enter:!0,exit:!0,in:!0});function Xr(e){const{tag:r,baseClass:a,baseClassActive:u,className:m,cssModule:y,children:k,innerRef:c}=e,P=Or(e,Zk),F=I_(P,xh),Z=yi(P,xh);return ke(Yo,{...F,children:H=>{const pe=_t(wt(m,a,H==="entered"&&u),y);return ke(r,{className:pe,...Z,ref:c,children:k})}})}Xr.propTypes=Hk;Xr.defaultProps=Wk;Ft.createContext({});w.string,w.object,w.oneOfType([w.object,w.string,w.func]),w.node,w.bool,w.oneOfType([w.array,w.string]).isRequired,w.func.isRequired;w.string,w.object,w.oneOfType([w.object,w.string,w.func]),w.node,w.oneOfType([w.array,w.string]),w.bool;w.string,w.object,w.oneOfType([w.object,w.string,w.func]),w.node,w.string.isRequired;w.string,w.object,w.oneOfType([w.object,w.string,w.func]),w.node;const Xk=["tag","horizontal","isOpen","className","navbar","cssModule","children","innerRef"],Kk=Et(Et({},Yo.propTypes),{},{horizontal:w.bool,isOpen:w.bool,children:w.oneOfType([w.arrayOf(w.node),w.node]),tag:je,className:w.node,navbar:w.bool,cssModule:w.object,innerRef:w.oneOfType([w.func,w.string,w.object])}),Yk=Et(Et({},Yo.defaultProps),{},{horizontal:!1,isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:Ms.Collapse}),Jk={[Uo.ENTERING]:"collapsing",[Uo.ENTERED]:"collapse show",[Uo.EXITING]:"collapsing",[Uo.EXITED]:"collapse"};function Qk(e){return Jk[e]||"collapse"}class B0 extends Ue.exports.Component{constructor(r){super(r),this.state={dimension:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach(a=>{this[a]=this[a].bind(this)})}getDimension(r){return this.props.horizontal?r.scrollWidth:r.scrollHeight}onEntering(r,a){this.setState({dimension:this.getDimension(r)}),this.props.onEntering(r,a)}onEntered(r,a){this.setState({dimension:null}),this.props.onEntered(r,a)}onExit(r){this.setState({dimension:this.getDimension(r)}),this.props.onExit(r)}onExiting(r){this.getDimension(r),this.setState({dimension:0}),this.props.onExiting(r)}onExited(r){this.setState({dimension:null}),this.props.onExited(r)}render(){const r=this.props,{tag:a,horizontal:u,isOpen:m,className:y,navbar:k,cssModule:c,children:P,innerRef:F}=r,Z=Or(r,Xk),{dimension:H}=this.state,V=I_(Z,xh),pe=yi(Z,xh);return ke(Yo,{...V,in:m,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited,children:de=>{let ye=Qk(de);const Me=_t(wt(y,u&&"collapse-horizontal",ye,k&&"navbar-collapse"),c),re=H===null?null:{[u?"width":"height"]:H};return ke(a,{...pe,style:Et(Et({},pe.style),re),className:Me,ref:this.props.innerRef,children:P})}})}}B0.propTypes=Kk;B0.defaultProps=Yk;var e7=B0;w.string,w.object,w.oneOfType([w.object,w.string,w.func]),w.node,w.string.isRequired;const t7=["className","cssModule","color","innerRef","pill","tag"],r7={color:w.string,pill:w.bool,tag:je,innerRef:w.oneOfType([w.object,w.func,w.string]),children:w.node,className:w.string,cssModule:w.object},n7={color:"secondary",pill:!1,tag:"span"},F0=e=>{let{className:r,cssModule:a,color:u,innerRef:m,pill:y,tag:k}=e,c=Or(e,t7);const P=_t(wt(r,"badge","bg-"+u,y?"rounded-pill":!1),a);return c.href&&k==="span"&&(k="a"),ke(k,{...c,className:P,ref:m})};F0.propTypes=r7;F0.defaultProps=n7;var Ny=F0;w.bool,w.string,w.bool,w.bool,w.string,w.object,w.oneOfType([w.object,w.string,w.func]);w.string,w.object;w.string,w.object;w.string,w.object;w.string,w.object,w.oneOfType([w.object,w.string,w.func]);w.oneOfType([w.object,w.func,w.string]),w.string,w.object;w.string,w.object;w.string,w.object;w.bool,w.bool,w.string,w.object;w.string,w.object;const i7=["in","children","cssModule","slide","tag","className"];class Vh extends Ft.Component{constructor(r){super(r),this.state={startAnimation:!1},this.onEnter=this.onEnter.bind(this),this.onEntering=this.onEntering.bind(this),this.onExit=this.onExit.bind(this),this.onExiting=this.onExiting.bind(this),this.onExited=this.onExited.bind(this)}onEnter(r,a){this.setState({startAnimation:!1}),this.props.onEnter(r,a)}onEntering(r,a){const u=r.offsetHeight;return this.setState({startAnimation:!0}),this.props.onEntering(r,a),u}onExit(r){this.setState({startAnimation:!1}),this.props.onExit(r)}onExiting(r){this.setState({startAnimation:!0}),r.dispatchEvent(new CustomEvent("slide.bs.carousel")),this.props.onExiting(r)}onExited(r){r.dispatchEvent(new CustomEvent("slid.bs.carousel")),this.props.onExited(r)}render(){const r=this.props,{in:a,children:u,cssModule:m,slide:y,tag:k,className:c}=r,P=Or(r,i7);return ke(Yo,{...P,enter:y,exit:y,in:a,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited,children:F=>{const{direction:Z}=this.context,H=F===Uo.ENTERED||F===Uo.EXITING,V=(F===Uo.ENTERING||F===Uo.EXITING)&&this.state.startAnimation&&(Z==="end"?"carousel-item-start":"carousel-item-end"),pe=F===Uo.ENTERING&&(Z==="end"?"carousel-item-next":"carousel-item-prev"),de=_t(wt(c,"carousel-item",H&&"active",V,pe),m);return ke(k,{className:de,children:u})}})}}Vh.propTypes=Et(Et({},Yo.propTypes),{},{tag:je,in:w.bool,cssModule:w.object,children:w.node,slide:w.bool,className:w.string});Vh.defaultProps=Et(Et({},Yo.defaultProps),{},{tag:"div",timeout:Ms.Carousel,slide:!0});Vh.contextTypes={direction:w.string};var N_=Vh;const kf=Ft.createContext({}),o7=40;class jh extends Ft.Component{constructor(r){super(r),this.handleKeyPress=this.handleKeyPress.bind(this),this.renderItems=this.renderItems.bind(this),this.hoverStart=this.hoverStart.bind(this),this.hoverEnd=this.hoverEnd.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.touchStartX=0,this.touchStartY=0,this.state={activeIndex:this.props.activeIndex,direction:"end",indicatorClicked:!1}}getContextValue(){return{direction:this.state.direction}}componentDidMount(){this.props.ride==="carousel"&&this.setInterval(),document.addEventListener("keyup",this.handleKeyPress)}static getDerivedStateFromProps(r,a){let u=null,{activeIndex:m,direction:y,indicatorClicked:k}=a;return r.activeIndex!==m&&(r.activeIndex===m+1?y="end":r.activeIndex===m-1?y="start":r.activeIndex<m?y=k?"start":"end":r.activeIndex!==m&&(y=k?"end":"start"),u={activeIndex:r.activeIndex,direction:y,indicatorClicked:!1}),u}componentDidUpdate(r,a){a.activeIndex!==this.state.activeIndex&&this.setInterval(this.props)}componentWillUnmount(){this.clearInterval(),document.removeEventListener("keyup",this.handleKeyPress)}setInterval(r=this.props){this.clearInterval(),r.interval&&(this.cycleInterval=setInterval(()=>{r.next()},parseInt(r.interval,10)))}clearInterval(){clearInterval(this.cycleInterval)}hoverStart(...r){this.props.pause==="hover"&&this.clearInterval(),this.props.mouseEnter&&this.props.mouseEnter(...r)}hoverEnd(...r){this.props.pause==="hover"&&this.setInterval(),this.props.mouseLeave&&this.props.mouseLeave(...r)}handleKeyPress(r){this.props.keyboard&&(r.keyCode===37?this.props.previous():r.keyCode===39&&this.props.next())}handleTouchStart(r){!this.props.enableTouch||(this.touchStartX=r.changedTouches[0].screenX,this.touchStartY=r.changedTouches[0].screenY)}handleTouchEnd(r){if(!this.props.enableTouch)return;const a=r.changedTouches[0].screenX,u=r.changedTouches[0].screenY,m=Math.abs(this.touchStartX-a),y=Math.abs(this.touchStartY-u);m<y||m<o7||(a<this.touchStartX?this.props.next():this.props.previous())}renderItems(r,a){const{slide:u}=this.props;return ke("div",{className:a,children:r.map((m,y)=>{const k=y===this.state.activeIndex;return Ft.cloneElement(m,{in:k,slide:u})})})}render(){const{cssModule:r,slide:a,className:u,dark:m,fade:y}=this.props,k=_t(wt(u,"carousel",y,a&&"slide",m&&"carousel-dark"),r),c=_t(wt("carousel-inner"),r),P=this.props.children.filter(Me=>Me!=null&&typeof Me!="boolean");if(P.every(Me=>Me.type===N_))return ke("div",{className:k,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd,children:ke(kf.Provider,{value:this.getContextValue(),children:this.renderItems(P,c)})});if(P[0]instanceof Array){const Me=P[0],re=P[1],K=P[2];return ke("div",{className:k,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd,children:Wt(kf.Provider,{value:this.getContextValue(),children:[this.renderItems(Me,c),re,K]})})}const Z=P[0],H=Me=>{typeof Z.props.onClickHandler=="function"&&this.setState({indicatorClicked:!0},()=>Z.props.onClickHandler(Me))},V=Ft.cloneElement(Z,{onClickHandler:H}),pe=P[1],de=P[2],ye=P[3];return ke("div",{className:k,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,children:Wt(kf.Provider,{value:this.getContextValue(),children:[V,this.renderItems(pe,c),de,ye]})})}}jh.propTypes={activeIndex:w.number,next:w.func.isRequired,previous:w.func.isRequired,keyboard:w.bool,pause:w.oneOf(["hover",!1]),ride:w.oneOf(["carousel"]),interval:w.oneOfType([w.number,w.string,w.bool]),children:w.array,mouseEnter:w.func,mouseLeave:w.func,slide:w.bool,dark:w.bool,cssModule:w.object,className:w.string,enableTouch:w.bool};jh.defaultProps={interval:5e3,pause:"hover",keyboard:!0,slide:!0,enableTouch:!0,fade:!1};jh.childContextTypes={direction:w.string};var a7=jh;const U_=e=>{const{direction:r,onClickHandler:a,cssModule:u,directionText:m,className:y}=e,k=_t(wt(y,`carousel-control-${r}`),u),c=_t(wt(`carousel-control-${r}-icon`),u),P=_t(wt("visually-hidden"),u);return Wt("a",{className:k,style:{cursor:"pointer"},role:"button",tabIndex:"0",onClick:F=>{F.preventDefault(),a()},children:[ke("span",{className:c,"aria-hidden":"true"}),ke("span",{className:P,children:m||r})]})};U_.propTypes={direction:w.oneOf(["prev","next"]).isRequired,onClickHandler:w.func.isRequired,cssModule:w.object,directionText:w.string,className:w.string};var Uy=U_;const V_=e=>{const{items:r,activeIndex:a,cssModule:u,onClickHandler:m,className:y}=e,k=_t(wt(y,"carousel-indicators"),u),c=r.map((P,F)=>{const Z=_t(wt({active:a===F}),u);return ke("button",{"aria-label":P.caption,"data-bs-target":!0,onClick:H=>{H.preventDefault(),m(F)},className:Z},`${P.key||Object.values(P).join("")}`)});return ke("div",{className:k,children:c})};V_.propTypes={items:w.array.isRequired,activeIndex:w.number.isRequired,cssModule:w.object,onClickHandler:w.func.isRequired,className:w.string};var s7=V_;const j_=e=>{const{captionHeader:r,captionText:a,cssModule:u,className:m}=e,y=_t(wt(m,"carousel-caption","d-none","d-md-block"),u);return Wt("div",{className:y,children:[ke("h3",{children:r}),ke("p",{children:a})]})};j_.propTypes={captionHeader:w.node,captionText:w.node.isRequired,cssModule:w.object,className:w.string};var l7=j_;const c7=["defaultActiveIndex","autoPlay","indicators","controls","items","goToIndex"],u7={items:w.array.isRequired,indicators:w.bool,controls:w.bool,autoPlay:w.bool,defaultActiveIndex:w.number,activeIndex:w.number,next:w.func,previous:w.func,goToIndex:w.func};class $_ extends Ue.exports.Component{constructor(r){super(r),this.animating=!1,this.state={activeIndex:r.defaultActiveIndex||0},this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.goToIndex=this.goToIndex.bind(this),this.onExiting=this.onExiting.bind(this),this.onExited=this.onExited.bind(this)}onExiting(){this.animating=!0}onExited(){this.animating=!1}next(){if(this.animating)return;const r=this.state.activeIndex===this.props.items.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:r})}previous(){if(this.animating)return;const r=this.state.activeIndex===0?this.props.items.length-1:this.state.activeIndex-1;this.setState({activeIndex:r})}goToIndex(r){this.animating||this.setState({activeIndex:r})}render(){const r=this.props,{defaultActiveIndex:a,autoPlay:u,indicators:m,controls:y,items:k,goToIndex:c}=r,P=Or(r,c7),{activeIndex:F}=this.state,Z=k.map(H=>{const V=H.key||H.src;return Wt(N_,{onExiting:this.onExiting,onExited:this.onExited,children:[ke("img",{className:"d-block w-100",src:H.src,alt:H.altText}),ke(l7,{captionText:H.caption,captionHeader:H.header||H.caption})]},V)});return Wt(a7,{activeIndex:F,next:this.next,previous:this.previous,ride:u?"carousel":void 0,...P,children:[m&&ke(s7,{items:k,activeIndex:P.activeIndex||F,onClickHandler:c||this.goToIndex}),Z,y&&ke(Uy,{direction:"prev",directionText:"Previous",onClickHandler:P.previous||this.previous}),y&&ke(Uy,{direction:"next",directionText:"Next",onClickHandler:P.next||this.next})]})}}$_.propTypes=u7;$_.defaultProps={controls:!0,indicators:!0,autoPlay:!0};w.string,w.object;w.string,w.object;w.string,w.object;const p7=["cssModule","children","isOpen","flip","target","offset","fallbackPlacements","placementPrefix","arrowClassName","hideArrow","popperClassName","tag","container","modifiers","strategy","boundariesElement","onClosed","fade","transition","placement"];function d7(){}const h7={children:w.oneOfType([w.node,w.func]).isRequired,popperClassName:w.string,placement:w.string,placementPrefix:w.string,arrowClassName:w.string,hideArrow:w.bool,tag:je,isOpen:w.bool.isRequired,cssModule:w.object,offset:w.arrayOf(w.number),fallbackPlacements:w.array,flip:w.bool,container:Va,target:Va.isRequired,modifiers:w.array,strategy:w.string,boundariesElement:w.oneOfType([w.string,C0]),onClosed:w.func,fade:w.bool,transition:w.shape(Xr.propTypes)},m7={boundariesElement:"scrollParent",placement:"auto",hideArrow:!1,isOpen:!1,offset:[0,0],flip:!0,container:"body",modifiers:[],onClosed:d7,fade:!0,transition:Et({},Xr.defaultProps)};class N0 extends Ft.Component{constructor(r){super(r),this.setTargetNode=this.setTargetNode.bind(this),this.getTargetNode=this.getTargetNode.bind(this),this.getRef=this.getRef.bind(this),this.onClosed=this.onClosed.bind(this),this.state={isOpen:r.isOpen}}static getDerivedStateFromProps(r,a){return r.isOpen&&!a.isOpen?{isOpen:r.isOpen}:null}componentDidUpdate(){this._element&&this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}setTargetNode(r){this.targetNode=typeof r=="string"?oc(r):r}getTargetNode(){return this.targetNode}getContainerNode(){return oc(this.props.container)}getRef(r){this._element=r}onClosed(){this.props.onClosed(),this.setState({isOpen:!1})}renderChildren(){const r=this.props,{cssModule:a,children:u,isOpen:m,flip:y,target:k,offset:c,fallbackPlacements:P,placementPrefix:F,arrowClassName:Z,hideArrow:H,popperClassName:V,tag:pe,container:de,modifiers:ye,strategy:Me,boundariesElement:re,onClosed:K,fade:ee,transition:he,placement:Te}=r,Pe=Or(r,p7),Le=_t(wt("arrow",Z),a),Be=_t(wt(V,F?`${F}-auto`:""),this.props.cssModule),ht=ye.map(Rt=>Rt.name),St=[...[{name:"offset",options:{offset:c}},{name:"flip",enabled:y,options:{fallbackPlacements:P}},{name:"preventOverflow",options:{boundary:re}}].filter(Rt=>!ht.includes(Rt.name)),...ye],qt=Et(Et(Et({},Xr.defaultProps),he),{},{baseClass:ee?he.baseClass:"",timeout:ee?he.timeout:0});return ke(Xr,{...qt,...Pe,in:m,onExited:this.onClosed,tag:pe,children:ke(E_,{referenceElement:this.targetNode,modifiers:St,placement:Te,strategy:Me,children:({ref:Rt,style:Tr,placement:Kr,isReferenceHidden:Qe,arrowProps:Yt,update:qe})=>Wt("div",{ref:Rt,style:Tr,className:Be,"data-popper-placement":Kr,"data-popper-reference-hidden":Qe?"true":void 0,children:[typeof u=="function"?u({update:qe}):u,!H&&ke("span",{ref:Yt.ref,className:Le,style:Yt.style})]})})})}render(){return this.setTargetNode(this.props.target),this.state.isOpen?this.props.container==="inline"?this.renderChildren():Zl.createPortal(ke("div",{ref:this.getRef,children:this.renderChildren()}),this.getContainerNode()):null}}N0.propTypes=h7;N0.defaultProps=m7;var f7=N0;w.object.isRequired;Va.isRequired;const $h={children:w.oneOfType([w.node,w.func]),placement:w.oneOf(tk),target:Va.isRequired,container:Va,isOpen:w.bool,disabled:w.bool,hideArrow:w.bool,boundariesElement:w.oneOfType([w.string,C0]),className:w.string,innerClassName:w.string,arrowClassName:w.string,popperClassName:w.string,cssModule:w.object,toggle:w.func,autohide:w.bool,placementPrefix:w.string,delay:w.oneOfType([w.shape({show:w.number,hide:w.number}),w.number]),modifiers:w.array,strategy:w.string,offset:w.arrayOf(w.number),innerRef:w.oneOfType([w.func,w.string,w.object]),trigger:w.string,fade:w.bool,flip:w.bool},G_={show:0,hide:50},g7={isOpen:!1,hideArrow:!1,autohide:!1,delay:G_,toggle:function(){},trigger:"click",fade:!0};function q_(e,r){return r&&(e===r||r.contains(e))}function Vy(e,r=[]){return r&&r.length&&r.filter(a=>q_(e,a))[0]}class U0 extends Ft.Component{constructor(r){super(r),this._targets=[],this.currentTargetElement=null,this.addTargetEvents=this.addTargetEvents.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.removeTargetEvents=this.removeTargetEvents.bind(this),this.toggle=this.toggle.bind(this),this.showWithDelay=this.showWithDelay.bind(this),this.hideWithDelay=this.hideWithDelay.bind(this),this.onMouseOverTooltipContent=this.onMouseOverTooltipContent.bind(this),this.onMouseLeaveTooltipContent=this.onMouseLeaveTooltipContent.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.onEscKeyDown=this.onEscKeyDown.bind(this),this.getRef=this.getRef.bind(this),this.state={isOpen:r.isOpen},this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.updateTarget()}componentWillUnmount(){this._isMounted=!1,this.removeTargetEvents(),this._targets=null,this.clearShowTimeout(),this.clearHideTimeout()}static getDerivedStateFromProps(r,a){return r.isOpen&&!a.isOpen?{isOpen:r.isOpen}:null}onMouseOverTooltipContent(){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._hideTimeout&&this.clearHideTimeout(),this.state.isOpen&&!this.props.isOpen&&this.toggle())}onMouseLeaveTooltipContent(r){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._showTimeout&&this.clearShowTimeout(),r.persist(),this._hideTimeout=setTimeout(this.hide.bind(this,r),this.getDelay("hide")))}onEscKeyDown(r){r.key==="Escape"&&this.hide(r)}getRef(r){const{innerRef:a}=this.props;a&&(typeof a=="function"?a(r):typeof a=="object"&&(a.current=r)),this._popover=r}getDelay(r){const{delay:a}=this.props;return typeof a=="object"?isNaN(a[r])?G_[r]:a[r]:a}getCurrentTarget(r){if(!r)return null;const a=this._targets.indexOf(r);return a>=0?this._targets[a]:this.getCurrentTarget(r.parentElement)}show(r){if(!this.props.isOpen){if(this.clearShowTimeout(),this.currentTargetElement=r?r.currentTarget||this.getCurrentTarget(r.target):null,r&&r.composedPath&&typeof r.composedPath=="function"){const a=r.composedPath();this.currentTargetElement=a&&a[0]||this.currentTargetElement}this.toggle(r)}}showWithDelay(r){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show.bind(this,r),this.getDelay("show"))}hide(r){this.props.isOpen&&(this.clearHideTimeout(),this.currentTargetElement=null,this.toggle(r))}hideWithDelay(r){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,r),this.getDelay("hide"))}clearShowTimeout(){clearTimeout(this._showTimeout),this._showTimeout=void 0}clearHideTimeout(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}handleDocumentClick(r){const a=this.props.trigger.split(" ");a.indexOf("legacy")>-1&&(this.props.isOpen||Vy(r.target,this._targets))?(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&!q_(r.target,this._popover)?this.hideWithDelay(r):this.props.isOpen||this.showWithDelay(r)):a.indexOf("click")>-1&&Vy(r.target,this._targets)&&(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen?this.hideWithDelay(r):this.showWithDelay(r))}addEventOnTargets(r,a,u){this._targets.forEach(m=>{m.addEventListener(r,a,u)})}removeEventOnTargets(r,a,u){this._targets.forEach(m=>{m.removeEventListener(r,a,u)})}addTargetEvents(){if(this.props.trigger){let r=this.props.trigger.split(" ");r.indexOf("manual")===-1&&((r.indexOf("click")>-1||r.indexOf("legacy")>-1)&&document.addEventListener("click",this.handleDocumentClick,!0),this._targets&&this._targets.length&&(r.indexOf("hover")>-1&&(this.addEventOnTargets("mouseover",this.showWithDelay,!0),this.addEventOnTargets("mouseout",this.hideWithDelay,!0)),r.indexOf("focus")>-1&&(this.addEventOnTargets("focusin",this.show,!0),this.addEventOnTargets("focusout",this.hide,!0)),this.addEventOnTargets("keydown",this.onEscKeyDown,!0)))}}removeTargetEvents(){this._targets&&(this.removeEventOnTargets("mouseover",this.showWithDelay,!0),this.removeEventOnTargets("mouseout",this.hideWithDelay,!0),this.removeEventOnTargets("keydown",this.onEscKeyDown,!0),this.removeEventOnTargets("focusin",this.show,!0),this.removeEventOnTargets("focusout",this.hide,!0)),document.removeEventListener("click",this.handleDocumentClick,!0)}updateTarget(){const r=oc(this.props.target,!0);r!==this._targets&&(this.removeTargetEvents(),this._targets=r?Array.from(r):[],this.currentTargetElement=this.currentTargetElement||this._targets[0],this.addTargetEvents())}toggle(r){return this.props.disabled||!this._isMounted?r&&r.preventDefault():this.props.toggle(r)}render(){this.props.isOpen&&this.updateTarget();const r=this.currentTargetElement||this._targets[0];if(!r)return null;const{className:a,cssModule:u,innerClassName:m,isOpen:y,hideArrow:k,boundariesElement:c,placement:P,placementPrefix:F,arrowClassName:Z,popperClassName:H,container:V,modifiers:pe,strategy:de,offset:ye,fade:Me,flip:re,children:K}=this.props,ee=yi(this.props,Object.keys($h)),he=_t(H,u),Te=_t(m,u);return ke(f7,{className:a,target:r,isOpen:y,hideArrow:k,boundariesElement:c,placement:P,placementPrefix:F,arrowClassName:Z,popperClassName:he,container:V,modifiers:pe,strategy:de,offset:ye,cssModule:u,fade:Me,flip:re,children:({update:Pe})=>ke("div",{...ee,ref:this.getRef,className:Te,role:"tooltip",onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent,onKeyDown:this.onEscKeyDown,children:typeof K=="function"?K({update:Pe}):K})})}}U0.propTypes=$h;U0.defaultProps=g7;var Z_=U0;const x7={placement:"right",placementPrefix:"bs-popover",trigger:"click",offset:[0,8]},V0=e=>{const r=wt("popover","show",e.popperClassName),a=wt("popover-inner",e.innerClassName);return ke(Z_,{...e,arrowClassName:"popover-arrow",popperClassName:r,innerClassName:a})};V0.propTypes=$h;V0.defaultProps=x7;var H_=V0;const y7=["defaultOpen"];class b7 extends Ue.exports.Component{constructor(r){super(r),this.state={isOpen:r.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState({isOpen:!this.state.isOpen})}render(){return ke(H_,{isOpen:this.state.isOpen,toggle:this.toggle,...yi(this.props,y7)})}}b7.propTypes=Et({defaultOpen:w.bool},H_.propTypes);w.string,w.object;w.string,w.object;w.node,w.bool,w.bool,w.oneOfType([w.string,w.number]),w.oneOfType([w.string,w.number]),w.oneOfType([w.string,w.number]),w.bool,w.bool,w.string,w.string,w.string,w.object,w.object,w.object,w.string,w.string;const v7={children:w.node.isRequired,node:w.any};class W_ extends Ft.Component{componentWillUnmount(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}render(){return T0?(!this.props.node&&!this.defaultNode&&(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),Zl.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}W_.propTypes=v7;var X_=W_;function bh(){}const jy=w.shape(Xr.propTypes),K_={isOpen:w.bool,autoFocus:w.bool,centered:w.bool,fullscreen:w.oneOfType([w.bool,w.oneOf(["sm","md","lg","xl"])]),scrollable:w.bool,size:w.string,toggle:w.func,keyboard:w.bool,role:w.string,labelledBy:w.string,backdrop:w.oneOfType([w.bool,w.oneOf(["static"])]),onEnter:w.func,onExit:w.func,onOpened:w.func,onClosed:w.func,children:w.node,className:w.string,wrapClassName:w.string,modalClassName:w.string,backdropClassName:w.string,contentClassName:w.string,external:w.node,fade:w.bool,cssModule:w.object,zIndex:w.oneOfType([w.number,w.string]),backdropTransition:jy,modalTransition:jy,innerRef:w.oneOfType([w.object,w.string,w.func]),unmountOnClose:w.bool,returnFocusAfterClose:w.bool,container:Va,trapFocus:w.bool},_7=Object.keys(K_),w7={isOpen:!1,autoFocus:!0,centered:!1,scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:bh,onClosed:bh,modalTransition:{timeout:Ms.Modal},backdropTransition:{mountOnEnter:!0,timeout:Ms.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body",trapFocus:!1};class Mi extends Ft.Component{constructor(r){super(r),this._element=null,this._originalBodyPadding=null,this._originalBodyOverflow=null,this.getFocusableChildren=this.getFocusableChildren.bind(this),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleBackdropMouseDown=this.handleBackdropMouseDown.bind(this),this.handleEscape=this.handleEscape.bind(this),this.handleStaticBackdropAnimation=this.handleStaticBackdropAnimation.bind(this),this.handleTab=this.handleTab.bind(this),this.onOpened=this.onOpened.bind(this),this.onClosed=this.onClosed.bind(this),this.manageFocusAfterClose=this.manageFocusAfterClose.bind(this),this.clearBackdropAnimationTimeout=this.clearBackdropAnimationTimeout.bind(this),this.trapFocus=this.trapFocus.bind(this),this.state={isOpen:!1,showStaticBackdropAnimation:!1}}componentDidMount(){const{isOpen:r,autoFocus:a,onEnter:u}=this.props;r&&(this.init(),this.setState({isOpen:!0}),a&&this.setFocus()),u&&u(),document.addEventListener("focus",this.trapFocus,!0),this._isMounted=!0}componentDidUpdate(r,a){if(this.props.isOpen&&!r.isOpen){this.init(),this.setState({isOpen:!0});return}this.props.autoFocus&&this.state.isOpen&&!a.isOpen&&this.setFocus(),this._element&&r.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}componentWillUnmount(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),document.removeEventListener("focus",this.trapFocus,!0),this._isMounted=!1}trapFocus(r){if(!this.props.trapFocus||!this._element||this._dialog&&this._dialog.parentNode===r.target||this.modalIndex<Mi.openCount-1)return;const a=this.getFocusableChildren();for(let u=0;u<a.length;u++)if(a[u]===r.target)return;a.length>0&&(r.preventDefault(),r.stopPropagation(),a[0].focus())}onOpened(r,a){this.props.onOpened(),(this.props.modalTransition.onEntered||bh)(r,a)}onClosed(r){const{unmountOnClose:a}=this.props;this.props.onClosed(),(this.props.modalTransition.onExited||bh)(r),a&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})}setFocus(){this._dialog&&this._dialog.parentNode&&typeof this._dialog.parentNode.focus=="function"&&this._dialog.parentNode.focus()}getFocusableChildren(){return this._element.querySelectorAll(D_.join(", "))}getFocusedChild(){let r;const a=this.getFocusableChildren();try{r=document.activeElement}catch{r=a[0]}return r}handleBackdropClick(r){if(r.target===this._mouseDownElement){r.stopPropagation();const a=this._dialog?this._dialog.parentNode:null;if(a&&r.target===a&&this.props.backdrop==="static"&&this.handleStaticBackdropAnimation(),!this.props.isOpen||this.props.backdrop!==!0)return;a&&r.target===a&&this.props.toggle&&this.props.toggle(r)}}handleTab(r){if(r.which!==9||this.modalIndex<Mi.openCount-1)return;const a=this.getFocusableChildren(),u=a.length;if(u===0)return;const m=this.getFocusedChild();let y=0;for(let k=0;k<u;k+=1)if(a[k]===m){y=k;break}r.shiftKey&&y===0?(r.preventDefault(),a[u-1].focus()):!r.shiftKey&&y===u-1&&(r.preventDefault(),a[0].focus())}handleBackdropMouseDown(r){this._mouseDownElement=r.target}handleEscape(r){this.props.isOpen&&r.keyCode===tr.esc&&this.props.toggle&&(this.props.keyboard?(r.preventDefault(),r.stopPropagation(),this.props.toggle(r)):this.props.backdrop==="static"&&(r.preventDefault(),r.stopPropagation(),this.handleStaticBackdropAnimation()))}handleStaticBackdropAnimation(){this.clearBackdropAnimationTimeout(),this.setState({showStaticBackdropAnimation:!0}),this._backdropAnimationTimeout=setTimeout(()=>{this.setState({showStaticBackdropAnimation:!1})},100)}init(){try{this._triggeringElement=document.activeElement}catch{this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=oc(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=T_(),this._originalBodyOverflow=window.getComputedStyle(document.body).overflow,z_(),Mi.openCount===0&&(document.body.className=wt(document.body.className,_t("modal-open",this.props.cssModule)),document.body.style.overflow="hidden"),this.modalIndex=Mi.openCount,Mi.openCount+=1}destroy(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()}manageFocusAfterClose(){if(this._triggeringElement){const{returnFocusAfterClose:r}=this.props;this._triggeringElement.focus&&r&&this._triggeringElement.focus(),this._triggeringElement=null}}close(){if(Mi.openCount<=1){const r=_t("modal-open",this.props.cssModule),a=new RegExp(`(^| )${r}( |$)`);document.body.className=document.body.className.replace(a," ").trim(),document.body.style.overflow=this._originalBodyOverflow}this.manageFocusAfterClose(),Mi.openCount=Math.max(0,Mi.openCount-1),S0(this._originalBodyPadding)}renderModalDialog(){const r=yi(this.props,_7),a="modal-dialog";return ke("div",{...r,className:_t(wt(a,this.props.className,{[`modal-${this.props.size}`]:this.props.size,[`${a}-centered`]:this.props.centered,[`${a}-scrollable`]:this.props.scrollable,"modal-fullscreen":this.props.fullscreen===!0,[`modal-fullscreen-${this.props.fullscreen}-down`]:typeof this.props.fullscreen=="string"}),this.props.cssModule),role:"document",ref:u=>{this._dialog=u},children:ke("div",{className:_t(wt("modal-content",this.props.contentClassName),this.props.cssModule),children:this.props.children})})}render(){const{unmountOnClose:r}=this.props;if(!!this._element&&(this.state.isOpen||!r)){const a=!!this._element&&!this.state.isOpen&&!r;this._element.style.display=a?"none":"block";const{wrapClassName:u,modalClassName:m,backdropClassName:y,cssModule:k,isOpen:c,backdrop:P,role:F,labelledBy:Z,external:H,innerRef:V}=this.props,pe={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":Z,role:F,tabIndex:"-1"},de=this.props.fade,ye=Et(Et(Et({},Xr.defaultProps),this.props.modalTransition),{},{baseClass:de?this.props.modalTransition.baseClass:"",timeout:de?this.props.modalTransition.timeout:0}),Me=Et(Et(Et({},Xr.defaultProps),this.props.backdropTransition),{},{baseClass:de?this.props.backdropTransition.baseClass:"",timeout:de?this.props.backdropTransition.timeout:0}),re=P&&(de?ke(Xr,{...Me,in:c&&!!P,cssModule:k,className:_t(wt("modal-backdrop",y),k)}):ke("div",{className:_t(wt("modal-backdrop","show",y),k)}));return ke(X_,{node:this._element,children:Wt("div",{className:_t(u),children:[Wt(Xr,{...pe,...ye,in:c,onEntered:this.onOpened,onExited:this.onClosed,cssModule:k,className:_t(wt("modal",m,this.state.showStaticBackdropAnimation&&"modal-static"),k),innerRef:V,children:[H,this.renderModalDialog()]}),re]})})}return null}clearBackdropAnimationTimeout(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)}}Mi.propTypes=K_;Mi.defaultProps=w7;Mi.openCount=0;w.func,w.string,w.object,w.node,w.string,w.object;w.string,w.object;w.string,w.object;const k7={placement:"top",autohide:!0,placementPrefix:"bs-tooltip",trigger:"hover focus"},j0=e=>{const r=wt("tooltip","show",e.popperClassName),a=wt("tooltip-inner",e.innerClassName);return ke(Z_,{...e,arrowClassName:"tooltip-arrow",popperClassName:r,innerClassName:a})};j0.propTypes=$h;j0.defaultProps=k7;var Y_=j0;const E7=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"],S7={className:w.string,cssModule:w.object,size:w.string,bordered:w.bool,borderless:w.bool,striped:w.bool,dark:w.bool,hover:w.bool,responsive:w.oneOfType([w.bool,w.string]),tag:je,responsiveTag:je,innerRef:w.oneOfType([w.func,w.string,w.object])},C7={tag:"table",responsiveTag:"div"},$0=e=>{const{className:r,cssModule:a,size:u,bordered:m,borderless:y,striped:k,dark:c,hover:P,responsive:F,tag:Z,responsiveTag:H,innerRef:V}=e,pe=Or(e,E7),de=_t(wt(r,"table",u?"table-"+u:!1,m?"table-bordered":!1,y?"table-borderless":!1,k?"table-striped":!1,c?"table-dark":!1,P?"table-hover":!1),a),ye=ke(Z,{...pe,ref:V,className:de});if(F){const Me=_t(F===!0?"table-responsive":`table-responsive-${F}`,a);return ke(H,{className:Me,children:ye})}return ye};$0.propTypes=S7;$0.defaultProps=C7;var T7=$0;w.bool,w.string,w.object,w.oneOfType([w.bool,w.string]),w.bool;const z7=["className","cssModule","inline","tag","innerRef"],I7={children:w.node,inline:w.bool,tag:je,innerRef:w.oneOfType([w.object,w.func,w.string]),className:w.string,cssModule:w.object},P7={tag:"form"};class J_ extends Ue.exports.Component{constructor(r){super(r),this.getRef=this.getRef.bind(this),this.submit=this.submit.bind(this)}getRef(r){this.props.innerRef&&this.props.innerRef(r),this.ref=r}submit(){this.ref&&this.ref.submit()}render(){const r=this.props,{className:a,cssModule:u,inline:m,tag:y,innerRef:k}=r,c=Or(r,z7),P=_t(wt(a,m?"form-inline":!1),u);return ke(y,{...c,ref:k,className:P})}}J_.propTypes=I7;J_.defaultProps=P7;w.node,w.string,w.object,w.bool,w.bool;w.node,w.bool,w.bool,w.bool,w.bool,w.bool,w.bool,w.string,w.object;w.node,w.bool,w.string,w.string,w.object;const M7=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"],A7={children:w.node,type:w.string,size:w.oneOfType([w.number,w.string]),bsSize:w.string,valid:w.bool,invalid:w.bool,tag:je,innerRef:w.oneOfType([w.object,w.func,w.string]),plaintext:w.bool,addon:w.bool,className:w.string,cssModule:w.object},D7={type:"text"};class Q_ extends Ft.Component{constructor(r){super(r),this.getRef=this.getRef.bind(this),this.focus=this.focus.bind(this)}getRef(r){this.props.innerRef&&this.props.innerRef(r),this.ref=r}focus(){this.ref&&this.ref.focus()}render(){let r=this.props,{className:a,cssModule:u,type:m,bsSize:y,valid:k,invalid:c,tag:P,addon:F,plaintext:Z,innerRef:H}=r,V=Or(r,M7);const pe=["switch","radio","checkbox"].indexOf(m)>-1,de=new RegExp("\\D","g"),ye=m==="textarea",Me=m==="select",re=m==="range";let K=P||(Me||ye?m:"input"),ee="form-control";Z?(ee=`${ee}-plaintext`,K=P||"input"):re?ee="form-range":Me?ee="form-select":pe&&(F?ee=null:ee="form-check-input"),V.size&&de.test(V.size)&&(kg(`Please use the prop "bsSize" instead of the "size" to bootstrap's input sizing.`),y=V.size,delete V.size);const he=_t(wt(a,c&&"is-invalid",k&&"is-valid",y?Me?`form-select-${y}`:`form-control-${y}`:!1,ee),u);return(K==="input"||P&&typeof P=="function")&&(V.type=m==="switch"?"checkbox":m),V.children&&!(Z||m==="select"||typeof K!="string"||K==="select")&&(kg(`Input with a type of "${m}" cannot have children. Please use "value"/"defaultValue" instead.`),delete V.children),ke(K,{...V,ref:H,className:he,"aria-invalid":c})}}Q_.propTypes=A7;Q_.defaultProps=D7;w.bool,w.string,w.string,w.object;w.string,w.object;const Ef=w.oneOfType([w.number,w.string]),Sl=w.oneOfType([w.bool,w.string,w.number,w.shape({size:Ef,order:Ef,offset:Ef})]);w.node,w.bool,w.bool,w.string,w.string,w.string,w.object,w.array;w.bool,w.bool,w.node,w.string,w.object,w.bool,w.bool,w.bool,w.bool,w.bool,w.bool,w.bool;function vh(){}const $y=w.shape(Xr.propTypes),e2={autoFocus:w.bool,backdrop:w.bool,backdropClassName:w.string,backdropTransition:$y,children:w.node,className:w.string,container:Va,cssModule:w.object,direction:w.oneOf(["start","end","bottom","top"]),fade:w.bool,innerRef:w.oneOfType([w.object,w.string,w.func]),isOpen:w.bool,keyboard:w.bool,labelledBy:w.string,offcanvasTransition:$y,onClosed:w.func,onEnter:w.func,onExit:w.func,onOpened:w.func,returnFocusAfterClose:w.bool,role:w.string,scrollable:w.bool,toggle:w.func,trapFocus:w.bool,unmountOnClose:w.bool,zIndex:w.oneOfType([w.number,w.string])},L7=Object.keys(e2),R7={isOpen:!1,autoFocus:!0,direction:"start",scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:vh,onClosed:vh,offcanvasTransition:{timeout:Ms.Offcanvas},backdropTransition:{mountOnEnter:!0,timeout:Ms.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body",trapFocus:!1};class Yi extends Ft.Component{constructor(r){super(r),this._element=null,this._originalBodyPadding=null,this.getFocusableChildren=this.getFocusableChildren.bind(this),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleBackdropMouseDown=this.handleBackdropMouseDown.bind(this),this.handleEscape=this.handleEscape.bind(this),this.handleTab=this.handleTab.bind(this),this.onOpened=this.onOpened.bind(this),this.onClosed=this.onClosed.bind(this),this.manageFocusAfterClose=this.manageFocusAfterClose.bind(this),this.clearBackdropAnimationTimeout=this.clearBackdropAnimationTimeout.bind(this),this.trapFocus=this.trapFocus.bind(this),this.state={isOpen:!1}}componentDidMount(){const{isOpen:r,autoFocus:a,onEnter:u}=this.props;r&&(this.init(),this.setState({isOpen:!0}),a&&this.setFocus()),u&&u(),document.addEventListener("focus",this.trapFocus,!0),this._isMounted=!0}componentDidUpdate(r,a){if(this.props.isOpen&&!r.isOpen){this.init(),this.setState({isOpen:!0});return}this.props.autoFocus&&this.state.isOpen&&!a.isOpen&&this.setFocus(),this._element&&r.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}componentWillUnmount(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),document.removeEventListener("focus",this.trapFocus,!0),this._isMounted=!1}trapFocus(r){if(!this.props.trapFocus||!this._element||this._dialog===r.target||this.offcanvasIndex<Yi.openCount-1)return;const a=this.getFocusableChildren();for(let u=0;u<a.length;u++)if(a[u]===r.target)return;a.length>0&&(r.preventDefault(),r.stopPropagation(),a[0].focus())}onOpened(r,a){this.props.onOpened(),(this.props.offcanvasTransition.onEntered||vh)(r,a)}onClosed(r){const{unmountOnClose:a}=this.props;this.props.onClosed(),(this.props.offcanvasTransition.onExited||vh)(r),a&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})}setFocus(){this._dialog&&typeof this._dialog.focus=="function"&&this._dialog.focus()}getFocusableChildren(){return this._element.querySelectorAll(D_.join(", "))}getFocusedChild(){let r;const a=this.getFocusableChildren();try{r=document.activeElement}catch{r=a[0]}return r}handleBackdropClick(r){if(r.target===this._mouseDownElement){r.stopPropagation();const a=this._backdrop;if(!this.props.isOpen||this.props.backdrop!==!0)return;a&&r.target===a&&this.props.toggle&&this.props.toggle(r)}}handleTab(r){if(r.which!==9||this.offcanvasIndex<Yi.openCount-1)return;const a=this.getFocusableChildren(),u=a.length;if(u===0)return;const m=this.getFocusedChild();let y=0;for(let k=0;k<u;k+=1)if(a[k]===m){y=k;break}r.shiftKey&&y===0?(r.preventDefault(),a[u-1].focus()):!r.shiftKey&&y===u-1&&(r.preventDefault(),a[0].focus())}handleBackdropMouseDown(r){this._mouseDownElement=r.target}handleEscape(r){this.props.isOpen&&r.keyCode===tr.esc&&this.props.toggle&&this.props.keyboard&&(r.preventDefault(),r.stopPropagation(),this.props.toggle(r))}init(){try{this._triggeringElement=document.activeElement}catch{this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=oc(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=T_(),z_(),Yi.openCount===0&&this.props.backdrop&&!this.props.scrollable&&(document.body.style.overflow="hidden"),this.offcanvasIndex=Yi.openCount,Yi.openCount+=1}destroy(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()}manageFocusAfterClose(){if(this._triggeringElement){const{returnFocusAfterClose:r}=this.props;this._triggeringElement.focus&&r&&this._triggeringElement.focus(),this._triggeringElement=null}}close(){this.manageFocusAfterClose(),Yi.openCount=Math.max(0,Yi.openCount-1),document.body.style.overflow=null,S0(this._originalBodyPadding)}render(){const{direction:r,unmountOnClose:a}=this.props;if(!!this._element&&(this.state.isOpen||!a)){const u=!!this._element&&!this.state.isOpen&&!a;this._element.style.display=u?"none":"block";const{className:m,backdropClassName:y,cssModule:k,isOpen:c,backdrop:P,role:F,labelledBy:Z,style:H}=this.props,V={onKeyUp:this.handleEscape,onKeyDown:this.handleTab,"aria-labelledby":Z,role:F,tabIndex:"-1"},pe=this.props.fade,de=Et(Et(Et({},Xr.defaultProps),this.props.offcanvasTransition),{},{baseClass:pe?this.props.offcanvasTransition.baseClass:"",timeout:pe?this.props.offcanvasTransition.timeout:0}),ye=Et(Et(Et({},Xr.defaultProps),this.props.backdropTransition),{},{baseClass:pe?this.props.backdropTransition.baseClass:"",timeout:pe?this.props.backdropTransition.timeout:0}),Me=P&&(pe?ke(Xr,{...ye,in:c&&!!P,innerRef:K=>{this._backdrop=K},cssModule:k,className:_t(wt("offcanvas-backdrop",y),k),onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown}):ke("div",{className:_t(wt("offcanvas-backdrop","show",y),k),onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown})),re=yi(this.props,L7);return Wt(X_,{node:this._element,children:[ke(Xr,{...re,...V,...de,in:c,onEntered:this.onOpened,onExited:this.onClosed,cssModule:k,className:_t(wt("offcanvas",m,`offcanvas-${r}`),k),innerRef:K=>{this._dialog=K},style:Et(Et({},H),{},{visibility:c?"visible":"hidden"}),children:this.props.children}),Me]})}return null}clearBackdropAnimationTimeout(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)}}Yi.propTypes=e2;Yi.defaultProps=R7;Yi.openCount=0;w.string,w.object;w.node,w.string,w.object,w.string,w.object,w.func;w.node,w.string,w.string,w.object,w.string,w.string;w.bool,w.node,w.string,w.object,w.bool;w.string,w.node,w.string,w.object,w.bool,w.bool,w.bool,w.bool;const O7=Ft.createContext({}),t2={tag:je,activeTab:w.any,className:w.string,cssModule:w.object},B7={tag:"div"};class r2 extends Ue.exports.Component{static getDerivedStateFromProps(r,a){return a.activeTab!==r.activeTab?{activeTab:r.activeTab}:null}constructor(r){super(r),this.state={activeTab:this.props.activeTab}}render(){const{className:r,cssModule:a,tag:u}=this.props,m=yi(this.props,Object.keys(t2)),y=_t(wt("tab-content",r),a);return ke(O7.Provider,{value:{activeTabId:this.state.activeTab},children:ke(u,{...m,className:y})})}}r2.propTypes=t2;r2.defaultProps=B7;w.string,w.object,w.any;w.node,w.string,w.string,w.string,w.object,w.string,w.bool,w.bool,w.func,w.shape(Xr.propTypes),w.oneOfType([w.object,w.string,w.func]);Et(Et({},Xr.defaultProps),{},{unmountOnExit:!0});w.node,w.string,w.object,w.bool,w.bool,w.shape(Xr.propTypes),w.oneOfType([w.object,w.string,w.func]);Et(Et({},Xr.defaultProps),{},{unmountOnExit:!0});w.string,w.object,w.oneOfType([w.object,w.string,w.func]);w.oneOfType([w.string,w.node]),w.func,w.string,w.object,w.node,w.string,w.oneOfType([w.string,w.number]),w.object;w.bool,w.bool,w.string,w.bool,w.any,w.object;w.any,w.object;w.any,w.object;const F7=["className","cssModule","tag","type"],N7={tag:je,className:w.string,cssModule:w.object,type:w.string},U7={tag:"ul"},G0=Ue.exports.forwardRef((e,r)=>{const{className:a,cssModule:u,tag:m,type:y}=e,k=Or(e,F7),c=_t(wt(a,y?`list-${y}`:!1),u);return ke(m,{...k,className:c,ref:r})});G0.name="List";G0.propTypes=N7;G0.defaultProps=U7;const V7=["className","cssModule","tag"],j7={tag:je,className:w.string,cssModule:w.object},$7={tag:"li"},q0=Ue.exports.forwardRef((e,r)=>{const{className:a,cssModule:u,tag:m}=e,y=Or(e,V7),k=_t(wt(a,"list-inline-item"),u);return ke(m,{...y,className:k,ref:r})});q0.name="ListInlineItem";q0.propTypes=j7;q0.defaultProps=$7;const G7=["defaultOpen"];class q7 extends Ue.exports.Component{constructor(r){super(r),this.state={isOpen:r.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState({isOpen:!this.state.isOpen})}render(){return ke(F_,{isOpen:this.state.isOpen,toggle:this.toggle,...yi(this.props,G7)})}}q7.propTypes=Et({defaultOpen:w.bool},F_.propTypes);const Z7=["toggleEvents","defaultOpen"],H7={defaultOpen:w.bool,toggler:w.string.isRequired,toggleEvents:w.arrayOf(w.string)},W7={toggleEvents:ok};class n2 extends Ue.exports.Component{constructor(r){super(r),this.togglers=null,this.removeEventListeners=null,this.toggle=this.toggle.bind(this),this.state={isOpen:r.defaultOpen||!1}}componentDidMount(){this.togglers=A_(this.props.toggler),this.togglers.length&&(this.removeEventListeners=ak(this.togglers,this.toggle,this.props.toggleEvents))}componentWillUnmount(){this.togglers.length&&this.removeEventListeners&&this.removeEventListeners()}toggle(r){this.setState(({isOpen:a})=>({isOpen:!a})),r.preventDefault()}render(){return ke(e7,{isOpen:this.state.isOpen,...yi(this.props,Z7)})}}n2.propTypes=H7;n2.defaultProps=W7;const X7=["defaultOpen"];class K7 extends Ue.exports.Component{constructor(r){super(r),this.state={isOpen:r.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(r){const a=!this.state.isOpen;this.setState({isOpen:a},()=>{this.props.onToggle&&this.props.onToggle(r,a)})}render(){return ke(D0,{isOpen:this.state.isOpen,toggle:this.toggle,...yi(this.props,X7)})}}K7.propTypes=Et({defaultOpen:w.bool,onToggle:w.func},D0.propTypes);const Y7=["defaultOpen"];class J7 extends Ue.exports.Component{constructor(r){super(r),this.state={isOpen:r.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState({isOpen:!this.state.isOpen})}render(){return ke(Y_,{isOpen:this.state.isOpen,toggle:this.toggle,...yi(this.props,Y7)})}}J7.propTypes=Et({defaultOpen:w.bool},Y_.propTypes);w.string,w.string,w.string,w.string,w.object,w.string;Et(Et({},Pi.propTypes),{},{color:w.string,tag:je,animation:w.oneOf(["glow","wave"]),innerRef:w.oneOfType([w.object,w.func,w.string]),size:w.oneOf(["lg","sm","xs"])});w.string,w.string,w.bool,w.string;(()=>{if(typeof window!="object"||typeof window.CustomEvent=="function")return;const e=(r,a)=>{a=a||{bubbles:!1,cancelable:!1,detail:null};var u=document.createEvent("CustomEvent");return u.initCustomEvent(r,a.bubbles,a.cancelable,a.detail),u};window.CustomEvent=e})();(()=>{if(typeof Object.values=="function")return;Object.values=r=>Object.keys(r).map(a=>r[a])})();function i2(e){var r,a,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(a=i2(e[r]))&&(u&&(u+=" "),u+=a);else for(r in e)e[r]&&(u&&(u+=" "),u+=r);return u}function wu(){for(var e=0,r,a,u="";e<arguments.length;)(r=arguments[e++])&&(a=i2(r))&&(u&&(u+=" "),u+=a);return u}var o2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Gy=Ft.createContext&&Ft.createContext(o2),Fa=globalThis&&globalThis.__assign||function(){return Fa=Object.assign||function(e){for(var r,a=1,u=arguments.length;a<u;a++){r=arguments[a];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(e[m]=r[m])}return e},Fa.apply(this,arguments)},Q7=globalThis&&globalThis.__rest||function(e,r){var a={};for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&r.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(e);m<u.length;m++)r.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(e,u[m])&&(a[u[m]]=e[u[m]]);return a};function a2(e){return e&&e.map(function(r,a){return Ft.createElement(r.tag,Fa({key:a},r.attr),a2(r.child))})}function pp(e){return function(r){return Ft.createElement(e8,Fa({attr:Fa({},e.attr)},r),a2(e.child))}}function e8(e){var r=function(a){var u=e.attr,m=e.size,y=e.title,k=Q7(e,["attr","size","title"]),c=m||a.size||"1em",P;return a.className&&(P=a.className),e.className&&(P=(P?P+" ":"")+e.className),Ft.createElement("svg",Fa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,k,{className:P,style:Fa(Fa({color:e.color||a.color},a.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),y&&Ft.createElement("title",null,y),e.children)};return Gy!==void 0?Ft.createElement(Gy.Consumer,null,function(a){return r(a)}):r(o2)}function t8(e){return pp({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(e)}function r8(e){return pp({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"}}]})(e)}function n8(e){return pp({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 32v448h448V32H0zm372.2 106.1l-24 23c-2.1 1.6-3.1 4.2-2.7 6.7v169.3c-.4 2.6.6 5.2 2.7 6.7l23.5 23v5.1h-118V367l24.3-23.6c2.4-2.4 2.4-3.1 2.4-6.7V199.8l-67.6 171.6h-9.1L125 199.8v115c-.7 4.8 1 9.7 4.4 13.2l31.6 38.3v5.1H71.2v-5.1l31.6-38.3c3.4-3.5 4.9-8.4 4.1-13.2v-133c.4-3.7-1-7.3-3.8-9.8L75 138.1V133h87.3l67.4 148L289 133.1h83.2v5z"}}]})(e)}function i8(e){return pp({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(e)}function o8(e){return pp({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}},{tag:"path",attr:{d:"M14 17H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}}]})(e)}const a8="modulepreload",qy={},s8="/",l8=function(r,a){return!a||a.length===0?r():Promise.all(a.map(u=>{if(u=`${s8}${u}`,u in qy)return;qy[u]=!0;const m=u.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${y}`))return;const k=document.createElement("link");if(k.rel=m?"stylesheet":a8,m||(k.as="script",k.crossOrigin=""),k.href=u,document.head.appendChild(k),m)return new Promise((c,P)=>{k.addEventListener("load",c),k.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>r())},c8=Ue.exports.createContext(null);function u8(e){const r=e.clone();return r.pixelsToGLUnits=e.pixelsToGLUnits,r}function Zy(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Hy(e,r){const a=r.viewState||r;let u=!1;if("longitude"in a&&"latitude"in a){const m=e.center;e.center=new m.constructor(a.longitude,a.latitude),u=u||m!==e.center}if("zoom"in a){const m=e.zoom;e.zoom=a.zoom,u=u||m!==e.zoom}if("bearing"in a){const m=e.bearing;e.bearing=a.bearing,u=u||m!==e.bearing}if("pitch"in a){const m=e.pitch;e.pitch=a.pitch,u=u||m!==e.pitch}return a.padding&&!e.isPaddingEqual(a.padding)&&(u=!0,e.padding=a.padding),u}const p8=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Wy(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const r={};for(const u of e.layers)r[u.id]=u;const a=e.layers.map(u=>{const m=r[u.ref];let y=null;if("interactive"in u&&(y={...u},delete y.interactive),m){y=y||{...u},delete y.ref;for(const k of p8)k in m&&(y[k]=m[k])}return y||u});return{...e,layers:a}}function d8(e,r){const a=Array.isArray(e)?e[0]:e?e.x:0,u=Array.isArray(e)?e[1]:e?e.y:0,m=Array.isArray(r)?r[0]:r?r.x:0,y=Array.isArray(r)?r[1]:r?r.y:0;return a===m&&u===y}function Ta(e,r){if(e===r)return!0;if(!e||!r)return!1;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(!Ta(e[a],r[a]))return!1;return!0}else if(Array.isArray(r))return!1;if(typeof e=="object"&&typeof r=="object"){const a=Object.keys(e),u=Object.keys(r);if(a.length!==u.length)return!1;for(const m of a)if(!r.hasOwnProperty(m)||!Ta(e[m],r[m]))return!1;return!0}return!1}const Xy={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Sf={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Ky={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},h8=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],m8=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ac{constructor(r,a,u){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=m=>{const y=this.props[Ky[m.type]];y&&y(m)},this._onPointerEvent=m=>{(m.type==="mousemove"||m.type==="mouseout")&&this._updateHover(m);const y=this.props[Xy[m.type]];if(y){if(this.props.interactiveLayerIds&&m.type!=="mouseover"&&m.type!=="mouseout"){const k=this._hoveredFeatures||this._map.queryRenderedFeatures(m.point,{layers:this.props.interactiveLayerIds});m.features=k}y(m),delete m.features}},this._onCameraEvent=m=>{if(!this._internalUpdate){const y=this.props[Sf[m.type]];y&&y(m)}m.type in this._deferredEvents&&(this._deferredEvents[m.type]=!1)},this._MapClass=r,this.props=a,this._initialize(u)}get map(){return this._map}get transform(){return this._renderTransform}setProps(r){const a=this.props;this.props=r;const u=this._updateSettings(r,a);u&&this._createShadowTransform(this._map);const m=this._updateSize(r),y=this._updateViewState(r,!0);this._updateStyle(r,a),this._updateStyleComponents(r,a),this._updateHandlers(r,a),(u||m||y&&!this._map.isMoving())&&this.redraw()}static reuse(r,a){const u=ac.savedMaps.pop();if(!u)return null;const m=u.map,y=m.getContainer();for(a.className=y.className;y.childNodes.length>0;)a.appendChild(y.childNodes[0]);return m._container=a,r.initialViewState&&u._updateViewState(r.initialViewState,!1),m.resize(),u.setProps({...r,styleDiffing:!1}),m.isStyleLoaded()?m.fire("load"):m.once("styledata",()=>m.fire("load")),u}_initialize(r){const{props:a}=this,u={...a,...a.initialViewState,accessToken:a.mapboxAccessToken||f8()||null,container:r,style:Wy(a.mapStyle)},m=u.initialViewState||u.viewState||u;if(Object.assign(u,{center:[m.longitude||0,m.latitude||0],zoom:m.zoom||0,pitch:m.pitch||0,bearing:m.bearing||0}),a.gl){const F=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=F,a.gl)}const y=new this._MapClass(u);m.padding&&y.setPadding(m.padding),a.cursor&&(y.getCanvas().style.cursor=a.cursor),this._createShadowTransform(y);const k=y._render;y._render=F=>{this._inRender=!0,k.call(y,F),this._inRender=!1};const c=y._renderTaskQueue.run;y._renderTaskQueue.run=F=>{c.call(y._renderTaskQueue,F),this._onBeforeRepaint()},y.on("render",()=>this._onAfterRepaint());const P=y.fire;y.fire=this._fireEvent.bind(this,P),y.on("resize",()=>{this._renderTransform.resize(y.transform.width,y.transform.height)}),y.on("styledata",()=>this._updateStyleComponents(this.props,{})),y.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const F in Xy)y.on(F,this._onPointerEvent);for(const F in Sf)y.on(F,this._onCameraEvent);for(const F in Ky)y.on(F,this._onEvent);this._map=y}recycle(){ac.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const r=this._map;!this._inRender&&r.style&&(r._frame&&(r._frame.cancel(),r._frame=null),r._render())}_createShadowTransform(r){const a=u8(r.transform);r.painter.transform=a;const u=a.updateElevation;u&&(a.updateElevation=m=>{r.transform.elevation=a.elevation,u.call(a,m),u.call(r.transform,m)}),this._renderTransform=a}_updateSize(r){const{viewState:a}=r;if(a){const u=this._map;if(a.width!==u.transform.width||a.height!==u.transform.height)return u.resize(),!0}return!1}_updateViewState(r,a){if(this._internalUpdate)return!1;const u=this._map,m=this._renderTransform,{zoom:y,pitch:k,bearing:c}=m,P=u.isMoving();P&&(m.cameraElevationReference="sea");const F=Hy(m,{...Zy(u.transform),...r});if(P&&(m.cameraElevationReference="ground"),F&&a){const Z=this._deferredEvents;Z.move=!0,Z.zoom||(Z.zoom=y!==m.zoom),Z.rotate||(Z.rotate=c!==m.bearing),Z.pitch||(Z.pitch=k!==m.pitch)}return P||Hy(u.transform,r),F}_updateSettings(r,a){const u=this._map;let m=!1;for(const y of h8)y in r&&!Ta(r[y],a[y])&&(m=!0,u[`set${y[0].toUpperCase()}${y.slice(1)}`](r[y]));return m}_updateStyle(r,a){if(r.cursor!==a.cursor&&(this._map.getCanvas().style.cursor=r.cursor),r.mapStyle!==a.mapStyle){const u={diff:r.styleDiffing};return"localIdeographFontFamily"in r&&(u.localIdeographFontFamily=r.localIdeographFontFamily),this._map.setStyle(Wy(r.mapStyle),u),!0}return!1}_updateStyleComponents(r,a){const u=this._map;let m=!1;return u.style.loaded()&&("light"in r&&!Ta(r.light,a.light)&&(m=!0,u.setLight(r.light)),"fog"in r&&!Ta(r.fog,a.fog)&&(m=!0,u.setFog(r.fog)),"terrain"in r&&!Ta(r.terrain,a.terrain)&&(!r.terrain||u.getSource(r.terrain.source))&&(m=!0,u.setTerrain(r.terrain))),m}_updateHandlers(r,a){const u=this._map;let m=!1;for(const y of m8){const k=r[y];Ta(k,a[y])||(m=!0,k?u[y].enable(k):u[y].disable())}return m}_updateHover(r){var a;const{props:u}=this;if(u.interactiveLayerIds&&(u.onMouseMove||u.onMouseEnter||u.onMouseLeave)){const y=r.type,k=((a=this._hoveredFeatures)===null||a===void 0?void 0:a.length)>0;let c;if(y==="mousemove")try{c=this._map.queryRenderedFeatures(r.point,{layers:u.interactiveLayerIds})}catch{c=[]}else c=[];const P=c.length>0;!P&&k&&(r.type="mouseleave",this._onPointerEvent(r)),this._hoveredFeatures=c,P&&!k&&(r.type="mouseenter",this._onPointerEvent(r)),r.type=y}else this._hoveredFeatures=null}_fireEvent(r,a,u){const m=this._map,y=m.transform,k=typeof a=="string"?a:a.type;return k==="move"&&this._updateViewState(this.props,!1),k in Sf&&(typeof a=="object"&&(a.viewState=Zy(y)),this._map.isMoving())?(m.transform=this._renderTransform,r.call(m,a,u),m.transform=y,m):(r.call(m,a,u),m)}_onBeforeRepaint(){const r=this._map;this._internalUpdate=!0;for(const u in this._deferredEvents)this._deferredEvents[u]&&r.fire(u);this._internalUpdate=!1;const a=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=a}}}ac.savedMaps=[];function f8(){let e=null;if(typeof location!="undefined"){const r=/access_token=([^&\/]*)/.exec(location.search);e=r&&r[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const g8=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function x8(e,r){if(!e)return null;const a=e.map,u={getMap:()=>a,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:m=>e.transform.locationPoint(r.LngLat.convert(m)),unproject:m=>e.transform.pointLocation(r.Point.convert(m))};for(const m of y8(a))!(m in u)&&!g8.includes(m)&&(u[m]=a[m].bind(a));return u}function y8(e){const r=new Set;let a=e;for(;a;){for(const u of Object.getOwnPropertyNames(a))u[0]!=="_"&&typeof e[u]=="function"&&u!=="fire"&&u!=="setEventedParent"&&r.add(u);a=Object.getPrototypeOf(a)}return Array.from(r)}const b8=typeof document!="undefined"?Ue.exports.useLayoutEffect:Ue.exports.useEffect,v8=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function _8(e,r){for(const a of v8)a in r&&(e[a]=r[a]);r.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r.RTLTextPlugin,a=>{a&&console.error(a)},!1)}const Gh=Ue.exports.createContext(null),w8={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},Z0=Ue.exports.forwardRef((e,r)=>{const a=Ue.exports.useContext(c8),[u,m]=Ue.exports.useState(null),y=Ue.exports.useRef(),{current:k}=Ue.exports.useRef({mapLib:null,map:null});Ue.exports.useEffect(()=>{const P=e.mapLib;let F=!0,Z;return Promise.resolve(P||l8(()=>import("./index.047c723f.js").then(function(H){return H.i}),[])).then(H=>{if(!!F){if(H.Map||(H=H.default),!H||!H.Map)throw new Error("Invalid mapLib");if(H.supported(e))_8(H,e),e.reuseMaps&&(Z=ac.reuse(e,y.current)),Z||(Z=new ac(H.Map,e,y.current)),k.map=x8(Z,H),k.mapLib=H,m(Z),a==null||a.onMapMount(k.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(H=>{e.onError({type:"error",target:null,originalEvent:null,error:H})}),()=>{F=!1,Z&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?Z.recycle():Z.destroy())}},[]),b8(()=>{u&&u.setProps(e)}),Ue.exports.useImperativeHandle(r,()=>k.map,[u]);const c=Ue.exports.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]);return Ue.exports.createElement("div",{id:e.id,ref:y,style:c},u&&Ue.exports.createElement(Gh.Provider,{value:k},e.children))});Z0.displayName="Map";Z0.defaultProps=w8;const k8=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ls(e,r){if(!e||!r)return;const a=e.style;for(const u in r){const m=r[u];Number.isFinite(m)&&!k8.test(u)?a[u]=`${m}px`:a[u]=m}}const E8={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function s2(e){const{map:r,mapLib:a}=Ue.exports.useContext(Gh),u=Ue.exports.useRef({props:e});u.current.props=e;const m=Ue.exports.useMemo(()=>{let y=!1;Ue.exports.Children.forEach(e.children,P=>{P&&(y=!0)});const k={...e,element:y?document.createElement("div"):null},c=new a.Marker(k).setLngLat([e.longitude,e.latitude]);return c.getElement().addEventListener("click",P=>{var F,Z;(Z=(F=u.current.props).onClick)===null||Z===void 0||Z.call(F,{type:"click",target:c,originalEvent:P})}),c.on("dragstart",P=>{var F,Z;const H=P;H.lngLat=m.getLngLat(),(Z=(F=u.current.props).onDragStart)===null||Z===void 0||Z.call(F,H)}),c.on("drag",P=>{var F,Z;const H=P;H.lngLat=m.getLngLat(),(Z=(F=u.current.props).onDrag)===null||Z===void 0||Z.call(F,H)}),c.on("dragend",P=>{var F,Z;const H=P;H.lngLat=m.getLngLat(),(Z=(F=u.current.props).onDragEnd)===null||Z===void 0||Z.call(F,H)}),c},[]);return Ue.exports.useEffect(()=>(m.addTo(r.getMap()),()=>{m.remove()}),[]),Ue.exports.useEffect(()=>{Ls(m.getElement(),e.style)},[e.style]),(m.getLngLat().lng!==e.longitude||m.getLngLat().lat!==e.latitude)&&m.setLngLat([e.longitude,e.latitude]),e.offset&&!d8(m.getOffset(),e.offset)&&m.setOffset(e.offset),m.isDraggable()!==e.draggable&&m.setDraggable(e.draggable),m.getRotation()!==e.rotation&&m.setRotation(e.rotation),m.getRotationAlignment()!==e.rotationAlignment&&m.setRotationAlignment(e.rotationAlignment),m.getPitchAlignment()!==e.pitchAlignment&&m.setPitchAlignment(e.pitchAlignment),m.getPopup()!==e.popup&&m.setPopup(e.popup),lc.exports.createPortal(e.children,m.getElement())}s2.defaultProps=E8;var S8=Ue.exports.memo(s2);function Yy(e){return new Set(e?e.trim().split(/\s+/):[])}function C8(e){const{map:r,mapLib:a}=Ue.exports.useContext(Gh),u=Ue.exports.useMemo(()=>document.createElement("div"),[]),m=Ue.exports.useRef({props:e});m.current.props=e;const y=Ue.exports.useMemo(()=>{const k={...e},c=new a.Popup(k).setLngLat([e.longitude,e.latitude]);return c.once("open",P=>{var F,Z;(Z=(F=m.current.props).onOpen)===null||Z===void 0||Z.call(F,P)}),c},[]);if(Ue.exports.useEffect(()=>{const k=c=>{var P,F;(F=(P=m.current.props).onClose)===null||F===void 0||F.call(P,c)};return y.on("close",k),y.setDOMContent(u).addTo(r.getMap()),()=>{y.off("close",k),y.isOpen()&&y.remove()}},[]),Ue.exports.useEffect(()=>{Ls(y.getElement(),e.style)},[e.style]),y.isOpen()&&((y.getLngLat().lng!==e.longitude||y.getLngLat().lat!==e.latitude)&&y.setLngLat([e.longitude,e.latitude]),e.offset&&!Ta(y.options.offset,e.offset)&&y.setOffset(e.offset),(y.options.anchor!==e.anchor||y.options.maxWidth!==e.maxWidth)&&(y.options.anchor=e.anchor,y.setMaxWidth(e.maxWidth)),y.options.className!==e.className)){const k=Yy(y.options.className),c=Yy(e.className);for(const P of k)c.has(P)||y.removeClassName(P);for(const P of c)k.has(P)||y.addClassName(P);y.options.className=e.className}return lc.exports.createPortal(e.children,u)}Ue.exports.memo(C8);function dp(e,r,a){const u=Ue.exports.useContext(Gh),m=Ue.exports.useMemo(()=>e(u),[]);return Ue.exports.useEffect(()=>{var y;const{map:k}=u;return k.hasControl(m)||k.addControl(m,(y=a||r)===null||y===void 0?void 0:y.position),()=>{typeof r=="function"&&r(u),k.hasControl(m)&&k.removeControl(m)}},[]),m}function T8(e){const r=dp(({mapLib:a})=>new a.AttributionControl(e),{position:e.position});return Ue.exports.useEffect(()=>{Ls(r._container,e.style)},[e.style]),null}Ue.exports.memo(T8);function z8(e){const r=dp(({mapLib:a})=>new a.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return Ue.exports.useEffect(()=>{Ls(r._controlContainer,e.style)},[e.style]),null}Ue.exports.memo(z8);const l2=Ue.exports.forwardRef((e,r)=>{const a=Ue.exports.useRef({props:e}),u=dp(({mapLib:m})=>{const y=new m.GeolocateControl(e),k=y._setupUI;return y._setupUI=c=>{y._container.hasChildNodes()||k(c)},y.on("geolocate",c=>{var P,F;(F=(P=a.current.props).onGeolocate)===null||F===void 0||F.call(P,c)}),y.on("error",c=>{var P,F;(F=(P=a.current.props).onError)===null||F===void 0||F.call(P,c)}),y.on("outofmaxbounds",c=>{var P,F;(F=(P=a.current.props).onOutOfMaxBounds)===null||F===void 0||F.call(P,c)}),y.on("trackuserlocationstart",c=>{var P,F;(F=(P=a.current.props).onTrackUserLocationStart)===null||F===void 0||F.call(P,c)}),y.on("trackuserlocationend",c=>{var P,F;(F=(P=a.current.props).onTrackUserLocationEnd)===null||F===void 0||F.call(P,c)}),y},{position:e.position});return a.current.props=e,Ue.exports.useImperativeHandle(r,()=>({trigger:()=>u.trigger()}),[]),Ue.exports.useEffect(()=>{Ls(u._container,e.style)},[e.style]),null});l2.displayName="GeolocateControl";Ue.exports.memo(l2);function I8(e){const r=dp(({mapLib:a})=>new a.NavigationControl(e),{position:e.position});return Ue.exports.useEffect(()=>{Ls(r._container,e.style)},[e.style]),null}Ue.exports.memo(I8);const P8={unit:"metric",maxWidth:100};function c2(e){const r=dp(({mapLib:a})=>new a.ScaleControl(e),{position:e.position});return(r.options.unit!==e.unit||r.options.maxWidth!==e.maxWidth)&&(r.options.maxWidth=e.maxWidth,r.setUnit(e.unit)),Ue.exports.useEffect(()=>{Ls(r._container,e.style)},[e.style]),null}c2.defaultProps=P8;Ue.exports.memo(c2);var u2={exports:{}};(function(e,r){(function(a,u){e.exports=u()})(e5,function(){var a,u,m;function y(c,P){if(!a)a=P;else if(!u)u=P;else{var F="var sharedChunk = {}; ("+a+")(sharedChunk); ("+u+")(sharedChunk);",Z={};a(Z),m=P(Z),typeof window!="undefined"&&(m.workerUrl=window.URL.createObjectURL(new Blob([F],{type:"text/javascript"})))}}y(["exports"],function(c){var P=F;function F(i,t,o,l){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=o,this.p2y=l}function Z(i,t,o,l){const d=new P(i,t,o,l);return function(g){return d.solve(g)}}F.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,l=0;l<8;l++){var d=this.sampleCurveX(o)-i;if(Math.abs(d)<t)return o;var g=this.sampleCurveDerivativeX(o);if(Math.abs(g)<1e-6)break;o-=d/g}var x=0,v=1;for(o=i,l=0;l<20&&(d=this.sampleCurveX(o),!(Math.abs(d-i)<t));l++)i>d?x=o:v=o,o=.5*(v-x)+x;return o},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};const H=Z(.25,.1,.25,1);function V(i,t,o){return Math.min(o,Math.max(t,i))}function pe(i,t,o){const l=o-t,d=((i-t)%l+l)%l+t;return d===t?o:d}function de(i,...t){for(const o of t)for(const l in o)i[l]=o[l];return i}let ye=1;function Me(i,t){i.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function re(i,t,o){const l={};for(const d in i)l[d]=t.call(o||this,i[d],d,i);return l}function K(i,t,o){const l={};for(const d in i)t.call(o||this,i[d],d,i)&&(l[d]=i[d]);return l}function ee(i){return Array.isArray(i)?i.map(ee):typeof i=="object"&&i?re(i,ee):i}const he={};function Te(i){he[i]||(typeof console!="undefined"&&console.warn(i),he[i]=!0)}function Pe(i,t,o){return(o.y-i.y)*(t.x-i.x)>(t.y-i.y)*(o.x-i.x)}function Le(i){let t=0;for(let o,l,d=0,g=i.length,x=g-1;d<g;x=d++)o=i[d],l=i[x],t+=(l.x-o.x)*(o.y+l.y);return t}function Be(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ht(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,d,g)=>{const x=d||g;return t[l]=!x||x.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let ot,St,qt=null;function Rt(i){if(qt==null){const t=i.navigator?i.navigator.userAgent:null;qt=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return qt}function Tr(i){return typeof ImageBitmap!="undefined"&&i instanceof ImageBitmap}const Kr={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(i){const t=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(i,t=0){const o=window.document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return o.width=i.width,o.height=i.height,l.drawImage(i,0,0,i.width,i.height),l.getImageData(-t,-t,i.width+2*t,i.height+2*t)},resolveURL:i=>(ot||(ot=document.createElement("a")),ot.href=i,ot.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(St==null&&(St=matchMedia("(prefers-reduced-motion: reduce)")),St.matches)}};var Qe=Yt;function Yt(i,t){this.x=i,this.y=t}Yt.prototype={clone:function(){return new Yt(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,o=i.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),o=Math.sin(i),l=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=l,this},_rotateAround:function(i,t){var o=Math.cos(i),l=Math.sin(i),d=t.y+l*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-l*(this.y-t.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Yt.convert=function(i){return i instanceof Yt?i:Array.isArray(i)?new Yt(i[0],i[1]):i};const qe={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},lt="mapbox-tiles";let dt,Ut,jt=500,Br=50;function hr(){typeof caches=="undefined"||dt||(dt=caches.open(lt))}let zr=1/0;const or={supported:!1,testSupport:function(i){!bi&&Yr&&(Jo?Vi(i):Fr=i)}};let Fr,Yr,bi=!1,Jo=!1;function Vi(i){const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Yr),i.isContextLost())return;or.supported=!0}catch{}i.deleteTexture(t),bi=!0}typeof document!="undefined"&&(Yr=document.createElement("img"),Yr.onload=function(){Fr&&Vi(Fr),Fr=null,Jo=!0},Yr.onerror=function(){bi=!0,Fr=null},Yr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Qo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qo);class _r extends Error{constructor(t,o,l,d){super(`AJAXError: ${o} (${t}): ${l}`),this.status=t,this.statusText=o,this.url=l,this.body=d}}const vi=Be()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function go(i,t){const o=new AbortController,l=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:vi(),signal:o.signal});let d=!1,g=!1;return i.type==="json"&&l.headers.set("Accept","application/json"),((x,v,E)=>{if(g)return;const T=Date.now();fetch(l).then(M=>M.ok?((D,R,B)=>{(i.type==="arrayBuffer"?D.arrayBuffer():i.type==="json"?D.json():D.text()).then(N=>{g||(R&&B&&function(J,Q,ce){if(hr(),!dt)return;const fe={status:Q.status,statusText:Q.statusText,headers:new Headers};Q.headers.forEach((we,Ie)=>fe.headers.set(Ie,we));const me=ht(Q.headers.get("Cache-Control")||"");me["no-store"]||(me["max-age"]&&fe.headers.set("Expires",new Date(ce+1e3*me["max-age"]).toUTCString()),new Date(fe.headers.get("Expires")).getTime()-ce<42e4||function(we,Ie){if(Ut===void 0)try{new Response(new ReadableStream),Ut=!0}catch{Ut=!1}Ut?Ie(we.body):we.blob().then(Ie)}(Q,we=>{const Ie=new Response(we,fe);hr(),dt&&dt.then(Ce=>Ce.put(function(Je){const at=Je.indexOf("?");return at<0?Je:Je.slice(0,at)}(J.url),Ie)).catch(Ce=>Te(Ce.message))}))}(l,R,B),d=!0,t(null,N,D.headers.get("Cache-Control"),D.headers.get("Expires")))}).catch(N=>{g||t(new Error(N.message))})})(M,null,T):M.blob().then(D=>t(new _r(M.status,M.statusText,i.url,D)))).catch(M=>{M.code!==20&&t(new Error(M.message))})})(),{cancel:()=>{g=!0,d||o.abort()}}}const _i=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(Be()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t);if(!Be()){const l=i.url.substring(0,i.url.indexOf("://"));return(qe.REGISTERED_PROTOCOLS[l]||go)(i,t)}}if(!(/^file:/.test(o=i.url)||/^file:/.test(vi())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return go(i,t);if(Be()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t,void 0,!0)}var o;return function(l,d){const g=new XMLHttpRequest;g.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const x in l.headers)g.setRequestHeader(x,l.headers[x]);return l.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=l.credentials==="include",g.onerror=()=>{d(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let x=g.response;if(l.type==="json")try{x=JSON.parse(g.response)}catch(v){return d(v)}d(null,x,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else{const x=new Blob([g.response],{type:g.getResponseHeader("Content-Type")});d(new _r(g.status,g.statusText,l.url,x))}},g.send(l.body),{cancel:()=>g.abort()}}(i,t)},In=function(i,t){return _i(de(i,{type:"arrayBuffer"}),t)};function ea(i){const t=window.document.createElement("a");return t.href=i,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const ri="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Gr,un;Gr=[],un=0;const no=function(i,t){if(or.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),un>=qe.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:i,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Gr.push(g),g}un++;let o=!1;const l=()=>{if(!o)for(o=!0,un--;Gr.length&&un<qe.MAX_PARALLEL_IMAGE_REQUESTS;){const g=Gr.shift(),{requestParameters:x,callback:v,cancelled:E}=g;E||(g.cancel=no(x,v).cancel)}},d=In(i,(g,x,v,E)=>{l(),g?t(g):x&&function(T,M){typeof createImageBitmap=="function"?function(D,R){const B=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(B).then(N=>{R(null,N)}).catch(N=>{R(new Error(`Could not load image because of ${N.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(T,M):function(D,R){const B=new Image;B.onload=()=>{R(null,B),URL.revokeObjectURL(B.src),B.onload=null,window.requestAnimationFrame(()=>{B.src=ri})},B.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const N=new Blob([new Uint8Array(D)],{type:"image/png"});B.src=D.byteLength?URL.createObjectURL(N):ri}(T,M)}(x,(T,M)=>{T!=null?t(T):M!=null&&t(null,M,{cacheControl:v,expires:E})})});return{cancel:()=>{d.cancel(),l()}}};function zt(i,t,o){o[i]&&o[i].indexOf(t)!==-1||(o[i]=o[i]||[],o[i].push(t))}function ni(i,t,o){if(o&&o[i]){const l=o[i].indexOf(t);l!==-1&&o[i].splice(l,1)}}class ii{constructor(t,o={}){de(this,o),this.type=t}}class wi extends ii{constructor(t,o={}){super("error",de({error:t},o))}}class io{on(t,o){return this._listeners=this._listeners||{},zt(t,o,this._listeners),this}off(t,o){return ni(t,o,this._listeners),ni(t,o,this._oneTimeListeners),this}once(t,o){return this._oneTimeListeners=this._oneTimeListeners||{},zt(t,o,this._oneTimeListeners),this}fire(t,o){typeof t=="string"&&(t=new ii(t,o||{}));const l=t.type;if(this.listens(l)){t.target=this;const d=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const v of d)v.call(this,t);const g=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const v of g)ni(l,v,this._oneTimeListeners),v.call(this,t);const x=this._eventedParent;x&&(de(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(t))}else t instanceof wi&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class $e{constructor(t,o,l,d){this.message=(t?`${t}: `:"")+l,d&&(this.identifier=d),o!=null&&o.__line__&&(this.line=o.__line__)}}function xo(i){const t=i.value;return t?[new $e(i.key,t,"constants have been deprecated as of v8")]:[]}function ji(i,...t){for(const o of t)for(const l in o)i[l]=o[l];return i}function Jt(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function $n(i){if(Array.isArray(i))return i.map($n);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const o in i)t[o]=$n(i[o]);return t}return Jt(i)}class pn extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class yo{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[l,d]of o)this.bindings[l]=d}concat(t){return new yo(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const nr={kind:"null"},Ne={kind:"number"},kt={kind:"string"},yt={kind:"boolean"},dn={kind:"color"},oi={kind:"object"},bt={kind:"value"},bo={kind:"collator"},ai={kind:"formatted"},$i={kind:"resolvedImage"};function Ir(i,t){return{kind:"array",itemType:i,N:t}}function Qt(i){if(i.kind==="array"){const t=Qt(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const Gn=[nr,Ne,kt,yt,dn,ai,oi,Ir(bt),$i];function vo(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!vo(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const o of Gn)if(!vo(o,t))return null}}return`Expected ${Qt(i)} but found ${Qt(t)} instead.`}function Nr(i,t){return t.some(o=>o.kind===i.kind)}function si(i,t){return t.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}var li,Za={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ta(i){return(i=Math.round(i))<0?0:i>255?255:i}function ra(i){return ta(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function G(i){return(t=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:t>1?1:t;var t}function z(i,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(t-i)*o*6:2*o<1?t:3*o<2?i+(t-i)*(2/3-o)*6:i}try{li={}.parseCSSColor=function(i){var t,o=i.replace(/ /g,"").toLowerCase();if(o in Za)return Za[o].slice();if(o[0]==="#")return o.length===4?(t=parseInt(o.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:o.length===7&&(t=parseInt(o.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=o.indexOf("("),d=o.indexOf(")");if(l!==-1&&d+1===o.length){var g=o.substr(0,l),x=o.substr(l+1,d-(l+1)).split(","),v=1;switch(g){case"rgba":if(x.length!==4)return null;v=G(x.pop());case"rgb":return x.length!==3?null:[ra(x[0]),ra(x[1]),ra(x[2]),v];case"hsla":if(x.length!==4)return null;v=G(x.pop());case"hsl":if(x.length!==3)return null;var E=(parseFloat(x[0])%360+360)%360/360,T=G(x[1]),M=G(x[2]),D=M<=.5?M*(T+1):M+T-M*T,R=2*M-D;return[ta(255*z(R,D,E+1/3)),ta(255*z(R,D,E)),ta(255*z(R,D,E-1/3)),v];default:return null}}return null}}catch{}class A{constructor(t,o,l,d=1){this.r=t,this.g=o,this.b=l,this.a=d}static parse(t){if(!t)return;if(t instanceof A)return t;if(typeof t!="string")return;const o=li(t);return o?new A(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[t,o,l,d]=this.toArray();return`rgba(${Math.round(t)},${Math.round(o)},${Math.round(l)},${d})`}toArray(){const{r:t,g:o,b:l,a:d}=this;return d===0?[0,0,0,0]:[255*t/d,255*o/d,255*l/d,d]}}A.black=new A(0,0,0,1),A.white=new A(1,1,1,1),A.transparent=new A(0,0,0,0),A.red=new A(1,0,0,1);class U{constructor(t,o,l){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class q{constructor(t,o,l,d,g){this.text=t,this.image=o,this.scale=l,this.fontStack=d,this.textColor=g}}class W{constructor(t){this.sections=t}static fromString(t){return new W([new q(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof W?t:W.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const o of this.sections){if(o.image){t.push(["image",o.image.name]);continue}t.push(o.text);const l={};o.fontStack&&(l["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(l["font-scale"]=o.scale),o.textColor&&(l["text-color"]=["rgba"].concat(o.textColor.toArray())),t.push(l)}return t}}class ie{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ie({name:t,available:!1}):null}serialize(){return["image",this.name]}}function te(i,t,o,l){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[i,t,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[i,t,o,l]:[i,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ne(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof A||i instanceof U||i instanceof W||i instanceof ie)return!0;if(Array.isArray(i)){for(const t of i)if(!ne(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!ne(i[t]))return!1;return!0}return!1}function oe(i){if(i===null)return nr;if(typeof i=="string")return kt;if(typeof i=="boolean")return yt;if(typeof i=="number")return Ne;if(i instanceof A)return dn;if(i instanceof U)return bo;if(i instanceof W)return ai;if(i instanceof ie)return $i;if(Array.isArray(i)){const t=i.length;let o;for(const l of i){const d=oe(l);if(o){if(o===d)continue;o=bt;break}o=d}return Ir(o||bt,t)}return oi}function ve(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof A||i instanceof W||i instanceof ie?i.toString():JSON.stringify(i)}class ze{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ne(t[1]))return o.error("invalid value");const l=t[1];let d=oe(l);const g=o.expectedType;return d.kind!=="array"||d.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(d=g),new ze(d,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof A?["rgba"].concat(this.value.toArray()):this.value instanceof W?this.value.serialize():this.value}}class ge{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const tt={string:kt,number:Ne,boolean:yt,object:oi};class Xe{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let l,d=1;const g=t[0];if(g==="array"){let v,E;if(t.length>2){const T=t[1];if(typeof T!="string"||!(T in tt)||T==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);v=tt[T],d++}else v=bt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);E=t[2],d++}l=Ir(v,E)}else l=tt[g];const x=[];for(;d<t.length;d++){const v=o.parse(t[d],d,bt);if(!v)return null;x.push(v)}return new Xe(l,x)}evaluate(t){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(t);if(!vo(this.type,oe(l)))return l;if(o===this.args.length-1)throw new ge(`Expected value to be of type ${Qt(this.type)}, but found ${Qt(oe(l))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,o=[t.kind];if(t.kind==="array"){const l=t.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){o.push(l.kind);const d=t.N;(typeof d=="number"||this.args.length>1)&&o.push(d)}}return o.concat(this.args.map(l=>l.serialize()))}}class nt{constructor(t){this.type=ai,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const l=t[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const d=[];let g=!1;for(let x=1;x<=t.length-1;++x){const v=t[x];if(g&&typeof v=="object"&&!Array.isArray(v)){g=!1;let E=null;if(v["font-scale"]&&(E=o.parse(v["font-scale"],1,Ne),!E))return null;let T=null;if(v["text-font"]&&(T=o.parse(v["text-font"],1,Ir(kt)),!T))return null;let M=null;if(v["text-color"]&&(M=o.parse(v["text-color"],1,dn),!M))return null;const D=d[d.length-1];D.scale=E,D.font=T,D.textColor=M}else{const E=o.parse(t[x],1,bt);if(!E)return null;const T=E.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,d.push({content:E,scale:null,font:null,textColor:null})}}return new nt(d)}evaluate(t){return new W(this.sections.map(o=>{const l=o.content.evaluate(t);return oe(l)===$i?new q("",l,null,null,null):new q(ve(l),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const o of this.sections){t.push(o.content.serialize());const l={};o.scale&&(l["font-scale"]=o.scale.serialize()),o.font&&(l["text-font"]=o.font.serialize()),o.textColor&&(l["text-color"]=o.textColor.serialize()),t.push(l)}return t}}class ct{constructor(t){this.type=$i,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const l=o.parse(t[1],1,kt);return l?new ct(l):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),l=ie.fromString(o);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(o)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Lt={"to-boolean":yt,"to-color":dn,"to-number":Ne,"to-string":kt};class Pt{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const l=t[0];if((l==="to-boolean"||l==="to-string")&&t.length!==2)return o.error("Expected one argument.");const d=Lt[l],g=[];for(let x=1;x<t.length;x++){const v=o.parse(t[x],x,bt);if(!v)return null;g.push(v)}return new Pt(d,g)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let o,l;for(const d of this.args){if(o=d.evaluate(t),l=null,o instanceof A)return o;if(typeof o=="string"){const g=t.parseColor(o);if(g)return g}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:te(o[0],o[1],o[2],o[3]),!l))return new A(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ge(l||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const l of this.args){if(o=l.evaluate(t),o===null)return 0;const d=Number(o);if(!isNaN(d))return d}throw new ge(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?W.fromString(ve(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?ie.fromString(ve(this.args[0].evaluate(t))):ve(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new nt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ct(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Ct=["Unknown","Point","LineString","Polygon"];class vt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ct[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=A.parse(t)),o}}class xt{constructor(t,o,l,d){this.name=t,this.type=o,this._evaluate=l,this.args=d}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,o){const l=t[0],d=xt.definitions[l];if(!d)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(d)?d[0]:d.type,x=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,v=x.filter(([T])=>!Array.isArray(T)||T.length===t.length-1);let E=null;for(const[T,M]of v){E=new Bs(o.registry,o.path,null,o.scope);const D=[];let R=!1;for(let B=1;B<t.length;B++){const N=t[B],J=Array.isArray(T)?T[B-1]:T.type,Q=E.parse(N,1+D.length,J);if(!Q){R=!0;break}D.push(Q)}if(!R)if(Array.isArray(T)&&T.length!==D.length)E.error(`Expected ${T.length} arguments, but found ${D.length} instead.`);else{for(let B=0;B<D.length;B++){const N=Array.isArray(T)?T[B]:T.type,J=D[B];E.concat(B+1).checkSubtype(N,J.type)}if(E.errors.length===0)return new xt(l,g,M,D)}}if(v.length===1)o.errors.push(...E.errors);else{const T=(v.length?v:x).map(([D])=>{return R=D,Array.isArray(R)?`(${R.map(Qt).join(", ")})`:`(${Qt(R.type)}...)`;var R}).join(" | "),M=[];for(let D=1;D<t.length;D++){const R=o.parse(t[D],1+M.length);if(!R)return null;M.push(Qt(R.type))}o.error(`Expected arguments of type ${T}, but found (${M.join(", ")}) instead.`)}return null}static register(t,o){xt.definitions=o;for(const l in o)t[l]=xt}}class wr{constructor(t,o,l){this.type=bo,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const l=t[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const d=o.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,yt);if(!d)return null;const g=o.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,yt);if(!g)return null;let x=null;return l.locale&&(x=o.parse(l.locale,1,kt),!x)?null:new wr(d,g,x)}evaluate(t){return new U(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const xr=8192;function qr(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function Jr(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function pc(i,t){const o=(180+i[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,d=Math.pow(2,t.z);return[Math.round(o*d*xr),Math.round(l*d*xr)]}function dc(i,t,o){const l=i[0]-t[0],d=i[1]-t[1],g=i[0]-o[0],x=i[1]-o[1];return l*x-g*d==0&&l*g<=0&&d*x<=0}function er(i,t){let o=!1;for(let x=0,v=t.length;x<v;x++){const E=t[x];for(let T=0,M=E.length;T<M-1;T++){if(dc(i,E[T],E[T+1]))return!1;(d=E[T])[1]>(l=i)[1]!=(g=E[T+1])[1]>l[1]&&l[0]<(g[0]-d[0])*(l[1]-d[1])/(g[1]-d[1])+d[0]&&(o=!o)}}var l,d,g;return o}function qh(i,t){for(let o=0;o<t.length;o++)if(er(i,t[o]))return!0;return!1}function hc(i,t,o,l){const d=l[0]-o[0],g=l[1]-o[1],x=(i[0]-o[0])*g-d*(i[1]-o[1]),v=(t[0]-o[0])*g-d*(t[1]-o[1]);return x>0&&v<0||x<0&&v>0}function Zh(i,t,o){for(const T of o)for(let M=0;M<T.length-1;++M)if((v=[(x=T[M+1])[0]-(g=T[M])[0],x[1]-g[1]])[0]*(E=[(d=t)[0]-(l=i)[0],d[1]-l[1]])[1]-v[1]*E[0]!=0&&hc(l,d,g,x)&&hc(g,x,l,d))return!0;var l,d,g,x,v,E;return!1}function mc(i,t){for(let o=0;o<i.length;++o)if(!er(i[o],t))return!1;for(let o=0;o<i.length-1;++o)if(Zh(i[o],i[o+1],t))return!1;return!0}function hp(i,t){for(let o=0;o<t.length;o++)if(mc(i,t[o]))return!0;return!1}function fc(i,t,o){const l=[];for(let d=0;d<i.length;d++){const g=[];for(let x=0;x<i[d].length;x++){const v=pc(i[d][x],o);qr(t,v),g.push(v)}l.push(g)}return l}function gc(i,t,o){const l=[];for(let d=0;d<i.length;d++){const g=fc(i[d],t,o);l.push(g)}return l}function xc(i,t,o,l){if(i[0]<o[0]||i[0]>o[2]){const d=.5*l;let g=i[0]-o[0]>d?-l:o[0]-i[0]>d?l:0;g===0&&(g=i[0]-o[2]>d?-l:o[2]-i[0]>d?l:0),i[0]+=g}qr(t,i)}function mp(i,t,o,l){const d=Math.pow(2,l.z)*xr,g=[l.x*xr,l.y*xr],x=[];for(const v of i)for(const E of v){const T=[E.x+g[0],E.y+g[1]];xc(T,t,o,d),x.push(T)}return x}function fp(i,t,o,l){const d=Math.pow(2,l.z)*xr,g=[l.x*xr,l.y*xr],x=[];for(const E of i){const T=[];for(const M of E){const D=[M.x+g[0],M.y+g[1]];qr(t,D),T.push(D)}x.push(T)}if(t[2]-t[0]<=d/2){(v=t)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(const E of x)for(const T of E)xc(T,t,o,d)}var v;return x}class _o{constructor(t,o){this.type=yt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ne(t[1])){const l=t[1];if(l.type==="FeatureCollection")for(let d=0;d<l.features.length;++d){const g=l.features[d].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new _o(l,l.features[d].geometry)}else if(l.type==="Feature"){const d=l.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new _o(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new _o(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,l){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(l.type==="Polygon"){const v=fc(l.coordinates,g,x),E=mp(o.geometry(),d,g,x);if(!Jr(d,g))return!1;for(const T of E)if(!er(T,v))return!1}if(l.type==="MultiPolygon"){const v=gc(l.coordinates,g,x),E=mp(o.geometry(),d,g,x);if(!Jr(d,g))return!1;for(const T of E)if(!qh(T,v))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,l){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(l.type==="Polygon"){const v=fc(l.coordinates,g,x),E=fp(o.geometry(),d,g,x);if(!Jr(d,g))return!1;for(const T of E)if(!mc(T,v))return!1}if(l.type==="MultiPolygon"){const v=gc(l.coordinates,g,x),E=fp(o.geometry(),d,g,x);if(!Jr(d,g))return!1;for(const T of E)if(!hp(T,v))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Rs(i){if(i instanceof xt&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof _o)return!1;let t=!0;return i.eachChild(o=>{t&&!Rs(o)&&(t=!1)}),t}function na(i){if(i instanceof xt&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(o=>{t&&!na(o)&&(t=!1)}),t}function Ha(i,t){if(i instanceof xt&&t.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(l=>{o&&!Ha(l,t)&&(o=!1)}),o}class Os{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=t[1];return o.scope.has(l)?new Os(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Bs{constructor(t,o=[],l,d=new yo,g=[]){this.registry=t,this.path=o,this.key=o.map(x=>`[${x}]`).join(""),this.scope=d,this.errors=g,this.expectedType=l}parse(t,o,l,d,g={}){return o?this.concat(o,l,d)._parse(t,g):this._parse(t,g)}_parse(t,o){function l(d,g,x){return x==="assert"?new Xe(g,[d]):x==="coerce"?new Pt(g,[d]):d}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=t[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[d];if(g){let x=g.parse(t,this);if(!x)return null;if(this.expectedType){const v=this.expectedType,E=x.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||E.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(v,E))return null}else x=l(x,v,o.typeAnnotation||"coerce");else x=l(x,v,o.typeAnnotation||"assert")}if(!(x instanceof ze)&&x.type.kind!=="resolvedImage"&&Wa(x)){const v=new vt;try{x=new ze(x.type,x.evaluate(v))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,l){const d=typeof t=="number"?this.path.concat(t):this.path,g=l?this.scope.concat(l):this.scope;return new Bs(this.registry,d,o||null,g,this.errors)}error(t,...o){const l=`${this.key}${o.map(d=>`[${d}]`).join("")}`;this.errors.push(new pn(l,t))}checkSubtype(t,o){const l=vo(t,o);return l&&this.error(l),l}}function Wa(i){if(i instanceof Os)return Wa(i.boundExpression);if(i instanceof xt&&i.name==="error"||i instanceof wr||i instanceof _o)return!1;const t=i instanceof Pt||i instanceof Xe;let o=!0;return i.eachChild(l=>{o=t?o&&Wa(l):o&&l instanceof ze}),!!o&&Rs(i)&&Ha(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fs(i,t){const o=i.length-1;let l,d,g=0,x=o,v=0;for(;g<=x;)if(v=Math.floor((g+x)/2),l=i[v],d=i[v+1],l<=t){if(v===o||t<d)return v;g=v+1}else{if(!(l>t))throw new ge("Input is not a number.");x=v-1}return 0}class Xa{constructor(t,o,l){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[d,g]of l)this.labels.push(d),this.outputs.push(g)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(t[1],1,Ne);if(!l)return null;const d=[];let g=null;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(let x=1;x<t.length;x+=2){const v=x===1?-1/0:t[x],E=t[x+1],T=x,M=x+1;if(typeof v!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(d.length&&d[d.length-1][0]>=v)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const D=o.parse(E,M,g);if(!D)return null;g=g||D.type,d.push([v,D])}return new Xa(g,l,d)}evaluate(t){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(t);const d=this.input.evaluate(t);if(d<=o[0])return l[0].evaluate(t);const g=o.length;return d>=o[g-1]?l[g-1].evaluate(t):l[Fs(o,d)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&t.push(this.labels[o]),t.push(this.outputs[o].serialize());return t}}function Pr(i,t,o){return i*(1-o)+t*o}var Ka=Object.freeze({__proto__:null,number:Pr,color:function(i,t,o){return new A(Pr(i.r,t.r,o),Pr(i.g,t.g,o),Pr(i.b,t.b,o),Pr(i.a,t.a,o))},array:function(i,t,o){return i.map((l,d)=>Pr(l,t[d],o))}});const yc=.95047,gp=1.08883,xp=4/29,Ns=6/29,bc=3*Ns*Ns,Hh=Math.PI/180,Wh=180/Math.PI;function vc(i){return i>.008856451679035631?Math.pow(i,1/3):i/bc+xp}function _c(i){return i>Ns?i*i*i:bc*(i-xp)}function wc(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function kc(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function yp(i){const t=kc(i.r),o=kc(i.g),l=kc(i.b),d=vc((.4124564*t+.3575761*o+.1804375*l)/yc),g=vc((.2126729*t+.7151522*o+.072175*l)/1);return{l:116*g-16,a:500*(d-g),b:200*(g-vc((.0193339*t+.119192*o+.9503041*l)/gp)),alpha:i.a}}function Vt(i){let t=(i.l+16)/116,o=isNaN(i.a)?t:t+i.a/500,l=isNaN(i.b)?t:t-i.b/200;return t=1*_c(t),o=yc*_c(o),l=gp*_c(l),new A(wc(3.2404542*o-1.5371385*t-.4985314*l),wc(-.969266*o+1.8760108*t+.041556*l),wc(.0556434*o-.2040259*t+1.0572252*l),i.alpha)}function Xh(i,t,o){const l=t-i;return i+o*(l>180||l<-180?l-360*Math.round(l/360):l)}const Ya={forward:yp,reverse:Vt,interpolate:function(i,t,o){return{l:Pr(i.l,t.l,o),a:Pr(i.a,t.a,o),b:Pr(i.b,t.b,o),alpha:Pr(i.alpha,t.alpha,o)}}},Ja={forward:function(i){const{l:t,a:o,b:l}=yp(i),d=Math.atan2(l,o)*Wh;return{h:d<0?d+360:d,c:Math.sqrt(o*o+l*l),l:t,alpha:i.a}},reverse:function(i){const t=i.h*Hh,o=i.c;return Vt({l:i.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:i.alpha})},interpolate:function(i,t,o){return{h:Xh(i.h,t.h,o),c:Pr(i.c,t.c,o),l:Pr(i.l,t.l,o),alpha:Pr(i.alpha,t.alpha,o)}}};var bp=Object.freeze({__proto__:null,lab:Ya,hcl:Ja});class Pn{constructor(t,o,l,d,g){this.type=t,this.operator=o,this.interpolation=l,this.input=d,this.labels=[],this.outputs=[];for(const[x,v]of g)this.labels.push(x),this.outputs.push(v)}static interpolationFactor(t,o,l,d){let g=0;if(t.name==="exponential")g=Ec(o,t.base,l,d);else if(t.name==="linear")g=Ec(o,1,l,d);else if(t.name==="cubic-bezier"){const x=t.controlPoints;g=new P(x[0],x[1],x[2],x[3]).solve(Ec(o,1,l,d))}return g}static parse(t,o){let[l,d,g,...x]=t;if(!Array.isArray(d)||d.length===0)return o.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const T=d[1];if(typeof T!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:T}}else{if(d[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const T=d.slice(1);if(T.length!==4||T.some(M=>typeof M!="number"||M<0||M>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:T}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(g=o.parse(g,2,Ne),!g)return null;const v=[];let E=null;l==="interpolate-hcl"||l==="interpolate-lab"?E=dn:o.expectedType&&o.expectedType.kind!=="value"&&(E=o.expectedType);for(let T=0;T<x.length;T+=2){const M=x[T],D=x[T+1],R=T+3,B=T+4;if(typeof M!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(v.length&&v[v.length-1][0]>=M)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',R);const N=o.parse(D,B,E);if(!N)return null;E=E||N.type,v.push([M,N])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Pn(E,l,d,g,v):o.error(`Type ${Qt(E)} is not interpolatable.`)}evaluate(t){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(t);const d=this.input.evaluate(t);if(d<=o[0])return l[0].evaluate(t);const g=o.length;if(d>=o[g-1])return l[g-1].evaluate(t);const x=Fs(o,d),v=Pn.interpolationFactor(this.interpolation,d,o[x],o[x+1]),E=l[x].evaluate(t),T=l[x+1].evaluate(t);return this.operator==="interpolate"?Ka[this.type.kind.toLowerCase()](E,T,v):this.operator==="interpolate-hcl"?Ja.reverse(Ja.interpolate(Ja.forward(E),Ja.forward(T),v)):Ya.reverse(Ya.interpolate(Ya.forward(E),Ya.forward(T),v))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,t,this.input.serialize()];for(let l=0;l<this.labels.length;l++)o.push(this.labels[l],this.outputs[l].serialize());return o}}function Ec(i,t,o,l){const d=l-o,g=i-o;return d===0?0:t===1?g/d:(Math.pow(t,g)-1)/(Math.pow(t,d)-1)}class Us{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let l=null;const d=o.expectedType;d&&d.kind!=="value"&&(l=d);const g=[];for(const v of t.slice(1)){const E=o.parse(v,1+g.length,l,void 0,{typeAnnotation:"omit"});if(!E)return null;l=l||E.type,g.push(E)}const x=d&&g.some(v=>vo(d,v.type));return new Us(x?bt:l,g)}evaluate(t){let o,l=null,d=0;for(const g of this.args)if(d++,l=g.evaluate(t),l&&l instanceof ie&&!l.available&&(o||(o=l.name),l=null,d===this.args.length&&(l=o)),l!==null)break;return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class Vs{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const l=[];for(let g=1;g<t.length-1;g+=2){const x=t[g];if(typeof x!="string")return o.error(`Expected string, but found ${typeof x} instead.`,g);if(/[^a-zA-Z0-9_]/.test(x))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);const v=o.parse(t[g+1],g+1);if(!v)return null;l.push([x,v])}const d=o.parse(t[t.length-1],t.length-1,o.expectedType,l);return d?new Vs(l,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[o,l]of this.bindings)t.push(o,l.serialize());return t.push(this.result.serialize()),t}}class Sc{constructor(t,o,l){this.type=t,this.index=o,this.input=l}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,Ne),d=o.parse(t[2],2,Ir(o.expectedType||bt));return l&&d?new Sc(d.type.itemType,l,d):null}evaluate(t){const o=this.index.evaluate(t),l=this.input.evaluate(t);if(o<0)throw new ge(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new ge(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new ge(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Cc{constructor(t,o){this.type=yt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,bt),d=o.parse(t[2],2,bt);return l&&d?Nr(l.type,[yt,kt,Ne,nr,bt])?new Cc(l,d):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(l.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!l)return!1;if(!si(o,["boolean","string","number","null"]))throw new ge(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(oe(o))} instead.`);if(!si(l,["string","array"]))throw new ge(`Expected second argument to be of type array or string, but found ${Qt(oe(l))} instead.`);return l.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class js{constructor(t,o,l){this.type=Ne,this.needle=t,this.haystack=o,this.fromIndex=l}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,bt),d=o.parse(t[2],2,bt);if(!l||!d)return null;if(!Nr(l.type,[yt,kt,Ne,nr,bt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(l.type)} instead`);if(t.length===4){const g=o.parse(t[3],3,Ne);return g?new js(l,d,g):null}return new js(l,d)}evaluate(t){const o=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!si(o,["boolean","string","number","null"]))throw new ge(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(oe(o))} instead.`);if(!si(l,["string","array"]))throw new ge(`Expected second argument to be of type array or string, but found ${Qt(oe(l))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(t);return l.indexOf(o,d)}return l.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Tc{constructor(t,o,l,d,g,x){this.inputType=t,this.type=o,this.input=l,this.cases=d,this.outputs=g,this.otherwise=x}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let l,d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const g={},x=[];for(let T=2;T<t.length-1;T+=2){let M=t[T];const D=t[T+1];Array.isArray(M)||(M=[M]);const R=o.concat(T);if(M.length===0)return R.error("Expected at least one branch label.");for(const N of M){if(typeof N!="number"&&typeof N!="string")return R.error("Branch labels must be numbers or strings.");if(typeof N=="number"&&Math.abs(N)>Number.MAX_SAFE_INTEGER)return R.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof N=="number"&&Math.floor(N)!==N)return R.error("Numeric branch labels must be integer values.");if(l){if(R.checkSubtype(l,oe(N)))return null}else l=oe(N);if(g[String(N)]!==void 0)return R.error("Branch labels must be unique.");g[String(N)]=x.length}const B=o.parse(D,T,d);if(!B)return null;d=d||B.type,x.push(B)}const v=o.parse(t[1],1,bt);if(!v)return null;const E=o.parse(t[t.length-1],t.length-1,d);return E?v.type.kind!=="value"&&o.concat(1).checkSubtype(l,v.type)?null:new Tc(l,d,v,g,x,E):null}evaluate(t){const o=this.input.evaluate(t);return(oe(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),l=[],d={};for(const x of o){const v=d[this.cases[x]];v===void 0?(d[this.cases[x]]=l.length,l.push([this.cases[x],[x]])):l[v][1].push(x)}const g=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,v]of l)t.push(v.length===1?g(v[0]):v.map(g)),t.push(this.outputs[x].serialize());return t.push(this.otherwise.serialize()),t}}class zc{constructor(t,o,l){this.type=t,this.branches=o,this.otherwise=l}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const d=[];for(let x=1;x<t.length-1;x+=2){const v=o.parse(t[x],x,yt);if(!v)return null;const E=o.parse(t[x+1],x+1,l);if(!E)return null;d.push([v,E]),l=l||E.type}const g=o.parse(t[t.length-1],t.length-1,l);return g?new zc(l,d,g):null}evaluate(t){for(const[o,l]of this.branches)if(o.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,l]of this.branches)t(o),t(l);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class $s{constructor(t,o,l,d){this.type=t,this.input=o,this.beginIndex=l,this.endIndex=d}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,bt),d=o.parse(t[2],2,Ne);if(!l||!d)return null;if(!Nr(l.type,[Ir(bt),kt,bt]))return o.error(`Expected first argument to be of type array or string, but found ${Qt(l.type)} instead`);if(t.length===4){const g=o.parse(t[3],3,Ne);return g?new $s(l.type,l,d,g):null}return new $s(l.type,l,d)}evaluate(t){const o=this.input.evaluate(t),l=this.beginIndex.evaluate(t);if(!si(o,["string","array"]))throw new ge(`Expected first argument to be of type array or string, but found ${Qt(oe(o))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(t);return o.slice(l,d)}return o.slice(l)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function vp(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function _p(i,t,o,l){return l.compare(t,o)===0}function ia(i,t,o){const l=i!=="=="&&i!=="!=";return class p2{constructor(g,x,v){this.type=yt,this.lhs=g,this.rhs=x,this.collator=v,this.hasUntypedArgument=g.type.kind==="value"||x.type.kind==="value"}static parse(g,x){if(g.length!==3&&g.length!==4)return x.error("Expected two or three arguments.");const v=g[0];let E=x.parse(g[1],1,bt);if(!E)return null;if(!vp(v,E.type))return x.concat(1).error(`"${v}" comparisons are not supported for type '${Qt(E.type)}'.`);let T=x.parse(g[2],2,bt);if(!T)return null;if(!vp(v,T.type))return x.concat(2).error(`"${v}" comparisons are not supported for type '${Qt(T.type)}'.`);if(E.type.kind!==T.type.kind&&E.type.kind!=="value"&&T.type.kind!=="value")return x.error(`Cannot compare types '${Qt(E.type)}' and '${Qt(T.type)}'.`);l&&(E.type.kind==="value"&&T.type.kind!=="value"?E=new Xe(T.type,[E]):E.type.kind!=="value"&&T.type.kind==="value"&&(T=new Xe(E.type,[T])));let M=null;if(g.length===4){if(E.type.kind!=="string"&&T.type.kind!=="string"&&E.type.kind!=="value"&&T.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(M=x.parse(g[3],3,bo),!M)return null}return new p2(E,T,M)}evaluate(g){const x=this.lhs.evaluate(g),v=this.rhs.evaluate(g);if(l&&this.hasUntypedArgument){const E=oe(x),T=oe(v);if(E.kind!==T.kind||E.kind!=="string"&&E.kind!=="number")throw new ge(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${E.kind}, ${T.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const E=oe(x),T=oe(v);if(E.kind!=="string"||T.kind!=="string")return t(g,x,v)}return this.collator?o(g,x,v,this.collator.evaluate(g)):t(g,x,v)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[i];return this.eachChild(x=>{g.push(x.serialize())}),g}}}const Kh=ia("==",function(i,t,o){return t===o},_p),Yh=ia("!=",function(i,t,o){return t!==o},function(i,t,o,l){return!_p(0,t,o,l)}),Jh=ia("<",function(i,t,o){return t<o},function(i,t,o,l){return l.compare(t,o)<0}),Qh=ia(">",function(i,t,o){return t>o},function(i,t,o,l){return l.compare(t,o)>0}),em=ia("<=",function(i,t,o){return t<=o},function(i,t,o,l){return l.compare(t,o)<=0}),tm=ia(">=",function(i,t,o){return t>=o},function(i,t,o,l){return l.compare(t,o)>=0});class Ic{constructor(t,o,l,d,g){this.type=kt,this.number=t,this.locale=o,this.currency=l,this.minFractionDigits=d,this.maxFractionDigits=g}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const l=o.parse(t[1],1,Ne);if(!l)return null;const d=t[2];if(typeof d!="object"||Array.isArray(d))return o.error("NumberFormat options argument must be an object.");let g=null;if(d.locale&&(g=o.parse(d.locale,1,kt),!g))return null;let x=null;if(d.currency&&(x=o.parse(d.currency,1,kt),!x))return null;let v=null;if(d["min-fraction-digits"]&&(v=o.parse(d["min-fraction-digits"],1,Ne),!v))return null;let E=null;return d["max-fraction-digits"]&&(E=o.parse(d["max-fraction-digits"],1,Ne),!E)?null:new Ic(l,g,x,v,E)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Pc{constructor(t){this.type=Ne,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const l=o.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Qt(l.type)} instead.`):new Pc(l):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new ge(`Expected value to be of type string or array, but found ${Qt(oe(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(o=>{t.push(o.serialize())}),t}}const oa={"==":Kh,"!=":Yh,">":Qh,"<":Jh,">=":tm,"<=":em,array:Xe,at:Sc,boolean:Xe,case:zc,coalesce:Us,collator:wr,format:nt,image:ct,in:Cc,"index-of":js,interpolate:Pn,"interpolate-hcl":Pn,"interpolate-lab":Pn,length:Pc,let:Vs,literal:ze,match:Tc,number:Xe,"number-format":Ic,object:Xe,slice:$s,step:Xa,string:Xe,"to-boolean":Pt,"to-color":Pt,"to-number":Pt,"to-string":Pt,var:Os,within:_o};function wp(i,[t,o,l,d]){t=t.evaluate(i),o=o.evaluate(i),l=l.evaluate(i);const g=d?d.evaluate(i):1,x=te(t,o,l,g);if(x)throw new ge(x);return new A(t/255*g,o/255*g,l/255*g,g)}function kp(i,t){return i in t}function Mc(i,t){const o=t[i];return o===void 0?null:o}function wo(i){return{type:i}}function Ep(i){return{result:"success",value:i}}function ko(i){return{result:"error",value:i}}function aa(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Sp(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Ac(i){return!!i.expression&&i.expression.interpolated}function gt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Gs(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Zt(i){return i}function qs(i,t){const o=t.type==="color",l=i.stops&&typeof i.stops[0][0]=="object",d=l||!(l||i.property!==void 0),g=i.type||(Ac(t)?"exponential":"interval");if(o&&((i=ji({},i)).stops&&(i.stops=i.stops.map(T=>[T[0],A.parse(T[1])])),i.default=A.parse(i.default?i.default:t.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!bp[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let x,v,E;if(g==="exponential")x=Dc;else if(g==="interval")x=Zs;else if(g==="categorical"){x=yr,v=Object.create(null);for(const T of i.stops)v[T[0]]=T[1];E=typeof i.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);x=rm}if(l){const T={},M=[];for(let B=0;B<i.stops.length;B++){const N=i.stops[B],J=N[0].zoom;T[J]===void 0&&(T[J]={zoom:J,type:i.type,property:i.property,default:i.default,stops:[]},M.push(J)),T[J].stops.push([N[0].value,N[1]])}const D=[];for(const B of M)D.push([T[B].zoom,qs(T[B],t)]);const R={name:"linear"};return{kind:"composite",interpolationType:R,interpolationFactor:Pn.interpolationFactor.bind(void 0,R),zoomStops:D.map(B=>B[0]),evaluate:({zoom:B},N)=>Dc({stops:D,base:i.base},t,B).evaluate(B,N)}}if(d){const T=g==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Pn.interpolationFactor.bind(void 0,T),zoomStops:i.stops.map(M=>M[0]),evaluate:({zoom:M})=>x(i,t,M,v,E)}}return{kind:"source",evaluate(T,M){const D=M&&M.properties?M.properties[i.property]:void 0;return D===void 0?ar(i.default,t.default):x(i,t,D,v,E)}}}function ar(i,t,o){return i!==void 0?i:t!==void 0?t:o!==void 0?o:void 0}function yr(i,t,o,l,d){return ar(typeof o===d?l[o]:void 0,i.default,t.default)}function Zs(i,t,o){if(gt(o)!=="number")return ar(i.default,t.default);const l=i.stops.length;if(l===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[l-1][0])return i.stops[l-1][1];const d=Fs(i.stops.map(g=>g[0]),o);return i.stops[d][1]}function Dc(i,t,o){const l=i.base!==void 0?i.base:1;if(gt(o)!=="number")return ar(i.default,t.default);const d=i.stops.length;if(d===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[d-1][0])return i.stops[d-1][1];const g=Fs(i.stops.map(M=>M[0]),o),x=function(M,D,R,B){const N=B-R,J=M-R;return N===0?0:D===1?J/N:(Math.pow(D,J)-1)/(Math.pow(D,N)-1)}(o,l,i.stops[g][0],i.stops[g+1][0]),v=i.stops[g][1],E=i.stops[g+1][1];let T=Ka[t.type]||Zt;if(i.colorSpace&&i.colorSpace!=="rgb"){const M=bp[i.colorSpace];T=(D,R)=>M.reverse(M.interpolate(M.forward(D),M.forward(R),x))}return typeof v.evaluate=="function"?{evaluate(...M){const D=v.evaluate.apply(void 0,M),R=E.evaluate.apply(void 0,M);if(D!==void 0&&R!==void 0)return T(D,R,x)}}:T(v,E,x)}function rm(i,t,o){return t.type==="color"?o=A.parse(o):t.type==="formatted"?o=W.fromString(o.toString()):t.type==="resolvedImage"?o=ie.fromString(o.toString()):gt(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0),ar(o,i.default,t.default)}xt.register(oa,{error:[{kind:"error"},[kt],(i,[t])=>{throw new ge(t.evaluate(i))}],typeof:[kt,[bt],(i,[t])=>Qt(oe(t.evaluate(i)))],"to-rgba":[Ir(Ne,4),[dn],(i,[t])=>t.evaluate(i).toArray()],rgb:[dn,[Ne,Ne,Ne],wp],rgba:[dn,[Ne,Ne,Ne,Ne],wp],has:{type:yt,overloads:[[[kt],(i,[t])=>kp(t.evaluate(i),i.properties())],[[kt,oi],(i,[t,o])=>kp(t.evaluate(i),o.evaluate(i))]]},get:{type:bt,overloads:[[[kt],(i,[t])=>Mc(t.evaluate(i),i.properties())],[[kt,oi],(i,[t,o])=>Mc(t.evaluate(i),o.evaluate(i))]]},"feature-state":[bt,[kt],(i,[t])=>Mc(t.evaluate(i),i.featureState||{})],properties:[oi,[],i=>i.properties()],"geometry-type":[kt,[],i=>i.geometryType()],id:[bt,[],i=>i.id()],zoom:[Ne,[],i=>i.globals.zoom],"heatmap-density":[Ne,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ne,[],i=>i.globals.lineProgress||0],accumulated:[bt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ne,wo(Ne),(i,t)=>{let o=0;for(const l of t)o+=l.evaluate(i);return o}],"*":[Ne,wo(Ne),(i,t)=>{let o=1;for(const l of t)o*=l.evaluate(i);return o}],"-":{type:Ne,overloads:[[[Ne,Ne],(i,[t,o])=>t.evaluate(i)-o.evaluate(i)],[[Ne],(i,[t])=>-t.evaluate(i)]]},"/":[Ne,[Ne,Ne],(i,[t,o])=>t.evaluate(i)/o.evaluate(i)],"%":[Ne,[Ne,Ne],(i,[t,o])=>t.evaluate(i)%o.evaluate(i)],ln2:[Ne,[],()=>Math.LN2],pi:[Ne,[],()=>Math.PI],e:[Ne,[],()=>Math.E],"^":[Ne,[Ne,Ne],(i,[t,o])=>Math.pow(t.evaluate(i),o.evaluate(i))],sqrt:[Ne,[Ne],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[Ne,[Ne],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[Ne,[Ne],(i,[t])=>Math.log(t.evaluate(i))],log2:[Ne,[Ne],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[Ne,[Ne],(i,[t])=>Math.sin(t.evaluate(i))],cos:[Ne,[Ne],(i,[t])=>Math.cos(t.evaluate(i))],tan:[Ne,[Ne],(i,[t])=>Math.tan(t.evaluate(i))],asin:[Ne,[Ne],(i,[t])=>Math.asin(t.evaluate(i))],acos:[Ne,[Ne],(i,[t])=>Math.acos(t.evaluate(i))],atan:[Ne,[Ne],(i,[t])=>Math.atan(t.evaluate(i))],min:[Ne,wo(Ne),(i,t)=>Math.min(...t.map(o=>o.evaluate(i)))],max:[Ne,wo(Ne),(i,t)=>Math.max(...t.map(o=>o.evaluate(i)))],abs:[Ne,[Ne],(i,[t])=>Math.abs(t.evaluate(i))],round:[Ne,[Ne],(i,[t])=>{const o=t.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ne,[Ne],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[Ne,[Ne],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[yt,[kt,bt],(i,[t,o])=>i.properties()[t.value]===o.value],"filter-id-==":[yt,[bt],(i,[t])=>i.id()===t.value],"filter-type-==":[yt,[kt],(i,[t])=>i.geometryType()===t.value],"filter-<":[yt,[kt,bt],(i,[t,o])=>{const l=i.properties()[t.value],d=o.value;return typeof l==typeof d&&l<d}],"filter-id-<":[yt,[bt],(i,[t])=>{const o=i.id(),l=t.value;return typeof o==typeof l&&o<l}],"filter->":[yt,[kt,bt],(i,[t,o])=>{const l=i.properties()[t.value],d=o.value;return typeof l==typeof d&&l>d}],"filter-id->":[yt,[bt],(i,[t])=>{const o=i.id(),l=t.value;return typeof o==typeof l&&o>l}],"filter-<=":[yt,[kt,bt],(i,[t,o])=>{const l=i.properties()[t.value],d=o.value;return typeof l==typeof d&&l<=d}],"filter-id-<=":[yt,[bt],(i,[t])=>{const o=i.id(),l=t.value;return typeof o==typeof l&&o<=l}],"filter->=":[yt,[kt,bt],(i,[t,o])=>{const l=i.properties()[t.value],d=o.value;return typeof l==typeof d&&l>=d}],"filter-id->=":[yt,[bt],(i,[t])=>{const o=i.id(),l=t.value;return typeof o==typeof l&&o>=l}],"filter-has":[yt,[bt],(i,[t])=>t.value in i.properties()],"filter-has-id":[yt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[yt,[Ir(kt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[yt,[Ir(bt)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[yt,[kt,Ir(bt)],(i,[t,o])=>o.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[yt,[kt,Ir(bt)],(i,[t,o])=>function(l,d,g,x){for(;g<=x;){const v=g+x>>1;if(d[v]===l)return!0;d[v]>l?x=v-1:g=v+1}return!1}(i.properties()[t.value],o.value,0,o.value.length-1)],all:{type:yt,overloads:[[[yt,yt],(i,[t,o])=>t.evaluate(i)&&o.evaluate(i)],[wo(yt),(i,t)=>{for(const o of t)if(!o.evaluate(i))return!1;return!0}]]},any:{type:yt,overloads:[[[yt,yt],(i,[t,o])=>t.evaluate(i)||o.evaluate(i)],[wo(yt),(i,t)=>{for(const o of t)if(o.evaluate(i))return!0;return!1}]]},"!":[yt,[yt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[yt,[kt],(i,[t])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(t.evaluate(i))}],upcase:[kt,[kt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[kt,[kt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[kt,wo(bt),(i,t)=>t.map(o=>ve(o.evaluate(i))).join("")],"resolved-locale":[kt,[bo],(i,[t])=>t.evaluate(i).resolvedLocale()]});class Lc{constructor(t,o){this.expression=t,this._warningHistory={},this._evaluator=new vt,this._defaultValue=o?function(l){return l.type==="color"&&Gs(l.default)?new A(0,0,0,0):l.type==="color"?A.parse(l.default)||null:l.default===void 0?null:l.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,l,d,g,x){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=d,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(t,o,l,d,g,x){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=d,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=x||null;try{const v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new ge(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(v)} instead.`);return v}catch(v){return this._warningHistory[v.message]||(this._warningHistory[v.message]=!0,typeof console!="undefined"&&console.warn(v.message)),this._defaultValue}}}function Hs(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in oa}function Ws(i,t){const o=new Bs(oa,[],t?function(d){const g={color:dn,string:kt,number:Ne,enum:kt,boolean:yt,formatted:ai,resolvedImage:$i};return d.type==="array"?Ir(g[d.value]||bt,d.length):g[d.type]}(t):void 0),l=o.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Ep(new Lc(l,t)):ko(o.errors)}class Xs{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!na(o.expression)}evaluateWithoutErrorHandling(t,o,l,d,g,x){return this._styleExpression.evaluateWithoutErrorHandling(t,o,l,d,g,x)}evaluate(t,o,l,d,g,x){return this._styleExpression.evaluate(t,o,l,d,g,x)}}class Ks{constructor(t,o,l,d){this.kind=t,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!na(o.expression),this.interpolationType=d}evaluateWithoutErrorHandling(t,o,l,d,g,x){return this._styleExpression.evaluateWithoutErrorHandling(t,o,l,d,g,x)}evaluate(t,o,l,d,g,x){return this._styleExpression.evaluate(t,o,l,d,g,x)}interpolationFactor(t,o,l){return this.interpolationType?Pn.interpolationFactor(this.interpolationType,t,o,l):0}}function Rc(i,t){const o=Ws(i,t);if(o.result==="error")return o;const l=o.value.expression,d=Rs(l);if(!d&&!aa(t))return ko([new pn("","data expressions not supported")]);const g=Ha(l,["zoom"]);if(!g&&!Sp(t))return ko([new pn("","zoom expressions not supported")]);const x=Ys(l);return x||g?x instanceof pn?ko([x]):x instanceof Pn&&!Ac(t)?ko([new pn("",'"interpolate" expressions cannot be used with this property')]):Ep(x?new Ks(d?"camera":"composite",o.value,x.labels,x instanceof Pn?x.interpolation:void 0):new Xs(d?"constant":"source",o.value)):ko([new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class sa{constructor(t,o){this._parameters=t,this._specification=o,ji(this,qs(this._parameters,this._specification))}static deserialize(t){return new sa(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ys(i){let t=null;if(i instanceof Vs)t=Ys(i.result);else if(i instanceof Us){for(const o of i.args)if(t=Ys(o),t)break}else(i instanceof Xa||i instanceof Pn)&&i.input instanceof xt&&i.input.name==="zoom"&&(t=i);return t instanceof pn||i.eachChild(o=>{const l=Ys(o);l instanceof pn?t=l:!t&&l?t=new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new pn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ci(i){const t=i.key,o=i.value,l=i.valueSpec||{},d=i.objectElementValidators||{},g=i.style,x=i.styleSpec;let v=[];const E=gt(o);if(E!=="object")return[new $e(t,o,`object expected, ${E} found`)];for(const T in o){const M=T.split(".")[0],D=l[M]||l["*"];let R;if(d[M])R=d[M];else if(l[M])R=vn;else if(d["*"])R=d["*"];else{if(!l["*"]){v.push(new $e(t,o[T],`unknown property "${T}"`));continue}R=vn}v=v.concat(R({key:(t&&`${t}.`)+T,value:o[T],valueSpec:D,style:g,styleSpec:x,object:o,objectKey:T},o))}for(const T in l)d[T]||l[T].required&&l[T].default===void 0&&o[T]===void 0&&v.push(new $e(t,o,`missing required property "${T}"`));return v}function Cp(i){const t=i.value,o=i.valueSpec,l=i.style,d=i.styleSpec,g=i.key,x=i.arrayElementValidator||vn;if(gt(t)!=="array")return[new $e(g,t,`array expected, ${gt(t)} found`)];if(o.length&&t.length!==o.length)return[new $e(g,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new $e(g,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let v={type:o.value,values:o.values};d.$version<7&&(v.function=o.function),gt(o.value)==="object"&&(v=o.value);let E=[];for(let T=0;T<t.length;T++)E=E.concat(x({array:t,arrayIndex:T,value:t[T],valueSpec:v,style:l,styleSpec:d,key:`${g}[${T}]`}));return E}function Tp(i){const t=i.key,o=i.value,l=i.valueSpec;let d=gt(o);return d==="number"&&o!=o&&(d="NaN"),d!=="number"?[new $e(t,o,`number expected, ${d} found`)]:"minimum"in l&&o<l.minimum?[new $e(t,o,`${o} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&o>l.maximum?[new $e(t,o,`${o} is greater than the maximum value ${l.maximum}`)]:[]}function zp(i){const t=i.valueSpec,o=Jt(i.value.type);let l,d,g,x={};const v=o!=="categorical"&&i.value.property===void 0,E=!v,T=gt(i.value.stops)==="array"&&gt(i.value.stops[0])==="array"&&gt(i.value.stops[0][0])==="object",M=ci({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(B){if(o==="identity")return[new $e(B.key,B.value,'identity function may not have a "stops" property')];let N=[];const J=B.value;return N=N.concat(Cp({key:B.key,value:J,valueSpec:B.valueSpec,style:B.style,styleSpec:B.styleSpec,arrayElementValidator:D})),gt(J)==="array"&&J.length===0&&N.push(new $e(B.key,J,"array must have at least one stop")),N},default:function(B){return vn({key:B.key,value:B.value,valueSpec:t,style:B.style,styleSpec:B.styleSpec})}}});return o==="identity"&&v&&M.push(new $e(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||M.push(new $e(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!Ac(i.valueSpec)&&M.push(new $e(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(E&&!aa(i.valueSpec)?M.push(new $e(i.key,i.value,"property functions not supported")):v&&!Sp(i.valueSpec)&&M.push(new $e(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!T||i.value.property!==void 0||M.push(new $e(i.key,i.value,'"property" property is required')),M;function D(B){let N=[];const J=B.value,Q=B.key;if(gt(J)!=="array")return[new $e(Q,J,`array expected, ${gt(J)} found`)];if(J.length!==2)return[new $e(Q,J,`array length 2 expected, length ${J.length} found`)];if(T){if(gt(J[0])!=="object")return[new $e(Q,J,`object expected, ${gt(J[0])} found`)];if(J[0].zoom===void 0)return[new $e(Q,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new $e(Q,J,"object stop key must have value")];if(g&&g>Jt(J[0].zoom))return[new $e(Q,J[0].zoom,"stop zoom values must appear in ascending order")];Jt(J[0].zoom)!==g&&(g=Jt(J[0].zoom),d=void 0,x={}),N=N.concat(ci({key:`${Q}[0]`,value:J[0],valueSpec:{zoom:{}},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{zoom:Tp,value:R}}))}else N=N.concat(R({key:`${Q}[0]`,value:J[0],valueSpec:{},style:B.style,styleSpec:B.styleSpec},J));return Hs($n(J[1]))?N.concat([new $e(`${Q}[1]`,J[1],"expressions are not allowed in function stops.")]):N.concat(vn({key:`${Q}[1]`,value:J[1],valueSpec:t,style:B.style,styleSpec:B.styleSpec}))}function R(B,N){const J=gt(B.value),Q=Jt(B.value),ce=B.value!==null?B.value:N;if(l){if(J!==l)return[new $e(B.key,ce,`${J} stop domain type must match previous stop domain type ${l}`)]}else l=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new $e(B.key,ce,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&o!=="categorical"){let fe=`number expected, ${J} found`;return aa(t)&&o===void 0&&(fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $e(B.key,ce,fe)]}return o!=="categorical"||J!=="number"||isFinite(Q)&&Math.floor(Q)===Q?o!=="categorical"&&J==="number"&&d!==void 0&&Q<d?[new $e(B.key,ce,"stop domain values must appear in ascending order")]:(d=Q,o==="categorical"&&Q in x?[new $e(B.key,ce,"stop domain values must be unique")]:(x[Q]=!0,[])):[new $e(B.key,ce,`integer expected, found ${Q}`)]}}function la(i){const t=(i.expressionContext==="property"?Rc:Ws)($n(i.value),i.valueSpec);if(t.result==="error")return t.value.map(l=>new $e(`${i.key}${l.key}`,i.value,l.message));const o=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new $e(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!na(o))return[new $e(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!na(o))return[new $e(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Ha(o,["zoom","feature-state"]))return[new $e(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Rs(o))return[new $e(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Js(i){const t=i.key,o=i.value,l=i.valueSpec,d=[];return Array.isArray(l.values)?l.values.indexOf(Jt(o))===-1&&d.push(new $e(t,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(l.values).indexOf(Jt(o))===-1&&d.push(new $e(t,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),d}function Oc(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!Oc(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Ip={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qs(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Oc(i)||(i=Qa(i));const t=Ws(i,Ip);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,l,d)=>t.value.evaluate(o,l,{},d),needGeometry:Pp(i)}}function el(i,t){return i<t?-1:i>t?1:0}function Pp(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let t=1;t<i.length;t++)if(Pp(i[t]))return!0;return!1}function Qa(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?Bc(i[1],i[2],"=="):t==="!="?ca(Bc(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Bc(i[1],i[2],t):t==="any"?(o=i.slice(1),["any"].concat(o.map(Qa))):t==="all"?["all"].concat(i.slice(1).map(Qa)):t==="none"?["all"].concat(i.slice(1).map(Qa).map(ca)):t==="in"?tl(i[1],i.slice(2)):t==="!in"?ca(tl(i[1],i.slice(2))):t==="has"?rl(i[1]):t==="!has"?ca(rl(i[1])):t!=="within"||i;var o}function Bc(i,t,o){switch(i){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,i,t]}}function tl(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",i,["literal",t.sort(el)]]:["filter-in-small",i,["literal",t]]}}function rl(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function ca(i){return["!",i]}function es(i){return Oc($n(i.value))?la(ji({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Mp(i)}function Mp(i){const t=i.value,o=i.key;if(gt(t)!=="array")return[new $e(o,t,`array expected, ${gt(t)} found`)];const l=i.styleSpec;let d,g=[];if(t.length<1)return[new $e(o,t,"filter array must have at least 1 element")];switch(g=g.concat(Js({key:`${o}[0]`,value:t[0],valueSpec:l.filter_operator,style:i.style,styleSpec:i.styleSpec})),Jt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Jt(t[1])==="$type"&&g.push(new $e(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&g.push(new $e(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(d=gt(t[1]),d!=="string"&&g.push(new $e(`${o}[1]`,t[1],`string expected, ${d} found`)));for(let x=2;x<t.length;x++)d=gt(t[x]),Jt(t[1])==="$type"?g=g.concat(Js({key:`${o}[${x}]`,value:t[x],valueSpec:l.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&g.push(new $e(`${o}[${x}]`,t[x],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let x=1;x<t.length;x++)g=g.concat(Mp({key:`${o}[${x}]`,value:t[x],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=gt(t[1]),t.length!==2?g.push(new $e(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):d!=="string"&&g.push(new $e(`${o}[1]`,t[1],`string expected, ${d} found`));break;case"within":d=gt(t[1]),t.length!==2?g.push(new $e(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):d!=="object"&&g.push(new $e(`${o}[1]`,t[1],`object expected, ${d} found`))}return g}function ts(i,t){const o=i.key,l=i.style,d=i.styleSpec,g=i.value,x=i.objectKey,v=d[`${t}_${i.layerType}`];if(!v)return[];const E=x.match(/^(.*)-transition$/);if(t==="paint"&&E&&v[E[1]]&&v[E[1]].transition)return vn({key:o,value:g,valueSpec:d.transition,style:l,styleSpec:d});const T=i.valueSpec||v[x];if(!T)return[new $e(o,g,`unknown property "${x}"`)];let M;if(gt(g)==="string"&&aa(T)&&!T.tokens&&(M=/^{([^}]+)}$/.exec(g)))return[new $e(o,g,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(M[1])} }\`.`)];const D=[];return i.layerType==="symbol"&&(x==="text-field"&&l&&!l.glyphs&&D.push(new $e(o,g,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Gs($n(g))&&Jt(g.type)==="identity"&&D.push(new $e(o,g,'"text-font" does not support identity functions'))),D.concat(vn({key:i.key,value:g,valueSpec:T,style:l,styleSpec:d,expressionContext:"property",propertyType:t,propertyKey:x}))}function Ap(i){return ts(i,"paint")}function Dp(i){return ts(i,"layout")}function Lp(i){let t=[];const o=i.value,l=i.key,d=i.style,g=i.styleSpec;o.type||o.ref||t.push(new $e(l,o,'either "type" or "ref" is required'));let x=Jt(o.type);const v=Jt(o.ref);if(o.id){const E=Jt(o.id);for(let T=0;T<i.arrayIndex;T++){const M=d.layers[T];Jt(M.id)===E&&t.push(new $e(l,o.id,`duplicate layer id "${o.id}", previously used at line ${M.id.__line__}`))}}if("ref"in o){let E;["type","source","source-layer","filter","layout"].forEach(T=>{T in o&&t.push(new $e(l,o[T],`"${T}" is prohibited for ref layers`))}),d.layers.forEach(T=>{Jt(T.id)===v&&(E=T)}),E?E.ref?t.push(new $e(l,o.ref,"ref cannot reference another ref layer")):x=Jt(E.type):t.push(new $e(l,o.ref,`ref layer "${v}" not found`))}else if(x!=="background")if(o.source){const E=d.sources&&d.sources[o.source],T=E&&Jt(E.type);E?T==="vector"&&x==="raster"?t.push(new $e(l,o.source,`layer "${o.id}" requires a raster source`)):T==="raster"&&x!=="raster"?t.push(new $e(l,o.source,`layer "${o.id}" requires a vector source`)):T!=="vector"||o["source-layer"]?T==="raster-dem"&&x!=="hillshade"?t.push(new $e(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!o.paint||!o.paint["line-gradient"]||T==="geojson"&&E.lineMetrics||t.push(new $e(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new $e(l,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new $e(l,o.source,`source "${o.source}" not found`))}else t.push(new $e(l,o,'missing required property "source"'));return t=t.concat(ci({key:l,value:o,valueSpec:g.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>vn({key:`${l}.type`,value:o.type,valueSpec:g.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:es,layout:E=>ci({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":T=>Dp(ji({layerType:x},T))}}),paint:E=>ci({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":T=>Ap(ji({layerType:x},T))}})}})),t}function ua(i){const t=i.value,o=i.key,l=gt(t);return l!=="string"?[new $e(o,t,`string expected, ${l} found`)]:[]}const Rp={promoteId:function({key:i,value:t}){if(gt(t)==="string")return ua({key:i,value:t});{const o=[];for(const l in t)o.push(...ua({key:`${i}.${l}`,value:t[l]}));return o}}};function rs(i){const t=i.value,o=i.key,l=i.styleSpec,d=i.style;if(!t.type)return[new $e(o,t,'"type" is required')];const g=Jt(t.type);let x;switch(g){case"vector":case"raster":case"raster-dem":return x=ci({key:o,value:t,valueSpec:l[`source_${g.replace("-","_")}`],style:i.style,styleSpec:l,objectElementValidators:Rp}),x;case"geojson":if(x=ci({key:o,value:t,valueSpec:l.source_geojson,style:d,styleSpec:l,objectElementValidators:Rp}),t.cluster)for(const v in t.clusterProperties){const[E,T]=t.clusterProperties[v],M=typeof E=="string"?[E,["accumulated"],["get",v]]:E;x.push(...la({key:`${o}.${v}.map`,value:T,expressionContext:"cluster-map"})),x.push(...la({key:`${o}.${v}.reduce`,value:M,expressionContext:"cluster-reduce"}))}return x;case"video":return ci({key:o,value:t,valueSpec:l.source_video,style:d,styleSpec:l});case"image":return ci({key:o,value:t,valueSpec:l.source_image,style:d,styleSpec:l});case"canvas":return[new $e(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Js({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:d,styleSpec:l})}}function ns(i){const t=i.value,o=i.styleSpec,l=o.light,d=i.style;let g=[];const x=gt(t);if(t===void 0)return g;if(x!=="object")return g=g.concat([new $e("light",t,`object expected, ${x} found`)]),g;for(const v in t){const E=v.match(/^(.*)-transition$/);g=g.concat(E&&l[E[1]]&&l[E[1]].transition?vn({key:v,value:t[v],valueSpec:o.transition,style:d,styleSpec:o}):l[v]?vn({key:v,value:t[v],valueSpec:l[v],style:d,styleSpec:o}):[new $e(v,t[v],`unknown property "${v}"`)])}return g}const Mn={"*":()=>[],array:Cp,boolean:function(i){const t=i.value,o=i.key,l=gt(t);return l!=="boolean"?[new $e(o,t,`boolean expected, ${l} found`)]:[]},number:Tp,color:function(i){const t=i.key,o=i.value,l=gt(o);return l!=="string"?[new $e(t,o,`color expected, ${l} found`)]:li(o)===null?[new $e(t,o,`color expected, "${o}" found`)]:[]},constants:xo,enum:Js,filter:es,function:zp,layer:Lp,object:ci,source:rs,light:ns,string:ua,formatted:function(i){return ua(i).length===0?[]:la(i)},resolvedImage:function(i){return ua(i).length===0?[]:la(i)}};function vn(i){const t=i.value,o=i.valueSpec,l=i.styleSpec;return o.expression&&Gs(Jt(t))?zp(i):o.expression&&Hs($n(t))?la(i):o.type&&Mn[o.type]?Mn[o.type](i):ci(ji({},i,{valueSpec:o.type?l[o.type]:o}))}function nm(i){const t=i.value,o=i.key,l=ua(i);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new $e(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new $e(o,t,'"glyphs" url must include a "{range}" token'))),l}function Eo(i,t=be){let o=[];return o=o.concat(vn({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,objectElementValidators:{glyphs:nm,"*":()=>[]}})),i.constants&&(o=o.concat(xo({key:"constants",value:i.constants,style:i,styleSpec:t}))),Op(o)}function Op(i){return[].concat(i).sort((t,o)=>t.line-o.line)}function pa(i){return function(...t){return Op(i.apply(this,t))}}Eo.source=pa(rs),Eo.light=pa(ns),Eo.layer=pa(Lp),Eo.filter=pa(es),Eo.paintProperty=pa(Ap),Eo.layoutProperty=pa(Dp);const So=Eo,im=So.light,Fc=So.paintProperty,om=So.layoutProperty;function Bp(i,t){let o=!1;if(t&&t.length)for(const l of t)i.fire(new wi(new Error(l.message))),o=!0;return o}class Co{constructor(t,o,l){const d=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const x=new Int32Array(this.arrayBuffer);t=x[0],this.d=(o=x[1])+2*(l=x[2]);for(let E=0;E<this.d*this.d;E++){const T=x[3+E],M=x[3+E+1];d.push(T===M?null:x.subarray(T,M))}const v=x[3+d.length+1];this.keys=x.subarray(x[3+d.length],v),this.bboxes=x.subarray(v),this.insert=this._insertReadonly}else{this.d=o+2*l;for(let x=0;x<this.d*this.d;x++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=l,this.scale=o/t,this.uid=0;const g=l/o*t;this.min=-g,this.max=t+g}insert(t,o,l,d,g){this._forEachCell(o,l,d,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,l,d,g,x){this.cells[g].push(x)}query(t,o,l,d,g){const x=this.min,v=this.max;if(t<=x&&o<=x&&v<=l&&v<=d&&!g)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(t,o,l,d,this._queryCell,E,{},g),E}}_queryCell(t,o,l,d,g,x,v,E){const T=this.cells[g];if(T!==null){const M=this.keys,D=this.bboxes;for(let R=0;R<T.length;R++){const B=T[R];if(v[B]===void 0){const N=4*B;(E?E(D[N+0],D[N+1],D[N+2],D[N+3]):t<=D[N+2]&&o<=D[N+3]&&l>=D[N+0]&&d>=D[N+1])?(v[B]=!0,x.push(M[B])):v[B]=!1}}}}_forEachCell(t,o,l,d,g,x,v,E){const T=this._convertToCellCoord(t),M=this._convertToCellCoord(o),D=this._convertToCellCoord(l),R=this._convertToCellCoord(d);for(let B=T;B<=D;B++)for(let N=M;N<=R;N++){const J=this.d*N+B;if((!E||E(this._convertFromCellCoord(B),this._convertFromCellCoord(N),this._convertFromCellCoord(B+1),this._convertFromCellCoord(N+1)))&&g.call(this,t,o,l,d,J,x,v,E))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let l=0;for(let x=0;x<this.cells.length;x++)l+=this.cells[x].length;const d=new Int32Array(o+l+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;let g=o;for(let x=0;x<t.length;x++){const v=t[x];d[3+x]=g,d.set(v,g),g+=v.length}return d[3+t.length]=g,d.set(this.keys,g),g+=this.keys.length,d[3+t.length+1]=g,d.set(this.bboxes,g),g+=this.bboxes.length,d.buffer}static serialize(t,o){const l=t.toArrayBuffer();return o&&o.push(l),{buffer:l}}static deserialize(t){return new Co(t.buffer)}}const da={};function Ye(i,t,o={}){Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),da[i]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}Ye("Object",Object),Ye("TransferableGridIndex",Co),Ye("Color",A),Ye("Error",Error),Ye("AJAXError",_r),Ye("ResolvedImage",ie),Ye("StylePropertyFunction",sa),Ye("StyleExpression",Lc,{omit:["_evaluator"]}),Ye("ZoomDependentExpression",Ks),Ye("ZoomConstantExpression",Xs),Ye("CompoundExpression",xt,{omit:["_evaluate"]});for(const i in oa)oa[i]._classRegistryKey||Ye(`Expression_${i}`,oa[i]);function Nc(i){return i&&typeof ArrayBuffer!="undefined"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function is(i,t){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob)return i;if(Nc(i)||Tr(i))return t&&t.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return t&&t.push(o.buffer),o}if(i instanceof ImageData)return t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const l of i)o.push(is(l,t));return o}if(typeof i=="object"){const o=i.constructor,l=o._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");const d=o.serialize?o.serialize(i,t):{};if(!o.serialize){for(const g in i){if(!i.hasOwnProperty(g)||da[l].omit.indexOf(g)>=0)continue;const x=i[g];d[g]=da[l].shallow.indexOf(g)>=0?x:is(x,t)}i instanceof Error&&(d.message=i.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(d.$name=l),d}throw new Error("can't serialize object of type "+typeof i)}function To(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||Nc(i)||Tr(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(To);if(typeof i=="object"){const t=i.$name||"Object";if(!da[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=da[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(i);const l=Object.create(o.prototype);for(const d of Object.keys(i)){if(d==="$name")continue;const g=i[d];l[d]=da[t].shallow.indexOf(d)>=0?g:To(g)}return l}throw new Error("can't deserialize object of type "+typeof i)}class os{constructor(){this.first=!0}update(t,o){const l=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=l,!0))}}const Ve={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Uc(i){for(const t of i)if(as(t.charCodeAt(0)))return!0;return!1}function Fp(i){for(const t of i)if(!am(t.charCodeAt(0)))return!1;return!0}function am(i){return!(Ve.Arabic(i)||Ve["Arabic Supplement"](i)||Ve["Arabic Extended-A"](i)||Ve["Arabic Presentation Forms-A"](i)||Ve["Arabic Presentation Forms-B"](i))}function as(i){return!(i!==746&&i!==747&&(i<4352||!(Ve["Bopomofo Extended"](i)||Ve.Bopomofo(i)||Ve["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Ve["CJK Compatibility Ideographs"](i)||Ve["CJK Compatibility"](i)||Ve["CJK Radicals Supplement"](i)||Ve["CJK Strokes"](i)||!(!Ve["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Ve["CJK Unified Ideographs Extension A"](i)||Ve["CJK Unified Ideographs"](i)||Ve["Enclosed CJK Letters and Months"](i)||Ve["Hangul Compatibility Jamo"](i)||Ve["Hangul Jamo Extended-A"](i)||Ve["Hangul Jamo Extended-B"](i)||Ve["Hangul Jamo"](i)||Ve["Hangul Syllables"](i)||Ve.Hiragana(i)||Ve["Ideographic Description Characters"](i)||Ve.Kanbun(i)||Ve["Kangxi Radicals"](i)||Ve["Katakana Phonetic Extensions"](i)||Ve.Katakana(i)&&i!==12540||!(!Ve["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Ve["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Ve["Unified Canadian Aboriginal Syllabics"](i)||Ve["Unified Canadian Aboriginal Syllabics Extended"](i)||Ve["Vertical Forms"](i)||Ve["Yijing Hexagram Symbols"](i)||Ve["Yi Syllables"](i)||Ve["Yi Radicals"](i))))}function Np(i){return!(as(i)||function(t){return!!(Ve["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Ve["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Ve["Letterlike Symbols"](t)||Ve["Number Forms"](t)||Ve["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ve["Control Pictures"](t)&&t!==9251||Ve["Optical Character Recognition"](t)||Ve["Enclosed Alphanumerics"](t)||Ve["Geometric Shapes"](t)||Ve["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Ve["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ve["CJK Symbols and Punctuation"](t)||Ve.Katakana(t)||Ve["Private Use Area"](t)||Ve["CJK Compatibility Forms"](t)||Ve["Small Form Variants"](t)||Ve["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}function Up(i){return i>=1424&&i<=2303||Ve["Arabic Presentation Forms-A"](i)||Ve["Arabic Presentation Forms-B"](i)}function sm(i,t){return!(!t&&Up(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Ve.Khmer(i))}function lm(i){for(const t of i)if(Up(t.charCodeAt(0)))return!0;return!1}const nl="deferred",Vc="loading",jc="loaded";let $c=null,_n="unavailable",oo=null;const Vp=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(_n="error"),$c&&$c(i)};function Gc(){ha.fire(new ii("pluginStateChange",{pluginStatus:_n,pluginURL:oo}))}const ha=new io,qc=function(){return _n},il=function(){if(_n!==nl||!oo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_n=Vc,Gc(),oo&&In({url:oo},i=>{i?Vp(i):(_n=jc,Gc())})},qn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>_n===jc||qn.applyArabicShaping!=null,isLoading:()=>_n===Vc,setState(i){_n=i.pluginStatus,oo=i.pluginURL},isParsed:()=>qn.applyArabicShaping!=null&&qn.processBidirectionalText!=null&&qn.processStyledBidirectionalText!=null,getPluginURL:()=>oo};class sr{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new os,this.transition={})}isSupportedScript(t){return function(o,l){for(const d of o)if(!sm(d.charCodeAt(0),l))return!1;return!0}(t,qn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),l=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class ol{constructor(t,o){this.property=t,this.value=o,this.expression=function(l,d){if(Gs(l))return new sa(l,d);if(Hs(l)){const g=Rc(l,d);if(g.result==="error")throw new Error(g.value.map(x=>`${x.key}: ${x.message}`).join(", "));return g.value}{let g=l;return typeof l=="string"&&d.type==="color"&&(g=A.parse(l)),{kind:"constant",evaluate:()=>g}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,l){return this.property.possiblyEvaluate(this,t,o,l)}}class al{constructor(t){this.property=t,this.value=new ol(t,void 0)}transitioned(t,o){return new jp(this.property,this.value,o,de({},t.transition,this.transition),t.now)}untransitioned(){return new jp(this.property,this.value,null,{},0)}}class Zc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return ee(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new al(this._values[t].property)),this._values[t].value=new ol(this._values[t].property,o===null?void 0:ee(o))}getTransition(t){return ee(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new al(this._values[t].property)),this._values[t].transition=ee(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(t[o]=l);const d=this.getTransition(o);d!==void 0&&(t[`${o}-transition`]=d)}return t}transitioned(t,o){const l=new $p(this._properties);for(const d of Object.keys(this._values))l._values[d]=this._values[d].transitioned(t,o._values[d]);return l}untransitioned(){const t=new $p(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class jp{constructor(t,o,l,d,g){this.property=t,this.value=o,this.begin=g+d.delay||0,this.end=this.begin+d.duration||0,t.specification.transition&&(d.delay||d.duration)&&(this.prior=l)}possiblyEvaluate(t,o,l){const d=t.now||0,g=this.value.possiblyEvaluate(t,o,l),x=this.prior;if(x){if(d>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(d<this.begin)return x.possiblyEvaluate(t,o,l);{const v=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(t,o,l),g,function(E){if(E<=0)return 0;if(E>=1)return 1;const T=E*E,M=T*E;return 4*(E<.5?M:3*(E-T)+M-.75)}(v))}}return g}}class $p{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,l){const d=new sl(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(t,o,l);return d}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class cm{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return ee(this._values[t].value)}setValue(t,o){this._values[t]=new ol(this._values[t].property,o===null?void 0:ee(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(t[o]=l)}return t}possiblyEvaluate(t,o,l){const d=new sl(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(t,o,l);return d}}class ki{constructor(t,o,l){this.property=t,this.value=o,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,l,d){return this.property.evaluate(this.value,this.parameters,t,o,l,d)}}class sl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class rt{constructor(t){this.specification=t}possiblyEvaluate(t,o){return t.expression.evaluate(o)}interpolate(t,o,l){const d=Ka[this.specification.type];return d?d(t,o,l):t}}class ut{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,l,d){return new ki(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},l,d)}:t.expression,o)}interpolate(t,o,l){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new ki(this,{kind:"constant",value:void 0},t.parameters);const d=Ka[this.specification.type];return d?new ki(this,{kind:"constant",value:d(t.value.value,o.value.value,l)},t.parameters):t}evaluate(t,o,l,d,g,x){return t.kind==="constant"?t.value:t.evaluate(o,l,d,g,x)}}class ss extends ut{possiblyEvaluate(t,o,l,d){if(t.value===void 0)return new ki(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const g=t.expression.evaluate(o,null,{},l,d),x=t.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,v=this._calculate(x,x,x,o);return new ki(this,{kind:"constant",value:v},o)}if(t.expression.kind==="camera"){const g=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new ki(this,{kind:"constant",value:g},o)}return new ki(this,t.expression,o)}evaluate(t,o,l,d,g,x){if(t.kind==="source"){const v=t.evaluate(o,l,d,g,x);return this._calculate(v,v,v,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},l,d),t.evaluate({zoom:Math.floor(o.zoom)},l,d),t.evaluate({zoom:Math.floor(o.zoom)+1},l,d),o):t.value}_calculate(t,o,l,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:l,to:o}}interpolate(t){return t}}class ls{constructor(t){this.specification=t}possiblyEvaluate(t,o,l,d){if(t.value!==void 0){if(t.expression.kind==="constant"){const g=t.expression.evaluate(o,null,{},l,d);return this._calculate(g,g,g,o)}return this._calculate(t.expression.evaluate(new sr(Math.floor(o.zoom-1),o)),t.expression.evaluate(new sr(Math.floor(o.zoom),o)),t.expression.evaluate(new sr(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,l,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:l,to:o}}interpolate(t){return t}}class Hc{constructor(t){this.specification=t}possiblyEvaluate(t,o,l,d){return!!t.expression.evaluate(o,null,{},l,d)}interpolate(){return!1}}class Ur{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const l=t[o];l.specification.overridable&&this.overridableProperties.push(o);const d=this.defaultPropertyValues[o]=new ol(l,void 0),g=this.defaultTransitionablePropertyValues[o]=new al(l);this.defaultTransitioningPropertyValues[o]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=d.possiblyEvaluate({})}}}Ye("DataDrivenProperty",ut),Ye("DataConstantProperty",rt),Ye("CrossFadedDataDrivenProperty",ss),Ye("CrossFadedProperty",ls),Ye("ColorRampProperty",Hc);const zo="-transition";class wn extends io{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new cm(o.layout)),o.paint)){this._transitionablePaint=new Zc(o.paint);for(const l in t.paint)this.setPaintProperty(l,t.paint[l],{validate:!1});for(const l in t.layout)this.setLayoutProperty(l,t.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sl(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,l={}){o!=null&&this._validate(om,`layers.${this.id}.layout.${t}`,t,o,l)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(zo)?this._transitionablePaint.getTransition(t.slice(0,-zo.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,l={}){if(o!=null&&this._validate(Fc,`layers.${this.id}.paint.${t}`,t,o,l))return!1;if(t.endsWith(zo))return this._transitionablePaint.setTransition(t.slice(0,-zo.length),o||void 0),!1;{const d=this._transitionablePaint._values[t],g=d.property.specification["property-type"]==="cross-faded-data-driven",x=d.value.isDataDriven(),v=d.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const E=this._transitionablePaint._values[t].value;return E.isDataDriven()||x||g||this._handleOverridablePaintPropertyUpdate(t,v,E)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,l){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),K(t,(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}_validate(t,o,l,d,g={}){return(!g||g.validate!==!1)&&Bp(this,t.call(So,{key:o,layerType:this.type,objectKey:l,value:d,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof ki&&aa(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const um={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class cs{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ir{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vr(i,t=1){let o=0,l=0;return{members:i.map(d=>{const g=um[d.type].BYTES_PER_ELEMENT,x=o=Gp(o,Math.max(t,g)),v=d.components||1;return l=Math.max(l,g),o+=g*v,{name:d.name,type:d.type,components:v,offset:x}}),size:Gp(o,Math.max(l,t)),alignment:t}}function Gp(i,t){return Math.ceil(i/t)*t}class ma extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,o)}emplace(t,o,l){const d=2*t;return this.int16[d+0]=o,this.int16[d+1]=l,t}}ma.prototype.bytesPerElement=4,Ye("StructArrayLayout2i4",ma);class us extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,d){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,l,d)}emplace(t,o,l,d,g){const x=4*t;return this.int16[x+0]=o,this.int16[x+1]=l,this.int16[x+2]=d,this.int16[x+3]=g,t}}us.prototype.bytesPerElement=8,Ye("StructArrayLayout4i8",us);class h extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x){const v=this.length;return this.resize(v+1),this.emplace(v,t,o,l,d,g,x)}emplace(t,o,l,d,g,x,v){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=l,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=x,this.int16[E+5]=v,t}}h.prototype.bytesPerElement=12,Ye("StructArrayLayout2i4i12",h);class n extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x){const v=this.length;return this.resize(v+1),this.emplace(v,t,o,l,d,g,x)}emplace(t,o,l,d,g,x,v){const E=4*t,T=8*t;return this.int16[E+0]=o,this.int16[E+1]=l,this.uint8[T+4]=d,this.uint8[T+5]=g,this.uint8[T+6]=x,this.uint8[T+7]=v,t}}n.prototype.bytesPerElement=8,Ye("StructArrayLayout2i4ub8",n);class s extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,o)}emplace(t,o,l){const d=2*t;return this.float32[d+0]=o,this.float32[d+1]=l,t}}s.prototype.bytesPerElement=8,Ye("StructArrayLayout2f8",s);class p extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x,v,E,T,M){const D=this.length;return this.resize(D+1),this.emplace(D,t,o,l,d,g,x,v,E,T,M)}emplace(t,o,l,d,g,x,v,E,T,M,D){const R=10*t;return this.uint16[R+0]=o,this.uint16[R+1]=l,this.uint16[R+2]=d,this.uint16[R+3]=g,this.uint16[R+4]=x,this.uint16[R+5]=v,this.uint16[R+6]=E,this.uint16[R+7]=T,this.uint16[R+8]=M,this.uint16[R+9]=D,t}}p.prototype.bytesPerElement=20,Ye("StructArrayLayout10ui20",p);class f extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x,v,E,T,M,D,R){const B=this.length;return this.resize(B+1),this.emplace(B,t,o,l,d,g,x,v,E,T,M,D,R)}emplace(t,o,l,d,g,x,v,E,T,M,D,R,B){const N=12*t;return this.int16[N+0]=o,this.int16[N+1]=l,this.int16[N+2]=d,this.int16[N+3]=g,this.uint16[N+4]=x,this.uint16[N+5]=v,this.uint16[N+6]=E,this.uint16[N+7]=T,this.int16[N+8]=M,this.int16[N+9]=D,this.int16[N+10]=R,this.int16[N+11]=B,t}}f.prototype.bytesPerElement=24,Ye("StructArrayLayout4i4ui4i24",f);class b extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,l)}emplace(t,o,l,d){const g=3*t;return this.float32[g+0]=o,this.float32[g+1]=l,this.float32[g+2]=d,t}}b.prototype.bytesPerElement=12,Ye("StructArrayLayout3f12",b);class _ extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}_.prototype.bytesPerElement=4,Ye("StructArrayLayout1ul4",_);class S extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x,v,E,T){const M=this.length;return this.resize(M+1),this.emplace(M,t,o,l,d,g,x,v,E,T)}emplace(t,o,l,d,g,x,v,E,T,M){const D=10*t,R=5*t;return this.int16[D+0]=o,this.int16[D+1]=l,this.int16[D+2]=d,this.int16[D+3]=g,this.int16[D+4]=x,this.int16[D+5]=v,this.uint32[R+3]=E,this.uint16[D+8]=T,this.uint16[D+9]=M,t}}S.prototype.bytesPerElement=20,Ye("StructArrayLayout6i1ul2ui20",S);class C extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x){const v=this.length;return this.resize(v+1),this.emplace(v,t,o,l,d,g,x)}emplace(t,o,l,d,g,x,v){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=l,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=x,this.int16[E+5]=v,t}}C.prototype.bytesPerElement=12,Ye("StructArrayLayout2i2i2i12",C);class I extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,t,o,l,d,g)}emplace(t,o,l,d,g,x){const v=4*t,E=8*t;return this.float32[v+0]=o,this.float32[v+1]=l,this.float32[v+2]=d,this.int16[E+6]=g,this.int16[E+7]=x,t}}I.prototype.bytesPerElement=16,Ye("StructArrayLayout2f1f2i16",I);class L extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l,d){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,l,d)}emplace(t,o,l,d,g){const x=12*t,v=3*t;return this.uint8[x+0]=o,this.uint8[x+1]=l,this.float32[v+1]=d,this.float32[v+2]=g,t}}L.prototype.bytesPerElement=12,Ye("StructArrayLayout2ub2f12",L);class O extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,l)}emplace(t,o,l,d){const g=3*t;return this.uint16[g+0]=o,this.uint16[g+1]=l,this.uint16[g+2]=d,t}}O.prototype.bytesPerElement=6,Ye("StructArrayLayout3ui6",O);class j extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x,v,E,T,M,D,R,B,N,J,Q,ce){const fe=this.length;return this.resize(fe+1),this.emplace(fe,t,o,l,d,g,x,v,E,T,M,D,R,B,N,J,Q,ce)}emplace(t,o,l,d,g,x,v,E,T,M,D,R,B,N,J,Q,ce,fe){const me=24*t,we=12*t,Ie=48*t;return this.int16[me+0]=o,this.int16[me+1]=l,this.uint16[me+2]=d,this.uint16[me+3]=g,this.uint32[we+2]=x,this.uint32[we+3]=v,this.uint32[we+4]=E,this.uint16[me+10]=T,this.uint16[me+11]=M,this.uint16[me+12]=D,this.float32[we+7]=R,this.float32[we+8]=B,this.uint8[Ie+36]=N,this.uint8[Ie+37]=J,this.uint8[Ie+38]=Q,this.uint32[we+10]=ce,this.int16[me+22]=fe,t}}j.prototype.bytesPerElement=48,Ye("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",j);class Y extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l,d,g,x,v,E,T,M,D,R,B,N,J,Q,ce,fe,me,we,Ie,Ce,Je,at,Ze,He,Fe,Ke){const We=this.length;return this.resize(We+1),this.emplace(We,t,o,l,d,g,x,v,E,T,M,D,R,B,N,J,Q,ce,fe,me,we,Ie,Ce,Je,at,Ze,He,Fe,Ke)}emplace(t,o,l,d,g,x,v,E,T,M,D,R,B,N,J,Q,ce,fe,me,we,Ie,Ce,Je,at,Ze,He,Fe,Ke,We){const De=34*t,pt=17*t;return this.int16[De+0]=o,this.int16[De+1]=l,this.int16[De+2]=d,this.int16[De+3]=g,this.int16[De+4]=x,this.int16[De+5]=v,this.int16[De+6]=E,this.int16[De+7]=T,this.uint16[De+8]=M,this.uint16[De+9]=D,this.uint16[De+10]=R,this.uint16[De+11]=B,this.uint16[De+12]=N,this.uint16[De+13]=J,this.uint16[De+14]=Q,this.uint16[De+15]=ce,this.uint16[De+16]=fe,this.uint16[De+17]=me,this.uint16[De+18]=we,this.uint16[De+19]=Ie,this.uint16[De+20]=Ce,this.uint16[De+21]=Je,this.uint16[De+22]=at,this.uint32[pt+12]=Ze,this.float32[pt+13]=He,this.float32[pt+14]=Fe,this.float32[pt+15]=Ke,this.float32[pt+16]=We,t}}Y.prototype.bytesPerElement=68,Ye("StructArrayLayout8i15ui1ul4f68",Y);class $ extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}$.prototype.bytesPerElement=4,Ye("StructArrayLayout1f4",$);class X extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,l)}emplace(t,o,l,d){const g=3*t;return this.int16[g+0]=o,this.int16[g+1]=l,this.int16[g+2]=d,t}}X.prototype.bytesPerElement=6,Ye("StructArrayLayout3i6",X);class ae extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,l)}emplace(t,o,l,d){const g=4*t;return this.uint32[2*t+0]=o,this.uint16[g+2]=l,this.uint16[g+3]=d,t}}ae.prototype.bytesPerElement=8,Ye("StructArrayLayout1ul2ui8",ae);class se extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,o)}emplace(t,o,l){const d=2*t;return this.uint16[d+0]=o,this.uint16[d+1]=l,t}}se.prototype.bytesPerElement=4,Ye("StructArrayLayout2ui4",se);class ue extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}ue.prototype.bytesPerElement=2,Ye("StructArrayLayout1ui2",ue);class le extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l,d){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,l,d)}emplace(t,o,l,d,g){const x=4*t;return this.float32[x+0]=o,this.float32[x+1]=l,this.float32[x+2]=d,this.float32[x+3]=g,t}}le.prototype.bytesPerElement=16,Ye("StructArrayLayout4f16",le);class Se extends cs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Qe(this.anchorPointX,this.anchorPointY)}}Se.prototype.size=20;class xe extends S{get(t){return new Se(this,t)}}Ye("CollisionBoxArray",xe);class _e extends cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}_e.prototype.size=48;class Ae extends j{get(t){return new _e(this,t)}}Ye("PlacedSymbolArray",Ae);class Oe extends cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Oe.prototype.size=68;class Ee extends Y{get(t){return new Oe(this,t)}}Ye("SymbolInstanceArray",Ee);class et extends ${getoffsetX(t){return this.float32[1*t+0]}}Ye("GlyphOffsetArray",et);class Ge extends X{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Ye("SymbolLineVertexArray",Ge);class mt extends cs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}mt.prototype.size=8;class Dt extends ae{get(t){return new mt(this,t)}}Ye("FeatureIndexArray",Dt);class Tt extends ma{}class Mt extends ma{}class mr extends h{}class ft extends n{}class Ot extends s{}class Xt extends p{}class Qr extends f{}class An extends b{}class Zn extends _{}class Hn extends C{}class ao extends L{}class kn extends O{}class Ei extends se{}const Io=Vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dn}=Io;class Bt{constructor(t=[]){this.segments=t}prepareSegment(t,o,l,d){let g=this.segments[this.segments.length-1];return t>Bt.MAX_VERTEX_ARRAY_LENGTH&&Te(`Max vertices per segment is ${Bt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!g||g.vertexLength+t>Bt.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==d)&&(g={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},d!==void 0&&(g.sortKey=d),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,l,d){return new Bt([{vertexOffset:t,primitiveOffset:o,vertexLength:l,primitiveLength:d,vaos:{},sortKey:0}])}}function $t(i,t){return 256*(i=V(Math.floor(i),0,255))+V(Math.floor(t),0,255)}Bt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ye("SegmentVector",Bt);const Mr=Vr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var hn={exports:{}},lr={exports:{}};lr.exports=function(i,t){var o,l,d,g,x,v,E,T;for(l=i.length-(o=3&i.length),d=t,x=3432918353,v=461845907,T=0;T<l;)E=255&i.charCodeAt(T)|(255&i.charCodeAt(++T))<<8|(255&i.charCodeAt(++T))<<16|(255&i.charCodeAt(++T))<<24,++T,d=27492+(65535&(g=5*(65535&(d=(d^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*v+(((E>>>16)*v&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(E=0,o){case 3:E^=(255&i.charCodeAt(T+2))<<16;case 2:E^=(255&i.charCodeAt(T+1))<<8;case 1:d^=E=(65535&(E=(E=(65535&(E^=255&i.charCodeAt(T)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*v+(((E>>>16)*v&65535)<<16)&4294967295}return d^=i.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var Po={exports:{}};Po.exports=function(i,t){for(var o,l=i.length,d=t^l,g=0;l>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(g)|(255&i.charCodeAt(++g))<<8|(255&i.charCodeAt(++g))<<16|(255&i.charCodeAt(++g))<<24))+((1540483477*(o>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),l-=4,++g;switch(l){case 3:d^=(255&i.charCodeAt(g+2))<<16;case 2:d^=(255&i.charCodeAt(g+1))<<8;case 1:d=1540483477*(65535&(d^=255&i.charCodeAt(g)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var Si=lr.exports,ll=Po.exports;hn.exports=Si,hn.exports.murmur3=Si,hn.exports.murmur2=ll;var Wc=hn.exports;class cl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,l,d){this.ids.push(qp(t)),this.positions.push(o,l,d)}getPositions(t){const o=qp(t);let l=0,d=this.ids.length-1;for(;l<d;){const x=l+d>>1;this.ids[x]>=o?d=x:l=x+1}const g=[];for(;this.ids[l]===o;)g.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return g}static serialize(t,o){const l=new Float64Array(t.ids),d=new Uint32Array(t.positions);return Mo(l,d,0,l.length-1),o&&o.push(l.buffer,d.buffer),{ids:l,positions:d}}static deserialize(t){const o=new cl;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function qp(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Wc(String(i))}function Mo(i,t,o,l){for(;o<l;){const d=i[o+l>>1];let g=o-1,x=l+1;for(;;){do g++;while(i[g]<d);do x--;while(i[x]>d);if(g>=x)break;ul(i,g,x),ul(t,3*g,3*x),ul(t,3*g+1,3*x+1),ul(t,3*g+2,3*x+2)}x-o<l-x?(Mo(i,t,o,x),o=x+1):(Mo(i,t,x+1,l),l=x)}}function ul(i,t,o){const l=i[t];i[t]=i[o],i[o]=l}Ye("FeaturePositionMap",cl);class Ci{constructor(t,o){this.gl=t.gl,this.location=o}}class fa extends Ci{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class H0 extends Ci{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class W0 extends Ci{constructor(t,o){super(t,o),this.current=A.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const d2=new Float32Array(16);function pm(i){return[$t(255*i.r,255*i.g),$t(255*i.b,255*i.a)]}class Xc{constructor(t,o,l){this.value=t,this.uniformNames=o.map(d=>`u_${d}`),this.type=l}setUniform(t,o,l){t.set(l.constantOr(this.value))}getBinding(t,o,l){return this.type==="color"?new W0(t,o):new fa(t,o)}}class pl{constructor(t,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,l,d){const g=d==="u_pattern_to"?this.patternTo:d==="u_pattern_from"?this.patternFrom:d==="u_pixel_ratio_to"?this.pixelRatioTo:d==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&t.set(g)}getBinding(t,o,l){return l.substr(0,9)==="u_pattern"?new H0(t,o):new fa(t,o)}}class Ao{constructor(t,o,l,d){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(g=>({name:`a_${g}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(t,o,l,d,g){const x=this.paintVertexArray.length,v=this.expression.evaluate(new sr(0),o,{},d,[],g);this.paintVertexArray.resize(t),this._setPaintValue(x,t,v)}updatePaintArray(t,o,l,d){const g=this.expression.evaluate({zoom:0},l,d);this._setPaintValue(t,o,g)}_setPaintValue(t,o,l){if(this.type==="color"){const d=pm(l);for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,d[0],d[1])}else{for(let d=t;d<o;d++)this.paintVertexArray.emplace(d,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Gi{constructor(t,o,l,d,g,x){this.expression=t,this.uniformNames=o.map(v=>`u_${v}_t`),this.type=l,this.useIntegerZoom=d,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=o.map(v=>({name:`a_${v}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(t,o,l,d,g){const x=this.expression.evaluate(new sr(this.zoom),o,{},d,[],g),v=this.expression.evaluate(new sr(this.zoom+1),o,{},d,[],g),E=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(E,t,x,v)}updatePaintArray(t,o,l,d){const g=this.expression.evaluate({zoom:this.zoom},l,d),x=this.expression.evaluate({zoom:this.zoom+1},l,d);this._setPaintValue(t,o,g,x)}_setPaintValue(t,o,l,d){if(this.type==="color"){const g=pm(l),x=pm(d);for(let v=t;v<o;v++)this.paintVertexArray.emplace(v,g[0],g[1],x[0],x[1])}else{for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,l,d);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(d))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,d=V(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);t.set(d)}getBinding(t,o,l){return new fa(t,o)}}class ga{constructor(t,o,l,d,g,x){this.expression=t,this.type=o,this.useIntegerZoom=l,this.zoom=d,this.layerId=x,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(t,o,l){const d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(d,t,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(t,o,l,d,g){this._setPaintValues(t,o,l.patterns&&l.patterns[this.layerId],g)}_setPaintValues(t,o,l,d){if(!d||!l)return;const{min:g,mid:x,max:v}=l,E=d[g],T=d[x],M=d[v];if(E&&T&&M)for(let D=t;D<o;D++)this.zoomInPaintVertexArray.emplace(D,T.tl[0],T.tl[1],T.br[0],T.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],T.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,T.tl[0],T.tl[1],T.br[0],T.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],T.pixelRatio,M.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Mr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Mr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class X0{constructor(t,o,l){this.binders={},this._buffers=[];const d=[];for(const g in t.paint._values){if(!l(g))continue;const x=t.paint.get(g);if(!(x instanceof ki&&aa(x.property.specification)))continue;const v=h2(g,t.type),E=x.value,T=x.property.specification.type,M=x.property.useIntegerZoom,D=x.property.specification["property-type"],R=D==="cross-faded"||D==="cross-faded-data-driven";if(E.kind==="constant")this.binders[g]=R?new pl(E.value,v):new Xc(E.value,v,T),d.push(`/u_${g}`);else if(E.kind==="source"||R){const B=K0(g,T,"source");this.binders[g]=R?new ga(E,T,M,o,B,t.id):new Ao(E,v,T,B),d.push(`/a_${g}`)}else{const B=K0(g,T,"composite");this.binders[g]=new Gi(E,v,T,M,o,B),d.push(`/z_${g}`)}}this.cacheKey=d.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof Ao||o instanceof Gi?o.maxValue:0}populatePaintArrays(t,o,l,d,g){for(const x in this.binders){const v=this.binders[x];(v instanceof Ao||v instanceof Gi||v instanceof ga)&&v.populatePaintArray(t,o,l,d,g)}}setConstantPatternPositions(t,o){for(const l in this.binders){const d=this.binders[l];d instanceof pl&&d.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,l,d,g){let x=!1;for(const v in t){const E=o.getPositions(v);for(const T of E){const M=l.feature(T.index);for(const D in this.binders){const R=this.binders[D];if((R instanceof Ao||R instanceof Gi||R instanceof ga)&&R.expression.isStateDependent===!0){const B=d.paint.get(D);R.expression=B.value,R.updatePaintArray(T.start,T.end,M,t[v],g),x=!0}}}}return x}defines(){const t=[];for(const o in this.binders){const l=this.binders[o];(l instanceof Xc||l instanceof pl)&&t.push(...l.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Ao||l instanceof Gi)for(let d=0;d<l.paintVertexAttributes.length;d++)t.push(l.paintVertexAttributes[d].name);else if(l instanceof ga)for(let d=0;d<Mr.members.length;d++)t.push(Mr.members[d].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Xc||l instanceof pl||l instanceof Gi)for(const d of l.uniformNames)t.push(d)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const l=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof Xc||g instanceof pl||g instanceof Gi){for(const x of g.uniformNames)if(o[x]){const v=g.getBinding(t,o[x],x);l.push({name:x,property:d,binding:v})}}}return l}setUniforms(t,o,l,d){for(const{name:g,property:x,binding:v}of o)this.binders[x].setUniform(v,d,l.get(x),g)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(t&&l instanceof ga){const d=t.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(l instanceof Ao||l instanceof Gi)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(t){for(const o in this.binders){const l=this.binders[o];(l instanceof Ao||l instanceof Gi||l instanceof ga)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof Ao||o instanceof Gi||o instanceof ga)&&o.destroy()}}}class ps{constructor(t,o,l=()=>!0){this.programConfigurations={};for(const d of t)this.programConfigurations[d.id]=new X0(d,o,l);this.needsUpload=!1,this._featureMap=new cl,this._bufferOffset=0}populatePaintArrays(t,o,l,d,g,x){for(const v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(t,o,d,g,x);o.id!==void 0&&this._featureMap.add(o.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,l,d){for(const g of l)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,o,g,d)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function h2(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function K0(i,t,o){const l={color:{source:s,composite:le},number:{source:$,composite:s}},d=function(g){return{"line-pattern":{source:Xt,composite:Xt},"fill-pattern":{source:Xt,composite:Xt},"fill-extrusion-pattern":{source:Xt,composite:Xt}}[g]}(i);return d&&d[o]||l[t][o]}Ye("ConstantBinder",Xc),Ye("CrossFadedConstantBinder",pl),Ye("SourceExpressionBinder",Ao),Ye("CrossFadedCompositeBinder",ga),Ye("CompositeExpressionBinder",Gi),Ye("ProgramConfiguration",X0,{omit:["_buffers"]}),Ye("ProgramConfigurationSet",ps);var jr=8192;const dm=Math.pow(2,14)-1,Y0=-dm-1;function ds(i){const t=jr/i.extent,o=i.loadGeometry();for(let l=0;l<o.length;l++){const d=o[l];for(let g=0;g<d.length;g++){const x=d[g],v=Math.round(x.x*t),E=Math.round(x.y*t);x.x=V(v,Y0,dm),x.y=V(E,Y0,dm),(v<x.x||v>x.x+1||E<x.y||E>x.y+1)&&Te("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function hs(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?ds(i):[]}}function Zp(i,t,o,l,d){i.emplaceBack(2*t+(l+1)/2,2*o+(d+1)/2)}class hm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Tt,this.indexArray=new kn,this.segments=new Bt,this.programConfigurations=new ps(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){const d=this.layers[0],g=[];let x=null,v=!1;d.type==="circle"&&(x=d.layout.get("circle-sort-key"),v=!x.isConstant());for(const{feature:E,id:T,index:M,sourceLayerIndex:D}of t){const R=this.layers[0]._featureFilter.needGeometry,B=hs(E,R);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),B,l))continue;const N=v?x.evaluate(B,{},l):void 0,J={id:T,properties:E.properties,type:E.type,sourceLayerIndex:D,index:M,geometry:R?B.geometry:ds(E),patterns:{},sortKey:N};g.push(J)}v&&g.sort((E,T)=>E.sortKey-T.sortKey);for(const E of g){const{geometry:T,index:M,sourceLayerIndex:D}=E,R=t[M].feature;this.addFeature(E,T,M,l),o.featureIndex.insert(R,T,M,D,this.index)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Dn),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,l,d){for(const g of o)for(const x of g){const v=x.x,E=x.y;if(v<0||v>=jr||E<0||E>=jr)continue;const T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),M=T.vertexLength;Zp(this.layoutVertexArray,v,E,-1,-1),Zp(this.layoutVertexArray,v,E,1,-1),Zp(this.layoutVertexArray,v,E,1,1),Zp(this.layoutVertexArray,v,E,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),T.vertexLength+=4,T.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{},d)}}function J0(i,t){for(let o=0;o<i.length;o++)if(dl(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(dl(i,t[o]))return!0;return!!mm(i,t)}function m2(i,t,o){return!!dl(i,t)||!!fm(t,i,o)}function Q0(i,t){if(i.length===1)return t1(t,i[0]);for(let o=0;o<t.length;o++){const l=t[o];for(let d=0;d<l.length;d++)if(dl(i,l[d]))return!0}for(let o=0;o<i.length;o++)if(t1(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(mm(i,t[o]))return!0;return!1}function f2(i,t,o){if(i.length>1){if(mm(i,t))return!0;for(let l=0;l<t.length;l++)if(fm(t[l],i,o))return!0}for(let l=0;l<i.length;l++)if(fm(i[l],t,o))return!0;return!1}function mm(i,t){if(i.length===0||t.length===0)return!1;for(let o=0;o<i.length-1;o++){const l=i[o],d=i[o+1];for(let g=0;g<t.length-1;g++)if(g2(l,d,t[g],t[g+1]))return!0}return!1}function g2(i,t,o,l){return Pe(i,o,l)!==Pe(t,o,l)&&Pe(i,t,o)!==Pe(i,t,l)}function fm(i,t,o){const l=o*o;if(t.length===1)return i.distSqr(t[0])<l;for(let d=1;d<t.length;d++)if(e1(i,t[d-1],t[d])<l)return!0;return!1}function e1(i,t,o){const l=t.distSqr(o);if(l===0)return i.distSqr(t);const d=((i.x-t.x)*(o.x-t.x)+(i.y-t.y)*(o.y-t.y))/l;return i.distSqr(d<0?t:d>1?o:o.sub(t)._mult(d)._add(t))}function t1(i,t){let o,l,d,g=!1;for(let x=0;x<i.length;x++){o=i[x];for(let v=0,E=o.length-1;v<o.length;E=v++)l=o[v],d=o[E],l.y>t.y!=d.y>t.y&&t.x<(d.x-l.x)*(t.y-l.y)/(d.y-l.y)+l.x&&(g=!g)}return g}function dl(i,t){let o=!1;for(let l=0,d=i.length-1;l<i.length;d=l++){const g=i[l],x=i[d];g.y>t.y!=x.y>t.y&&t.x<(x.x-g.x)*(t.y-g.y)/(x.y-g.y)+g.x&&(o=!o)}return o}function x2(i,t,o){const l=o[0],d=o[2];if(i.x<l.x&&t.x<l.x||i.x>d.x&&t.x>d.x||i.y<l.y&&t.y<l.y||i.y>d.y&&t.y>d.y)return!1;const g=Pe(i,t,o[0]);return g!==Pe(i,t,o[1])||g!==Pe(i,t,o[2])||g!==Pe(i,t,o[3])}function Kc(i,t,o){const l=t.paint.get(i).value;return l.kind==="constant"?l.value:o.programConfigurations.get(t.id).getMaxValue(i)}function Hp(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Wp(i,t,o,l,d){if(!t[0]&&!t[1])return i;const g=Qe.convert(t)._mult(d);o==="viewport"&&g._rotate(-l);const x=[];for(let v=0;v<i.length;v++)x.push(i[v].sub(g));return x}Ye("CircleBucket",hm,{omit:["layers"]});const y2=new Ur({"circle-sort-key":new ut(be.layout_circle["circle-sort-key"])});var b2={paint:new Ur({"circle-radius":new ut(be.paint_circle["circle-radius"]),"circle-color":new ut(be.paint_circle["circle-color"]),"circle-blur":new ut(be.paint_circle["circle-blur"]),"circle-opacity":new ut(be.paint_circle["circle-opacity"]),"circle-translate":new rt(be.paint_circle["circle-translate"]),"circle-translate-anchor":new rt(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rt(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rt(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ut(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ut(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ut(be.paint_circle["circle-stroke-opacity"])}),layout:y2},hl=typeof Float32Array!="undefined"?Float32Array:Array;function gm(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function r1(i,t,o){var l=t[0],d=t[1],g=t[2],x=t[3],v=t[4],E=t[5],T=t[6],M=t[7],D=t[8],R=t[9],B=t[10],N=t[11],J=t[12],Q=t[13],ce=t[14],fe=t[15],me=o[0],we=o[1],Ie=o[2],Ce=o[3];return i[0]=me*l+we*v+Ie*D+Ce*J,i[1]=me*d+we*E+Ie*R+Ce*Q,i[2]=me*g+we*T+Ie*B+Ce*ce,i[3]=me*x+we*M+Ie*N+Ce*fe,i[4]=(me=o[4])*l+(we=o[5])*v+(Ie=o[6])*D+(Ce=o[7])*J,i[5]=me*d+we*E+Ie*R+Ce*Q,i[6]=me*g+we*T+Ie*B+Ce*ce,i[7]=me*x+we*M+Ie*N+Ce*fe,i[8]=(me=o[8])*l+(we=o[9])*v+(Ie=o[10])*D+(Ce=o[11])*J,i[9]=me*d+we*E+Ie*R+Ce*Q,i[10]=me*g+we*T+Ie*B+Ce*ce,i[11]=me*x+we*M+Ie*N+Ce*fe,i[12]=(me=o[12])*l+(we=o[13])*v+(Ie=o[14])*D+(Ce=o[15])*J,i[13]=me*d+we*E+Ie*R+Ce*Q,i[14]=me*g+we*T+Ie*B+Ce*ce,i[15]=me*x+we*M+Ie*N+Ce*fe,i}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var Yc,v2=r1;function Xp(i,t,o){var l=t[0],d=t[1],g=t[2],x=t[3];return i[0]=o[0]*l+o[4]*d+o[8]*g+o[12]*x,i[1]=o[1]*l+o[5]*d+o[9]*g+o[13]*x,i[2]=o[2]*l+o[6]*d+o[10]*g+o[14]*x,i[3]=o[3]*l+o[7]*d+o[11]*g+o[15]*x,i}function n1(i,t){const o=Xp([],[i.x,i.y,0,1],t);return new Qe(o[0]/o[3],o[1]/o[3])}Yc=new hl(4),hl!=Float32Array&&(Yc[0]=0,Yc[1]=0,Yc[2]=0,Yc[3]=0);class i1 extends hm{}Ye("HeatmapBucket",i1,{omit:["layers"]});var _2={paint:new Ur({"heatmap-radius":new ut(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ut(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rt(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hc(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rt(be.paint_heatmap["heatmap-opacity"])})};function xm(i,{width:t,height:o},l,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==t*o*l)throw new RangeError(`mismatched image size. expected: ${d.length} but got: ${t*o*l}`)}else d=new Uint8Array(t*o*l);return i.width=t,i.height=o,i.data=d,i}function o1(i,{width:t,height:o},l){if(t===i.width&&o===i.height)return;const d=xm({},{width:t,height:o},l);ym(i,d,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,o)},l),i.width=t,i.height=o,i.data=d.data}function ym(i,t,o,l,d,g){if(d.width===0||d.height===0)return t;if(d.width>i.width||d.height>i.height||o.x>i.width-d.width||o.y>i.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>t.width||d.height>t.height||l.x>t.width-d.width||l.y>t.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,v=t.data;for(let E=0;E<d.height;E++){const T=((o.y+E)*i.width+o.x)*g,M=((l.y+E)*t.width+l.x)*g;for(let D=0;D<d.width*g;D++)v[M+D]=x[T+D]}return t}class Jc{constructor(t,o){xm(this,t,1,o)}resize(t){o1(this,t,1)}clone(){return new Jc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,l,d,g){ym(t,o,l,d,g,1)}}class ui{constructor(t,o){xm(this,t,4,o)}resize(t){o1(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ui({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,l,d,g){ym(t,o,l,d,g,4)}}function a1(i){const t={},o=i.resolution||256,l=i.clips?i.clips.length:1,d=i.image||new ui({width:o,height:l}),g=(x,v,E)=>{t[i.evaluationKey]=E;const T=i.expression.evaluate(t);d.data[x+v+0]=Math.floor(255*T.r/T.a),d.data[x+v+1]=Math.floor(255*T.g/T.a),d.data[x+v+2]=Math.floor(255*T.b/T.a),d.data[x+v+3]=Math.floor(255*T.a)};if(i.clips)for(let x=0,v=0;x<l;++x,v+=4*o)for(let E=0,T=0;E<o;E++,T+=4){const M=E/(o-1),{start:D,end:R}=i.clips[x];g(v,T,D*(1-M)+R*M)}else for(let x=0,v=0;x<o;x++,v+=4)g(0,v,x/(o-1));return d}Ye("AlphaImage",Jc),Ye("RGBAImage",ui);var w2={paint:new Ur({"hillshade-illumination-direction":new rt(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new rt(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rt(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rt(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rt(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rt(be.paint_hillshade["hillshade-accent-color"])})};const k2=Vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:E2}=k2;var bm={exports:{}};function Kp(i,t,o){o=o||2;var l,d,g,x,v,E,T,M=t&&t.length,D=M?t[0]*o:i.length,R=s1(i,0,D,o,!0),B=[];if(!R||R.next===R.prev)return B;if(M&&(R=function(J,Q,ce,fe){var me,we,Ie,Ce=[];for(me=0,we=Q.length;me<we;me++)(Ie=s1(J,Q[me]*fe,me<we-1?Q[me+1]*fe:J.length,fe,!1))===Ie.next&&(Ie.steiner=!0),Ce.push(A2(Ie));for(Ce.sort(I2),me=0;me<Ce.length;me++)ce=xa(ce=P2(Ce[me],ce),ce.next);return ce}(i,t,R,o)),i.length>80*o){l=g=i[0],d=x=i[1];for(var N=o;N<D;N+=o)(v=i[N])<l&&(l=v),(E=i[N+1])<d&&(d=E),v>g&&(g=v),E>x&&(x=E);T=(T=Math.max(g-l,x-d))!==0?1/T:0}return Qc(R,B,o,l,d,T),B}function s1(i,t,o,l,d){var g,x;if(d===wm(i,t,o,l)>0)for(g=t;g<o;g+=l)x=u1(g,i[g],i[g+1],x);else for(g=o-l;g>=t;g-=l)x=u1(g,i[g],i[g+1],x);return x&&Yp(x,x.next)&&(tu(x),x=x.next),x}function xa(i,t){if(!i)return i;t||(t=i);var o,l=i;do if(o=!1,l.steiner||!Yp(l,l.next)&&kr(l.prev,l,l.next)!==0)l=l.next;else{if(tu(l),(l=t=l.prev)===l.next)break;o=!0}while(o||l!==t);return t}function Qc(i,t,o,l,d,g,x){if(i){!x&&g&&function(M,D,R,B){var N=M;do N.z===null&&(N.z=vm(N.x,N.y,D,R,B)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==M);N.prevZ.nextZ=null,N.prevZ=null,function(J){var Q,ce,fe,me,we,Ie,Ce,Je,at=1;do{for(ce=J,J=null,we=null,Ie=0;ce;){for(Ie++,fe=ce,Ce=0,Q=0;Q<at&&(Ce++,fe=fe.nextZ);Q++);for(Je=at;Ce>0||Je>0&&fe;)Ce!==0&&(Je===0||!fe||ce.z<=fe.z)?(me=ce,ce=ce.nextZ,Ce--):(me=fe,fe=fe.nextZ,Je--),we?we.nextZ=me:J=me,me.prevZ=we,we=me;ce=fe}we.nextZ=null,at*=2}while(Ie>1)}(N)}(i,l,d,g);for(var v,E,T=i;i.prev!==i.next;)if(v=i.prev,E=i.next,g?C2(i,l,d,g):S2(i))t.push(v.i/o),t.push(i.i/o),t.push(E.i/o),tu(i),i=E.next,T=E.next;else if((i=E)===T){x?x===1?Qc(i=T2(xa(i),t,o),t,o,l,d,g,2):x===2&&z2(i,t,o,l,d,g):Qc(xa(i),t,o,l,d,g,1);break}}}function S2(i){var t=i.prev,o=i,l=i.next;if(kr(t,o,l)>=0)return!1;for(var d=i.next.next;d!==i.prev;){if(ml(t.x,t.y,o.x,o.y,l.x,l.y,d.x,d.y)&&kr(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function C2(i,t,o,l){var d=i.prev,g=i,x=i.next;if(kr(d,g,x)>=0)return!1;for(var v=d.x>g.x?d.x>x.x?d.x:x.x:g.x>x.x?g.x:x.x,E=d.y>g.y?d.y>x.y?d.y:x.y:g.y>x.y?g.y:x.y,T=vm(d.x<g.x?d.x<x.x?d.x:x.x:g.x<x.x?g.x:x.x,d.y<g.y?d.y<x.y?d.y:x.y:g.y<x.y?g.y:x.y,t,o,l),M=vm(v,E,t,o,l),D=i.prevZ,R=i.nextZ;D&&D.z>=T&&R&&R.z<=M;){if(D!==i.prev&&D!==i.next&&ml(d.x,d.y,g.x,g.y,x.x,x.y,D.x,D.y)&&kr(D.prev,D,D.next)>=0||(D=D.prevZ,R!==i.prev&&R!==i.next&&ml(d.x,d.y,g.x,g.y,x.x,x.y,R.x,R.y)&&kr(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;D&&D.z>=T;){if(D!==i.prev&&D!==i.next&&ml(d.x,d.y,g.x,g.y,x.x,x.y,D.x,D.y)&&kr(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;R&&R.z<=M;){if(R!==i.prev&&R!==i.next&&ml(d.x,d.y,g.x,g.y,x.x,x.y,R.x,R.y)&&kr(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function T2(i,t,o){var l=i;do{var d=l.prev,g=l.next.next;!Yp(d,g)&&l1(d,l,l.next,g)&&eu(d,g)&&eu(g,d)&&(t.push(d.i/o),t.push(l.i/o),t.push(g.i/o),tu(l),tu(l.next),l=i=g),l=l.next}while(l!==i);return xa(l)}function z2(i,t,o,l,d,g){var x=i;do{for(var v=x.next.next;v!==x.prev;){if(x.i!==v.i&&D2(x,v)){var E=c1(x,v);return x=xa(x,x.next),E=xa(E,E.next),Qc(x,t,o,l,d,g),void Qc(E,t,o,l,d,g)}v=v.next}x=x.next}while(x!==i)}function I2(i,t){return i.x-t.x}function P2(i,t){var o=function(g,x){var v,E=x,T=g.x,M=g.y,D=-1/0;do{if(M<=E.y&&M>=E.next.y&&E.next.y!==E.y){var R=E.x+(M-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(R<=T&&R>D){if(D=R,R===T){if(M===E.y)return E;if(M===E.next.y)return E.next}v=E.x<E.next.x?E:E.next}}E=E.next}while(E!==x);if(!v)return null;if(T===D)return v;var B,N=v,J=v.x,Q=v.y,ce=1/0;E=v;do T>=E.x&&E.x>=J&&T!==E.x&&ml(M<Q?T:D,M,J,Q,M<Q?D:T,M,E.x,E.y)&&(B=Math.abs(M-E.y)/(T-E.x),eu(E,g)&&(B<ce||B===ce&&(E.x>v.x||E.x===v.x&&M2(v,E)))&&(v=E,ce=B)),E=E.next;while(E!==N);return v}(i,t);if(!o)return t;var l=c1(o,i),d=xa(o,o.next);return xa(l,l.next),t===o?d:t}function M2(i,t){return kr(i.prev,i,t.prev)<0&&kr(t.next,i,i.next)<0}function vm(i,t,o,l,d){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-o)*d)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*d)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function A2(i){var t=i,o=i;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==i);return o}function ml(i,t,o,l,d,g,x,v){return(d-x)*(t-v)-(i-x)*(g-v)>=0&&(i-x)*(l-v)-(o-x)*(t-v)>=0&&(o-x)*(g-v)-(d-x)*(l-v)>=0}function D2(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(o,l){var d=o;do{if(d.i!==o.i&&d.next.i!==o.i&&d.i!==l.i&&d.next.i!==l.i&&l1(d,d.next,o,l))return!0;d=d.next}while(d!==o);return!1}(i,t)&&(eu(i,t)&&eu(t,i)&&function(o,l){var d=o,g=!1,x=(o.x+l.x)/2,v=(o.y+l.y)/2;do d.y>v!=d.next.y>v&&d.next.y!==d.y&&x<(d.next.x-d.x)*(v-d.y)/(d.next.y-d.y)+d.x&&(g=!g),d=d.next;while(d!==o);return g}(i,t)&&(kr(i.prev,i,t.prev)||kr(i,t.prev,t))||Yp(i,t)&&kr(i.prev,i,i.next)>0&&kr(t.prev,t,t.next)>0)}function kr(i,t,o){return(t.y-i.y)*(o.x-t.x)-(t.x-i.x)*(o.y-t.y)}function Yp(i,t){return i.x===t.x&&i.y===t.y}function l1(i,t,o,l){var d=Qp(kr(i,t,o)),g=Qp(kr(i,t,l)),x=Qp(kr(o,l,i)),v=Qp(kr(o,l,t));return d!==g&&x!==v||!(d!==0||!Jp(i,o,t))||!(g!==0||!Jp(i,l,t))||!(x!==0||!Jp(o,i,l))||!(v!==0||!Jp(o,t,l))}function Jp(i,t,o){return t.x<=Math.max(i.x,o.x)&&t.x>=Math.min(i.x,o.x)&&t.y<=Math.max(i.y,o.y)&&t.y>=Math.min(i.y,o.y)}function Qp(i){return i>0?1:i<0?-1:0}function eu(i,t){return kr(i.prev,i,i.next)<0?kr(i,t,i.next)>=0&&kr(i,i.prev,t)>=0:kr(i,t,i.prev)<0||kr(i,i.next,t)<0}function c1(i,t){var o=new _m(i.i,i.x,i.y),l=new _m(t.i,t.x,t.y),d=i.next,g=t.prev;return i.next=t,t.prev=i,o.next=d,d.prev=o,l.next=o,o.prev=l,g.next=l,l.prev=g,l}function u1(i,t,o,l){var d=new _m(i,t,o);return l?(d.next=l.next,d.prev=l,l.next.prev=d,l.next=d):(d.prev=d,d.next=d),d}function tu(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function _m(i,t,o){this.i=i,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wm(i,t,o,l){for(var d=0,g=t,x=o-l;g<o;g+=l)d+=(i[x]-i[g])*(i[g+1]+i[x+1]),x=g;return d}bm.exports=Kp,bm.exports.default=Kp,Kp.deviation=function(i,t,o,l){var d=t&&t.length,g=Math.abs(wm(i,0,d?t[0]*o:i.length,o));if(d)for(var x=0,v=t.length;x<v;x++)g-=Math.abs(wm(i,t[x]*o,x<v-1?t[x+1]*o:i.length,o));var E=0;for(x=0;x<l.length;x+=3){var T=l[x]*o,M=l[x+1]*o,D=l[x+2]*o;E+=Math.abs((i[T]-i[D])*(i[M+1]-i[T+1])-(i[T]-i[M])*(i[D+1]-i[T+1]))}return g===0&&E===0?0:Math.abs((E-g)/g)},Kp.flatten=function(i){for(var t=i[0][0].length,o={vertices:[],holes:[],dimensions:t},l=0,d=0;d<i.length;d++){for(var g=0;g<i[d].length;g++)for(var x=0;x<t;x++)o.vertices.push(i[d][g][x]);d>0&&o.holes.push(l+=i[d-1].length)}return o};var p1=bm.exports;function L2(i,t,o,l,d){d1(i,t,o||0,l||i.length-1,d||R2)}function d1(i,t,o,l,d){for(;l>o;){if(l-o>600){var g=l-o+1,x=t-o+1,v=Math.log(g),E=.5*Math.exp(2*v/3),T=.5*Math.sqrt(v*E*(g-E)/g)*(x-g/2<0?-1:1);d1(i,t,Math.max(o,Math.floor(t-x*E/g+T)),Math.min(l,Math.floor(t+(g-x)*E/g+T)),d)}var M=i[t],D=o,R=l;for(ru(i,o,t),d(i[l],M)>0&&ru(i,o,l);D<R;){for(ru(i,D,R),D++,R--;d(i[D],M)<0;)D++;for(;d(i[R],M)>0;)R--}d(i[o],M)===0?ru(i,o,R):ru(i,++R,l),R<=t&&(o=R+1),t<=R&&(l=R-1)}}function ru(i,t,o){var l=i[t];i[t]=i[o],i[o]=l}function R2(i,t){return i<t?-1:i>t?1:0}function km(i,t){const o=i.length;if(o<=1)return[i];const l=[];let d,g;for(let x=0;x<o;x++){const v=Le(i[x]);v!==0&&(i[x].area=Math.abs(v),g===void 0&&(g=v<0),g===v<0?(d&&l.push(d),d=[i[x]]):d.push(i[x]))}if(d&&l.push(d),t>1)for(let x=0;x<l.length;x++)l[x].length<=t||(L2(l[x],t,1,l[x].length-1,O2),l[x]=l[x].slice(0,t));return l}function O2(i,t){return t.area-i.area}function Em(i,t,o){const l=o.patternDependencies;let d=!1;for(const g of t){const x=g.paint.get(`${i}-pattern`);x.isConstant()||(d=!0);const v=x.constantOr(null);v&&(d=!0,l[v.to]=!0,l[v.from]=!0)}return d}function Sm(i,t,o,l,d){const g=d.patternDependencies;for(const x of t){const v=x.paint.get(`${i}-pattern`).value;if(v.kind!=="constant"){let E=v.evaluate({zoom:l-1},o,{},d.availableImages),T=v.evaluate({zoom:l},o,{},d.availableImages),M=v.evaluate({zoom:l+1},o,{},d.availableImages);E=E&&E.name?E.name:E,T=T&&T.name?T.name:T,M=M&&M.name?M.name:M,g[E]=!0,g[T]=!0,g[M]=!0,o.patterns[x.id]={min:E,mid:T,max:M}}}return o}class Cm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mt,this.indexArray=new kn,this.indexArray2=new Ei,this.programConfigurations=new ps(t.layers,t.zoom),this.segments=new Bt,this.segments2=new Bt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){this.hasPattern=Em("fill",this.layers,o);const d=this.layers[0].layout.get("fill-sort-key"),g=!d.isConstant(),x=[];for(const{feature:v,id:E,index:T,sourceLayerIndex:M}of t){const D=this.layers[0]._featureFilter.needGeometry,R=hs(v,D);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),R,l))continue;const B=g?d.evaluate(R,{},l,o.availableImages):void 0,N={id:E,properties:v.properties,type:v.type,sourceLayerIndex:M,index:T,geometry:D?R.geometry:ds(v),patterns:{},sortKey:B};x.push(N)}g&&x.sort((v,E)=>v.sortKey-E.sortKey);for(const v of x){const{geometry:E,index:T,sourceLayerIndex:M}=v;if(this.hasPattern){const D=Sm("fill",this.layers,v,this.zoom,o);this.patternFeatures.push(D)}else this.addFeature(v,E,T,l,{});o.featureIndex.insert(t[T].feature,E,T,M,this.index)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}addFeatures(t,o,l){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,E2),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,l,d,g){for(const x of km(o,500)){let v=0;for(const B of x)v+=B.length;const E=this.segments.prepareSegment(v,this.layoutVertexArray,this.indexArray),T=E.vertexLength,M=[],D=[];for(const B of x){if(B.length===0)continue;B!==x[0]&&D.push(M.length/2);const N=this.segments2.prepareSegment(B.length,this.layoutVertexArray,this.indexArray2),J=N.vertexLength;this.layoutVertexArray.emplaceBack(B[0].x,B[0].y),this.indexArray2.emplaceBack(J+B.length-1,J),M.push(B[0].x),M.push(B[0].y);for(let Q=1;Q<B.length;Q++)this.layoutVertexArray.emplaceBack(B[Q].x,B[Q].y),this.indexArray2.emplaceBack(J+Q-1,J+Q),M.push(B[Q].x),M.push(B[Q].y);N.vertexLength+=B.length,N.primitiveLength+=B.length}const R=p1(M,D);for(let B=0;B<R.length;B+=3)this.indexArray.emplaceBack(T+R[B],T+R[B+1],T+R[B+2]);E.vertexLength+=v,E.primitiveLength+=R.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,g,d)}}Ye("FillBucket",Cm,{omit:["layers","patternFeatures"]});const B2=new Ur({"fill-sort-key":new ut(be.layout_fill["fill-sort-key"])});var F2={paint:new Ur({"fill-antialias":new rt(be.paint_fill["fill-antialias"]),"fill-opacity":new ut(be.paint_fill["fill-opacity"]),"fill-color":new ut(be.paint_fill["fill-color"]),"fill-outline-color":new ut(be.paint_fill["fill-outline-color"]),"fill-translate":new rt(be.paint_fill["fill-translate"]),"fill-translate-anchor":new rt(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new ss(be.paint_fill["fill-pattern"])}),layout:B2};const N2=Vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:U2}=N2;var ya={},V2=Qe,h1=fl;function fl(i,t,o,l,d){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=d,i.readFields(j2,this,t)}function j2(i,t,o){i==1?t.id=o.readVarint():i==2?function(l,d){for(var g=l.readVarint()+l.pos;l.pos<g;){var x=d._keys[l.readVarint()],v=d._values[l.readVarint()];d.properties[x]=v}}(o,t):i==3?t.type=o.readVarint():i==4&&(t._geometry=o.pos)}function $2(i){for(var t,o,l=0,d=0,g=i.length,x=g-1;d<g;x=d++)l+=((o=i[x]).x-(t=i[d]).x)*(t.y+o.y);return l}fl.types=["Unknown","Point","LineString","Polygon"],fl.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,o=i.readVarint()+i.pos,l=1,d=0,g=0,x=0,v=[];i.pos<o;){if(d<=0){var E=i.readVarint();l=7&E,d=E>>3}if(d--,l===1||l===2)g+=i.readSVarint(),x+=i.readSVarint(),l===1&&(t&&v.push(t),t=[]),t.push(new V2(g,x));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&v.push(t),v},fl.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,o=1,l=0,d=0,g=0,x=1/0,v=-1/0,E=1/0,T=-1/0;i.pos<t;){if(l<=0){var M=i.readVarint();o=7&M,l=M>>3}if(l--,o===1||o===2)(d+=i.readSVarint())<x&&(x=d),d>v&&(v=d),(g+=i.readSVarint())<E&&(E=g),g>T&&(T=g);else if(o!==7)throw new Error("unknown command "+o)}return[x,E,v,T]},fl.prototype.toGeoJSON=function(i,t,o){var l,d,g=this.extent*Math.pow(2,o),x=this.extent*i,v=this.extent*t,E=this.loadGeometry(),T=fl.types[this.type];function M(B){for(var N=0;N<B.length;N++){var J=B[N];B[N]=[360*(J.x+x)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+v)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(l=0;l<E.length;l++)D[l]=E[l][0];M(E=D);break;case 2:for(l=0;l<E.length;l++)M(E[l]);break;case 3:for(E=function(B){var N=B.length;if(N<=1)return[B];for(var J,Q,ce=[],fe=0;fe<N;fe++){var me=$2(B[fe]);me!==0&&(Q===void 0&&(Q=me<0),Q===me<0?(J&&ce.push(J),J=[B[fe]]):J.push(B[fe]))}return J&&ce.push(J),ce}(E),l=0;l<E.length;l++)for(d=0;d<E[l].length;d++)M(E[l][d])}E.length===1?E=E[0]:T="Multi"+T;var R={type:"Feature",geometry:{type:T,coordinates:E},properties:this.properties};return"id"in this&&(R.id=this.id),R};var G2=h1,m1=f1;function f1(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(q2,this,t),this.length=this._features.length}function q2(i,t,o){i===15?t.version=o.readVarint():i===1?t.name=o.readString():i===5?t.extent=o.readVarint():i===2?t._features.push(o.pos):i===3?t._keys.push(o.readString()):i===4&&t._values.push(function(l){for(var d=null,g=l.readVarint()+l.pos;l.pos<g;){var x=l.readVarint()>>3;d=x===1?l.readString():x===2?l.readFloat():x===3?l.readDouble():x===4?l.readVarint64():x===5?l.readVarint():x===6?l.readSVarint():x===7?l.readBoolean():null}return d}(o))}f1.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new G2(this._pbf,t,this.extent,this._keys,this._values)};var Z2=m1;function H2(i,t,o){if(i===3){var l=new Z2(o,o.readVarint()+o.pos);l.length&&(t[l.name]=l)}}ya.VectorTile=function(i,t){this.layers=i.readFields(H2,{},t)},ya.VectorTileFeature=h1,ya.VectorTileLayer=m1;const W2=ya.VectorTileFeature.types,Tm=Math.pow(2,13);function nu(i,t,o,l,d,g,x,v){i.emplaceBack(t,o,2*Math.floor(l*Tm)+x,d*Tm*2,g*Tm*2,Math.round(v))}class zm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new mr,this.indexArray=new kn,this.programConfigurations=new ps(t.layers,t.zoom),this.segments=new Bt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){this.features=[],this.hasPattern=Em("fill-extrusion",this.layers,o);for(const{feature:d,id:g,index:x,sourceLayerIndex:v}of t){const E=this.layers[0]._featureFilter.needGeometry,T=hs(d,E);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),T,l))continue;const M={id:g,sourceLayerIndex:v,index:x,geometry:E?T.geometry:ds(d),properties:d.properties,type:d.type,patterns:{}};this.hasPattern?this.features.push(Sm("fill-extrusion",this.layers,M,this.zoom,o)):this.addFeature(M,M.geometry,x,l,{}),o.featureIndex.insert(d,M.geometry,x,v,this.index,!0)}}addFeatures(t,o,l){for(const d of this.features){const{geometry:g}=d;this.addFeature(d,g,d.index,o,l)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,U2),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,l,d,g){for(const x of km(o,500)){let v=0;for(const B of x)v+=B.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const B of x){if(B.length===0||K2(B))continue;let N=0;for(let J=0;J<B.length;J++){const Q=B[J];if(J>=1){const ce=B[J-1];if(!X2(Q,ce)){E.vertexLength+4>Bt.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const fe=Q.sub(ce)._perp()._unit(),me=ce.dist(Q);N+me>32768&&(N=0),nu(this.layoutVertexArray,Q.x,Q.y,fe.x,fe.y,0,0,N),nu(this.layoutVertexArray,Q.x,Q.y,fe.x,fe.y,0,1,N),N+=me,nu(this.layoutVertexArray,ce.x,ce.y,fe.x,fe.y,0,0,N),nu(this.layoutVertexArray,ce.x,ce.y,fe.x,fe.y,0,1,N);const we=E.vertexLength;this.indexArray.emplaceBack(we,we+2,we+1),this.indexArray.emplaceBack(we+1,we+2,we+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+v>Bt.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(v,this.layoutVertexArray,this.indexArray)),W2[t.type]!=="Polygon")continue;const T=[],M=[],D=E.vertexLength;for(const B of x)if(B.length!==0){B!==x[0]&&M.push(T.length/2);for(let N=0;N<B.length;N++){const J=B[N];nu(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),T.push(J.x),T.push(J.y)}}const R=p1(T,M);for(let B=0;B<R.length;B+=3)this.indexArray.emplaceBack(D+R[B],D+R[B+2],D+R[B+1]);E.primitiveLength+=R.length/3,E.vertexLength+=v}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,g,d)}}function X2(i,t){return i.x===t.x&&(i.x<0||i.x>jr)||i.y===t.y&&(i.y<0||i.y>jr)}function K2(i){return i.every(t=>t.x<0)||i.every(t=>t.x>jr)||i.every(t=>t.y<0)||i.every(t=>t.y>jr)}Ye("FillExtrusionBucket",zm,{omit:["layers","features"]});var Y2={paint:new Ur({"fill-extrusion-opacity":new rt(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ut(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rt(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rt(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ss(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ut(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ut(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rt(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function iu(i,t){return i.x*t.x+i.y*t.y}function g1(i,t){if(i.length===1){let o=0;const l=t[o++];let d;for(;!d||l.equals(d);)if(d=t[o++],!d)return 1/0;for(;o<t.length;o++){const g=t[o],x=i[0],v=d.sub(l),E=g.sub(l),T=x.sub(l),M=iu(v,v),D=iu(v,E),R=iu(E,E),B=iu(T,v),N=iu(T,E),J=M*R-D*D,Q=(R*B-D*N)/J,ce=(M*N-D*B)/J,fe=l.z*(1-Q-ce)+d.z*Q+g.z*ce;if(isFinite(fe))return fe}return 1/0}{let o=1/0;for(const l of t)o=Math.min(o,l.z);return o}}const J2=Vr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Q2}=J2,ew=Vr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:tw}=ew,rw=ya.VectorTileFeature.types,nw=Math.cos(Math.PI/180*37.5),x1=Math.pow(2,14)/.5;class Im{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new ft,this.layoutVertexArray2=new Ot,this.indexArray=new kn,this.programConfigurations=new ps(t.layers,t.zoom),this.segments=new Bt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){this.hasPattern=Em("line",this.layers,o);const d=this.layers[0].layout.get("line-sort-key"),g=!d.isConstant(),x=[];for(const{feature:v,id:E,index:T,sourceLayerIndex:M}of t){const D=this.layers[0]._featureFilter.needGeometry,R=hs(v,D);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),R,l))continue;const B=g?d.evaluate(R,{},l):void 0,N={id:E,properties:v.properties,type:v.type,sourceLayerIndex:M,index:T,geometry:D?R.geometry:ds(v),patterns:{},sortKey:B};x.push(N)}g&&x.sort((v,E)=>v.sortKey-E.sortKey);for(const v of x){const{geometry:E,index:T,sourceLayerIndex:M}=v;if(this.hasPattern){const D=Sm("line",this.layers,v,this.zoom,o);this.patternFeatures.push(D)}else this.addFeature(v,E,T,l,{});o.featureIndex.insert(t[T].feature,E,T,M,this.index)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}addFeatures(t,o,l){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,tw)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Q2),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,l,d,g){const x=this.layers[0].layout,v=x.get("line-join").evaluate(t,{}),E=x.get("line-cap"),T=x.get("line-miter-limit"),M=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const D of o)this.addLine(D,t,v,E,T,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,g,d)}addLine(t,o,l,d,g,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<t.length-1;ce++)this.totalDistance+=t[ce].dist(t[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const v=rw[o.type]==="Polygon";let E=t.length;for(;E>=2&&t[E-1].equals(t[E-2]);)E--;let T=0;for(;T<E-1&&t[T].equals(t[T+1]);)T++;if(E<(v?3:2))return;l==="bevel"&&(g=1.05);const M=this.overscaling<=16?122880/(512*this.overscaling):0,D=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let R,B,N,J,Q;this.e1=this.e2=-1,v&&(R=t[E-2],Q=t[T].sub(R)._unit()._perp());for(let ce=T;ce<E;ce++){if(N=ce===E-1?v?t[T+1]:void 0:t[ce+1],N&&t[ce].equals(N))continue;Q&&(J=Q),R&&(B=R),R=t[ce],Q=N?N.sub(R)._unit()._perp():J,J=J||Q;let fe=J.add(Q);fe.x===0&&fe.y===0||fe._unit();const me=J.x*Q.x+J.y*Q.y,we=fe.x*Q.x+fe.y*Q.y,Ie=we!==0?1/we:1/0,Ce=2*Math.sqrt(2-2*we),Je=we<nw&&B&&N,at=J.x*Q.y-J.y*Q.x>0;if(Je&&ce>T){const Fe=R.dist(B);if(Fe>2*M){const Ke=R.sub(R.sub(B)._mult(M/Fe)._round());this.updateDistance(B,Ke),this.addCurrentVertex(Ke,J,0,0,D),B=Ke}}const Ze=B&&N;let He=Ze?l:v?"butt":d;if(Ze&&He==="round"&&(Ie<x?He="miter":Ie<=2&&(He="fakeround")),He==="miter"&&Ie>g&&(He="bevel"),He==="bevel"&&(Ie>2&&(He="flipbevel"),Ie<g&&(He="miter")),B&&this.updateDistance(B,R),He==="miter")fe._mult(Ie),this.addCurrentVertex(R,fe,0,0,D);else if(He==="flipbevel"){if(Ie>100)fe=Q.mult(-1);else{const Fe=Ie*J.add(Q).mag()/J.sub(Q).mag();fe._perp()._mult(Fe*(at?-1:1))}this.addCurrentVertex(R,fe,0,0,D),this.addCurrentVertex(R,fe.mult(-1),0,0,D)}else if(He==="bevel"||He==="fakeround"){const Fe=-Math.sqrt(Ie*Ie-1),Ke=at?Fe:0,We=at?0:Fe;if(B&&this.addCurrentVertex(R,J,Ke,We,D),He==="fakeround"){const De=Math.round(180*Ce/Math.PI/20);for(let pt=1;pt<De;pt++){let st=pt/De;if(st!==.5){const Gt=st-.5;st+=st*Gt*(st-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*Gt*Gt+(.848013+me*(.215638*me-1.06021)))}const At=Q.sub(J)._mult(st)._add(J)._unit()._mult(at?-1:1);this.addHalfVertex(R,At.x,At.y,!1,at,0,D)}}N&&this.addCurrentVertex(R,Q,-Ke,-We,D)}else if(He==="butt")this.addCurrentVertex(R,fe,0,0,D);else if(He==="square"){const Fe=B?1:-1;this.addCurrentVertex(R,fe,Fe,Fe,D)}else He==="round"&&(B&&(this.addCurrentVertex(R,J,0,0,D),this.addCurrentVertex(R,J,1,1,D,!0)),N&&(this.addCurrentVertex(R,Q,-1,-1,D,!0),this.addCurrentVertex(R,Q,0,0,D)));if(Je&&ce<E-1){const Fe=R.dist(N);if(Fe>2*M){const Ke=R.add(N.sub(R)._mult(M/Fe)._round());this.updateDistance(R,Ke),this.addCurrentVertex(Ke,Q,0,0,D),R=Ke}}}}addCurrentVertex(t,o,l,d,g,x=!1){const v=o.y*d-o.x,E=-o.y-o.x*d;this.addHalfVertex(t,o.x+o.y*l,o.y-o.x*l,x,!1,l,g),this.addHalfVertex(t,v,E,x,!0,-d,g),this.distance>x1/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,o,l,d,g,x))}addHalfVertex({x:t,y:o},l,d,g,x,v,E){const T=.5*(this.lineClips?this.scaledDistance*(x1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(g?1:0),(o<<1)+(x?1:0),Math.round(63*l)+128,Math.round(63*d)+128,1+(v===0?0:v<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),E.primitiveLength++),x?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}Ye("LineBucket",Im,{omit:["layers","patternFeatures"]});const iw=new Ur({"line-cap":new rt(be.layout_line["line-cap"]),"line-join":new ut(be.layout_line["line-join"]),"line-miter-limit":new rt(be.layout_line["line-miter-limit"]),"line-round-limit":new rt(be.layout_line["line-round-limit"]),"line-sort-key":new ut(be.layout_line["line-sort-key"])});var y1={paint:new Ur({"line-opacity":new ut(be.paint_line["line-opacity"]),"line-color":new ut(be.paint_line["line-color"]),"line-translate":new rt(be.paint_line["line-translate"]),"line-translate-anchor":new rt(be.paint_line["line-translate-anchor"]),"line-width":new ut(be.paint_line["line-width"]),"line-gap-width":new ut(be.paint_line["line-gap-width"]),"line-offset":new ut(be.paint_line["line-offset"]),"line-blur":new ut(be.paint_line["line-blur"]),"line-dasharray":new ls(be.paint_line["line-dasharray"]),"line-pattern":new ss(be.paint_line["line-pattern"]),"line-gradient":new Hc(be.paint_line["line-gradient"])}),layout:iw};const b1=new class extends ut{possiblyEvaluate(i,t){return t=new sr(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(i,t)}evaluate(i,t,o,l){return t=de({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(i,t,o,l)}}(y1.paint.properties["line-width"].specification);function v1(i,t){return t>0?t+2*i:i}b1.useIntegerZoom=!0;const ow=Vr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),aw=Vr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const sw=Vr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Vr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const _1=Vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lw=Vr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function cw(i,t,o){return i.sections.forEach(l=>{l.text=function(d,g,x){const v=g.layout.get("text-transform").evaluate(x,{});return v==="uppercase"?d=d.toLocaleUpperCase():v==="lowercase"&&(d=d.toLocaleLowerCase()),qn.applyArabicShaping&&(d=qn.applyArabicShaping(d)),d}(l.text,t,o)}),i}Vr([{name:"triangle",components:3,type:"Uint16"}]),Vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Vr([{type:"Float32",name:"offsetX"}]),Vr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const ou={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var en=24,Pm=Kt,w1=function(i,t,o,l,d){var g,x,v=8*d-l-1,E=(1<<v)-1,T=E>>1,M=-7,D=o?d-1:0,R=o?-1:1,B=i[t+D];for(D+=R,g=B&(1<<-M)-1,B>>=-M,M+=v;M>0;g=256*g+i[t+D],D+=R,M-=8);for(x=g&(1<<-M)-1,g>>=-M,M+=l;M>0;x=256*x+i[t+D],D+=R,M-=8);if(g===0)g=1-T;else{if(g===E)return x?NaN:1/0*(B?-1:1);x+=Math.pow(2,l),g-=T}return(B?-1:1)*x*Math.pow(2,g-l)},k1=function(i,t,o,l,d,g){var x,v,E,T=8*g-d-1,M=(1<<T)-1,D=M>>1,R=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=l?0:g-1,N=l?1:-1,J=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(v=isNaN(t)?1:0,x=M):(x=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-x))<1&&(x--,E*=2),(t+=x+D>=1?R/E:R*Math.pow(2,1-D))*E>=2&&(x++,E/=2),x+D>=M?(v=0,x=M):x+D>=1?(v=(t*E-1)*Math.pow(2,d),x+=D):(v=t*Math.pow(2,D-1)*Math.pow(2,d),x=0));d>=8;i[o+B]=255&v,B+=N,v/=256,d-=8);for(x=x<<d|v,T+=d;T>0;i[o+B]=255&x,B+=N,x/=256,T-=8);i[o+B-N]|=128*J};function Kt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Kt.Varint=0,Kt.Fixed64=1,Kt.Bytes=2,Kt.Fixed32=5;var ba,Mm=4294967296,E1=1/Mm,S1=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Do(i){return i.type===Kt.Bytes?i.readVarint()+i.pos:i.pos+1}function gl(i,t,o){return o?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function C1(i,t,o){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(l);for(var d=o.pos-1;d>=i;d--)o.buf[d+l]=o.buf[d]}function uw(i,t){for(var o=0;o<i.length;o++)t.writeVarint(i[o])}function pw(i,t){for(var o=0;o<i.length;o++)t.writeSVarint(i[o])}function dw(i,t){for(var o=0;o<i.length;o++)t.writeFloat(i[o])}function hw(i,t){for(var o=0;o<i.length;o++)t.writeDouble(i[o])}function mw(i,t){for(var o=0;o<i.length;o++)t.writeBoolean(i[o])}function fw(i,t){for(var o=0;o<i.length;o++)t.writeFixed32(i[o])}function gw(i,t){for(var o=0;o<i.length;o++)t.writeSFixed32(i[o])}function xw(i,t){for(var o=0;o<i.length;o++)t.writeFixed64(i[o])}function yw(i,t){for(var o=0;o<i.length;o++)t.writeSFixed64(i[o])}function ed(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function xl(i,t,o){i[o]=t,i[o+1]=t>>>8,i[o+2]=t>>>16,i[o+3]=t>>>24}function T1(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}function bw(i,t,o){i===1&&o.readMessage(vw,t)}function vw(i,t,o){if(i===3){const{id:l,bitmap:d,width:g,height:x,left:v,top:E,advance:T}=o.readMessage(_w,{});t.push({id:l,bitmap:new Jc({width:g+6,height:x+6},d),metrics:{width:g,height:x,left:v,top:E,advance:T}})}}function _w(i,t,o){i===1?t.id=o.readVarint():i===2?t.bitmap=o.readBytes():i===3?t.width=o.readVarint():i===4?t.height=o.readVarint():i===5?t.left=o.readSVarint():i===6?t.top=o.readSVarint():i===7&&(t.advance=o.readVarint())}function z1(i){let t=0,o=0;for(const x of i)t+=x.w*x.h,o=Math.max(o,x.w);i.sort((x,v)=>v.h-x.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let d=0,g=0;for(const x of i)for(let v=l.length-1;v>=0;v--){const E=l[v];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,g=Math.max(g,x.y+x.h),d=Math.max(d,x.x+x.w),x.w===E.w&&x.h===E.h){const T=l.pop();v<l.length&&(l[v]=T)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(l.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:d,h:g,fill:t/(d*g)||0}}Kt.prototype={destroy:function(){this.buf=null},readFields:function(i,t,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),d=l>>3,g=this.pos;this.type=7&l,i(d,t,this),this.pos===g&&this.skip(l)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=ed(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=T1(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=ed(this.buf,this.pos)+ed(this.buf,this.pos+4)*Mm;return this.pos+=8,i},readSFixed64:function(){var i=ed(this.buf,this.pos)+T1(this.buf,this.pos+4)*Mm;return this.pos+=8,i},readFloat:function(){var i=w1(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=w1(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,o,l=this.buf;return t=127&(o=l[this.pos++]),o<128?t:(t|=(127&(o=l[this.pos++]))<<7,o<128?t:(t|=(127&(o=l[this.pos++]))<<14,o<128?t:(t|=(127&(o=l[this.pos++]))<<21,o<128?t:function(d,g,x){var v,E,T=x.buf;if(v=(112&(E=T[x.pos++]))>>4,E<128||(v|=(127&(E=T[x.pos++]))<<3,E<128)||(v|=(127&(E=T[x.pos++]))<<10,E<128)||(v|=(127&(E=T[x.pos++]))<<17,E<128)||(v|=(127&(E=T[x.pos++]))<<24,E<128)||(v|=(1&(E=T[x.pos++]))<<31,E<128))return gl(d,v,g);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=l[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&S1?function(o,l,d){return S1.decode(o.subarray(l,d))}(this.buf,t,i):function(o,l,d){for(var g="",x=l;x<d;){var v,E,T,M=o[x],D=null,R=M>239?4:M>223?3:M>191?2:1;if(x+R>d)break;R===1?M<128&&(D=M):R===2?(192&(v=o[x+1]))==128&&(D=(31&M)<<6|63&v)<=127&&(D=null):R===3?(E=o[x+2],(192&(v=o[x+1]))==128&&(192&E)==128&&((D=(15&M)<<12|(63&v)<<6|63&E)<=2047||D>=55296&&D<=57343)&&(D=null)):R===4&&(E=o[x+2],T=o[x+3],(192&(v=o[x+1]))==128&&(192&E)==128&&(192&T)==128&&((D=(15&M)<<18|(63&v)<<12|(63&E)<<6|63&T)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,R=1):D>65535&&(D-=65536,g+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),g+=String.fromCharCode(D),x+=R}return g}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==Kt.Bytes)return i.push(this.readVarint(t));var o=Do(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==Kt.Bytes)return i.push(this.readSVarint());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Kt.Bytes)return i.push(this.readBoolean());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Kt.Bytes)return i.push(this.readFloat());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Kt.Bytes)return i.push(this.readDouble());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Kt.Bytes)return i.push(this.readFixed32());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Kt.Bytes)return i.push(this.readSFixed32());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Kt.Bytes)return i.push(this.readFixed64());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Kt.Bytes)return i.push(this.readSFixed64());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===Kt.Varint)for(;this.buf[this.pos++]>127;);else if(t===Kt.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Kt.Fixed32)this.pos+=4;else{if(t!==Kt.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),xl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),xl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),xl(this.buf,-1&i,this.pos),xl(this.buf,Math.floor(i*E1),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),xl(this.buf,-1&i,this.pos),xl(this.buf,Math.floor(i*E1),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,o){var l,d;if(t>=0?(l=t%4294967296|0,d=t/4294967296|0):(d=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,d=d+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(g,x,v){v.buf[v.pos++]=127&g|128,g>>>=7,v.buf[v.pos++]=127&g|128,g>>>=7,v.buf[v.pos++]=127&g|128,g>>>=7,v.buf[v.pos++]=127&g|128,v.buf[v.pos]=127&(g>>>=7)}(l,0,o),function(g,x){var v=(7&g)<<4;x.buf[x.pos++]|=v|((g>>>=3)?128:0),g&&(x.buf[x.pos++]=127&g|((g>>>=7)?128:0),g&&(x.buf[x.pos++]=127&g|((g>>>=7)?128:0),g&&(x.buf[x.pos++]=127&g|((g>>>=7)?128:0),g&&(x.buf[x.pos++]=127&g|((g>>>=7)?128:0),g&&(x.buf[x.pos++]=127&g)))))}(d,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(l,d,g){for(var x,v,E=0;E<d.length;E++){if((x=d.charCodeAt(E))>55295&&x<57344){if(!v){x>56319||E+1===d.length?(l[g++]=239,l[g++]=191,l[g++]=189):v=x;continue}if(x<56320){l[g++]=239,l[g++]=191,l[g++]=189,v=x;continue}x=v-55296<<10|x-56320|65536,v=null}else v&&(l[g++]=239,l[g++]=191,l[g++]=189,v=null);x<128?l[g++]=x:(x<2048?l[g++]=x>>6|192:(x<65536?l[g++]=x>>12|224:(l[g++]=x>>18|240,l[g++]=x>>12&63|128),l[g++]=x>>6&63|128),l[g++]=63&x|128)}return g}(this.buf,i,this.pos);var o=this.pos-t;o>=128&&C1(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),k1(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),k1(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,t){this.pos++;var o=this.pos;i(t,this);var l=this.pos-o;l>=128&&C1(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(i,t,o){this.writeTag(i,Kt.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,uw,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,pw,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,mw,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,dw,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,hw,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,fw,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,gw,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,xw,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,yw,t)},writeBytesField:function(i,t){this.writeTag(i,Kt.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,Kt.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,Kt.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,Kt.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,Kt.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,Kt.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,Kt.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,Kt.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,Kt.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,Kt.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,Boolean(t))}};class Am{constructor(t,{pixelRatio:o,version:l,stretchX:d,stretchY:g,content:x}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=d,this.stretchY=g,this.content=x,this.version=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class I1{constructor(t,o){const l={},d={};this.haveRenderCallbacks=[];const g=[];this.addImages(t,l,g),this.addImages(o,d,g);const{w:x,h:v}=z1(g),E=new ui({width:x||1,height:v||1});for(const T in t){const M=t[T],D=l[T].paddedRect;ui.copy(M.data,E,{x:0,y:0},{x:D.x+1,y:D.y+1},M.data)}for(const T in o){const M=o[T],D=d[T].paddedRect,R=D.x+1,B=D.y+1,N=M.data.width,J=M.data.height;ui.copy(M.data,E,{x:0,y:0},{x:R,y:B},M.data),ui.copy(M.data,E,{x:0,y:J-1},{x:R,y:B-1},{width:N,height:1}),ui.copy(M.data,E,{x:0,y:0},{x:R,y:B+J},{width:N,height:1}),ui.copy(M.data,E,{x:N-1,y:0},{x:R-1,y:B},{width:1,height:J}),ui.copy(M.data,E,{x:0,y:0},{x:R+N,y:B},{width:1,height:J})}this.image=E,this.iconPositions=l,this.patternPositions=d}addImages(t,o,l){for(const d in t){const g=t[d],x={x:0,y:0,w:g.data.width+2,h:g.data.height+2};l.push(x),o[d]=new Am(x,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),o)}patchUpdatedImage(t,o,l){if(!t||!o||t.version===o.version)return;t.version=o.version;const[d,g]=t.tl;l.update(o.data,void 0,{x:d,y:g})}}Ye("ImagePosition",Am),Ye("ImageAtlas",I1),c.WritingMode=void 0,(ba=c.WritingMode||(c.WritingMode={}))[ba.none=0]="none",ba[ba.horizontal=1]="horizontal",ba[ba.vertical=2]="vertical",ba[ba.horizontalOnly=3]="horizontalOnly";const td=-17;class au{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const l=new au;return l.scale=t||1,l.fontStack=o,l}static forImage(t){const o=new au;return o.imageName=t,o}}class yl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const l=new yl;for(let d=0;d<t.sections.length;d++){const g=t.sections[d];g.image?l.addImageSection(g):l.addTextSection(g,o)}return l}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let l=0;l<t.length;l++){const d=t.charCodeAt(l+1)||null,g=t.charCodeAt(l-1)||null;o+=d&&Np(d)&&!ou[t[l+1]]||g&&Np(g)&&!ou[t[l-1]]||!ou[t[l]]?t[l]:ou[t[l]]}return o}(this.text)}trim(){let t=0;for(let l=0;l<this.text.length&&nd[this.text.charCodeAt(l)];l++)t++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=t&&nd[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const l=new yl;return l.text=this.text.substring(t,o),l.sectionIndex=this.sectionIndex.slice(t,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(au.forText(t.scale,t.fontStack||o));const l=this.sections.length-1;for(let d=0;d<t.text.length;++d)this.sectionIndex.push(l)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void Te("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(au.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Te("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function rd(i,t,o,l,d,g,x,v,E,T,M,D,R,B,N,J){const Q=yl.fromFeature(i,d);let ce;D===c.WritingMode.vertical&&Q.verticalizePunctuation();const{processBidirectionalText:fe,processStyledBidirectionalText:me}=qn;if(fe&&Q.sections.length===1){ce=[];const Ce=fe(Q.toString(),Dm(Q,T,g,t,l,B,N));for(const Je of Ce){const at=new yl;at.text=Je,at.sections=Q.sections;for(let Ze=0;Ze<Je.length;Ze++)at.sectionIndex.push(0);ce.push(at)}}else if(me){ce=[];const Ce=me(Q.text,Q.sectionIndex,Dm(Q,T,g,t,l,B,N));for(const Je of Ce){const at=new yl;at.text=Je[0],at.sectionIndex=Je[1],at.sections=Q.sections,ce.push(at)}}else ce=function(Ce,Je){const at=[],Ze=Ce.text;let He=0;for(const Fe of Je)at.push(Ce.substring(He,Fe)),He=Fe;return He<Ze.length&&at.push(Ce.substring(He,Ze.length)),at}(Q,Dm(Q,T,g,t,l,B,N));const we=[],Ie={positionedLines:we,text:Q.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Ce,Je,at,Ze,He,Fe,Ke,We,De,pt,st,At){let Gt=0,cr=td,ur=0,nn=0;const Ar=We==="right"?1:We==="left"?0:.5;let Dr=0;for(const Lr of He){Lr.trim();const an=Lr.getMaxScale(),fn=(an-1)*en,En={positionedGlyphs:[],lineOffset:0};Ce.positionedLines[Dr]=En;const Rn=En.positionedGlyphs;let On=0;if(!Lr.length()){cr+=Fe,++Dr;continue}for(let Hr=0;Hr<Lr.length();Hr++){const It=Lr.getSection(Hr),Wn=Lr.getSectionIndex(Hr),sn=Lr.getCharCode(Hr);let gn=0,zi=null,qi=null,Zi=null,Ro=en;const Ii=!(De===c.WritingMode.horizontal||!st&&!as(sn)||st&&(nd[sn]||(Zr=sn,Ve.Arabic(Zr)||Ve["Arabic Supplement"](Zr)||Ve["Arabic Extended-A"](Zr)||Ve["Arabic Presentation Forms-A"](Zr)||Ve["Arabic Presentation Forms-B"](Zr))));if(It.imageName){const pi=Ze[It.imageName];if(!pi)continue;Zi=It.imageName,Ce.iconsInText=Ce.iconsInText||!0,qi=pi.paddedRect;const Bn=pi.displaySize;It.scale=It.scale*en/At,zi={width:Bn[0],height:Bn[1],left:1,top:-3,advance:Ii?Bn[1]:Bn[0]},gn=fn+(en-Bn[1]*It.scale),Ro=zi.advance;const Oo=Ii?Bn[0]*It.scale-en*an:Bn[1]*It.scale-en*an;Oo>0&&Oo>On&&(On=Oo)}else{const pi=at[It.fontStack],Bn=pi&&pi[sn];if(Bn&&Bn.rect)qi=Bn.rect,zi=Bn.metrics;else{const Oo=Je[It.fontStack],cu=Oo&&Oo[sn];if(!cu)continue;zi=cu.metrics}gn=(an-It.scale)*en}Ii?(Ce.verticalizable=!0,Rn.push({glyph:sn,imageName:Zi,x:Gt,y:cr+gn,vertical:Ii,scale:It.scale,fontStack:It.fontStack,sectionIndex:Wn,metrics:zi,rect:qi}),Gt+=Ro*It.scale+pt):(Rn.push({glyph:sn,imageName:Zi,x:Gt,y:cr+gn,vertical:Ii,scale:It.scale,fontStack:It.fontStack,sectionIndex:Wn,metrics:zi,rect:qi}),Gt+=zi.advance*It.scale+pt)}Rn.length!==0&&(ur=Math.max(Gt-pt,ur),Ew(Rn,0,Rn.length-1,Ar,On)),Gt=0;const pr=Fe*an+On;En.lineOffset=Math.max(On,fn),cr+=pr,nn=Math.max(pr,nn),++Dr}var Zr;const on=cr-td,{horizontalAlign:mn,verticalAlign:Ln}=Lm(Ke);(function(Lr,an,fn,En,Rn,On,pr,Hr,It){const Wn=(an-fn)*Rn;let sn=0;sn=On!==pr?-Hr*En-td:(-En*It+.5)*pr;for(const gn of Lr)for(const zi of gn.positionedGlyphs)zi.x+=Wn,zi.y+=sn})(Ce.positionedLines,Ar,mn,Ln,ur,nn,Fe,on,He.length),Ce.top+=-Ln*on,Ce.bottom=Ce.top+on,Ce.left+=-mn*ur,Ce.right=Ce.left+ur}(Ie,t,o,l,ce,x,v,E,D,T,R,J),!function(Ce){for(const Je of Ce)if(Je.positionedGlyphs.length!==0)return!1;return!0}(we)&&Ie}const nd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ww={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function P1(i,t,o,l,d,g){if(t.imageName){const x=l[t.imageName];return x?x.displaySize[0]*t.scale*en/g+d:0}{const x=o[t.fontStack],v=x&&x[i];return v?v.metrics.advance*t.scale+d:0}}function M1(i,t,o,l){const d=Math.pow(i-t,2);return l?i<t?d/2:2*d:d+Math.abs(o)*o}function kw(i,t,o){let l=0;return i===10&&(l-=1e4),o&&(l+=150),i!==40&&i!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function A1(i,t,o,l,d,g){let x=null,v=M1(t,o,d,g);for(const E of l){const T=M1(t-E.x,o,d,g)+E.badness;T<=v&&(x=E,v=T)}return{index:i,x:t,priorBreak:x,badness:v}}function D1(i){return i?D1(i.priorBreak).concat(i.index):[]}function Dm(i,t,o,l,d,g,x){if(g!=="point")return[];if(!i)return[];const v=[],E=function(R,B,N,J,Q,ce){let fe=0;for(let me=0;me<R.length();me++){const we=R.getSection(me);fe+=P1(R.getCharCode(me),we,J,Q,B,ce)}return fe/Math.max(1,Math.ceil(fe/N))}(i,t,o,l,d,x),T=i.text.indexOf("\u200B")>=0;let M=0;for(let R=0;R<i.length();R++){const B=i.getSection(R),N=i.getCharCode(R);if(nd[N]||(M+=P1(N,B,l,d,t,x)),R<i.length()-1){const J=!((D=N)<11904||!(Ve["Bopomofo Extended"](D)||Ve.Bopomofo(D)||Ve["CJK Compatibility Forms"](D)||Ve["CJK Compatibility Ideographs"](D)||Ve["CJK Compatibility"](D)||Ve["CJK Radicals Supplement"](D)||Ve["CJK Strokes"](D)||Ve["CJK Symbols and Punctuation"](D)||Ve["CJK Unified Ideographs Extension A"](D)||Ve["CJK Unified Ideographs"](D)||Ve["Enclosed CJK Letters and Months"](D)||Ve["Halfwidth and Fullwidth Forms"](D)||Ve.Hiragana(D)||Ve["Ideographic Description Characters"](D)||Ve["Kangxi Radicals"](D)||Ve["Katakana Phonetic Extensions"](D)||Ve.Katakana(D)||Ve["Vertical Forms"](D)||Ve["Yi Radicals"](D)||Ve["Yi Syllables"](D)));(ww[N]||J||B.imageName)&&v.push(A1(R+1,M,E,v,kw(N,i.getCharCode(R+1),J&&T),!1))}}var D;return D1(A1(i.length(),M,E,v,0,!0))}function Lm(i){let t=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function Ew(i,t,o,l,d){if(!l&&!d)return;const g=i[o],x=(i[o].x+g.metrics.advance*g.scale)*l;for(let v=t;v<=o;v++)i[v].x-=x,i[v].y+=d}function Sw(i,t,o){const{horizontalAlign:l,verticalAlign:d}=Lm(o),g=t[0]-i.displaySize[0]*l,x=t[1]-i.displaySize[1]*d;return{image:i,top:x,bottom:x+i.displaySize[1],left:g,right:g+i.displaySize[0]}}function L1(i,t,o,l,d,g){const x=i.image;let v;if(x.content){const Q=x.content,ce=x.pixelRatio||1;v=[Q[0]/ce,Q[1]/ce,x.displaySize[0]-Q[2]/ce,x.displaySize[1]-Q[3]/ce]}const E=t.left*g,T=t.right*g;let M,D,R,B;o==="width"||o==="both"?(B=d[0]+E-l[3],D=d[0]+T+l[1]):(B=d[0]+(E+T-x.displaySize[0])/2,D=B+x.displaySize[0]);const N=t.top*g,J=t.bottom*g;return o==="height"||o==="both"?(M=d[1]+N-l[0],R=d[1]+J+l[2]):(M=d[1]+(N+J-x.displaySize[1])/2,R=M+x.displaySize[1]),{image:x,top:M,right:D,bottom:R,left:B,collisionPadding:v}}const Lo=128;function R1(i,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new sr(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:d}=o;let g=0;for(;g<l.length&&l[g]<=i;)g++;g=Math.max(0,g-1);let x=g;for(;x<l.length&&l[x]<i+1;)x++;x=Math.min(l.length-1,x);const v=l[g],E=l[x];return o.kind==="composite"?{kind:"composite",minZoom:v,maxZoom:E,interpolationType:d}:{kind:"camera",minZoom:v,maxZoom:E,minSize:o.evaluate(new sr(v)),maxSize:o.evaluate(new sr(E)),interpolationType:d}}}class va extends Qe{constructor(t,o,l,d){super(t,o),this.angle=l,d!==void 0&&(this.segment=d)}clone(){return new va(this.x,this.y,this.angle,this.segment)}}function O1(i,t,o,l,d){if(t.segment===void 0)return!0;let g=t,x=t.segment+1,v=0;for(;v>-o/2;){if(x--,x<0)return!1;v-=i[x].dist(g),g=i[x]}v+=i[x].dist(i[x+1]),x++;const E=[];let T=0;for(;v<o/2;){const M=i[x],D=i[x+1];if(!D)return!1;let R=i[x-1].angleTo(M)-M.angleTo(D);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:v,angleDelta:R}),T+=R;v-E[0].distance>l;)T-=E.shift().angleDelta;if(T>d)return!1;x++,v+=M.dist(D)}return!0}function B1(i){let t=0;for(let o=0;o<i.length-1;o++)t+=i[o].dist(i[o+1]);return t}function F1(i,t,o){return i?.6*t*o:0}function N1(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function Cw(i,t,o,l,d,g){const x=F1(o,d,g),v=N1(o,l)*g;let E=0;const T=B1(i)/2;for(let M=0;M<i.length-1;M++){const D=i[M],R=i[M+1],B=D.dist(R);if(E+B>T){const N=(T-E)/B,J=Pr(D.x,R.x,N),Q=Pr(D.y,R.y,N),ce=new va(J,Q,R.angleTo(D),M);return ce._round(),!x||O1(i,ce,v,x,t)?ce:void 0}E+=B}}function Tw(i,t,o,l,d,g,x,v,E){const T=F1(l,g,x),M=N1(l,d),D=M*x,R=i[0].x===0||i[0].x===E||i[0].y===0||i[0].y===E;return t-D<t/4&&(t=D+t/4),U1(i,R?t/2*v%t:(M/2+2*g)*x*v%t,t,T,o,D,R,!1,E)}function U1(i,t,o,l,d,g,x,v,E){const T=g/2,M=B1(i);let D=0,R=t-o,B=[];for(let N=0;N<i.length-1;N++){const J=i[N],Q=i[N+1],ce=J.dist(Q),fe=Q.angleTo(J);for(;R+o<D+ce;){R+=o;const me=(R-D)/ce,we=Pr(J.x,Q.x,me),Ie=Pr(J.y,Q.y,me);if(we>=0&&we<E&&Ie>=0&&Ie<E&&R-T>=0&&R+T<=M){const Ce=new va(we,Ie,fe,N);Ce._round(),l&&!O1(i,Ce,g,l,d)||B.push(Ce)}}D+=ce}return v||B.length||x||(B=U1(i,D/2,o,l,d,g,x,!0,E)),B}function V1(i,t,o,l,d){const g=[];for(let x=0;x<i.length;x++){const v=i[x];let E;for(let T=0;T<v.length-1;T++){let M=v[T],D=v[T+1];M.x<t&&D.x<t||(M.x<t?M=new Qe(t,M.y+(t-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x<t&&(D=new Qe(t,M.y+(t-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y<o&&D.y<o||(M.y<o?M=new Qe(M.x+(o-M.y)/(D.y-M.y)*(D.x-M.x),o)._round():D.y<o&&(D=new Qe(M.x+(o-M.y)/(D.y-M.y)*(D.x-M.x),o)._round()),M.x>=l&&D.x>=l||(M.x>=l?M=new Qe(l,M.y+(l-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x>=l&&(D=new Qe(l,M.y+(l-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y>=d&&D.y>=d||(M.y>=d?M=new Qe(M.x+(d-M.y)/(D.y-M.y)*(D.x-M.x),d)._round():D.y>=d&&(D=new Qe(M.x+(d-M.y)/(D.y-M.y)*(D.x-M.x),d)._round()),E&&M.equals(E[E.length-1])||(E=[M],g.push(E)),E.push(D)))))}}return g}function j1(i,t,o,l){const d=[],g=i.image,x=g.pixelRatio,v=g.paddedRect.w-2,E=g.paddedRect.h-2,T=i.right-i.left,M=i.bottom-i.top,D=g.stretchX||[[0,v]],R=g.stretchY||[[0,E]],B=(Fe,Ke)=>Fe+Ke[1]-Ke[0],N=D.reduce(B,0),J=R.reduce(B,0),Q=v-N,ce=E-J;let fe=0,me=N,we=0,Ie=J,Ce=0,Je=Q,at=0,Ze=ce;if(g.content&&l){const Fe=g.content;fe=id(D,0,Fe[0]),we=id(R,0,Fe[1]),me=id(D,Fe[0],Fe[2]),Ie=id(R,Fe[1],Fe[3]),Ce=Fe[0]-fe,at=Fe[1]-we,Je=Fe[2]-Fe[0]-me,Ze=Fe[3]-Fe[1]-Ie}const He=(Fe,Ke,We,De)=>{const pt=od(Fe.stretch-fe,me,T,i.left),st=ad(Fe.fixed-Ce,Je,Fe.stretch,N),At=od(Ke.stretch-we,Ie,M,i.top),Gt=ad(Ke.fixed-at,Ze,Ke.stretch,J),cr=od(We.stretch-fe,me,T,i.left),ur=ad(We.fixed-Ce,Je,We.stretch,N),nn=od(De.stretch-we,Ie,M,i.top),Ar=ad(De.fixed-at,Ze,De.stretch,J),Dr=new Qe(pt,At),Zr=new Qe(cr,At),on=new Qe(cr,nn),mn=new Qe(pt,nn),Ln=new Qe(st/x,Gt/x),Lr=new Qe(ur/x,Ar/x),an=t*Math.PI/180;if(an){const Rn=Math.sin(an),On=Math.cos(an),pr=[On,-Rn,Rn,On];Dr._matMult(pr),Zr._matMult(pr),mn._matMult(pr),on._matMult(pr)}const fn=Fe.stretch+Fe.fixed,En=Ke.stretch+Ke.fixed;return{tl:Dr,tr:Zr,bl:mn,br:on,tex:{x:g.paddedRect.x+1+fn,y:g.paddedRect.y+1+En,w:We.stretch+We.fixed-fn,h:De.stretch+De.fixed-En},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ln,pixelOffsetBR:Lr,minFontScaleX:Je/x/T,minFontScaleY:Ze/x/M,isSDF:o}};if(l&&(g.stretchX||g.stretchY)){const Fe=$1(D,Q,N),Ke=$1(R,ce,J);for(let We=0;We<Fe.length-1;We++){const De=Fe[We],pt=Fe[We+1];for(let st=0;st<Ke.length-1;st++)d.push(He(De,Ke[st],pt,Ke[st+1]))}}else d.push(He({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:v+1},{fixed:0,stretch:E+1}));return d}function id(i,t,o){let l=0;for(const d of i)l+=Math.max(t,Math.min(o,d[1]))-Math.max(t,Math.min(o,d[0]));return l}function $1(i,t,o){const l=[{fixed:-1,stretch:0}];for(const[d,g]of i){const x=l[l.length-1];l.push({fixed:d-x.stretch,stretch:x.stretch}),l.push({fixed:d-x.stretch,stretch:x.stretch+(g-d)})}return l.push({fixed:t+1,stretch:o}),l}function od(i,t,o,l){return i/t*o+l}function ad(i,t,o,l){return i-t*o/l}Ye("Anchor",va);class sd{constructor(t,o,l,d,g,x,v,E,T,M){if(this.boxStartIndex=t.length,T){let D=x.top,R=x.bottom;const B=x.collisionPadding;B&&(D-=B[1],R+=B[3]);let N=R-D;N>0&&(N=Math.max(10,N),this.circleDiameter=N)}else{let D=x.top*v-E,R=x.bottom*v+E,B=x.left*v-E,N=x.right*v+E;const J=x.collisionPadding;if(J&&(B-=J[0]*v,D-=J[1]*v,N+=J[2]*v,R+=J[3]*v),M){const Q=new Qe(B,D),ce=new Qe(N,D),fe=new Qe(B,R),me=new Qe(N,R),we=M*Math.PI/180;Q._rotate(we),ce._rotate(we),fe._rotate(we),me._rotate(we),B=Math.min(Q.x,ce.x,fe.x,me.x),N=Math.max(Q.x,ce.x,fe.x,me.x),D=Math.min(Q.y,ce.y,fe.y,me.y),R=Math.max(Q.y,ce.y,fe.y,me.y)}t.emplaceBack(o.x,o.y,B,D,N,R,l,d,g)}this.boxEndIndex=t.length}}class zw{constructor(t=[],o=Iw){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:l}=this,d=o[t];for(;t>0;){const g=t-1>>1,x=o[g];if(l(d,x)>=0)break;o[t]=x,t=g}o[t]=d}_down(t){const{data:o,compare:l}=this,d=this.length>>1,g=o[t];for(;t<d;){let x=1+(t<<1),v=o[x];const E=x+1;if(E<this.length&&l(o[E],v)<0&&(x=E,v=o[E]),l(v,g)>=0)break;o[t]=v,t=x}o[t]=g}}function Iw(i,t){return i<t?-1:i>t?1:0}function Pw(i,t=1,o=!1){let l=1/0,d=1/0,g=-1/0,x=-1/0;const v=i[0];for(let B=0;B<v.length;B++){const N=v[B];(!B||N.x<l)&&(l=N.x),(!B||N.y<d)&&(d=N.y),(!B||N.x>g)&&(g=N.x),(!B||N.y>x)&&(x=N.y)}const E=Math.min(g-l,x-d);let T=E/2;const M=new zw([],Mw);if(E===0)return new Qe(l,d);for(let B=l;B<g;B+=E)for(let N=d;N<x;N+=E)M.push(new bl(B+T,N+T,T,i));let D=function(B){let N=0,J=0,Q=0;const ce=B[0];for(let fe=0,me=ce.length,we=me-1;fe<me;we=fe++){const Ie=ce[fe],Ce=ce[we],Je=Ie.x*Ce.y-Ce.x*Ie.y;J+=(Ie.x+Ce.x)*Je,Q+=(Ie.y+Ce.y)*Je,N+=3*Je}return new bl(J/N,Q/N,0,B)}(i),R=M.length;for(;M.length;){const B=M.pop();(B.d>D.d||!D.d)&&(D=B,o&&console.log("found best %d after %d probes",Math.round(1e4*B.d)/1e4,R)),B.max-D.d<=t||(T=B.h/2,M.push(new bl(B.p.x-T,B.p.y-T,T,i)),M.push(new bl(B.p.x+T,B.p.y-T,T,i)),M.push(new bl(B.p.x-T,B.p.y+T,T,i)),M.push(new bl(B.p.x+T,B.p.y+T,T,i)),R+=4)}return o&&(console.log(`num probes: ${R}`),console.log(`best distance: ${D.d}`)),D.p}function Mw(i,t){return t.max-i.max}function bl(i,t,o,l){this.p=new Qe(i,t),this.h=o,this.d=function(d,g){let x=!1,v=1/0;for(let E=0;E<g.length;E++){const T=g[E];for(let M=0,D=T.length,R=D-1;M<D;R=M++){const B=T[M],N=T[R];B.y>d.y!=N.y>d.y&&d.x<(N.x-B.x)*(d.y-B.y)/(N.y-B.y)+B.x&&(x=!x),v=Math.min(v,e1(d,B,N))}}return(x?1:-1)*Math.sqrt(v)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}const Rm=Number.POSITIVE_INFINITY;function G1(i,t){return t[1]!==Rm?function(o,l,d){let g=0,x=0;switch(l=Math.abs(l),d=Math.abs(d),o){case"top-right":case"top-left":case"top":x=d-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-d}switch(o){case"top-right":case"bottom-right":case"right":g=-l;break;case"top-left":case"bottom-left":case"left":g=l}return[g,x]}(i,t[0],t[1]):function(o,l){let d=0,g=0;l<0&&(l=0);const x=l/Math.sqrt(2);switch(o){case"top-right":case"top-left":g=x-7;break;case"bottom-right":case"bottom-left":g=7-x;break;case"bottom":g=7-l;break;case"top":g=l-7}switch(o){case"top-right":case"bottom-right":d=-x;break;case"top-left":case"bottom-left":d=x;break;case"left":d=l;break;case"right":d=-l}return[d,g]}(i,t[0])}function Om(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Aw(i,t,o,l,d,g,x,v,E,T,M){let D=g.textMaxSize.evaluate(t,{});D===void 0&&(D=x);const R=i.layers[0].layout,B=R.get("icon-offset").evaluate(t,{},M),N=Z1(o.horizontal),J=x/24,Q=i.tilePixelRatio*J,ce=i.tilePixelRatio*D/24,fe=i.tilePixelRatio*v,me=i.tilePixelRatio*R.get("symbol-spacing"),we=R.get("text-padding")*i.tilePixelRatio,Ie=R.get("icon-padding")*i.tilePixelRatio,Ce=R.get("text-max-angle")/180*Math.PI,Je=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point",at=R.get("icon-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",Ze=R.get("symbol-placement"),He=me/2,Fe=R.get("icon-text-fit");let Ke;l&&Fe!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(Ke=L1(l,o.vertical,Fe,R.get("icon-text-fit-padding"),B,J)),N&&(l=L1(l,N,Fe,R.get("icon-text-fit-padding"),B,J)));const We=(De,pt)=>{pt.x<0||pt.x>=jr||pt.y<0||pt.y>=jr||function(st,At,Gt,cr,ur,nn,Ar,Dr,Zr,on,mn,Ln,Lr,an,fn,En,Rn,On,pr,Hr,It,Wn,sn,gn,zi){const qi=st.addToLineVertexArray(At,Gt);let Zi,Ro,Ii,pi,Bn=0,Oo=0,cu=0,lx=0,Zm=-1,Hm=-1;const Bo={};let cx=Wc(""),Wm=0,Xm=0;if(Dr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Wm,Xm]=Dr.layout.get("text-offset").evaluate(It,{},gn).map(Fn=>Fn*en):(Wm=Dr.layout.get("text-radial-offset").evaluate(It,{},gn)*en,Xm=Rm),st.allowVerticalPlacement&&cr.vertical){const Fn=Dr.layout.get("text-rotate").evaluate(It,{},gn)+90;Ii=new sd(Zr,At,on,mn,Ln,cr.vertical,Lr,an,fn,Fn),Ar&&(pi=new sd(Zr,At,on,mn,Ln,Ar,Rn,On,fn,Fn))}if(ur){const Fn=Dr.layout.get("icon-rotate").evaluate(It,{}),so=Dr.layout.get("icon-text-fit")!=="none",uu=j1(ur,Fn,sn,so),pu=Ar?j1(Ar,Fn,sn,so):void 0;Ro=new sd(Zr,At,on,mn,Ln,ur,Rn,On,!1,Fn),Bn=4*uu.length;const dx=st.iconSizeData;let fs=null;dx.kind==="source"?(fs=[Lo*Dr.layout.get("icon-size").evaluate(It,{})],fs[0]>_a&&Te(`${st.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):dx.kind==="composite"&&(fs=[Lo*Wn.compositeIconSizes[0].evaluate(It,{},gn),Lo*Wn.compositeIconSizes[1].evaluate(It,{},gn)],(fs[0]>_a||fs[1]>_a)&&Te(`${st.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),st.addSymbols(st.icon,uu,fs,Hr,pr,It,c.WritingMode.none,At,qi.lineStartIndex,qi.lineLength,-1,gn),Zm=st.icon.placedSymbolArray.length-1,pu&&(Oo=4*pu.length,st.addSymbols(st.icon,pu,fs,Hr,pr,It,c.WritingMode.vertical,At,qi.lineStartIndex,qi.lineLength,-1,gn),Hm=st.icon.placedSymbolArray.length-1)}const ux=Object.keys(cr.horizontal);for(const Fn of ux){const so=cr.horizontal[Fn];if(!Zi){cx=Wc(so.text);const pu=Dr.layout.get("text-rotate").evaluate(It,{},gn);Zi=new sd(Zr,At,on,mn,Ln,so,Lr,an,fn,pu)}const uu=so.positionedLines.length===1;if(cu+=q1(st,At,so,nn,Dr,fn,It,En,qi,cr.vertical?c.WritingMode.horizontal:c.WritingMode.horizontalOnly,uu?ux:[Fn],Bo,Zm,Wn,gn),uu)break}cr.vertical&&(lx+=q1(st,At,cr.vertical,nn,Dr,fn,It,En,qi,c.WritingMode.vertical,["vertical"],Bo,Hm,Wn,gn));const qw=Zi?Zi.boxStartIndex:st.collisionBoxArray.length,Zw=Zi?Zi.boxEndIndex:st.collisionBoxArray.length,Hw=Ii?Ii.boxStartIndex:st.collisionBoxArray.length,Ww=Ii?Ii.boxEndIndex:st.collisionBoxArray.length,Xw=Ro?Ro.boxStartIndex:st.collisionBoxArray.length,Kw=Ro?Ro.boxEndIndex:st.collisionBoxArray.length,Yw=pi?pi.boxStartIndex:st.collisionBoxArray.length,Jw=pi?pi.boxEndIndex:st.collisionBoxArray.length;let Hi=-1;const dd=(Fn,so)=>Fn&&Fn.circleDiameter?Math.max(Fn.circleDiameter,so):so;Hi=dd(Zi,Hi),Hi=dd(Ii,Hi),Hi=dd(Ro,Hi),Hi=dd(pi,Hi);const px=Hi>-1?1:0;px&&(Hi*=zi/en),st.glyphOffsetArray.length>=vl.MAX_GLYPHS&&Te("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),It.sortKey!==void 0&&st.addToSortKeyRanges(st.symbolInstances.length,It.sortKey),st.symbolInstances.emplaceBack(At.x,At.y,Bo.right>=0?Bo.right:-1,Bo.center>=0?Bo.center:-1,Bo.left>=0?Bo.left:-1,Bo.vertical||-1,Zm,Hm,cx,qw,Zw,Hw,Ww,Xw,Kw,Yw,Jw,on,cu,lx,Bn,Oo,px,0,Lr,Wm,Xm,Hi)}(i,pt,De,o,l,d,Ke,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,Q,we,Je,E,fe,Ie,at,B,t,g,T,M,x)};if(Ze==="line")for(const De of V1(t.geometry,0,0,jr,jr)){const pt=Tw(De,me,Ce,o.vertical||N,l,24,ce,i.overscaling,jr);for(const st of pt){const At=N;At&&Dw(i,At.text,He,st)||We(De,st)}}else if(Ze==="line-center"){for(const De of t.geometry)if(De.length>1){const pt=Cw(De,Ce,o.vertical||N,l,24,ce);pt&&We(De,pt)}}else if(t.type==="Polygon")for(const De of km(t.geometry,0)){const pt=Pw(De,16);We(De[0],new va(pt.x,pt.y,0))}else if(t.type==="LineString")for(const De of t.geometry)We(De,new va(De[0].x,De[0].y,0));else if(t.type==="Point")for(const De of t.geometry)for(const pt of De)We([pt],new va(pt.x,pt.y,0))}const _a=32640;function q1(i,t,o,l,d,g,x,v,E,T,M,D,R,B,N){const J=function(fe,me,we,Ie,Ce,Je,at,Ze){const He=Ie.layout.get("text-rotate").evaluate(Je,{})*Math.PI/180,Fe=[];for(const Ke of me.positionedLines)for(const We of Ke.positionedGlyphs){if(!We.rect)continue;const De=We.rect||{};let pt=4,st=!0,At=1,Gt=0;const cr=(Ce||Ze)&&We.vertical,ur=We.metrics.advance*We.scale/2;if(Ze&&me.verticalizable){const pr=(We.scale-1)*en,Hr=(en-We.metrics.width*We.scale)/2;Gt=Ke.lineOffset/2-(We.imageName?-Hr:pr)}if(We.imageName){const pr=at[We.imageName];st=pr.sdf,At=pr.pixelRatio,pt=1/At}const nn=Ce?[We.x+ur,We.y]:[0,0];let Ar=Ce?[0,0]:[We.x+ur+we[0],We.y+we[1]-Gt],Dr=[0,0];cr&&(Dr=Ar,Ar=[0,0]);const Zr=(We.metrics.left-pt)*We.scale-ur+Ar[0],on=(-We.metrics.top-pt)*We.scale+Ar[1],mn=Zr+De.w*We.scale/At,Ln=on+De.h*We.scale/At,Lr=new Qe(Zr,on),an=new Qe(mn,on),fn=new Qe(Zr,Ln),En=new Qe(mn,Ln);if(cr){const pr=new Qe(-ur,ur-td),Hr=-Math.PI/2,It=12-ur,Wn=new Qe(22-It,-(We.imageName?It:0)),sn=new Qe(...Dr);Lr._rotateAround(Hr,pr)._add(Wn)._add(sn),an._rotateAround(Hr,pr)._add(Wn)._add(sn),fn._rotateAround(Hr,pr)._add(Wn)._add(sn),En._rotateAround(Hr,pr)._add(Wn)._add(sn)}if(He){const pr=Math.sin(He),Hr=Math.cos(He),It=[Hr,-pr,pr,Hr];Lr._matMult(It),an._matMult(It),fn._matMult(It),En._matMult(It)}const Rn=new Qe(0,0),On=new Qe(0,0);Fe.push({tl:Lr,tr:an,bl:fn,br:En,tex:De,writingMode:me.writingMode,glyphOffset:nn,sectionIndex:We.sectionIndex,isSDF:st,pixelOffsetTL:Rn,pixelOffsetBR:On,minFontScaleX:0,minFontScaleY:0})}return Fe}(0,o,v,d,g,x,l,i.allowVerticalPlacement),Q=i.textSizeData;let ce=null;Q.kind==="source"?(ce=[Lo*d.layout.get("text-size").evaluate(x,{})],ce[0]>_a&&Te(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Q.kind==="composite"&&(ce=[Lo*B.compositeTextSizes[0].evaluate(x,{},N),Lo*B.compositeTextSizes[1].evaluate(x,{},N)],(ce[0]>_a||ce[1]>_a)&&Te(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,J,ce,v,g,x,T,t,E.lineStartIndex,E.lineLength,R,N);for(const fe of M)D[fe]=i.text.placedSymbolArray.length-1;return 4*J.length}function Z1(i){for(const t in i)return i[t];return null}function Dw(i,t,o,l){const d=i.compareText;if(t in d){const g=d[t];for(let x=g.length-1;x>=0;x--)if(l.dist(g[x])<o)return!0}else d[t]=[];return d[t].push(l),!1}const Lw=ya.VectorTileFeature.types,Rw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ld(i,t,o,l,d,g,x,v,E,T,M,D,R){const B=v?Math.min(_a,Math.round(v[0])):0,N=v?Math.min(_a,Math.round(v[1])):0;i.emplaceBack(t,o,Math.round(32*l),Math.round(32*d),g,x,(B<<1)+(E?1:0),N,16*T,16*M,256*D,256*R)}function Bm(i,t,o){i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o)}function Ow(i){for(const t of i.sections)if(lm(t.text))return!0;return!1}class Fm{constructor(t){this.layoutVertexArray=new Qr,this.indexArray=new kn,this.programConfigurations=t,this.segments=new Bt,this.dynamicLayoutVertexArray=new An,this.opacityVertexArray=new Zn,this.placedSymbolArray=new Ae}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,l,d){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ow.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,aw.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Rw,!0),this.opacityVertexBuffer.itemSize=1),(l||d)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ye("SymbolBuffers",Fm);class Nm{constructor(t,o,l){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new l,this.segments=new Bt,this.collisionVertexArray=new ao}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,sw.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ye("CollisionBuffers",Nm);class vl{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(x=>x.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gm([]),this.placementViewportMatrix=gm([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=R1(this.zoom,o["text-size"]),this.iconSizeData=R1(this.zoom,o["icon-size"]);const l=this.layers[0].layout,d=l.get("symbol-sort-key"),g=l.get("symbol-z-order");this.canOverlap=Vm(l,"text-overlap","text-allow-overlap")!=="never"||Vm(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!d.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(x=>c.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=t.sourceID}createArrays(){this.text=new Fm(new ps(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Fm(new ps(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new et,this.lineVertexArray=new Ge,this.symbolInstances=new Ee}calculateGlyphDependencies(t,o,l,d,g){for(let x=0;x<t.length;x++)if(o[t.charCodeAt(x)]=!0,(l||d)&&g){const v=ou[t.charAt(x)];v&&(o[v.charCodeAt(0)]=!0)}}populate(t,o,l){const d=this.layers[0],g=d.layout,x=g.get("text-font"),v=g.get("text-field"),E=g.get("icon-image"),T=(v.value.kind!=="constant"||v.value.value instanceof W&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),M=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,D=g.get("symbol-sort-key");if(this.features=[],!T&&!M)return;const R=o.iconDependencies,B=o.glyphDependencies,N=o.availableImages,J=new sr(this.zoom);for(const{feature:Q,id:ce,index:fe,sourceLayerIndex:me}of t){const we=d._featureFilter.needGeometry,Ie=hs(Q,we);if(!d._featureFilter.filter(J,Ie,l))continue;let Ce,Je;if(we||(Ie.geometry=ds(Q)),T){const Ze=d.getValueAndResolveTokens("text-field",Ie,l,N),He=W.factory(Ze);Ow(He)&&(this.hasRTLText=!0),(!this.hasRTLText||qc()==="unavailable"||this.hasRTLText&&qn.isParsed())&&(Ce=cw(He,d,Ie))}if(M){const Ze=d.getValueAndResolveTokens("icon-image",Ie,l,N);Je=Ze instanceof ie?Ze:ie.fromString(Ze)}if(!Ce&&!Je)continue;const at=this.sortFeaturesByKey?D.evaluate(Ie,{},l):void 0;if(this.features.push({id:ce,text:Ce,icon:Je,index:fe,sourceLayerIndex:me,geometry:Ie.geometry,properties:Q.properties,type:Lw[Q.type],sortKey:at}),Je&&(R[Je.name]=!0),Ce){const Ze=x.evaluate(Ie,{},l).join(","),He=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.WritingMode.vertical)>=0;for(const Fe of Ce.sections)if(Fe.image)R[Fe.image.name]=!0;else{const Ke=Uc(Ce.toString()),We=Fe.fontStack||Ze,De=B[We]=B[We]||{};this.calculateGlyphDependencies(Fe.text,De,He,this.allowVerticalPlacement,Ke)}}}g.get("symbol-placement")==="line"&&(this.features=function(Q){const ce={},fe={},me=[];let we=0;function Ie(Ze){me.push(Q[Ze]),we++}function Ce(Ze,He,Fe){const Ke=fe[Ze];return delete fe[Ze],fe[He]=Ke,me[Ke].geometry[0].pop(),me[Ke].geometry[0]=me[Ke].geometry[0].concat(Fe[0]),Ke}function Je(Ze,He,Fe){const Ke=ce[He];return delete ce[He],ce[Ze]=Ke,me[Ke].geometry[0].shift(),me[Ke].geometry[0]=Fe[0].concat(me[Ke].geometry[0]),Ke}function at(Ze,He,Fe){const Ke=Fe?He[0][He[0].length-1]:He[0][0];return`${Ze}:${Ke.x}:${Ke.y}`}for(let Ze=0;Ze<Q.length;Ze++){const He=Q[Ze],Fe=He.geometry,Ke=He.text?He.text.toString():null;if(!Ke){Ie(Ze);continue}const We=at(Ke,Fe),De=at(Ke,Fe,!0);if(We in fe&&De in ce&&fe[We]!==ce[De]){const pt=Je(We,De,Fe),st=Ce(We,De,me[pt].geometry);delete ce[We],delete fe[De],fe[at(Ke,me[st].geometry,!0)]=st,me[pt].geometry=null}else We in fe?Ce(We,De,Fe):De in ce?Je(We,De,Fe):(Ie(Ze),ce[We]=we-1,fe[De]=we-1)}return me.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Q,ce)=>Q.sortKey-ce.sortKey)}update(t,o,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,l),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const l=this.lineVertexArray.length;if(t.segment!==void 0){let d=t.dist(o[t.segment+1]),g=t.dist(o[t.segment]);const x={};for(let v=t.segment+1;v<o.length;v++)x[v]={x:o[v].x,y:o[v].y,tileUnitDistanceFromAnchor:d},v<o.length-1&&(d+=o[v+1].dist(o[v]));for(let v=t.segment||0;v>=0;v--)x[v]={x:o[v].x,y:o[v].y,tileUnitDistanceFromAnchor:g},v>0&&(g+=o[v-1].dist(o[v]));for(let v=0;v<o.length;v++){const E=x[v];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,o,l,d,g,x,v,E,T,M,D,R){const B=t.indexArray,N=t.layoutVertexArray,J=t.segments.prepareSegment(4*o.length,N,B,this.canOverlap?x.sortKey:void 0),Q=this.glyphOffsetArray.length,ce=J.vertexLength,fe=this.allowVerticalPlacement&&v===c.WritingMode.vertical?Math.PI/2:0,me=x.text&&x.text.sections;for(let we=0;we<o.length;we++){const{tl:Ie,tr:Ce,bl:Je,br:at,tex:Ze,pixelOffsetTL:He,pixelOffsetBR:Fe,minFontScaleX:Ke,minFontScaleY:We,glyphOffset:De,isSDF:pt,sectionIndex:st}=o[we],At=J.vertexLength,Gt=De[1];ld(N,E.x,E.y,Ie.x,Gt+Ie.y,Ze.x,Ze.y,l,pt,He.x,He.y,Ke,We),ld(N,E.x,E.y,Ce.x,Gt+Ce.y,Ze.x+Ze.w,Ze.y,l,pt,Fe.x,He.y,Ke,We),ld(N,E.x,E.y,Je.x,Gt+Je.y,Ze.x,Ze.y+Ze.h,l,pt,He.x,Fe.y,Ke,We),ld(N,E.x,E.y,at.x,Gt+at.y,Ze.x+Ze.w,Ze.y+Ze.h,l,pt,Fe.x,Fe.y,Ke,We),Bm(t.dynamicLayoutVertexArray,E,fe),B.emplaceBack(At,At+1,At+2),B.emplaceBack(At+1,At+2,At+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(De[0]),we!==o.length-1&&st===o[we+1].sectionIndex||t.programConfigurations.populatePaintArrays(N.length,x,x.index,{},R,me&&me[st])}t.placedSymbolArray.emplaceBack(E.x,E.y,Q,this.glyphOffsetArray.length-Q,ce,T,M,E.segment,l?l[0]:0,l?l[1]:0,d[0],d[1],v,0,!1,0,D)}_addCollisionDebugVertex(t,o,l,d,g,x){return o.emplaceBack(0,0),t.emplaceBack(l.x,l.y,d,g,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(t,o,l,d,g,x,v){const E=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),T=E.vertexLength,M=g.layoutVertexArray,D=g.collisionVertexArray,R=v.anchorX,B=v.anchorY;this._addCollisionDebugVertex(M,D,x,R,B,new Qe(t,o)),this._addCollisionDebugVertex(M,D,x,R,B,new Qe(l,o)),this._addCollisionDebugVertex(M,D,x,R,B,new Qe(l,d)),this._addCollisionDebugVertex(M,D,x,R,B,new Qe(t,d)),E.vertexLength+=4;const N=g.indexArray;N.emplaceBack(T,T+1),N.emplaceBack(T+1,T+2),N.emplaceBack(T+2,T+3),N.emplaceBack(T+3,T),E.primitiveLength+=4}addDebugCollisionBoxes(t,o,l,d){for(let g=t;g<o;g++){const x=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,d?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nm(Hn,_1.members,Ei),this.iconCollisionBox=new Nm(Hn,_1.members,Ei);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,l,d,g,x,v,E,T){const M={};for(let D=o;D<l;D++){const R=t.get(D);M.textBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.textFeatureIndex=R.featureIndex;break}for(let D=d;D<g;D++){const R=t.get(D);M.verticalTextBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.verticalTextFeatureIndex=R.featureIndex;break}for(let D=x;D<v;D++){const R=t.get(D);M.iconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.iconFeatureIndex=R.featureIndex;break}for(let D=E;D<T;D++){const R=t.get(D);M.verticalIconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.verticalIconFeatureIndex=R.featureIndex;break}return M}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const l=t.placedSymbolArray.get(o),d=l.vertexStartIndex+4*l.numGlyphs;for(let g=l.vertexStartIndex;g<d;g+=4)t.indexArray.emplaceBack(g,g+1,g+2),t.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),l=Math.cos(t),d=[],g=[],x=[];for(let v=0;v<this.symbolInstances.length;++v){x.push(v);const E=this.symbolInstances.get(v);d.push(0|Math.round(o*E.anchorX+l*E.anchorY)),g.push(E.featureIndex)}return x.sort((v,E)=>d[v]-d[E]||g[E]-g[v]),x}addToSortKeyRanges(t,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((d,g,x)=>{d>=0&&x.indexOf(d)===g&&this.addIndicesForPlacedSymbol(this.text,d)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ye("SymbolBucket",vl,{omit:["layers","collisionBoxArray","features","compareText"]}),vl.MAX_GLYPHS=65535,vl.addDynamicAttributes=Bm;const Bw=new Ur({"symbol-placement":new rt(be.layout_symbol["symbol-placement"]),"symbol-spacing":new rt(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rt(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ut(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rt(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rt(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new rt(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new rt(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new rt(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rt(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new ut(be.layout_symbol["icon-size"]),"icon-text-fit":new rt(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rt(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new ut(be.layout_symbol["icon-image"]),"icon-rotate":new ut(be.layout_symbol["icon-rotate"]),"icon-padding":new rt(be.layout_symbol["icon-padding"]),"icon-keep-upright":new rt(be.layout_symbol["icon-keep-upright"]),"icon-offset":new ut(be.layout_symbol["icon-offset"]),"icon-anchor":new ut(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rt(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rt(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rt(be.layout_symbol["text-rotation-alignment"]),"text-field":new ut(be.layout_symbol["text-field"]),"text-font":new ut(be.layout_symbol["text-font"]),"text-size":new ut(be.layout_symbol["text-size"]),"text-max-width":new ut(be.layout_symbol["text-max-width"]),"text-line-height":new rt(be.layout_symbol["text-line-height"]),"text-letter-spacing":new ut(be.layout_symbol["text-letter-spacing"]),"text-justify":new ut(be.layout_symbol["text-justify"]),"text-radial-offset":new ut(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rt(be.layout_symbol["text-variable-anchor"]),"text-anchor":new ut(be.layout_symbol["text-anchor"]),"text-max-angle":new rt(be.layout_symbol["text-max-angle"]),"text-writing-mode":new rt(be.layout_symbol["text-writing-mode"]),"text-rotate":new ut(be.layout_symbol["text-rotate"]),"text-padding":new rt(be.layout_symbol["text-padding"]),"text-keep-upright":new rt(be.layout_symbol["text-keep-upright"]),"text-transform":new ut(be.layout_symbol["text-transform"]),"text-offset":new ut(be.layout_symbol["text-offset"]),"text-allow-overlap":new rt(be.layout_symbol["text-allow-overlap"]),"text-overlap":new rt(be.layout_symbol["text-overlap"]),"text-ignore-placement":new rt(be.layout_symbol["text-ignore-placement"]),"text-optional":new rt(be.layout_symbol["text-optional"])});var Um={paint:new Ur({"icon-opacity":new ut(be.paint_symbol["icon-opacity"]),"icon-color":new ut(be.paint_symbol["icon-color"]),"icon-halo-color":new ut(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new ut(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ut(be.paint_symbol["icon-halo-blur"]),"icon-translate":new rt(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new rt(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new ut(be.paint_symbol["text-opacity"]),"text-color":new ut(be.paint_symbol["text-color"],{runtimeType:dn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new ut(be.paint_symbol["text-halo-color"]),"text-halo-width":new ut(be.paint_symbol["text-halo-width"]),"text-halo-blur":new ut(be.paint_symbol["text-halo-blur"]),"text-translate":new rt(be.paint_symbol["text-translate"]),"text-translate-anchor":new rt(be.paint_symbol["text-translate-anchor"])}),layout:Bw};class H1{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:nr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ye("FormatSectionOverride",H1,{omit:["defaultValue"]});class cd extends wn{constructor(t){super(t,Um)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const d=[];for(const g of l)d.indexOf(g)<0&&d.push(g);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,l,d){const g=this.layout.get(t).evaluate(o,{},l,d),x=this._unevaluatedLayout._values[t];return x.isDataDriven()||Hs(x.value)||!g?g:function(v,E){return E.replace(/{([^{}]+)}/g,(T,M)=>M in v?String(v[M]):"")}(o.properties,g)}createBucket(t){return new vl(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Um.paint.overridableProperties){if(!cd.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),l=new H1(o),d=new Lc(l,o.property.specification);let g=null;g=o.value.kind==="constant"||o.value.kind==="source"?new Xs("source",d):new Ks("composite",d,o.value.zoomStops,o.value._interpolationType),this.paint._values[t]=new ki(o.property,g,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&cd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const l=t.get("text-field"),d=Um.paint.properties[o];let g=!1;const x=v=>{for(const E of v)if(d.overrides&&d.overrides.hasOverride(E))return void(g=!0)};if(l.value.kind==="constant"&&l.value.value instanceof W)x(l.value.value.sections);else if(l.value.kind==="source"){const v=T=>{g||(T instanceof ze&&oe(T.value)===ai?x(T.value.sections):T instanceof nt?x(T.sections):T.eachChild(v))},E=l.value;E._styleExpression&&v(E._styleExpression.expression)}return g}}function Vm(i,t,o){let l="never";const d=i.get(t);return d?l=d:i.get(o)&&(l="always"),l}var Fw={paint:new Ur({"background-color":new rt(be.paint_background["background-color"]),"background-pattern":new ls(be.paint_background["background-pattern"]),"background-opacity":new rt(be.paint_background["background-opacity"])})},Nw={paint:new Ur({"raster-opacity":new rt(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new rt(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rt(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rt(be.paint_raster["raster-brightness-max"]),"raster-saturation":new rt(be.paint_raster["raster-saturation"]),"raster-contrast":new rt(be.paint_raster["raster-contrast"]),"raster-resampling":new rt(be.paint_raster["raster-resampling"]),"raster-fade-duration":new rt(be.paint_raster["raster-fade-duration"])})};class Uw extends wn{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const Vw={circle:class extends wn{constructor(i){super(i,b2)}createBucket(i){return new hm(i)}queryRadius(i){const t=i;return Kc("circle-radius",this,t)+Kc("circle-stroke-width",this,t)+Hp(this.paint.get("circle-translate"))}queryIntersectsFeature(i,t,o,l,d,g,x,v){const E=Wp(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,x),T=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o),M=this.paint.get("circle-pitch-alignment")==="map",D=M?E:function(B,N){return B.map(J=>n1(J,N))}(E,v),R=M?T*x:T;for(const B of l)for(const N of B){const J=M?N:n1(N,v);let Q=R;const ce=Xp([],[N.x,N.y,0,1],v);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Q*=ce[3]/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Q*=g.cameraToCenterDistance/ce[3]),m2(D,J,Q))return!0}return!1}},heatmap:class extends wn{constructor(i){super(i,_2),this._updateColorRamp()}createBucket(i){return new i1(i)}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=a1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends wn{constructor(i){super(i,w2)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends wn{constructor(i){super(i,F2)}recalculate(i,t){super.recalculate(i,t);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Cm(i)}queryRadius(){return Hp(this.paint.get("fill-translate"))}queryIntersectsFeature(i,t,o,l,d,g,x){return Q0(Wp(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,x),l)}isTileClipped(){return!0}},"fill-extrusion":class extends wn{constructor(i){super(i,Y2)}createBucket(i){return new zm(i)}queryRadius(){return Hp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,t,o,l,d,g,x,v){const E=Wp(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,x),T=this.paint.get("fill-extrusion-height").evaluate(t,o),M=this.paint.get("fill-extrusion-base").evaluate(t,o),D=function(B,N,J,Q){const ce=[];for(const fe of B){const me=[fe.x,fe.y,0,1];Xp(me,me,N),ce.push(new Qe(me[0]/me[3],me[1]/me[3]))}return ce}(E,v),R=function(B,N,J,Q){const ce=[],fe=[],me=Q[8]*N,we=Q[9]*N,Ie=Q[10]*N,Ce=Q[11]*N,Je=Q[8]*J,at=Q[9]*J,Ze=Q[10]*J,He=Q[11]*J;for(const Fe of B){const Ke=[],We=[];for(const De of Fe){const pt=De.x,st=De.y,At=Q[0]*pt+Q[4]*st+Q[12],Gt=Q[1]*pt+Q[5]*st+Q[13],cr=Q[2]*pt+Q[6]*st+Q[14],ur=Q[3]*pt+Q[7]*st+Q[15],nn=cr+Ie,Ar=ur+Ce,Dr=At+Je,Zr=Gt+at,on=cr+Ze,mn=ur+He,Ln=new Qe((At+me)/Ar,(Gt+we)/Ar);Ln.z=nn/Ar,Ke.push(Ln);const Lr=new Qe(Dr/mn,Zr/mn);Lr.z=on/mn,We.push(Lr)}ce.push(Ke),fe.push(We)}return[ce,fe]}(l,M,T,v);return function(B,N,J){let Q=1/0;Q0(J,N)&&(Q=g1(J,N[0]));for(let ce=0;ce<N.length;ce++){const fe=N[ce],me=B[ce];for(let we=0;we<fe.length-1;we++){const Ie=fe[we],Ce=[Ie,fe[we+1],me[we+1],me[we],Ie];J0(J,Ce)&&(Q=Math.min(Q,g1(J,Ce)))}}return Q!==1/0&&Q}(R[0],R[1],D)}},line:class extends wn{constructor(i){super(i,y1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Xa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,t){super.recalculate(i,t),this.paint._values["line-floorwidth"]=b1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Im(i)}queryRadius(i){const t=i,o=v1(Kc("line-width",this,t),Kc("line-gap-width",this,t)),l=Kc("line-offset",this,t);return o/2+Math.abs(l)+Hp(this.paint.get("line-translate"))}queryIntersectsFeature(i,t,o,l,d,g,x){const v=Wp(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,x),E=x/2*v1(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),T=this.paint.get("line-offset").evaluate(t,o);return T&&(l=function(M,D){const R=[];for(let B=0;B<M.length;B++){const N=M[B],J=[];for(let Q=0;Q<N.length;Q++){const ce=N[Q-1],fe=N[Q],me=N[Q+1],we=Q===0?new Qe(0,0):fe.sub(ce)._unit()._perp(),Ie=Q===N.length-1?new Qe(0,0):me.sub(fe)._unit()._perp(),Ce=we._add(Ie)._unit(),Je=Ce.x*Ie.x+Ce.y*Ie.y;Je!==0&&Ce._mult(1/Je),J.push(Ce._mult(D)._add(fe))}R.push(J)}return R}(l,T*x)),function(M,D,R){for(let B=0;B<D.length;B++){const N=D[B];if(M.length>=3){for(let J=0;J<N.length;J++)if(dl(M,N[J]))return!0}if(f2(M,N,R))return!0}return!1}(v,l,E)}isTileClipped(){return!0}},symbol:cd,background:class extends wn{constructor(i){super(i,Fw)}},raster:class extends wn{constructor(i){super(i,Nw)}}};class jw{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const W1=63710088e-1;class br{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new br(pe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,l=this.lat*o,d=t.lat*o,g=Math.sin(l)*Math.sin(d)+Math.cos(l)*Math.cos(d)*Math.cos((t.lng-this.lng)*o);return W1*Math.acos(Math.min(g,1))}toBounds(t=0){const o=360*t/40075017,l=o/Math.cos(Math.PI/180*this.lat);return new ms(new br(this.lng-l,this.lat-o),new br(this.lng+l,this.lat+o))}static convert(t){if(t instanceof br)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new br(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new br(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ms{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof br?new br(t.lng,t.lat):br.convert(t),this}setSouthWest(t){return this._sw=t instanceof br?new br(t.lng,t.lat):br.convert(t),this}extend(t){const o=this._sw,l=this._ne;let d,g;if(t instanceof br)d=t,g=t;else{if(!(t instanceof ms))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(ms.convert(t)):this.extend(br.convert(t)):this;if(d=t._sw,g=t._ne,!d||!g)return this}return o||l?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),l.lng=Math.max(g.lng,l.lng),l.lat=Math.max(g.lat,l.lat)):(this._sw=new br(d.lng,d.lat),this._ne=new br(g.lng,g.lat)),this}getCenter(){return new br((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new br(this.getWest(),this.getNorth())}getSouthEast(){return new br(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:l}=br.convert(t);let d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&d}static convert(t){return t instanceof ms?t:t&&new ms(t)}}const X1=2*Math.PI*W1;function K1(i){return X1*Math.cos(i*Math.PI/180)}function Y1(i){return(180+i)/360}function J1(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Q1(i,t){return i/K1(t)}function jm(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class ud{constructor(t,o,l=0){this.x=+t,this.y=+o,this.z=+l}static fromLngLat(t,o=0){const l=br.convert(t);return new ud(Y1(l.lng),J1(l.lat),Q1(o,l.lat))}toLngLat(){return new br(360*this.x-180,jm(this.y))}toAltitude(){return this.z*K1(jm(this.y))}meterInMercatorCoordinateUnits(){return 1/X1*(t=jm(this.y),1/Math.cos(t*Math.PI/180));var t}}function ex(i,t,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[i*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class $m{constructor(t,o,l){this.z=t,this.x=o,this.y=l,this.key=su(0,t,t,o,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,l){const d=(x=this.y,v=this.z,E=ex(256*(g=this.x),256*(x=Math.pow(2,v)-x-1),v),T=ex(256*(g+1),256*(x+1),v),E[0]+","+E[1]+","+T[0]+","+T[1]);var g,x,v,E,T;const M=function(D,R,B){let N,J="";for(let Q=D;Q>0;Q--)N=1<<Q-1,J+=(R&N?1:0)+(B&N?2:0);return J}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,d)}getTilePoint(t){const o=Math.pow(2,this.z);return new Qe((t.x*o-this.x)*jr,(t.y*o-this.y)*jr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class tx{constructor(t,o){this.wrap=t,this.canonical=o,this.key=su(t,o.z,o.z,o.x,o.y)}}class Ti{constructor(t,o,l,d,g){this.overscaledZ=t,this.wrap=o,this.canonical=new $m(l,+d,+g),this.key=su(o,t,l,d,g)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const o=this.canonical.z-t;return t>this.canonical.z?new Ti(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ti(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){const l=this.canonical.z-t;return t>this.canonical.z?su(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):su(this.wrap*+o,t,t,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Ti(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,d=2*this.canonical.y;return[new Ti(o,this.wrap,o,l,d),new Ti(o,this.wrap,o,l+1,d),new Ti(o,this.wrap,o,l,d+1),new Ti(o,this.wrap,o,l+1,d+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Ti(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Ti(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new tx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new ud(t.x-this.wrap,t.y))}}function su(i,t,o,l,d){(i*=2)<0&&(i=-1*i-1);const g=1<<o;return(g*g*i+g*d+l).toString(36)+o.toString(36)+t.toString(36)}Ye("CanonicalTileID",$m),Ye("OverscaledTileID",Ti,{omit:["posMatrix"]});class rx{constructor(t,o,l){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return void Te(`"${l}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const d=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=l||"mapbox";for(let g=0;g<d;g++)this.data[this._idx(-1,g)]=this.data[this._idx(0,g)],this.data[this._idx(d,g)]=this.data[this._idx(d-1,g)],this.data[this._idx(g,-1)]=this.data[this._idx(g,0)],this.data[this._idx(g,d)]=this.data[this._idx(g,d-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(d,-1)]=this.data[this._idx(d-1,0)],this.data[this._idx(-1,d)]=this.data[this._idx(0,d-1)],this.data[this._idx(d,d)]=this.data[this._idx(d-1,d-1)]}get(t,o){const l=new Uint8Array(this.data.buffer),d=4*this._idx(t,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(l[d],l[d+1],l[d+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}_unpackMapbox(t,o,l){return(256*t*256+256*o+l)/10-1e4}_unpackTerrarium(t,o,l){return 256*t+o+l/256-32768}getPixels(){return new ui({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let d=o*this.dim,g=o*this.dim+this.dim,x=l*this.dim,v=l*this.dim+this.dim;switch(o){case-1:d=g-1;break;case 1:g=d+1}switch(l){case-1:x=v-1;break;case 1:v=x+1}const E=-o*this.dim,T=-l*this.dim;for(let M=x;M<v;M++)for(let D=d;D<g;D++)this.data[this._idx(D,M)]=t.data[this._idx(D+E,M+T)]}}Ye("DEMData",rx);class nx{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const l=t[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class ix{constructor(t,o,l,d,g){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=l,t._y=d,this.properties=t.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class ox{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Co(jr,16,0),this.grid3D=new Co(jr,16,0),this.featureIndexArray=new Dt,this.promoteId=o}insert(t,o,l,d,g,x){const v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,d,g);const E=x?this.grid3D:this.grid;for(let T=0;T<o.length;T++){const M=o[T],D=[1/0,1/0,-1/0,-1/0];for(let R=0;R<M.length;R++){const B=M[R];D[0]=Math.min(D[0],B.x),D[1]=Math.min(D[1],B.y),D[2]=Math.max(D[2],B.x),D[3]=Math.max(D[3],B.y)}D[0]<jr&&D[1]<jr&&D[2]>=0&&D[3]>=0&&E.insert(v,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ya.VectorTile(new Pm(this.rawTileData)).layers,this.sourceLayerCoder=new nx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,l,d){this.loadVTLayers();const g=t.params||{},x=jr/t.tileSize/t.scale,v=Qs(g.filter),E=t.queryGeometry,T=t.queryPadding*x,M=sx(E),D=this.grid.query(M.minX-T,M.minY-T,M.maxX+T,M.maxY+T),R=sx(t.cameraQueryGeometry),B=this.grid3D.query(R.minX-T,R.minY-T,R.maxX+T,R.maxY+T,(Q,ce,fe,me)=>function(we,Ie,Ce,Je,at){for(const He of we)if(Ie<=He.x&&Ce<=He.y&&Je>=He.x&&at>=He.y)return!0;const Ze=[new Qe(Ie,Ce),new Qe(Ie,at),new Qe(Je,at),new Qe(Je,Ce)];if(we.length>2){for(const He of Ze)if(dl(we,He))return!0}for(let He=0;He<we.length-1;He++)if(x2(we[He],we[He+1],Ze))return!0;return!1}(t.cameraQueryGeometry,Q-T,ce-T,fe+T,me+T));for(const Q of B)D.push(Q);D.sort($w);const N={};let J;for(let Q=0;Q<D.length;Q++){const ce=D[Q];if(ce===J)continue;J=ce;const fe=this.featureIndexArray.get(ce);let me=null;this.loadMatchingFeature(N,fe.bucketIndex,fe.sourceLayerIndex,fe.featureIndex,v,g.layers,g.availableImages,o,l,d,(we,Ie,Ce)=>(me||(me=ds(we)),Ie.queryIntersectsFeature(E,we,Ce,me,this.z,t.transform,x,t.pixelPosMatrix)))}return N}loadMatchingFeature(t,o,l,d,g,x,v,E,T,M,D){const R=this.bucketLayerIDs[o];if(x&&!function(Q,ce){for(let fe=0;fe<Q.length;fe++)if(ce.indexOf(Q[fe])>=0)return!0;return!1}(x,R))return;const B=this.sourceLayerCoder.decode(l),N=this.vtLayers[B].feature(d);if(g.needGeometry){const Q=hs(N,!0);if(!g.filter(new sr(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!g.filter(new sr(this.tileID.overscaledZ),N))return;const J=this.getId(N,B);for(let Q=0;Q<R.length;Q++){const ce=R[Q];if(x&&x.indexOf(ce)<0)continue;const fe=E[ce];if(!fe)continue;let me={};J&&M&&(me=M.getState(fe.sourceLayer||"_geojsonTileLayer",J));const we=de({},T[ce]);we.paint=ax(we.paint,fe.paint,N,me,v),we.layout=ax(we.layout,fe.layout,N,me,v);const Ie=!D||D(N,fe,me);if(!Ie)continue;const Ce=new ix(N,this.z,this.x,this.y,J);Ce.layer=we;let Je=t[ce];Je===void 0&&(Je=t[ce]=[]),Je.push({featureIndex:d,feature:Ce,intersectionZ:Ie})}}lookupSymbolFeatures(t,o,l,d,g,x,v,E){const T={};this.loadVTLayers();const M=Qs(g);for(const D of t)this.loadMatchingFeature(T,l,d,D,M,x,v,E,o);return T}hasLayer(t){for(const o of this.bucketLayerIDs)for(const l of o)if(t===l)return!0;return!1}getId(t,o){let l=t.id;return this.promoteId&&(l=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof l=="boolean"&&(l=Number(l))),l}}function ax(i,t,o,l,d){return re(i,(g,x)=>{const v=t instanceof sl?t.get(x):null;return v&&v.evaluate?v.evaluate(o,l,d):v})}function sx(i){let t=1/0,o=1/0,l=-1/0,d=-1/0;for(const g of i)t=Math.min(t,g.x),o=Math.min(o,g.y),l=Math.max(l,g.x),d=Math.max(d,g.y);return{minX:t,minY:o,maxX:l,maxY:d}}function $w(i,t){return t-i}var Gm;Ye("FeatureIndex",ox,{omit:["rawTileData","sourceLayerCoder"]}),c.PerformanceMarkers=void 0,(Gm=c.PerformanceMarkers||(c.PerformanceMarkers={})).create="create",Gm.load="load",Gm.fullLoad="fullLoad";let pd=null,lu=[];const qm=1e3/30,Gw={mark(i){performance.mark(i)},frame(i){const t=i;pd!=null&&lu.push(t-pd),pd=t},clearMetrics(){pd=null,lu=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const i in c.PerformanceMarkers)performance.clearMarks(c.PerformanceMarkers[i])},getPerformanceMetrics(){performance.measure("loadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.load),performance.measure("fullLoadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.fullLoad);const i=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,o=lu.length,l=1/(lu.reduce((g,x)=>g+x,0)/o/1e3),d=lu.filter(g=>g>qm).reduce((g,x)=>g+(x-qm)/qm,0);return{loadTime:i,fullLoadTime:t,fps:l,percentDroppedFrames:d/(o+d)*100}}};c.AJAXError=_r,c.ARRAY_TYPE=hl,c.Actor=class{constructor(i,t,o){this.target=i,this.parent=t,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Me(["receive","process"],this),this.invoker=new jw(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Be()?i:window}send(i,t,o,l,d=!1){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[g]=o);const x=Rt(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:i,hasCallback:!!o,targetMapId:l,mustQueue:d,sourceMapId:this.mapId,data:is(t,x)},x),{cancel:()=>{o&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(i){const t=i.data,o=t.id;if(o&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[o];const l=this.cancelCallbacks[o];delete this.cancelCallbacks[o],l&&l()}else Be()||t.mustQueue?(this.tasks[o]=t,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,t)}process(){if(!this.taskQueue.length)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){if(t.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(t.error?o(To(t.error)):o(null,To(t.data)))}else{let o=!1;const l=Rt(this.globalScope)?void 0:[],d=t.hasCallback?(v,E)=>{o=!0,delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:v?is(v):null,data:is(E,l)},l)}:v=>{o=!0};let g=null;const x=To(t.data);if(this.parent[t.type])g=this.parent[t.type](t.sourceMapId,x,d);else if(this.parent.getWorkerSource){const v=t.type.split(".");g=this.parent.getWorkerSource(t.sourceMapId,v[0],x.source)[v[1]](x,d)}else d(new Error(`Could not find function ${t.type}`));!o&&g&&g.cancel&&(this.cancelCallbacks[i]=g.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.AlphaImage=Jc,c.CanonicalTileID=$m,c.CollisionBoxArray=xe,c.CollisionCircleLayoutArray=class extends I{},c.Color=A,c.DEMData=rx,c.DataConstantProperty=rt,c.DictionaryCoder=nx,c.EXTENT=jr,c.ErrorEvent=wi,c.EvaluationParameters=sr,c.Event=ii,c.Evented=io,c.FeatureIndex=ox,c.FillBucket=Cm,c.FillExtrusionBucket=zm,c.GeoJSONFeature=ix,c.ImageAtlas=I1,c.ImagePosition=Am,c.LineBucket=Im,c.LineStripIndexArray=class extends ue{},c.LngLat=br,c.LngLatBounds=ms,c.MercatorCoordinate=ud,c.ONE_EM=en,c.OverscaledTileID=Ti,c.PerformanceUtils=Gw,c.PosArray=class extends ma{},c.Properties=Ur,c.QuadTriangleArray=class extends O{},c.RGBAImage=ui,c.RasterBoundsArray=class extends us{},c.RequestPerformance=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},c.ResourceType=Qo,c.SegmentVector=Bt,c.SymbolBucket=vl,c.Transitionable=Zc,c.TriangleIndexArray=kn,c.Uniform1f=fa,c.Uniform1i=class extends Ci{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},c.Uniform2f=class extends Ci{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},c.Uniform3f=class extends Ci{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},c.Uniform4f=H0,c.UniformColor=W0,c.UniformMatrix4f=class extends Ci{constructor(i,t){super(i,t),this.current=d2}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},c.UnwrappedTileID=tx,c.ValidationError=$e,c.ZoomHistory=os,c.addDynamicAttributes=Bm,c.asyncAll=function(i,t,o){if(!i.length)return o(null,[]);let l=i.length;const d=new Array(i.length);let g=null;i.forEach((x,v)=>{t(x,(E,T)=>{E&&(g=E),d[v]=T,--l==0&&o(g,d)})})},c.bezier=Z,c.bindAll=Me,c.cacheEntryPossiblyAdded=function(i){zr++,zr>Br&&(i.getActor().send("enforceCacheSizeLimit",jt),zr=0)},c.clamp=V,c.clearTileCache=function(i){const t=caches.delete(lt);i&&t.catch(i).then(()=>i())},c.clipLine=V1,c.clone=function(i){var t=new hl(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},c.clone$1=ee,c.collisionCircleLayout=lw,c.config=qe,c.create=function(){var i=new hl(16);return hl!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},c.createExpression=Ws,c.createFilter=Qs,c.createLayout=Vr,c.createStyleLayer=function(i){return i.type==="custom"?new Uw(i):new Vw[i.type](i)},c.dot=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]*t[3]},c.ease=H,c.emitValidationErrors=Bp,c.enforceCacheSizeLimit=function(i){hr(),dt&&dt.then(t=>{t.keys().then(o=>{for(let l=0;l<o.length-i;l++)t.delete(o[l])})})},c.evaluateSizeForFeature=function(i,{uSize:t,uSizeT:o},{lowerSize:l,upperSize:d}){return i.kind==="source"?l/Lo:i.kind==="composite"?Pr(l/Lo,d/Lo,o):t},c.evaluateSizeForZoom=function(i,t){let o=0,l=0;if(i.kind==="constant")l=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:d,minZoom:g,maxZoom:x}=i,v=d?V(Pn.interpolationFactor(d,t,g,x),0,1):0;i.kind==="camera"?l=Pr(i.minSize,i.maxSize,v):o=v}return{uSizeT:o,uSize:l}},c.evaluateVariableOffset=G1,c.evented=ha,c.exported=Kr,c.exported$1=or,c.extend=de,c.filterObject=K,c.getAnchorAlignment=Lm,c.getAnchorJustification=Om,c.getArrayBuffer=In,c.getImage=no,c.getJSON=function(i,t){return _i(de(i,{type:"json"}),t)},c.getOverlapMode=Vm,c.getRTLTextPluginStatus=qc,c.getReferrer=vi,c.getVideo=function(i,t){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let l=0;l<i.length;l++){const d=window.document.createElement("source");ea(i[l])||(o.crossOrigin="Anonymous"),d.src=i[l],o.appendChild(d)}return{cancel:()=>{}}},c.identity=gm,c.invert=function(i,t){var o=t[0],l=t[1],d=t[2],g=t[3],x=t[4],v=t[5],E=t[6],T=t[7],M=t[8],D=t[9],R=t[10],B=t[11],N=t[12],J=t[13],Q=t[14],ce=t[15],fe=o*v-l*x,me=o*E-d*x,we=o*T-g*x,Ie=l*E-d*v,Ce=l*T-g*v,Je=d*T-g*E,at=M*J-D*N,Ze=M*Q-R*N,He=M*ce-B*N,Fe=D*Q-R*J,Ke=D*ce-B*J,We=R*ce-B*Q,De=fe*We-me*Ke+we*Fe+Ie*He-Ce*Ze+Je*at;return De?(i[0]=(v*We-E*Ke+T*Fe)*(De=1/De),i[1]=(d*Ke-l*We-g*Fe)*De,i[2]=(J*Je-Q*Ce+ce*Ie)*De,i[3]=(R*Ce-D*Je-B*Ie)*De,i[4]=(E*He-x*We-T*Ze)*De,i[5]=(o*We-d*He+g*Ze)*De,i[6]=(Q*we-N*Je-ce*me)*De,i[7]=(M*Je-R*we+B*me)*De,i[8]=(x*Ke-v*He+T*at)*De,i[9]=(l*He-o*Ke-g*at)*De,i[10]=(N*Ce-J*we+ce*fe)*De,i[11]=(D*we-M*Ce-B*fe)*De,i[12]=(v*Ze-x*Fe-E*at)*De,i[13]=(o*Fe-l*Ze+d*at)*De,i[14]=(J*me-N*Ie-Q*fe)*De,i[15]=(M*Ie-D*me+R*fe)*De,i):null},c.isImageBitmap=Tr,c.isSafari=Rt,c.keysDifference=function(i,t){const o=[];for(const l in i)l in t||o.push(l);return o},c.lazyLoadRTLTextPlugin=function(){qn.isLoading()||qn.isLoaded()||qc()!=="deferred"||il()},c.makeRequest=_i,c.mapObject=re,c.mercatorXfromLng=Y1,c.mercatorYfromLat=J1,c.mercatorZfromAltitude=Q1,c.mul=v2,c.multiply=r1,c.nextPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},c.number=Pr,c.ortho=function(i,t,o,l,d,g,x){var v=1/(t-o),E=1/(l-d),T=1/(g-x);return i[0]=-2*v,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*E,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*T,i[11]=0,i[12]=(t+o)*v,i[13]=(d+l)*E,i[14]=(x+g)*T,i[15]=1,i},c.parseCacheControl=ht,c.parseGlyphPBF=function(i){return new Pm(i).readFields(bw,[])},c.pbf=Pm,c.performSymbolLayout=function(i,t,o,l,d,g,x){i.createArrays(),i.tilePixelRatio=jr/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const v=i.layers[0].layout,E=i.layers[0]._unevaluatedLayout._values,T={layoutIconSize:E["icon-size"].possiblyEvaluate(new sr(i.zoom+1),x),layoutTextSize:E["text-size"].possiblyEvaluate(new sr(i.zoom+1),x),textMaxSize:E["text-size"].possiblyEvaluate(new sr(18))};if(i.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:J}=i.textSizeData;T.compositeTextSizes=[E["text-size"].possiblyEvaluate(new sr(N),x),E["text-size"].possiblyEvaluate(new sr(J),x)]}if(i.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:J}=i.iconSizeData;T.compositeIconSizes=[E["icon-size"].possiblyEvaluate(new sr(N),x),E["icon-size"].possiblyEvaluate(new sr(J),x)]}const M=v.get("text-line-height")*en,D=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point",R=v.get("text-keep-upright"),B=v.get("text-size");for(const N of i.features){const J=v.get("text-font").evaluate(N,{},x).join(","),Q=B.evaluate(N,{},x),ce=T.layoutTextSize.evaluate(N,{},x),fe=T.layoutIconSize.evaluate(N,{},x),me={horizontal:{},vertical:void 0},we=N.text;let Ie,Ce=[0,0];if(we){const Ze=we.toString(),He=v.get("text-letter-spacing").evaluate(N,{},x)*en,Fe=Fp(Ze)?He:0,Ke=v.get("text-anchor").evaluate(N,{},x),We=v.get("text-variable-anchor");if(!We){const Gt=v.get("text-radial-offset").evaluate(N,{},x);Ce=Gt?G1(Ke,[Gt*en,Rm]):v.get("text-offset").evaluate(N,{},x).map(cr=>cr*en)}let De=D?"center":v.get("text-justify").evaluate(N,{},x);const pt=v.get("symbol-placement"),st=pt==="point"?v.get("text-max-width").evaluate(N,{},x)*en:0,At=()=>{i.allowVerticalPlacement&&Uc(Ze)&&(me.vertical=rd(we,t,o,d,J,st,M,Ke,"left",Fe,Ce,c.WritingMode.vertical,!0,pt,ce,Q))};if(!D&&We){const Gt=De==="auto"?We.map(ur=>Om(ur)):[De];let cr=!1;for(let ur=0;ur<Gt.length;ur++){const nn=Gt[ur];if(!me.horizontal[nn])if(cr)me.horizontal[nn]=me.horizontal[0];else{const Ar=rd(we,t,o,d,J,st,M,"center",nn,Fe,Ce,c.WritingMode.horizontal,!1,pt,ce,Q);Ar&&(me.horizontal[nn]=Ar,cr=Ar.positionedLines.length===1)}}At()}else{De==="auto"&&(De=Om(Ke));const Gt=rd(we,t,o,d,J,st,M,Ke,De,Fe,Ce,c.WritingMode.horizontal,!1,pt,ce,Q);Gt&&(me.horizontal[De]=Gt),At(),Uc(Ze)&&D&&R&&(me.vertical=rd(we,t,o,d,J,st,M,Ke,De,Fe,Ce,c.WritingMode.vertical,!1,pt,ce,Q))}}let Je=!1;if(N.icon&&N.icon.name){const Ze=l[N.icon.name];Ze&&(Ie=Sw(d[N.icon.name],v.get("icon-offset").evaluate(N,{},x),v.get("icon-anchor").evaluate(N,{},x)),Je=!!Ze.sdf,i.sdfIcons===void 0?i.sdfIcons=Je:i.sdfIcons!==Je&&Te("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==i.pixelRatio||v.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const at=Z1(me.horizontal)||me.vertical;i.iconsInText=!!at&&at.iconsInText,(at||Ie)&&Aw(i,N,me,Ie,l,T,ce,fe,Ce,Je,x)}g&&i.generateCollisionDebugBuffers()},c.perspective=function(i,t,o,l,d){var g,x=1/Math.tan(t/2);return i[0]=x/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,d!=null&&d!==1/0?(i[10]=(d+l)*(g=1/(l-d)),i[14]=2*d*l*g):(i[10]=-1,i[14]=-2*l),i},c.pick=function(i,t){const o={};for(let l=0;l<t.length;l++){const d=t[l];d in i&&(o[d]=i[d])}return o},c.plugin=qn,c.pointGeometry=Qe,c.polygonIntersectsPolygon=J0,c.potpack=z1,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=Ye,c.registerForPluginStateChange=function(i){return i({pluginStatus:_n,pluginURL:oo}),ha.on("pluginStateChange",i),i},c.renderColorRamp=a1,c.rotateX=function(i,t,o){var l=Math.sin(o),d=Math.cos(o),g=t[4],x=t[5],v=t[6],E=t[7],T=t[8],M=t[9],D=t[10],R=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=g*d+T*l,i[5]=x*d+M*l,i[6]=v*d+D*l,i[7]=E*d+R*l,i[8]=T*d-g*l,i[9]=M*d-x*l,i[10]=D*d-v*l,i[11]=R*d-E*l,i},c.rotateZ=function(i,t,o){var l=Math.sin(o),d=Math.cos(o),g=t[0],x=t[1],v=t[2],E=t[3],T=t[4],M=t[5],D=t[6],R=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=g*d+T*l,i[1]=x*d+M*l,i[2]=v*d+D*l,i[3]=E*d+R*l,i[4]=T*d-g*l,i[5]=M*d-x*l,i[6]=D*d-v*l,i[7]=R*d-E*l,i},c.scale=function(i,t,o){var l=o[0],d=o[1],g=o[2];return i[0]=t[0]*l,i[1]=t[1]*l,i[2]=t[2]*l,i[3]=t[3]*l,i[4]=t[4]*d,i[5]=t[5]*d,i[6]=t[6]*d,i[7]=t[7]*d,i[8]=t[8]*g,i[9]=t[9]*g,i[10]=t[10]*g,i[11]=t[11]*g,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},c.scale$1=function(i,t,o){return i[0]=t[0]*o,i[1]=t[1]*o,i[2]=t[2]*o,i[3]=t[3]*o,i},c.setCacheLimits=function(i,t){jt=i,Br=t},c.setRTLTextPlugin=function(i,t,o=!1){if(_n===nl||_n===Vc||_n===jc)throw new Error("setRTLTextPlugin cannot be called multiple times.");oo=Kr.resolveURL(i),_n=nl,$c=t,Gc(),o||il()},c.spec=be,c.sphericalToCartesian=function([i,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(o),y:i*Math.sin(t)*Math.sin(o),z:i*Math.cos(o)}},c.toEvaluationFeature=hs,c.transformMat4=Xp,c.translate=function(i,t,o){var l,d,g,x,v,E,T,M,D,R,B,N,J=o[0],Q=o[1],ce=o[2];return t===i?(i[12]=t[0]*J+t[4]*Q+t[8]*ce+t[12],i[13]=t[1]*J+t[5]*Q+t[9]*ce+t[13],i[14]=t[2]*J+t[6]*Q+t[10]*ce+t[14],i[15]=t[3]*J+t[7]*Q+t[11]*ce+t[15]):(d=t[1],g=t[2],x=t[3],v=t[4],E=t[5],T=t[6],M=t[7],D=t[8],R=t[9],B=t[10],N=t[11],i[0]=l=t[0],i[1]=d,i[2]=g,i[3]=x,i[4]=v,i[5]=E,i[6]=T,i[7]=M,i[8]=D,i[9]=R,i[10]=B,i[11]=N,i[12]=l*J+v*Q+D*ce+t[12],i[13]=d*J+E*Q+R*ce+t[13],i[14]=g*J+T*Q+B*ce+t[14],i[15]=x*J+M*Q+N*ce+t[15]),i},c.triggerPluginCompletionEvent=Vp,c.unicodeBlockLookup=Ve,c.uniqueId=function(){return ye++},c.validateCustomStyleLayer=function(i){const t=[],o=i.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},c.validateLight=im,c.validateStyle=So,c.vectorTile=ya,c.warnOnce=Te,c.wrap=pe}),y(["./shared"],function(c){function P(G){const z=typeof G;if(z==="number"||z==="boolean"||z==="string"||G==null)return JSON.stringify(G);if(Array.isArray(G)){let q="[";for(const W of G)q+=`${P(W)},`;return`${q}]`}const A=Object.keys(G).sort();let U="{";for(let q=0;q<A.length;q++)U+=`${JSON.stringify(A[q])}:${P(G[A[q]])},`;return`${U}}`}function F(G){let z="";for(const A of c.refProperties)z+=`/${P(G[A])}`;return z}class Z{constructor(z){this.keyCache={},z&&this.replace(z)}replace(z){this._layerConfigs={},this._layers={},this.update(z,[])}update(z,A){for(const q of z){this._layerConfigs[q.id]=q;const W=this._layers[q.id]=c.createStyleLayer(q);W._featureFilter=c.createFilter(W.filter),this.keyCache[q.id]&&delete this.keyCache[q.id]}for(const q of A)delete this.keyCache[q],delete this._layerConfigs[q],delete this._layers[q];this.familiesBySource={};const U=function(q,W){const ie={};for(let ne=0;ne<q.length;ne++){const oe=W&&W[q[ne].id]||F(q[ne]);W&&(W[q[ne].id]=oe);let ve=ie[oe];ve||(ve=ie[oe]=[]),ve.push(q[ne])}const te=[];for(const ne in ie)te.push(ie[ne]);return te}(Object.values(this._layerConfigs),this.keyCache);for(const q of U){const W=q.map(ze=>this._layers[ze.id]),ie=W[0];if(ie.visibility==="none")continue;const te=ie.source||"";let ne=this.familiesBySource[te];ne||(ne=this.familiesBySource[te]={});const oe=ie.sourceLayer||"_geojsonTileLayer";let ve=ne[oe];ve||(ve=ne[oe]=[]),ve.push(W)}}}class H{constructor(z){const A={},U=[];for(const te in z){const ne=z[te],oe=A[te]={};for(const ve in ne){const ze=ne[+ve];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const ge={x:0,y:0,w:ze.bitmap.width+2,h:ze.bitmap.height+2};U.push(ge),oe[ve]={rect:ge,metrics:ze.metrics}}}const{w:q,h:W}=c.potpack(U),ie=new c.AlphaImage({width:q||1,height:W||1});for(const te in z){const ne=z[te];for(const oe in ne){const ve=ne[+oe];if(!ve||ve.bitmap.width===0||ve.bitmap.height===0)continue;const ze=A[te][oe].rect;c.AlphaImage.copy(ve.bitmap,ie,{x:0,y:0},{x:ze.x+1,y:ze.y+1},ve.bitmap)}}this.image=ie,this.positions=A}}c.register("GlyphAtlas",H);class V{constructor(z){this.tileID=new c.OverscaledTileID(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId}parse(z,A,U,q,W){this.status="parsing",this.data=z,this.collisionBoxArray=new c.CollisionBoxArray;const ie=new c.DictionaryCoder(Object.keys(z.layers).sort()),te=new c.FeatureIndex(this.tileID,this.promoteId);te.bucketLayerIDs=[];const ne={},oe={featureIndex:te,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},ve=A.familiesBySource[this.source];for(const Ct in ve){const vt=z.layers[Ct];if(!vt)continue;vt.version===1&&c.warnOnce(`Vector tile source "${this.source}" layer "${Ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xt=ie.encode(Ct),wr=[];for(let xr=0;xr<vt.length;xr++){const qr=vt.feature(xr),Jr=te.getId(qr,Ct);wr.push({feature:qr,id:Jr,index:xr,sourceLayerIndex:xt})}for(const xr of ve[Ct]){const qr=xr[0];qr.minzoom&&this.zoom<Math.floor(qr.minzoom)||qr.maxzoom&&this.zoom>=qr.maxzoom||qr.visibility!=="none"&&(pe(xr,this.zoom,U),(ne[qr.id]=qr.createBucket({index:te.bucketLayerIDs.length,layers:xr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xt,sourceID:this.source})).populate(wr,oe,this.tileID.canonical),te.bucketLayerIDs.push(xr.map(Jr=>Jr.id)))}}let ze,ge,tt,Xe;const nt=c.mapObject(oe.glyphDependencies,Ct=>Object.keys(Ct).map(Number));Object.keys(nt).length?q.send("getGlyphs",{uid:this.uid,stacks:nt},(Ct,vt)=>{ze||(ze=Ct,ge=vt,Pt.call(this))}):ge={};const ct=Object.keys(oe.iconDependencies);ct.length?q.send("getImages",{icons:ct,source:this.source,tileID:this.tileID,type:"icons"},(Ct,vt)=>{ze||(ze=Ct,tt=vt,Pt.call(this))}):tt={};const Lt=Object.keys(oe.patternDependencies);function Pt(){if(ze)return W(ze);if(ge&&tt&&Xe){const Ct=new H(ge),vt=new c.ImageAtlas(tt,Xe);for(const xt in ne){const wr=ne[xt];wr instanceof c.SymbolBucket?(pe(wr.layers,this.zoom,U),c.performSymbolLayout(wr,ge,Ct.positions,tt,vt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wr.hasPattern&&(wr instanceof c.LineBucket||wr instanceof c.FillBucket||wr instanceof c.FillExtrusionBucket)&&(pe(wr.layers,this.zoom,U),wr.addFeatures(oe,this.tileID.canonical,vt.patternPositions))}this.status="done",W(null,{buckets:Object.values(ne).filter(xt=>!xt.isEmpty()),featureIndex:te,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ct.image,imageAtlas:vt,glyphMap:this.returnDependencies?ge:null,iconMap:this.returnDependencies?tt:null,glyphPositions:this.returnDependencies?Ct.positions:null})}}Lt.length?q.send("getImages",{icons:Lt,source:this.source,tileID:this.tileID,type:"patterns"},(Ct,vt)=>{ze||(ze=Ct,Xe=vt,Pt.call(this))}):Xe={},Pt.call(this)}}function pe(G,z,A){const U=new c.EvaluationParameters(z);for(const q of G)q.recalculate(U,A)}function de(G,z){const A=c.getArrayBuffer(G.request,(U,q,W,ie)=>{U?z(U):q&&z(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(q)),rawData:q,cacheControl:W,expires:ie})});return()=>{A.cancel(),z()}}class ye{constructor(z,A,U,q){this.actor=z,this.layerIndex=A,this.availableImages=U,this.loadVectorData=q||de,this.loading={},this.loaded={}}loadTile(z,A){const U=z.uid;this.loading||(this.loading={});const q=!!(z&&z.request&&z.request.collectResourceTiming)&&new c.RequestPerformance(z.request),W=this.loading[U]=new V(z);W.abort=this.loadVectorData(z,(ie,te)=>{if(delete this.loading[U],ie||!te)return W.status="done",this.loaded[U]=W,A(ie);const ne=te.rawData,oe={};te.expires&&(oe.expires=te.expires),te.cacheControl&&(oe.cacheControl=te.cacheControl);const ve={};if(q){const ze=q.finish();ze&&(ve.resourceTiming=JSON.parse(JSON.stringify(ze)))}W.vectorTile=te.vectorTile,W.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor,(ze,ge)=>{if(ze||!ge)return A(ze);A(null,c.extend({rawTileData:ne.slice(0)},ge,oe,ve))}),this.loaded=this.loaded||{},this.loaded[U]=W})}reloadTile(z,A){const U=this.loaded,q=z.uid,W=this;if(U&&U[q]){const ie=U[q];ie.showCollisionBoxes=z.showCollisionBoxes;const te=(ne,oe)=>{const ve=ie.reloadCallback;ve&&(delete ie.reloadCallback,ie.parse(ie.vectorTile,W.layerIndex,this.availableImages,W.actor,ve)),A(ne,oe)};ie.status==="parsing"?ie.reloadCallback=te:ie.status==="done"&&(ie.vectorTile?ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,te):te())}}abortTile(z,A){const U=this.loading,q=z.uid;U&&U[q]&&U[q].abort&&(U[q].abort(),delete U[q]),A()}removeTile(z,A){const U=this.loaded,q=z.uid;U&&U[q]&&delete U[q],A()}}class Me{constructor(){this.loaded={}}loadTile(z,A){const{uid:U,encoding:q,rawImageData:W}=z,ie=c.isImageBitmap(W)?this.getImageData(W):W,te=new c.DEMData(U,ie,q);this.loaded=this.loaded||{},this.loaded[U]=te,A(null,te)}getImageData(z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(z.width,z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=z.width,this.offscreenCanvas.height=z.height,this.offscreenCanvasContext.drawImage(z,0,0,z.width,z.height);const A=this.offscreenCanvasContext.getImageData(-1,-1,z.width+2,z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:A.width,height:A.height},A.data)}removeTile(z){const A=this.loaded,U=z.uid;A&&A[U]&&delete A[U]}}var re=function G(z,A){var U,q=z&&z.type;if(q==="FeatureCollection")for(U=0;U<z.features.length;U++)G(z.features[U],A);else if(q==="GeometryCollection")for(U=0;U<z.geometries.length;U++)G(z.geometries[U],A);else if(q==="Feature")G(z.geometry,A);else if(q==="Polygon")K(z.coordinates,A);else if(q==="MultiPolygon")for(U=0;U<z.coordinates.length;U++)K(z.coordinates[U],A);return z};function K(G,z){if(G.length!==0){ee(G[0],z);for(var A=1;A<G.length;A++)ee(G[A],!z)}}function ee(G,z){for(var A=0,U=0,q=0,W=G.length,ie=W-1;q<W;ie=q++){var te=(G[q][0]-G[ie][0])*(G[ie][1]+G[q][1]),ne=A+te;U+=Math.abs(A)>=Math.abs(te)?A-ne+te:te-ne+A,A=ne}A+U>=0!=!!z&&G.reverse()}const he=c.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Te{constructor(z){this._feature=z,this.extent=c.EXTENT,this.type=z.type,this.properties=z.tags,"id"in z&&!isNaN(z.id)&&(this.id=parseInt(z.id,10))}loadGeometry(){if(this._feature.type===1){const z=[];for(const A of this._feature.geometry)z.push([new c.pointGeometry(A[0],A[1])]);return z}{const z=[];for(const A of this._feature.geometry){const U=[];for(const q of A)U.push(new c.pointGeometry(q[0],q[1]));z.push(U)}return z}}toGeoJSON(z,A,U){return he.call(this,z,A,U)}}class Pe{constructor(z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=z.length,this._features=z}feature(z){return new Te(this._features[z])}}var Le={exports:{}},Be=c.pointGeometry,ht=c.vectorTile.VectorTileFeature,ot=St;function St(G,z){this.options=z||{},this.features=G,this.length=G.length}function qt(G,z){this.id=typeof G.id=="number"?G.id:void 0,this.type=G.type,this.rawGeometry=G.type===1?[G.geometry]:G.geometry,this.properties=G.tags,this.extent=z||4096}St.prototype.feature=function(G){return new qt(this.features[G],this.options.extent)},qt.prototype.loadGeometry=function(){var G=this.rawGeometry;this.geometry=[];for(var z=0;z<G.length;z++){for(var A=G[z],U=[],q=0;q<A.length;q++)U.push(new Be(A[q][0],A[q][1]));this.geometry.push(U)}return this.geometry},qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var G=this.geometry,z=1/0,A=-1/0,U=1/0,q=-1/0,W=0;W<G.length;W++)for(var ie=G[W],te=0;te<ie.length;te++){var ne=ie[te];z=Math.min(z,ne.x),A=Math.max(A,ne.x),U=Math.min(U,ne.y),q=Math.max(q,ne.y)}return[z,U,A,q]},qt.prototype.toGeoJSON=ht.prototype.toGeoJSON;var Rt=c.pbf,Tr=ot;function Kr(G){var z=new Rt;return function(A,U){for(var q in A.layers)U.writeMessage(3,Qe,A.layers[q])}(G,z),z.finish()}function Qe(G,z){var A;z.writeVarintField(15,G.version||1),z.writeStringField(1,G.name||""),z.writeVarintField(5,G.extent||4096);var U={keys:[],values:[],keycache:{},valuecache:{}};for(A=0;A<G.length;A++)U.feature=G.feature(A),z.writeMessage(2,Yt,U);var q=U.keys;for(A=0;A<q.length;A++)z.writeStringField(3,q[A]);var W=U.values;for(A=0;A<W.length;A++)z.writeMessage(4,jt,W[A])}function Yt(G,z){var A=G.feature;A.id!==void 0&&z.writeVarintField(1,A.id),z.writeMessage(2,qe,G),z.writeVarintField(3,A.type),z.writeMessage(4,Ut,A)}function qe(G,z){var A=G.feature,U=G.keys,q=G.values,W=G.keycache,ie=G.valuecache;for(var te in A.properties){var ne=A.properties[te],oe=W[te];if(ne!==null){oe===void 0&&(U.push(te),W[te]=oe=U.length-1),z.writeVarint(oe);var ve=typeof ne;ve!=="string"&&ve!=="boolean"&&ve!=="number"&&(ne=JSON.stringify(ne));var ze=ve+":"+ne,ge=ie[ze];ge===void 0&&(q.push(ne),ie[ze]=ge=q.length-1),z.writeVarint(ge)}}}function lt(G,z){return(z<<3)+(7&G)}function dt(G){return G<<1^G>>31}function Ut(G,z){for(var A=G.loadGeometry(),U=G.type,q=0,W=0,ie=A.length,te=0;te<ie;te++){var ne=A[te],oe=1;U===1&&(oe=ne.length),z.writeVarint(lt(1,oe));for(var ve=U===3?ne.length-1:ne.length,ze=0;ze<ve;ze++){ze===1&&U!==1&&z.writeVarint(lt(2,ve-1));var ge=ne[ze].x-q,tt=ne[ze].y-W;z.writeVarint(dt(ge)),z.writeVarint(dt(tt)),q+=ge,W+=tt}U===3&&z.writeVarint(lt(7,1))}}function jt(G,z){var A=typeof G;A==="string"?z.writeStringField(1,G):A==="boolean"?z.writeBooleanField(7,G):A==="number"&&(G%1!=0?z.writeDoubleField(3,G):G<0?z.writeSVarintField(6,G):z.writeVarintField(5,G))}Le.exports=Kr,Le.exports.fromVectorTileJs=Kr,Le.exports.fromGeojsonVt=function(G,z){z=z||{};var A={};for(var U in G)A[U]=new Tr(G[U].features,z),A[U].name=U,A[U].version=z.version,A[U].extent=z.extent;return Kr({layers:A})},Le.exports.GeoJSONWrapper=Tr;var Br=Le.exports;function hr(G,z,A,U,q,W){if(q-U<=A)return;const ie=U+q>>1;zr(G,z,ie,U,q,W%2),hr(G,z,A,U,ie-1,W+1),hr(G,z,A,ie+1,q,W+1)}function zr(G,z,A,U,q,W){for(;q>U;){if(q-U>600){const oe=q-U+1,ve=A-U+1,ze=Math.log(oe),ge=.5*Math.exp(2*ze/3),tt=.5*Math.sqrt(ze*ge*(oe-ge)/oe)*(ve-oe/2<0?-1:1);zr(G,z,A,Math.max(U,Math.floor(A-ve*ge/oe+tt)),Math.min(q,Math.floor(A+(oe-ve)*ge/oe+tt)),W)}const ie=z[2*A+W];let te=U,ne=q;for(or(G,z,U,A),z[2*q+W]>ie&&or(G,z,U,q);te<ne;){for(or(G,z,te,ne),te++,ne--;z[2*te+W]<ie;)te++;for(;z[2*ne+W]>ie;)ne--}z[2*U+W]===ie?or(G,z,U,ne):(ne++,or(G,z,ne,q)),ne<=A&&(U=ne+1),A<=ne&&(q=ne-1)}}function or(G,z,A,U){Fr(G,A,U),Fr(z,2*A,2*U),Fr(z,2*A+1,2*U+1)}function Fr(G,z,A){const U=G[z];G[z]=G[A],G[A]=U}function Yr(G,z,A,U){const q=G-A,W=z-U;return q*q+W*W}const bi=G=>G[0],Jo=G=>G[1];class Vi{constructor(z,A=bi,U=Jo,q=64,W=Float64Array){this.nodeSize=q,this.points=z;const ie=z.length<65536?Uint16Array:Uint32Array,te=this.ids=new ie(z.length),ne=this.coords=new W(2*z.length);for(let oe=0;oe<z.length;oe++)te[oe]=oe,ne[2*oe]=A(z[oe]),ne[2*oe+1]=U(z[oe]);hr(te,ne,q,0,te.length-1,0)}range(z,A,U,q){return function(W,ie,te,ne,oe,ve,ze){const ge=[0,W.length-1,0],tt=[];let Xe,nt;for(;ge.length;){const ct=ge.pop(),Lt=ge.pop(),Pt=ge.pop();if(Lt-Pt<=ze){for(let xt=Pt;xt<=Lt;xt++)Xe=ie[2*xt],nt=ie[2*xt+1],Xe>=te&&Xe<=oe&&nt>=ne&&nt<=ve&&tt.push(W[xt]);continue}const Ct=Math.floor((Pt+Lt)/2);Xe=ie[2*Ct],nt=ie[2*Ct+1],Xe>=te&&Xe<=oe&&nt>=ne&&nt<=ve&&tt.push(W[Ct]);const vt=(ct+1)%2;(ct===0?te<=Xe:ne<=nt)&&(ge.push(Pt),ge.push(Ct-1),ge.push(vt)),(ct===0?oe>=Xe:ve>=nt)&&(ge.push(Ct+1),ge.push(Lt),ge.push(vt))}return tt}(this.ids,this.coords,z,A,U,q,this.nodeSize)}within(z,A,U){return function(q,W,ie,te,ne,oe){const ve=[0,q.length-1,0],ze=[],ge=ne*ne;for(;ve.length;){const tt=ve.pop(),Xe=ve.pop(),nt=ve.pop();if(Xe-nt<=oe){for(let vt=nt;vt<=Xe;vt++)Yr(W[2*vt],W[2*vt+1],ie,te)<=ge&&ze.push(q[vt]);continue}const ct=Math.floor((nt+Xe)/2),Lt=W[2*ct],Pt=W[2*ct+1];Yr(Lt,Pt,ie,te)<=ge&&ze.push(q[ct]);const Ct=(tt+1)%2;(tt===0?ie-ne<=Lt:te-ne<=Pt)&&(ve.push(nt),ve.push(ct-1),ve.push(Ct)),(tt===0?ie+ne>=Lt:te+ne>=Pt)&&(ve.push(ct+1),ve.push(Xe),ve.push(Ct))}return ze}(this.ids,this.coords,z,A,U,this.nodeSize)}}const Qo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:G=>G},_r=Math.fround||(vi=new Float32Array(1),G=>(vi[0]=+G,vi[0]));var vi;class go{constructor(z){this.options=zt(Object.create(Qo),z),this.trees=new Array(this.options.maxZoom+1)}load(z){const{log:A,minZoom:U,maxZoom:q,nodeSize:W}=this.options;A&&console.time("total time");const ie=`prepare ${z.length} points`;A&&console.time(ie),this.points=z;let te=[];for(let ne=0;ne<z.length;ne++)z[ne].geometry&&te.push(In(z[ne],ne));this.trees[q+1]=new Vi(te,ni,ii,W,Float32Array),A&&console.timeEnd(ie);for(let ne=q;ne>=U;ne--){const oe=+Date.now();te=this._cluster(te,ne),this.trees[ne]=new Vi(te,ni,ii,W,Float32Array),A&&console.log("z%d: %d clusters in %dms",ne,te.length,+Date.now()-oe)}return A&&console.timeEnd("total time"),this}getClusters(z,A){let U=((z[0]+180)%360+360)%360-180;const q=Math.max(-90,Math.min(90,z[1]));let W=z[2]===180?180:((z[2]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)U=-180,W=180;else if(U>W){const ve=this.getClusters([U,q,180,ie],A),ze=this.getClusters([-180,q,W,ie],A);return ve.concat(ze)}const te=this.trees[this._limitZoom(A)],ne=te.range(Gr(U),un(ie),Gr(W),un(q)),oe=[];for(const ve of ne){const ze=te.points[ve];oe.push(ze.numPoints?ea(ze):this.points[ze.index])}return oe}getChildren(z){const A=this._getOriginId(z),U=this._getOriginZoom(z),q="No cluster with the specified id.",W=this.trees[U];if(!W)throw new Error(q);const ie=W.points[A];if(!ie)throw new Error(q);const te=this.options.radius/(this.options.extent*Math.pow(2,U-1)),ne=W.within(ie.x,ie.y,te),oe=[];for(const ve of ne){const ze=W.points[ve];ze.parentId===z&&oe.push(ze.numPoints?ea(ze):this.points[ze.index])}if(oe.length===0)throw new Error(q);return oe}getLeaves(z,A,U){const q=[];return this._appendLeaves(q,z,A=A||10,U=U||0,0),q}getTile(z,A,U){const q=this.trees[this._limitZoom(z)],W=Math.pow(2,z),{extent:ie,radius:te}=this.options,ne=te/ie,oe=(U-ne)/W,ve=(U+1+ne)/W,ze={features:[]};return this._addTileFeatures(q.range((A-ne)/W,oe,(A+1+ne)/W,ve),q.points,A,U,W,ze),A===0&&this._addTileFeatures(q.range(1-ne/W,oe,1,ve),q.points,W,U,W,ze),A===W-1&&this._addTileFeatures(q.range(0,oe,ne/W,ve),q.points,-1,U,W,ze),ze.features.length?ze:null}getClusterExpansionZoom(z){let A=this._getOriginZoom(z)-1;for(;A<=this.options.maxZoom;){const U=this.getChildren(z);if(A++,U.length!==1)break;z=U[0].properties.cluster_id}return A}_appendLeaves(z,A,U,q,W){const ie=this.getChildren(A);for(const te of ie){const ne=te.properties;if(ne&&ne.cluster?W+ne.point_count<=q?W+=ne.point_count:W=this._appendLeaves(z,ne.cluster_id,U,q,W):W<q?W++:z.push(te),z.length===U)break}return W}_addTileFeatures(z,A,U,q,W,ie){for(const te of z){const ne=A[te],oe=ne.numPoints;let ve,ze,ge;if(oe)ve=ri(ne),ze=ne.x,ge=ne.y;else{const nt=this.points[ne.index];ve=nt.properties,ze=Gr(nt.geometry.coordinates[0]),ge=un(nt.geometry.coordinates[1])}const tt={type:1,geometry:[[Math.round(this.options.extent*(ze*W-U)),Math.round(this.options.extent*(ge*W-q))]],tags:ve};let Xe;oe?Xe=ne.id:this.options.generateId?Xe=ne.index:this.points[ne.index].id&&(Xe=this.points[ne.index].id),Xe!==void 0&&(tt.id=Xe),ie.features.push(tt)}}_limitZoom(z){return Math.max(this.options.minZoom,Math.min(+z,this.options.maxZoom+1))}_cluster(z,A){const U=[],{radius:q,extent:W,reduce:ie,minPoints:te}=this.options,ne=q/(W*Math.pow(2,A));for(let oe=0;oe<z.length;oe++){const ve=z[oe];if(ve.zoom<=A)continue;ve.zoom=A;const ze=this.trees[A+1],ge=ze.within(ve.x,ve.y,ne),tt=ve.numPoints||1;let Xe=tt;for(const nt of ge){const ct=ze.points[nt];ct.zoom>A&&(Xe+=ct.numPoints||1)}if(Xe>tt&&Xe>=te){let nt=ve.x*tt,ct=ve.y*tt,Lt=ie&&tt>1?this._map(ve,!0):null;const Pt=(oe<<5)+(A+1)+this.points.length;for(const Ct of ge){const vt=ze.points[Ct];if(vt.zoom<=A)continue;vt.zoom=A;const xt=vt.numPoints||1;nt+=vt.x*xt,ct+=vt.y*xt,vt.parentId=Pt,ie&&(Lt||(Lt=this._map(ve,!0)),ie(Lt,this._map(vt)))}ve.parentId=Pt,U.push(_i(nt/Xe,ct/Xe,Pt,Xe,Lt))}else if(U.push(ve),Xe>1)for(const nt of ge){const ct=ze.points[nt];ct.zoom<=A||(ct.zoom=A,U.push(ct))}}return U}_getOriginId(z){return z-this.points.length>>5}_getOriginZoom(z){return(z-this.points.length)%32}_map(z,A){if(z.numPoints)return A?zt({},z.properties):z.properties;const U=this.points[z.index].properties,q=this.options.map(U);return A&&q===U?zt({},q):q}}function _i(G,z,A,U,q){return{x:_r(G),y:_r(z),zoom:1/0,id:A,parentId:-1,numPoints:U,properties:q}}function In(G,z){const[A,U]=G.geometry.coordinates;return{x:_r(Gr(A)),y:_r(un(U)),zoom:1/0,index:z,parentId:-1}}function ea(G){return{type:"Feature",id:G.id,properties:ri(G),geometry:{type:"Point",coordinates:[(z=G.x,360*(z-.5)),no(G.y)]}};var z}function ri(G){const z=G.numPoints,A=z>=1e4?`${Math.round(z/1e3)}k`:z>=1e3?Math.round(z/100)/10+"k":z;return zt(zt({},G.properties),{cluster:!0,cluster_id:G.id,point_count:z,point_count_abbreviated:A})}function Gr(G){return G/360+.5}function un(G){const z=Math.sin(G*Math.PI/180),A=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return A<0?0:A>1?1:A}function no(G){const z=(180-360*G)*Math.PI/180;return 360*Math.atan(Math.exp(z))/Math.PI-90}function zt(G,z){for(const A in z)G[A]=z[A];return G}function ni(G){return G.x}function ii(G){return G.y}function wi(G,z,A,U){for(var q,W=U,ie=A-z>>1,te=A-z,ne=G[z],oe=G[z+1],ve=G[A],ze=G[A+1],ge=z+3;ge<A;ge+=3){var tt=io(G[ge],G[ge+1],ne,oe,ve,ze);if(tt>W)q=ge,W=tt;else if(tt===W){var Xe=Math.abs(ge-ie);Xe<te&&(q=ge,te=Xe)}}W>U&&(q-z>3&&wi(G,z,q,U),G[q+2]=W,A-q>3&&wi(G,q,A,U))}function io(G,z,A,U,q,W){var ie=q-A,te=W-U;if(ie!==0||te!==0){var ne=((G-A)*ie+(z-U)*te)/(ie*ie+te*te);ne>1?(A=q,U=W):ne>0&&(A+=ie*ne,U+=te*ne)}return(ie=G-A)*ie+(te=z-U)*te}function be(G,z,A,U){var q={id:G===void 0?null:G,type:z,geometry:A,tags:U,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(W){var ie=W.geometry,te=W.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")$e(W,ie);else if(te==="Polygon"||te==="MultiLineString")for(var ne=0;ne<ie.length;ne++)$e(W,ie[ne]);else if(te==="MultiPolygon")for(ne=0;ne<ie.length;ne++)for(var oe=0;oe<ie[ne].length;oe++)$e(W,ie[ne][oe])}(q),q}function $e(G,z){for(var A=0;A<z.length;A+=3)G.minX=Math.min(G.minX,z[A]),G.minY=Math.min(G.minY,z[A+1]),G.maxX=Math.max(G.maxX,z[A]),G.maxY=Math.max(G.maxY,z[A+1])}function xo(G,z,A,U){if(z.geometry){var q=z.geometry.coordinates,W=z.geometry.type,ie=Math.pow(A.tolerance/((1<<A.maxZoom)*A.extent),2),te=[],ne=z.id;if(A.promoteId?ne=z.properties[A.promoteId]:A.generateId&&(ne=U||0),W==="Point")ji(q,te);else if(W==="MultiPoint")for(var oe=0;oe<q.length;oe++)ji(q[oe],te);else if(W==="LineString")Jt(q,te,ie,!1);else if(W==="MultiLineString"){if(A.lineMetrics){for(oe=0;oe<q.length;oe++)Jt(q[oe],te=[],ie,!1),G.push(be(ne,"LineString",te,z.properties));return}$n(q,te,ie,!1)}else if(W==="Polygon")$n(q,te,ie,!0);else{if(W!=="MultiPolygon"){if(W==="GeometryCollection"){for(oe=0;oe<z.geometry.geometries.length;oe++)xo(G,{id:ne,geometry:z.geometry.geometries[oe],properties:z.properties},A,U);return}throw new Error("Input data is not a valid GeoJSON object.")}for(oe=0;oe<q.length;oe++){var ve=[];$n(q[oe],ve,ie,!0),te.push(ve)}}G.push(be(ne,W,te,z.properties))}}function ji(G,z){z.push(pn(G[0])),z.push(yo(G[1])),z.push(0)}function Jt(G,z,A,U){for(var q,W,ie=0,te=0;te<G.length;te++){var ne=pn(G[te][0]),oe=yo(G[te][1]);z.push(ne),z.push(oe),z.push(0),te>0&&(ie+=U?(q*oe-ne*W)/2:Math.sqrt(Math.pow(ne-q,2)+Math.pow(oe-W,2))),q=ne,W=oe}var ve=z.length-3;z[2]=1,wi(z,0,ve,A),z[ve+2]=1,z.size=Math.abs(ie),z.start=0,z.end=z.size}function $n(G,z,A,U){for(var q=0;q<G.length;q++){var W=[];Jt(G[q],W,A,U),z.push(W)}}function pn(G){return G/360+.5}function yo(G){var z=Math.sin(G*Math.PI/180),A=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return A<0?0:A>1?1:A}function nr(G,z,A,U,q,W,ie,te){if(U/=z,W>=(A/=z)&&ie<U)return G;if(ie<A||W>=U)return null;for(var ne=[],oe=0;oe<G.length;oe++){var ve=G[oe],ze=ve.geometry,ge=ve.type,tt=q===0?ve.minX:ve.minY,Xe=q===0?ve.maxX:ve.maxY;if(tt>=A&&Xe<U)ne.push(ve);else if(!(Xe<A||tt>=U)){var nt=[];if(ge==="Point"||ge==="MultiPoint")Ne(ze,nt,A,U,q);else if(ge==="LineString")kt(ze,nt,A,U,q,!1,te.lineMetrics);else if(ge==="MultiLineString")dn(ze,nt,A,U,q,!1);else if(ge==="Polygon")dn(ze,nt,A,U,q,!0);else if(ge==="MultiPolygon")for(var ct=0;ct<ze.length;ct++){var Lt=[];dn(ze[ct],Lt,A,U,q,!0),Lt.length&&nt.push(Lt)}if(nt.length){if(te.lineMetrics&&ge==="LineString"){for(ct=0;ct<nt.length;ct++)ne.push(be(ve.id,ge,nt[ct],ve.tags));continue}ge!=="LineString"&&ge!=="MultiLineString"||(nt.length===1?(ge="LineString",nt=nt[0]):ge="MultiLineString"),ge!=="Point"&&ge!=="MultiPoint"||(ge=nt.length===3?"Point":"MultiPoint"),ne.push(be(ve.id,ge,nt,ve.tags))}}}return ne.length?ne:null}function Ne(G,z,A,U,q){for(var W=0;W<G.length;W+=3){var ie=G[W+q];ie>=A&&ie<=U&&(z.push(G[W]),z.push(G[W+1]),z.push(G[W+2]))}}function kt(G,z,A,U,q,W,ie){for(var te,ne,oe=yt(G),ve=q===0?bt:bo,ze=G.start,ge=0;ge<G.length-3;ge+=3){var tt=G[ge],Xe=G[ge+1],nt=G[ge+2],ct=G[ge+3],Lt=G[ge+4],Pt=q===0?tt:Xe,Ct=q===0?ct:Lt,vt=!1;ie&&(te=Math.sqrt(Math.pow(tt-ct,2)+Math.pow(Xe-Lt,2))),Pt<A?Ct>A&&(ne=ve(oe,tt,Xe,ct,Lt,A),ie&&(oe.start=ze+te*ne)):Pt>U?Ct<U&&(ne=ve(oe,tt,Xe,ct,Lt,U),ie&&(oe.start=ze+te*ne)):oi(oe,tt,Xe,nt),Ct<A&&Pt>=A&&(ne=ve(oe,tt,Xe,ct,Lt,A),vt=!0),Ct>U&&Pt<=U&&(ne=ve(oe,tt,Xe,ct,Lt,U),vt=!0),!W&&vt&&(ie&&(oe.end=ze+te*ne),z.push(oe),oe=yt(G)),ie&&(ze+=te)}var xt=G.length-3;tt=G[xt],Xe=G[xt+1],nt=G[xt+2],(Pt=q===0?tt:Xe)>=A&&Pt<=U&&oi(oe,tt,Xe,nt),xt=oe.length-3,W&&xt>=3&&(oe[xt]!==oe[0]||oe[xt+1]!==oe[1])&&oi(oe,oe[0],oe[1],oe[2]),oe.length&&z.push(oe)}function yt(G){var z=[];return z.size=G.size,z.start=G.start,z.end=G.end,z}function dn(G,z,A,U,q,W){for(var ie=0;ie<G.length;ie++)kt(G[ie],z,A,U,q,W,!1)}function oi(G,z,A,U){G.push(z),G.push(A),G.push(U)}function bt(G,z,A,U,q,W){var ie=(W-z)/(U-z);return G.push(W),G.push(A+(q-A)*ie),G.push(1),ie}function bo(G,z,A,U,q,W){var ie=(W-A)/(q-A);return G.push(z+(U-z)*ie),G.push(W),G.push(1),ie}function ai(G,z){for(var A=[],U=0;U<G.length;U++){var q,W=G[U],ie=W.type;if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")q=$i(W.geometry,z);else if(ie==="MultiLineString"||ie==="Polygon"){q=[];for(var te=0;te<W.geometry.length;te++)q.push($i(W.geometry[te],z))}else if(ie==="MultiPolygon")for(q=[],te=0;te<W.geometry.length;te++){for(var ne=[],oe=0;oe<W.geometry[te].length;oe++)ne.push($i(W.geometry[te][oe],z));q.push(ne)}A.push(be(W.id,ie,q,W.tags))}return A}function $i(G,z){var A=[];A.size=G.size,G.start!==void 0&&(A.start=G.start,A.end=G.end);for(var U=0;U<G.length;U+=3)A.push(G[U]+z,G[U+1],G[U+2]);return A}function Ir(G,z){if(G.transformed)return G;var A,U,q,W=1<<G.z,ie=G.x,te=G.y;for(A=0;A<G.features.length;A++){var ne=G.features[A],oe=ne.geometry,ve=ne.type;if(ne.geometry=[],ve===1)for(U=0;U<oe.length;U+=2)ne.geometry.push(Qt(oe[U],oe[U+1],z,W,ie,te));else for(U=0;U<oe.length;U++){var ze=[];for(q=0;q<oe[U].length;q+=2)ze.push(Qt(oe[U][q],oe[U][q+1],z,W,ie,te));ne.geometry.push(ze)}}return G.transformed=!0,G}function Qt(G,z,A,U,q,W){return[Math.round(A*(G*U-q)),Math.round(A*(z*U-W))]}function Gn(G,z,A,U,q){for(var W=z===q.maxZoom?0:q.tolerance/((1<<z)*q.extent),ie={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:A,y:U,z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},te=0;te<G.length;te++){ie.numFeatures++,vo(ie,G[te],W,q);var ne=G[te].minX,oe=G[te].minY,ve=G[te].maxX,ze=G[te].maxY;ne<ie.minX&&(ie.minX=ne),oe<ie.minY&&(ie.minY=oe),ve>ie.maxX&&(ie.maxX=ve),ze>ie.maxY&&(ie.maxY=ze)}return ie}function vo(G,z,A,U){var q=z.geometry,W=z.type,ie=[];if(W==="Point"||W==="MultiPoint")for(var te=0;te<q.length;te+=3)ie.push(q[te]),ie.push(q[te+1]),G.numPoints++,G.numSimplified++;else if(W==="LineString")Nr(ie,q,G,A,!1,!1);else if(W==="MultiLineString"||W==="Polygon")for(te=0;te<q.length;te++)Nr(ie,q[te],G,A,W==="Polygon",te===0);else if(W==="MultiPolygon")for(var ne=0;ne<q.length;ne++){var oe=q[ne];for(te=0;te<oe.length;te++)Nr(ie,oe[te],G,A,!0,te===0)}if(ie.length){var ve=z.tags||null;if(W==="LineString"&&U.lineMetrics){for(var ze in ve={},z.tags)ve[ze]=z.tags[ze];ve.mapbox_clip_start=q.start/q.size,ve.mapbox_clip_end=q.end/q.size}var ge={geometry:ie,type:W==="Polygon"||W==="MultiPolygon"?3:W==="LineString"||W==="MultiLineString"?2:1,tags:ve};z.id!==null&&(ge.id=z.id),G.features.push(ge)}}function Nr(G,z,A,U,q,W){var ie=U*U;if(U>0&&z.size<(q?ie:U))A.numPoints+=z.length/3;else{for(var te=[],ne=0;ne<z.length;ne+=3)(U===0||z[ne+2]>ie)&&(A.numSimplified++,te.push(z[ne]),te.push(z[ne+1])),A.numPoints++;q&&function(oe,ve){for(var ze=0,ge=0,tt=oe.length,Xe=tt-2;ge<tt;Xe=ge,ge+=2)ze+=(oe[ge]-oe[Xe])*(oe[ge+1]+oe[Xe+1]);if(ze>0===ve)for(ge=0,tt=oe.length;ge<tt/2;ge+=2){var nt=oe[ge],ct=oe[ge+1];oe[ge]=oe[tt-2-ge],oe[ge+1]=oe[tt-1-ge],oe[tt-2-ge]=nt,oe[tt-1-ge]=ct}}(te,W),G.push(te)}}function si(G,z){var A=(z=this.options=function(q,W){for(var ie in W)q[ie]=W[ie];return q}(Object.create(this.options),z)).debug;if(A&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");var U=function(q,W){var ie=[];if(q.type==="FeatureCollection")for(var te=0;te<q.features.length;te++)xo(ie,q.features[te],W,te);else xo(ie,q.type==="Feature"?q:{geometry:q},W);return ie}(G,z);this.tiles={},this.tileCoords=[],A&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),U=function(q,W){var ie=W.buffer/W.extent,te=q,ne=nr(q,1,-1-ie,ie,0,-1,2,W),oe=nr(q,1,1-ie,2+ie,0,-1,2,W);return(ne||oe)&&(te=nr(q,1,-ie,1+ie,0,-1,2,W)||[],ne&&(te=ai(ne,1).concat(te)),oe&&(te=te.concat(ai(oe,-1)))),te}(U,z),U.length&&this.splitTile(U,0,0,0),A&&(U.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function li(G,z,A){return 32*((1<<G)*A+z)+G}function Za(G,z){const A=G.tileID.canonical;if(!this._geoJSONIndex)return z(null,null);const U=this._geoJSONIndex.getTile(A.z,A.x,A.y);if(!U)return z(null,null);const q=new Pe(U.features);let W=Br(q);W.byteOffset===0&&W.byteLength===W.buffer.byteLength||(W=new Uint8Array(W)),z(null,{vectorTile:q,rawData:W.buffer})}si.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},si.prototype.splitTile=function(G,z,A,U,q,W,ie){for(var te=[G,z,A,U],ne=this.options,oe=ne.debug;te.length;){U=te.pop(),A=te.pop(),z=te.pop(),G=te.pop();var ve=1<<z,ze=li(z,A,U),ge=this.tiles[ze];if(!ge&&(oe>1&&console.time("creation"),ge=this.tiles[ze]=Gn(G,z,A,U,ne),this.tileCoords.push({z,x:A,y:U}),oe)){oe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,A,U,ge.numFeatures,ge.numPoints,ge.numSimplified),console.timeEnd("creation"));var tt="z"+z;this.stats[tt]=(this.stats[tt]||0)+1,this.total++}if(ge.source=G,q){if(z===ne.maxZoom||z===q)continue;var Xe=1<<q-z;if(A!==Math.floor(W/Xe)||U!==Math.floor(ie/Xe))continue}else if(z===ne.indexMaxZoom||ge.numPoints<=ne.indexMaxPoints)continue;if(ge.source=null,G.length!==0){oe>1&&console.time("clipping");var nt,ct,Lt,Pt,Ct,vt,xt=.5*ne.buffer/ne.extent,wr=.5-xt,xr=.5+xt,qr=1+xt;nt=ct=Lt=Pt=null,Ct=nr(G,ve,A-xt,A+xr,0,ge.minX,ge.maxX,ne),vt=nr(G,ve,A+wr,A+qr,0,ge.minX,ge.maxX,ne),G=null,Ct&&(nt=nr(Ct,ve,U-xt,U+xr,1,ge.minY,ge.maxY,ne),ct=nr(Ct,ve,U+wr,U+qr,1,ge.minY,ge.maxY,ne),Ct=null),vt&&(Lt=nr(vt,ve,U-xt,U+xr,1,ge.minY,ge.maxY,ne),Pt=nr(vt,ve,U+wr,U+qr,1,ge.minY,ge.maxY,ne),vt=null),oe>1&&console.timeEnd("clipping"),te.push(nt||[],z+1,2*A,2*U),te.push(ct||[],z+1,2*A,2*U+1),te.push(Lt||[],z+1,2*A+1,2*U),te.push(Pt||[],z+1,2*A+1,2*U+1)}}},si.prototype.getTile=function(G,z,A){var U=this.options,q=U.extent,W=U.debug;if(G<0||G>24)return null;var ie=1<<G,te=li(G,z=(z%ie+ie)%ie,A);if(this.tiles[te])return Ir(this.tiles[te],q);W>1&&console.log("drilling down to z%d-%d-%d",G,z,A);for(var ne,oe=G,ve=z,ze=A;!ne&&oe>0;)oe--,ve=Math.floor(ve/2),ze=Math.floor(ze/2),ne=this.tiles[li(oe,ve,ze)];return ne&&ne.source?(W>1&&console.log("found parent tile z%d-%d-%d",oe,ve,ze),W>1&&console.time("drilling down"),this.splitTile(ne.source,oe,ve,ze,G,z,A),W>1&&console.timeEnd("drilling down"),this.tiles[te]?Ir(this.tiles[te],q):null):null};class ta extends ye{constructor(z,A,U,q){super(z,A,U,Za),q&&(this.loadGeoJSON=q)}loadData(z,A){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=A,this._pendingLoadDataParams=z,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const z=this._pendingCallback,A=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const U=!!(A&&A.request&&A.request.collectResourceTiming)&&new c.RequestPerformance(A.request);this.loadGeoJSON(A,(q,W)=>{if(q||!W)return z(q);if(typeof W!="object")return z(new Error(`Input data given to '${A.source}' is not a valid GeoJSON object.`));{re(W,!0);try{if(A.filter){const te=c.createExpression(A.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(oe=>`${oe.key}: ${oe.message}`).join(", "));const ne=W.features.filter(oe=>te.value.evaluate({zoom:0},oe));W={type:"FeatureCollection",features:ne}}this._geoJSONIndex=A.cluster?new go(function({superclusterOptions:te,clusterProperties:ne}){if(!ne||!te)return te;const oe={},ve={},ze={accumulated:null,zoom:0},ge={properties:null},tt=Object.keys(ne);for(const Xe of tt){const[nt,ct]=ne[Xe],Lt=c.createExpression(ct),Pt=c.createExpression(typeof nt=="string"?[nt,["accumulated"],["get",Xe]]:nt);oe[Xe]=Lt.value,ve[Xe]=Pt.value}return te.map=Xe=>{ge.properties=Xe;const nt={};for(const ct of tt)nt[ct]=oe[ct].evaluate(ze,ge);return nt},te.reduce=(Xe,nt)=>{ge.properties=nt;for(const ct of tt)ze.accumulated=Xe[ct],Xe[ct]=ve[ct].evaluate(ze,ge)},te}(A)).load(W.features):function(te,ne){return new si(te,ne)}(W,A.geojsonVtOptions)}catch(te){return z(te)}this.loaded={};const ie={};if(U){const te=U.finish();te&&(ie.resourceTiming={},ie.resourceTiming[A.source]=JSON.parse(JSON.stringify(te)))}z(null,ie)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(z,A){const U=this.loaded;return U&&U[z.uid]?super.reloadTile(z,A):this.loadTile(z,A)}loadGeoJSON(z,A){if(z.request)c.getJSON(z.request,A);else{if(typeof z.data!="string")return A(new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`));try{return A(null,JSON.parse(z.data))}catch{return A(new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`))}}}removeSource(z,A){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),A()}getClusterExpansionZoom(z,A){try{A(null,this._geoJSONIndex.getClusterExpansionZoom(z.clusterId))}catch(U){A(U)}}getClusterChildren(z,A){try{A(null,this._geoJSONIndex.getChildren(z.clusterId))}catch(U){A(U)}}getClusterLeaves(z,A){try{A(null,this._geoJSONIndex.getLeaves(z.clusterId,z.limit,z.offset))}catch(U){A(U)}}}class ra{constructor(z){this.self=z,this.actor=new c.Actor(z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ye,geojson:ta},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(A,U)=>{if(this.workerSourceTypes[A])throw new Error(`Worker source with name "${A}" already registered.`);this.workerSourceTypes[A]=U},this.self.registerRTLTextPlugin=A=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=A.applyArabicShaping,c.plugin.processBidirectionalText=A.processBidirectionalText,c.plugin.processStyledBidirectionalText=A.processStyledBidirectionalText}}setReferrer(z,A){this.referrer=A}setImages(z,A,U){this.availableImages[z]=A;for(const q in this.workerSources[z]){const W=this.workerSources[z][q];for(const ie in W)W[ie].availableImages=A}U()}setLayers(z,A,U){this.getLayerIndex(z).replace(A),U()}updateLayers(z,A,U){this.getLayerIndex(z).update(A.layers,A.removedIds),U()}loadTile(z,A,U){this.getWorkerSource(z,A.type,A.source).loadTile(A,U)}loadDEMTile(z,A,U){this.getDEMWorkerSource(z,A.source).loadTile(A,U)}reloadTile(z,A,U){this.getWorkerSource(z,A.type,A.source).reloadTile(A,U)}abortTile(z,A,U){this.getWorkerSource(z,A.type,A.source).abortTile(A,U)}removeTile(z,A,U){this.getWorkerSource(z,A.type,A.source).removeTile(A,U)}removeDEMTile(z,A){this.getDEMWorkerSource(z,A.source).removeTile(A)}removeSource(z,A,U){if(!this.workerSources[z]||!this.workerSources[z][A.type]||!this.workerSources[z][A.type][A.source])return;const q=this.workerSources[z][A.type][A.source];delete this.workerSources[z][A.type][A.source],q.removeSource!==void 0?q.removeSource(A,U):U()}loadWorkerSource(z,A,U){try{this.self.importScripts(A.url),U()}catch(q){U(q.toString())}}syncRTLPluginState(z,A,U){try{c.plugin.setState(A);const q=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&q!=null){this.self.importScripts(q);const W=c.plugin.isParsed();U(W?void 0:new Error(`RTL Text Plugin failed to import scripts from ${q}`),W)}}catch(q){U(q.toString())}}getAvailableImages(z){let A=this.availableImages[z];return A||(A=[]),A}getLayerIndex(z){let A=this.layerIndexes[z];return A||(A=this.layerIndexes[z]=new Z),A}getWorkerSource(z,A,U){if(this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][A]||(this.workerSources[z][A]={}),!this.workerSources[z][A][U]){const q={send:(W,ie,te)=>{this.actor.send(W,ie,te,z)}};this.workerSources[z][A][U]=new this.workerSourceTypes[A](q,this.getLayerIndex(z),this.getAvailableImages(z))}return this.workerSources[z][A][U]}getDEMWorkerSource(z,A){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][A]||(this.demWorkerSources[z][A]=new Me),this.demWorkerSources[z][A]}enforceCacheSizeLimit(z,A){c.enforceCacheSizeLimit(A)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new ra(self)),ra}),y(["./shared"],function(c){var P=F;function F(h){return!function(n){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,f,b=new Blob([""],{type:"text/javascript"}),_=URL.createObjectURL(b);try{f=new Worker(_),p=!0}catch{p=!1}return f&&f.terminate(),URL.revokeObjectURL(_),p}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var p=document.createElement("canvas");p.width=p.height=1;var f=p.getContext("2d");if(!f)return!1;var b=f.getImageData(0,0,1,1);return b&&b.width===p.width}()?(Z[s=n&&n.failIfMajorPerformanceCaveat]===void 0&&(Z[s]=function(p){var f,b=function(_){var S=document.createElement("canvas"),C=Object.create(F.webGLContextAttributes);return C.failIfMajorPerformanceCaveat=_,S.getContext("webgl",C)||S.getContext("experimental-webgl",C)}(p);if(!b)return!1;try{f=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!f||b.isContextLost())&&(b.shaderSource(f,"void main() {}"),b.compileShader(f),b.getShaderParameter(f,b.COMPILE_STATUS)===!0)}(s)),Z[s]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var s}(h)}var Z={};function H(h,n){if(Array.isArray(h)){if(!Array.isArray(n)||h.length!==n.length)return!1;for(let s=0;s<h.length;s++)if(!H(h[s],n[s]))return!1;return!0}if(typeof h=="object"&&h!==null&&n!==null){if(typeof n!="object"||Object.keys(h).length!==Object.keys(n).length)return!1;for(const s in h)if(!H(h[s],n[s]))return!1;return!0}return h===n}F.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class V{static testProp(n){if(!V.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in V.docStyle)return n[s];return n[0]}static create(n,s,p){const f=window.document.createElement(n);return s!==void 0&&(f.className=s),p&&p.appendChild(f),f}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){V.docStyle&&V.selectProp&&(V.userSelect=V.docStyle[V.selectProp],V.docStyle[V.selectProp]="none")}static enableDrag(){V.docStyle&&V.selectProp&&(V.docStyle[V.selectProp]=V.userSelect)}static setTransform(n,s){n.style[V.transformProp]=s}static addEventListener(n,s,p,f={}){n.addEventListener(s,p,"passive"in f?f:f.capture)}static removeEventListener(n,s,p,f={}){n.removeEventListener(s,p,"passive"in f?f:f.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",V.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",V.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",V.suppressClickInternal,!0)},0)}static mousePos(n,s){const p=n.getBoundingClientRect();return new c.pointGeometry(s.clientX-p.left-n.clientLeft,s.clientY-p.top-n.clientTop)}static touchPos(n,s){const p=n.getBoundingClientRect(),f=[];for(let b=0;b<s.length;b++)f.push(new c.pointGeometry(s[b].clientX-p.left-n.clientLeft,s[b].clientY-p.top-n.clientTop));return f}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}V.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,V.selectProp=V.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),V.transformProp=V.testProp(["transform","WebkitTransform"]);class pe{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}normalizeSpriteURL(n,s,p){const f=function(b){const _=b.match(de);if(!_)throw new Error(`Unable to parse URL "${b}"`);return{protocol:_[1],authority:_[2],path:_[3]||"/",params:_[4]?_[4].split("&"):[]}}(n);return f.path+=`${s}${p}`,function(b){const _=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${_}`}(f)}setTransformRequest(n){this._transformRequestFn=n}}const de=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ye(h){var n=new c.ARRAY_TYPE(3);return n[0]=h[0],n[1]=h[1],n[2]=h[2],n}var Me,re=function(h,n,s){return h[0]=n[0]-s[0],h[1]=n[1]-s[1],h[2]=n[2]-s[2],h};Me=new c.ARRAY_TYPE(3),c.ARRAY_TYPE!=Float32Array&&(Me[0]=0,Me[1]=0,Me[2]=0);var K=function(h){var n=h[0],s=h[1];return n*n+s*s};(function(){var h=new c.ARRAY_TYPE(2);c.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0)})();class ee{constructor(n,s,p,f){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(s,f)}update(n,s,p){const{width:f,height:b}=n,_=!(this.size&&this.size[0]===f&&this.size[1]===b||p),{context:S}=this,{gl:C}=S;if(this.useMipmap=Boolean(s&&s.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!s||s.premultiply!==!1)),_)this.size=[f,b],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,n):C.texImage2D(C.TEXTURE_2D,0,this.format,f,b,0,this.format,C.UNSIGNED_BYTE,n.data);else{const{x:I,y:L}=p||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?C.texSubImage2D(C.TEXTURE_2D,0,I,L,C.RGBA,C.UNSIGNED_BYTE,n):C.texSubImage2D(C.TEXTURE_2D,0,I,L,f,b,C.RGBA,C.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(n,s,p){const{context:f}=this,{gl:b}=f;b.bindTexture(b.TEXTURE_2D,this.texture),p!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=b.LINEAR),n!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p||n),this.filter=n),s!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,s),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function he(h){const{userImage:n}=h;return!!(n&&n.render&&n.render())&&(h.data.replace(new Uint8Array(n.data.buffer)),!0)}class Te extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,callback:p}of this.requestors)this._notify(s,p);this.requestors=[]}}getImage(n){return this.images[n]}addImage(n,s){this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let p=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(s.content,s)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,s){if(!n)return!0;let p=0;for(const f of n){if(f[0]<p||f[1]<f[0]||s<f[1])return!1;p=f[1]}return!0}_validateContent(n,s){return!(n&&(n.length!==4||n[0]<0||s.data.width<n[0]||n[1]<0||s.data.height<n[1]||n[2]<0||s.data.width<n[2]||n[3]<0||s.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))}updateImage(n,s){s.version=this.images[n].version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,s){let p=!0;if(!this.isLoaded())for(const f of n)this.images[f]||(p=!1);this.isLoaded()||p?this._notify(n,s):this.requestors.push({ids:n,callback:s})}_notify(n,s){const p={};for(const f of n){this.images[f]||this.fire(new c.Event("styleimagemissing",{id:f}));const b=this.images[f];b?p[f]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:Boolean(b.userImage&&b.userImage.render)}:c.warnOnce(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}s(null,p)}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],p=this.getImage(n);if(!p)return null;if(s&&s.position.version===p.version)return s.position;if(s)s.position.version=p.version;else{const f={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new c.ImagePosition(f,p);this.patterns[n]={bin:f,position:b}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ee(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const b in this.patterns)n.push(this.patterns[b].bin);const{w:s,h:p}=c.potpack(n),f=this.atlasImage;f.resize({width:s||1,height:p||1});for(const b in this.patterns){const{bin:_}=this.patterns[b],S=_.x+1,C=_.y+1,I=this.images[b].data,L=I.width,O=I.height;c.RGBAImage.copy(I,f,{x:0,y:0},{x:S,y:C},{width:L,height:O}),c.RGBAImage.copy(I,f,{x:0,y:O-1},{x:S,y:C-1},{width:L,height:1}),c.RGBAImage.copy(I,f,{x:0,y:0},{x:S,y:C+O},{width:L,height:1}),c.RGBAImage.copy(I,f,{x:L-1,y:0},{x:S-1,y:C},{width:1,height:O}),c.RGBAImage.copy(I,f,{x:0,y:0},{x:S+L,y:C},{width:1,height:O})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const p=this.images[s];he(p)&&this.updateImage(s,p)}}}const Pe=1e20;function Le(h,n,s,p,f,b,_,S,C){for(let I=n;I<n+p;I++)Be(h,s*b+I,b,f,_,S,C);for(let I=s;I<s+f;I++)Be(h,I*b+n,1,p,_,S,C)}function Be(h,n,s,p,f,b,_){b[0]=0,_[0]=-Pe,_[1]=Pe,f[0]=h[n];for(let S=1,C=0,I=0;S<p;S++){f[S]=h[n+S*s];const L=S*S;do{const O=b[C];I=(f[S]-f[O]+L-O*O)/(S-O)/2}while(I<=_[C]&&--C>-1);C++,b[C]=S,_[C]=I,_[C+1]=Pe}for(let S=0,C=0;S<p;S++){for(;_[C+1]<S;)C++;const I=b[C],L=S-I;h[n+S*s]=f[I]+L*L}}class ht{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n,s){const p=[];for(const f in n)for(const b of n[f])p.push({stack:f,id:b});c.asyncAll(p,({stack:f,id:b},_)=>{let S=this.entries[f];S||(S=this.entries[f]={glyphs:{},requests:{},ranges:{}});let C=S.glyphs[b];if(C!==void 0)return void _(null,{stack:f,id:b,glyph:C});if(C=this._tinySDF(S,f,b),C)return S.glyphs[b]=C,void _(null,{stack:f,id:b,glyph:C});const I=Math.floor(b/256);if(256*I>65535)return void _(new Error("glyphs > 65535 not supported"));if(S.ranges[I])return void _(null,{stack:f,id:b,glyph:C});let L=S.requests[I];L||(L=S.requests[I]=[],ht.loadGlyphRange(f,I,this.url,this.requestManager,(O,j)=>{if(j){for(const Y in j)this._doesCharSupportLocalGlyph(+Y)||(S.glyphs[+Y]=j[+Y]);S.ranges[I]=!0}for(const Y of L)Y(O,j);delete S.requests[I]})),L.push((O,j)=>{O?_(O):j&&_(null,{stack:f,id:b,glyph:j[b]||null})})},(f,b)=>{if(f)s(f);else if(b){const _={};for(const{stack:S,id:C,glyph:I}of b)(_[S]||(_[S]={}))[C]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};s(null,_)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(c.unicodeBlockLookup["CJK Unified Ideographs"](n)||c.unicodeBlockLookup["Hangul Syllables"](n)||c.unicodeBlockLookup.Hiragana(n)||c.unicodeBlockLookup.Katakana(n))}_tinySDF(n,s,p){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(p))return;let b=n.tinySDF;if(!b){let S="400";/bold/i.test(s)?S="900":/medium/i.test(s)?S="500":/light/i.test(s)&&(S="200"),b=n.tinySDF=new ht.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:f,fontWeight:S})}const _=b.draw(String.fromCharCode(p));return{id:p,bitmap:new c.AlphaImage({width:_.width||30,height:_.height||30},_.data),metrics:{width:_.glyphWidth||24,height:_.glyphHeight||24,left:_.glyphLeft||0,top:_.glyphTop-27||-8,advance:_.glyphAdvance||24}}}}ht.loadGlyphRange=function(h,n,s,p,f){const b=256*n,_=b+255,S=p.transformRequest(s.replace("{fontstack}",h).replace("{range}",`${b}-${_}`),c.ResourceType.Glyphs);c.getArrayBuffer(S,(C,I)=>{if(C)f(C);else if(I){const L={};for(const O of c.parseGlyphPBF(I))L[O.id]=O;f(null,L)}})},ht.TinySDF=class{constructor({fontSize:h=24,buffer:n=3,radius:s=8,cutoff:p=.25,fontFamily:f="sans-serif",fontWeight:b="normal",fontStyle:_="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=s;const S=this.size=h+4*n,C=this._createCanvas(S),I=this.ctx=C.getContext("2d",{willReadFrequently:!0});I.font=`${_} ${b} ${h}px ${f}`,I.textBaseline="alphabetic",I.textAlign="left",I.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(h){const n=document.createElement("canvas");return n.width=n.height=h,n}draw(h){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:p,actualBoundingBoxLeft:f,actualBoundingBoxRight:b}=this.ctx.measureText(h),_=Math.ceil(s),S=Math.min(this.size-this.buffer,Math.ceil(b-f)),C=Math.min(this.size-this.buffer,_+Math.ceil(p)),I=S+2*this.buffer,L=C+2*this.buffer,O=Math.max(I*L,0),j=new Uint8ClampedArray(O),Y={data:j,width:I,height:L,glyphWidth:S,glyphHeight:C,glyphTop:_,glyphLeft:0,glyphAdvance:n};if(S===0||C===0)return Y;const{ctx:$,buffer:X,gridInner:ae,gridOuter:se}=this;$.clearRect(X,X,S,C),$.fillText(h,X,X+_);const ue=$.getImageData(X,X,S,C);se.fill(Pe,0,O),ae.fill(0,0,O);for(let le=0;le<C;le++)for(let Se=0;Se<S;Se++){const xe=ue.data[4*(le*S+Se)+3]/255;if(xe===0)continue;const _e=(le+X)*I+Se+X;if(xe===1)se[_e]=0,ae[_e]=Pe;else{const Ae=.5-xe;se[_e]=Ae>0?Ae*Ae:0,ae[_e]=Ae<0?Ae*Ae:0}}Le(se,0,0,I,L,I,this.f,this.v,this.z),Le(ae,X,X,S,C,I,this.f,this.v,this.z);for(let le=0;le<O;le++){const Se=Math.sqrt(se[le])-Math.sqrt(ae[le]);j[le]=Math.round(255-255*(Se/this.radius+this.cutoff))}return Y}};const ot=new c.Properties({anchor:new c.DataConstantProperty(c.spec.light.anchor),position:new class{constructor(){this.specification=c.spec.light.position}possiblyEvaluate(h,n){return c.sphericalToCartesian(h.expression.evaluate(n))}interpolate(h,n,s){return{x:c.number(h.x,n.x,s),y:c.number(h.y,n.y,s),z:c.number(h.z,n.z,s)}}},color:new c.DataConstantProperty(c.spec.light.color),intensity:new c.DataConstantProperty(c.spec.light.intensity)}),St="-transition";class qt extends c.Evented{constructor(n){super(),this._transitionable=new c.Transitionable(ot),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(c.validateLight,n,s))for(const p in n){const f=n[p];p.endsWith(St)?this._transitionable.setTransition(p.slice(0,-St.length),f):this._transitionable.setValue(p,f)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,p){return(!p||p.validate!==!1)&&c.emitValidationErrors(this,n.call(c.validateStyle,c.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}class Rt{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const p=n.join(",")+String(s);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,s)),this.dashEntry[p]}getDashRanges(n,s,p){const f=[];let b=n.length%2==1?-n[n.length-1]*p:0,_=n[0]*p,S=!0;f.push({left:b,right:_,isDash:S,zeroLength:n[0]===0});let C=n[0];for(let I=1;I<n.length;I++){S=!S;const L=n[I];b=C*p,C+=L,_=C*p,f.push({left:b,right:_,isDash:S,zeroLength:L===0})}return f}addRoundDash(n,s,p){const f=s/2;for(let b=-p;b<=p;b++){const _=this.width*(this.nextRow+p+b);let S=0,C=n[S];for(let I=0;I<this.width;I++){I/C.right>1&&(C=n[++S]);const L=Math.abs(I-C.left),O=Math.abs(I-C.right),j=Math.min(L,O);let Y;const $=b/p*(f+1);if(C.isDash){const X=f-Math.abs($);Y=Math.sqrt(j*j+X*X)}else Y=f-Math.sqrt(j*j+$*$);this.data[_+I]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(n){for(let S=n.length-1;S>=0;--S){const C=n[S],I=n[S+1];C.zeroLength?n.splice(S,1):I&&I.isDash===C.isDash&&(I.left=C.left,n.splice(S,1))}const s=n[0],p=n[n.length-1];s.isDash===p.isDash&&(s.left=p.left-this.width,p.right=s.right+this.width);const f=this.width*this.nextRow;let b=0,_=n[b];for(let S=0;S<this.width;S++){S/_.right>1&&(_=n[++b]);const C=Math.abs(S-_.left),I=Math.abs(S-_.right),L=Math.min(C,I);this.data[f+S]=Math.max(0,Math.min(255,(_.isDash?L:-L)+128))}}addDash(n,s){const p=s?7:0,f=2*p+1;if(this.nextRow+f>this.height)return c.warnOnce("LineAtlas out of space"),null;let b=0;for(let S=0;S<n.length;S++)b+=n[S];if(b!==0){const S=this.width/b,C=this.getDashRanges(n,this.width,S);s?this.addRoundDash(C,S,p):this.addRegularDash(C)}const _={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:b};return this.nextRow+=f,this.dirty=!0,_}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}class Tr{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=c.uniqueId();const p=this.workerPool.acquire(this.id);for(let f=0;f<p.length;f++){const b=new Tr.Actor(p[f],s,this.id);b.name=`Worker ${f}`,this.actors.push(b)}}broadcast(n,s,p){c.asyncAll(this.actors,(f,b)=>{f.send(n,s,b)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Kr(h,n,s){const p=function(f,b){if(f)return s(f);if(b){const _=c.pick(c.extend(b,h),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(_.vectorLayers=b.vector_layers,_.vectorLayerIds=_.vectorLayers.map(S=>S.id)),s(null,_)}};return h.url?c.getJSON(n.transformRequest(h.url,c.ResourceType.Source),p):c.exported.frame(()=>p(null,h))}Tr.Actor=c.Actor;class Qe{constructor(n,s,p){this.bounds=c.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),p=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*s),f=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*s),b=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*s),_=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=p&&n.x<b&&n.y>=f&&n.y<_}}class Yt extends c.Evented{constructor(n,s,p,f){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(s,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Kr(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new c.ErrorEvent(n)):s&&(c.extend(this,s),s.bounds&&(this.tileBounds=new Qe(s.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}loadTile(n,s){const p=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(p,c.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(_,S){return delete n.request,n.aborted?s(null):_&&_.status!==404?s(_):(S&&S.resourceTiming&&(n.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&n.setExpiryData(S),n.loadVectorData(S,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}f.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=s:n.request=n.actor.send("reloadTile",f,b.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",f,b.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class qe extends c.Evented{constructor(n,s,p,f){super(),this.id=n,this.dispatcher=p,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},s),c.extend(this,c.pick(s,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Kr(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new c.ErrorEvent(n)):s&&(c.extend(this,s),s.bounds&&(this.tileBounds=new Qe(s.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,s){const p=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=c.getImage(this.map._requestManager.transformRequest(p,c.ResourceType.Tile),(f,b,_)=>{if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(f)n.state="errored",s(f);else if(b){this.map._refreshExpiredTiles&&n.setExpiryData(_);const S=this.map.painter.context,C=S.gl;n.texture=this.map.painter.getTileTexture(b.width),n.texture?n.texture.update(b,{useMipmap:!0}):(n.texture=new ee(S,b,C.RGBA,{useMipmap:!0}),n.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),n.state="loaded",c.cacheEntryPossiblyAdded(this.dispatcher),s(null)}})}abortTile(n,s){n.request&&(n.request.cancel(),delete n.request),s()}unloadTile(n,s){n.texture&&this.map.painter.saveTileTexture(n.texture),s()}hasTransition(){return!1}}let lt;class dt extends qe{constructor(n,s,p,f){super(n,s,p,f),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,s){const p=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function f(b,_){b&&(n.state="errored",s(b)),_&&(n.dem=_,n.needsHillshadePrepare=!0,n.state="loaded",s(null))}n.request=c.getImage(this.map._requestManager.transformRequest(p,c.ResourceType.Tile),function(b,_){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(b)n.state="errored",s(b);else if(_){this.map._refreshExpiredTiles&&n.setExpiryData(_),delete _.cacheControl,delete _.expires;const S=c.isImageBitmap(_)&&(lt==null&&(lt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),lt)?_:c.exported.getImageData(_,1),C={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:S,encoding:this.encoding};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",C,f.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const s=n.canonical,p=Math.pow(2,s.z),f=(s.x-1+p)%p,b=s.x===0?n.wrap-1:n.wrap,_=(s.x+1+p)%p,S=s.x+1===p?n.wrap+1:n.wrap,C={};return C[new c.OverscaledTileID(n.overscaledZ,b,s.z,f,s.y).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,S,s.z,_,s.y).key]={backfilled:!1},s.y>0&&(C[new c.OverscaledTileID(n.overscaledZ,b,s.z,f,s.y-1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,S,s.z,_,s.y-1).key]={backfilled:!1}),s.y+1<p&&(C[new c.OverscaledTileID(n.overscaledZ,b,s.z,f,s.y+1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},C[new c.OverscaledTileID(n.overscaledZ,S,s.z,_,s.y+1).key]={backfilled:!1}),C}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class Ut extends c.Evented{constructor(n,s,p,f){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(f),this._data=s.data,this._options=c.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const b=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*b,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*b,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:c.EXTENT,radius:(s.clusterRadius||50)*b,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData("content"),this}getClusterExpansionZoom(n,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},s),this}getClusterChildren(n,s){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},s),this}getClusterLeaves(n,s,p,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:s,offset:p},f),this}_updateWorkerData(n){const s=c.extend({},this.workerOptions),p=this._data;typeof p=="string"?(s.request=this.map._requestManager.transformRequest(c.exported.resolveURL(p),c.ResourceType.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(p),this._pendingLoads++,this.fire(new c.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,s,(f,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return;let _=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(_=b.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:s.source},null),f)return void this.fire(new c.ErrorEvent(f));const S={dataType:"source",sourceDataType:n};this._collectResourceTiming&&_&&_.length>0&&c.extend(S,{resourceTiming:_}),this.fire(new c.Event("data",S))})}loaded(){return this._pendingLoads===0}loadTile(n,s){const p=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const f={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(p,f,(b,_)=>(delete n.request,n.unloadVectorData(),n.aborted?s(null):b?s(b):(n.loadVectorData(_,this.map.painter,p==="reloadTile"),s(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var jt=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Br extends c.Evented{constructor(n,s,p,f){super(),this.id=n,this.dispatcher=p,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=s}load(n,s){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),(p,f)=>{this._loaded=!0,p?this.fire(new c.ErrorEvent(p)):f&&(this.image=f,n&&(this.coordinates=n),s&&s(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}setCoordinates(n){this.coordinates=n;const s=n.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(f){let b=1/0,_=1/0,S=-1/0,C=-1/0;for(const j of f)b=Math.min(b,j.x),_=Math.min(_,j.y),S=Math.max(S,j.x),C=Math.max(C,j.y);const I=Math.max(S-b,C-_),L=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),O=Math.pow(2,L);return new c.CanonicalTileID(L,Math.floor((b+S)/2*O),Math.floor((_+C)/2*O))}(s),this.minzoom=this.maxzoom=this.tileID.z;const p=s.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new c.RasterBoundsArray,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(p[2].x,p[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ee(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const p in this.tiles){const f=this.tiles[p];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}loadTile(n,s){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},s(null)):(n.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class hr extends Br{constructor(n,s,p,f){super(n,s,p,f),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,c.ResourceType.Source).url);c.getVideo(this.urls,(s,p)=>{this._loaded=!0,s?this.fire(new c.ErrorEvent(s)):p&&(this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new ee(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const p in this.tiles){const f=this.tiles[p];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class zr extends Br{constructor(n,s,p,f){super(n,s,p,f),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(_=>typeof _!="number"))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,p=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ee(s,this.canvas,p.RGBA,{premultiply:!0});for(const f in this.tiles){const b=this.tiles[f];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const or={vector:Yt,raster:qe,"raster-dem":dt,geojson:Ut,video:hr,image:Br,canvas:zr};function Fr(h,n){const s=c.create();return c.translate(s,s,[1,1,0]),c.scale(s,s,[.5*h.width,.5*h.height,1]),c.multiply(s,s,h.calculatePosMatrix(n.toUnwrapped()))}function Yr(h,n,s,p,f,b){const _=function(O,j,Y){if(O)for(const $ of O){const X=j[$];if(X&&X.source===Y&&X.type==="fill-extrusion")return!0}else for(const $ in j){const X=j[$];if(X.source===Y&&X.type==="fill-extrusion")return!0}return!1}(f&&f.layers,n,h.id),S=b.maxPitchScaleFactor(),C=h.tilesIn(p,S,_);C.sort(bi);const I=[];for(const O of C)I.push({wrappedTileID:O.tileID.wrapped().key,queryResults:O.tile.queryRenderedFeatures(n,s,h._state,O.queryGeometry,O.cameraQueryGeometry,O.scale,f,b,S,Fr(h.transform,O.tileID))});const L=function(O){const j={},Y={};for(const $ of O){const X=$.queryResults,ae=$.wrappedTileID,se=Y[ae]=Y[ae]||{};for(const ue in X){const le=X[ue],Se=se[ue]=se[ue]||{},xe=j[ue]=j[ue]||[];for(const _e of le)Se[_e.featureIndex]||(Se[_e.featureIndex]=!0,xe.push(_e))}}return j}(I);for(const O in L)L[O].forEach(j=>{const Y=j.feature,$=h.getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=$});return L}function bi(h,n){const s=h.tileID,p=n.tileID;return s.overscaledZ-p.overscaledZ||s.canonical.y-p.canonical.y||s.wrap-p.wrap||s.canonical.x-p.canonical.x}class Jo{constructor(n,s){this.tileID=n,this.uid=c.uniqueId(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<c.exported.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(n,s,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(f,b){const _={};if(!b)return _;for(const S of f){const C=S.layerIds.map(I=>b.getLayer(I)).filter(Boolean);if(C.length!==0){S.layers=C,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(I=>C.filter(L=>L.id===I)[0]));for(const I of C)_[I.id]=S}}return _}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const b=this.buckets[f];if(b instanceof c.SymbolBucket){if(this.hasSymbolBuckets=!0,!p)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const b=this.buckets[f];if(b instanceof c.SymbolBucket&&b.hasRTLText){this.hasRTLText=!0,c.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const f in this.buckets){const b=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(f).queryRadius(b))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new c.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const f=this.buckets[p];f.uploadPending()&&f.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ee(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ee(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,p,f,b,_,S,C,I,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:b,scale:_,tileSize:this.tileSize,pixelPosMatrix:L,transform:C,params:S,queryPadding:this.queryPadding*I},n,s,p):{}}querySourceFeatures(n,s){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const f=p.loadVTLayers(),b=s?s.sourceLayer:"",_=f._geojsonTileLayer||f[b];if(!_)return;const S=c.createFilter(s&&s.filter),{z:C,x:I,y:L}=this.tileID.canonical,O={z:C,x:I,y:L};for(let j=0;j<_.length;j++){const Y=_.feature(j);if(S.needGeometry){const ae=c.toEvaluationFeature(Y,!0);if(!S.filter(new c.EvaluationParameters(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!S.filter(new c.EvaluationParameters(this.tileID.overscaledZ),Y))continue;const $=p.getId(Y,b),X=new c.GeoJSONFeature(Y,C,I,L,$);X.tile=O,n.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const p=c.parseCacheControl(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let f=!1;if(this.expirationTime>p)f=!1;else if(s)if(this.expirationTime<s)f=!0;else{const b=this.expirationTime-s;b?this.expirationTime=p+Math.max(b,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!s.style.hasLayer(f))continue;const b=this.buckets[f],_=b.layers[0].sourceLayer||"_geojsonTileLayer",S=p[_],C=n[_];if(!S||!C||Object.keys(C).length===0)continue;b.update(C,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const I=s&&s.style&&s.style.getLayer(f);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=c.exported.now()+n}setDependencies(n,s){const p={};for(const f of s)p[f]=!0;this.dependencies[n]=p}hasDependency(n,s){for(const p of n){const f=this.dependencies[p];if(f){for(const b of s)if(f[b])return!0}}return!1}}class Vi{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,p){const f=n.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const b={value:s,timeout:void 0};if(p!==void 0&&(b.timeout=setTimeout(()=>{this.remove(n,b)},p)),this.data[f].push(b),this.order.push(f),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const p=n.wrapped().key,f=s===void 0?0:this.data[p].indexOf(s),b=this.data[p][f];return this.data[p].splice(f,1),b.timeout&&clearTimeout(b.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(b.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const p in this.data)for(const f of this.data[p])n(f.value)||s.push(f);for(const p of s)this.remove(p.value.tileID,p)}}class Qo{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,p){const f=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][f]=this.stateChanges[n][f]||{},c.extend(this.stateChanges[n][f],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const b in this.state[n])b!==f&&(this.deletedStates[n][b]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][f]===null){this.deletedStates[n][f]={};for(const b in this.state[n][f])p[b]||(this.deletedStates[n][f][b]=null)}else for(const b in p)this.deletedStates[n]&&this.deletedStates[n][f]&&this.deletedStates[n][f][b]===null&&delete this.deletedStates[n][f][b]}removeFeatureState(n,s,p){if(this.deletedStates[n]===null)return;const f=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&s!==void 0)this.deletedStates[n][f]!==null&&(this.deletedStates[n][f]=this.deletedStates[n][f]||{},this.deletedStates[n][f][p]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][f])for(p in this.deletedStates[n][f]={},this.stateChanges[n][f])this.deletedStates[n][f][p]=null;else this.deletedStates[n][f]=null;else this.deletedStates[n]=null}getState(n,s){const p=String(s),f=c.extend({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const b=this.deletedStates[n][s];if(b===null)return{};for(const _ in b)delete f[_]}return f}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const p={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const b={};for(const _ in this.stateChanges[f])this.state[f][_]||(this.state[f][_]={}),c.extend(this.state[f][_],this.stateChanges[f][_]),b[_]=this.state[f][_];p[f]=b}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const b={};if(this.deletedStates[f]===null)for(const _ in this.state[f])b[_]={},this.state[f][_]={};else for(const _ in this.deletedStates[f]){if(this.deletedStates[f][_]===null)this.state[f][_]={};else for(const S of Object.keys(this.deletedStates[f][_]))delete this.state[f][_][S];b[_]=this.state[f][_]}p[f]=p[f]||{},c.extend(p[f],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const f in n)n[f].setFeatureState(p,s)}}class _r extends c.Evented{constructor(n,s,p){super(),this.id=n,this.dispatcher=p,this.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(f,b,_,S){const C=new or[b.type](f,b,_,S);if(C.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${C.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],C),C}(n,s,p,this),this._tiles={},this._cache=new Vi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qo}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,s){return this._source.loadTile(n,s)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new c.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const p=this._tiles[s];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(vi).map(n=>n.key)}getRenderableIds(n){const s=[];for(const p in this._tiles)this._isIdRenderable(p,n)&&s.push(this._tiles[p]);return n?s.sort((p,f)=>{const b=p.tileID,_=f.tileID,S=new c.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),C=new c.pointGeometry(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-_.overscaledZ||C.y-S.y||C.x-S.x}).map(p=>p.tileID.key):s.map(p=>p.tileID).sort(vi).map(p=>p.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,s){const p=this._tiles[n];p&&(p.state!=="loading"&&(p.state=s),this._loadTile(p,this._tileLoaded.bind(this,p,n,s)))}_tileLoaded(n,s,p,f){if(f)return n.state="errored",void(f.status!==404?this._source.fire(new c.ErrorEvent(f,{tile:n})):this.update(this.transform));n.timeAdded=c.exported.now(),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let f=0;f<s.length;f++){const b=s[f];if(n.neighboringTiles&&n.neighboringTiles[b]){const _=this.getTileByID(b);p(n,_),p(_,n)}}function p(f,b){f.needsHillshadePrepare=!0;let _=b.tileID.canonical.x-f.tileID.canonical.x;const S=b.tileID.canonical.y-f.tileID.canonical.y,C=Math.pow(2,f.tileID.canonical.z),I=b.tileID.key;_===0&&S===0||Math.abs(S)>1||(Math.abs(_)>1&&(Math.abs(_+C)===1?_+=C:Math.abs(_-C)===1&&(_-=C)),b.dem&&f.dem&&(f.dem.backfillBorder(b.dem,_,S),f.neighboringTiles&&f.neighboringTiles[I]&&(f.neighboringTiles[I].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,p,f){for(const b in this._tiles){let _=this._tiles[b];if(f[b]||!_.hasData()||_.tileID.overscaledZ<=s||_.tileID.overscaledZ>p)continue;let S=_.tileID;for(;_&&_.tileID.overscaledZ>s+1;){const I=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[I.key],_&&_.hasData()&&(S=I)}let C=S;for(;C.overscaledZ>s;)if(C=C.scaledTo(C.overscaledZ-1),n[C.key]){f[S.key]=S;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=s?p:null}for(let p=n.overscaledZ-1;p>=s;p--){const f=n.scaledTo(p),b=this._getLoadedTile(f);if(b)return b}}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,f=Math.floor(s*p*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(b)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const p={};for(const f in this._tiles){const b=this._tiles[f];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+s),p[b.tileID.key]=b}this._tiles=p;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}update(n){if(this.transform=n,!this._sourceLoaded||this._paused)return;let s;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?s=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(C=>new c.OverscaledTileID(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y)):(s=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(s=s.filter(C=>this._source.hasTile(C)))):s=[];const p=n.coveringZoomLevel(this._source),f=Math.max(p-_r.maxOverzooming,this._source.minzoom),b=Math.max(p+_r.maxUnderzooming,this._source.minzoom),_=this._updateRetainedTiles(s,p);if(go(this._source.type)){const C={},I={},L=Object.keys(_);for(const O of L){const j=_[O],Y=this._tiles[O];if(!Y||Y.fadeEndTime&&Y.fadeEndTime<=c.exported.now())continue;const $=this.findLoadedParent(j,f);$&&(this._addTile($.tileID),C[$.tileID.key]=$.tileID),I[O]=j}this._retainLoadedChildren(I,p,b,_);for(const O in C)_[O]||(this._coveredTiles[O]=!0,_[O]=C[O])}for(const C in _)this._tiles[C].clearFadeHold();const S=c.keysDifference(this._tiles,_);for(const C of S){const I=this._tiles[C];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(C)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){const p={},f={},b=Math.max(s-_r.maxOverzooming,this._source.minzoom),_=Math.max(s+_r.maxUnderzooming,this._source.minzoom),S={};for(const C of n){const I=this._addTile(C);p[C.key]=C,I.hasData()||s<this._source.maxzoom&&(S[C.key]=C)}this._retainLoadedChildren(S,s,_,p);for(const C of n){let I=this._tiles[C.key];if(I.hasData())continue;if(s+1>this._source.maxzoom){const O=C.children(this._source.maxzoom)[0],j=this.getTile(O);if(j&&j.hasData()){p[O.key]=O;continue}}else{const O=C.children(this._source.maxzoom);if(p[O[0].key]&&p[O[1].key]&&p[O[2].key]&&p[O[3].key])continue}let L=I.wasRequested();for(let O=C.overscaledZ-1;O>=b;--O){const j=C.scaledTo(O);if(f[j.key]||(f[j.key]=!0,I=this.getTile(j),!I&&L&&(I=this._addTile(j)),I&&(p[j.key]=j,L=I.wasRequested(),I.hasData())))break}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let p,f=this._tiles[n].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){p=this._loadedParentTiles[f.key];break}s.push(f.key);const b=f.scaledTo(f.overscaledZ-1);if(p=this._getLoadedTile(b),p)break;f=b}for(const b of s)this._loadedParentTiles[b]=p}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const p=s;return s||(s=new Jo(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))),s.uses++,this._tiles[n.key]=s,p||this._source.fire(new c.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=s.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,p){const f=[],b=this.transform;if(!b)return f;const _=p?b.getCameraQueryGeometry(n):n,S=n.map($=>b.pointCoordinate($)),C=_.map($=>b.pointCoordinate($)),I=this.getIds();let L=1/0,O=1/0,j=-1/0,Y=-1/0;for(const $ of C)L=Math.min(L,$.x),O=Math.min(O,$.y),j=Math.max(j,$.x),Y=Math.max(Y,$.y);for(let $=0;$<I.length;$++){const X=this._tiles[I[$]];if(X.holdingForFade())continue;const ae=X.tileID,se=Math.pow(2,b.zoom-X.tileID.overscaledZ),ue=s*X.queryPadding*c.EXTENT/X.tileSize/se,le=[ae.getTilePoint(new c.MercatorCoordinate(L,O)),ae.getTilePoint(new c.MercatorCoordinate(j,Y))];if(le[0].x-ue<c.EXTENT&&le[0].y-ue<c.EXTENT&&le[1].x+ue>=0&&le[1].y+ue>=0){const Se=S.map(_e=>ae.getTilePoint(_e)),xe=C.map(_e=>ae.getTilePoint(_e));f.push({tile:X,tileID:ae,queryGeometry:Se,cameraQueryGeometry:xe,scale:se})}}return f}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of s)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(go(this._source.type))for(const n in this._tiles){const s=this._tiles[n];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=c.exported.now())return!0}return!1}setFeatureState(n,s,p){this._state.updateState(n=n||"_geojsonTileLayer",s,p)}removeFeatureState(n,s,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,p)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,p){const f=this._tiles[n];f&&f.setDependencies(s,p)}reloadTilesForDependencies(n,s){for(const p in this._tiles)this._tiles[p].hasDependency(n,s)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(n,s))}}function vi(h,n){const s=Math.abs(2*h.wrap)-+(h.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return h.overscaledZ-n.overscaledZ||p-s||n.canonical.y-h.canonical.y||n.canonical.x-h.canonical.x}function go(h){return h==="raster"||h==="image"||h==="video"}_r.maxOverzooming=10,_r.maxUnderzooming=3;const _i="mapboxgl_preloaded_worker_pool";class In{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<In.workerCount;)this.workers.push(new Worker(us.workerUrl));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[_i]}numActive(){return Object.keys(this.active).length}}const ea=Math.floor(c.exported.hardwareConcurrency/2);let ri;function Gr(){return ri||(ri=new In),ri}function un(h,n){const s={};for(const p in h)p!=="ref"&&(s[p]=h[p]);return c.refProperties.forEach(p=>{p in n&&(s[p]=n[p])}),s}function no(h){h=h.slice();const n=Object.create(null);for(let s=0;s<h.length;s++)n[h[s].id]=h[s];for(let s=0;s<h.length;s++)"ref"in h[s]&&(h[s]=un(h[s],n[h[s].ref]));return h}In.workerCount=Math.max(Math.min(ea,6),1);const zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ni(h,n,s){s.push({command:zt.addSource,args:[h,n[h]]})}function ii(h,n,s){n.push({command:zt.removeSource,args:[h]}),s[h]=!0}function wi(h,n,s,p){ii(h,s,p),ni(h,n,s)}function io(h,n,s){let p;for(p in h[s])if(Object.prototype.hasOwnProperty.call(h[s],p)&&p!=="data"&&!H(h[s][p],n[s][p]))return!1;for(p in n[s])if(Object.prototype.hasOwnProperty.call(n[s],p)&&p!=="data"&&!H(h[s][p],n[s][p]))return!1;return!0}function be(h,n,s,p,f,b){let _;for(_ in n=n||{},h=h||{})Object.prototype.hasOwnProperty.call(h,_)&&(H(h[_],n[_])||s.push({command:b,args:[p,_,n[_],f]}));for(_ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(h,_)&&(H(h[_],n[_])||s.push({command:b,args:[p,_,n[_],f]}))}function $e(h){return h.id}function xo(h,n){return h[n.id]=n,h}class ji{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.clamp(n,0,1);let s=1,p=this._distances[s];const f=n*this.paddedLength+this.padding;for(;p<f&&s<this._distances.length;)p=this._distances[++s];const b=s-1,_=this._distances[b],S=p-_,C=S>0?(f-_)/S:0;return this.points[b].mult(1-C).add(this.points[s].mult(C))}}function Jt(h,n){let s=!0;return h==="always"||h!=="never"&&n!=="never"||(s=!1),s}class $n{constructor(n,s,p){const f=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(s/p);for(let _=0;_<this.xCellCount*this.yCellCount;_++)f.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,p,f,b){this._forEachCell(s,p,f,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(p),this.bboxes.push(f),this.bboxes.push(b)}insertCircle(n,s,p,f){this._forEachCell(s-f,p-f,s+f,p+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(p),this.circles.push(f)}_insertBoxCell(n,s,p,f,b,_){this.boxCells[b].push(_)}_insertCircleCell(n,s,p,f,b,_){this.circleCells[b].push(_)}_query(n,s,p,f,b,_,S){if(p<0||n>this.width||f<0||s>this.height)return[];const C=[];if(n<=0&&s<=0&&this.width<=p&&this.height<=f){if(b)return[{key:null,x1:n,y1:s,x2:p,y2:f}];for(let I=0;I<this.boxKeys.length;I++)C.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const L=this.circles[3*I],O=this.circles[3*I+1],j=this.circles[3*I+2];C.push({key:this.circleKeys[I],x1:L-j,y1:O-j,x2:L+j,y2:O+j})}}else this._forEachCell(n,s,p,f,this._queryCell,C,{hitTest:b,overlapMode:_,seenUids:{box:{},circle:{}}},S);return C}query(n,s,p,f){return this._query(n,s,p,f,!1,null)}hitTest(n,s,p,f,b,_){return this._query(n,s,p,f,!0,b,_).length>0}hitTestCircle(n,s,p,f,b){const _=n-p,S=n+p,C=s-p,I=s+p;if(S<0||_>this.width||I<0||C>this.height)return!1;const L=[];return this._forEachCell(_,C,S,I,this._queryCellCircle,L,{hitTest:!0,overlapMode:f,circle:{x:n,y:s,radius:p},seenUids:{box:{},circle:{}}},b),L.length>0}_queryCell(n,s,p,f,b,_,S,C){const{seenUids:I,hitTest:L,overlapMode:O}=S,j=this.boxCells[b];if(j!==null){const $=this.bboxes;for(const X of j)if(!I.box[X]){I.box[X]=!0;const ae=4*X,se=this.boxKeys[X];if(n<=$[ae+2]&&s<=$[ae+3]&&p>=$[ae+0]&&f>=$[ae+1]&&(!C||C(se))&&(!L||!Jt(O,se.overlapMode))&&(_.push({key:se,x1:$[ae],y1:$[ae+1],x2:$[ae+2],y2:$[ae+3]}),L))return!0}}const Y=this.circleCells[b];if(Y!==null){const $=this.circles;for(const X of Y)if(!I.circle[X]){I.circle[X]=!0;const ae=3*X,se=this.circleKeys[X];if(this._circleAndRectCollide($[ae],$[ae+1],$[ae+2],n,s,p,f)&&(!C||C(se))&&(!L||!Jt(O,se.overlapMode))){const ue=$[ae],le=$[ae+1],Se=$[ae+2];if(_.push({key:se,x1:ue-Se,y1:le-Se,x2:ue+Se,y2:le+Se}),L)return!0}}}return!1}_queryCellCircle(n,s,p,f,b,_,S,C){const{circle:I,seenUids:L,overlapMode:O}=S,j=this.boxCells[b];if(j!==null){const $=this.bboxes;for(const X of j)if(!L.box[X]){L.box[X]=!0;const ae=4*X,se=this.boxKeys[X];if(this._circleAndRectCollide(I.x,I.y,I.radius,$[ae+0],$[ae+1],$[ae+2],$[ae+3])&&(!C||C(se))&&!Jt(O,se.overlapMode))return _.push(!0),!0}}const Y=this.circleCells[b];if(Y!==null){const $=this.circles;for(const X of Y)if(!L.circle[X]){L.circle[X]=!0;const ae=3*X,se=this.circleKeys[X];if(this._circlesCollide($[ae],$[ae+1],$[ae+2],I.x,I.y,I.radius)&&(!C||C(se))&&!Jt(O,se.overlapMode))return _.push(!0),!0}}}_forEachCell(n,s,p,f,b,_,S,C){const I=this._convertToXCellCoord(n),L=this._convertToYCellCoord(s),O=this._convertToXCellCoord(p),j=this._convertToYCellCoord(f);for(let Y=I;Y<=O;Y++)for(let $=L;$<=j;$++)if(b.call(this,n,s,p,f,this.xCellCount*$+Y,_,S,C))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,p,f,b,_){const S=f-n,C=b-s,I=p+_;return I*I>S*S+C*C}_circleAndRectCollide(n,s,p,f,b,_,S){const C=(_-f)/2,I=Math.abs(n-(f+C));if(I>C+p)return!1;const L=(S-b)/2,O=Math.abs(s-(b+L));if(O>L+p)return!1;if(I<=C||O<=L)return!0;const j=I-C,Y=O-L;return j*j+Y*Y<=p*p}}function pn(h,n,s,p,f){const b=c.create();return n?(c.scale(b,b,[1/f,1/f,1]),s||c.rotateZ(b,b,p.angle)):c.multiply(b,p.labelPlaneMatrix,h),b}function yo(h,n,s,p,f){if(n){const b=c.clone(h);return c.scale(b,b,[f,f,1]),s||c.rotateZ(b,b,-p.angle),b}return p.glCoordMatrix}function nr(h,n){const s=[h.x,h.y,0,1];Qt(s,s,n);const p=s[3];return{point:new c.pointGeometry(s[0]/p,s[1]/p),signedDistanceFromCamera:p}}function Ne(h,n){return .5+h/n*.5}function kt(h,n){const s=h[0]/h[3],p=h[1]/h[3];return s>=-n[0]&&s<=n[0]&&p>=-n[1]&&p<=n[1]}function yt(h,n,s,p,f,b,_,S,C){const I=p?h.textSizeData:h.iconSizeData,L=c.evaluateSizeForZoom(I,s.transform.zoom),O=[256/s.width*2+1,256/s.height*2+1],j=p?h.text.dynamicLayoutVertexArray:h.icon.dynamicLayoutVertexArray;j.clear();const Y=h.lineVertexArray,$=p?h.text.placedSymbolArray:h.icon.placedSymbolArray,X=s.transform.width/s.transform.height;let ae=!1;for(let se=0;se<$.length;se++){const ue=$.get(se);if(ue.hidden||ue.writingMode===c.WritingMode.vertical&&!ae){Ir(ue.numGlyphs,j);continue}ae=!1;const le=[ue.anchorX,ue.anchorY,0,1];if(c.transformMat4(le,le,n),!kt(le,O)){Ir(ue.numGlyphs,j);continue}const Se=Ne(s.transform.cameraToCenterDistance,le[3]),xe=c.evaluateSizeForFeature(I,L,ue),_e=_?xe/Se:xe*Se,Ae=new c.pointGeometry(ue.anchorX,ue.anchorY),Oe=nr(Ae,f).point,Ee={},et=bt(ue,_e,!1,S,n,f,b,h.glyphOffsetArray,Y,j,Oe,Ae,Ee,X,C);ae=et.useVertical,(et.notEnoughRoom||ae||et.needsFlipping&&bt(ue,_e,!0,S,n,f,b,h.glyphOffsetArray,Y,j,Oe,Ae,Ee,X,C).notEnoughRoom)&&Ir(ue.numGlyphs,j)}p?h.text.dynamicLayoutVertexBuffer.updateData(j):h.icon.dynamicLayoutVertexBuffer.updateData(j)}function dn(h,n,s,p,f,b,_,S,C,I,L,O){const j=S.glyphStartIndex+S.numGlyphs,Y=S.lineStartIndex,$=S.lineStartIndex+S.lineLength,X=n.getoffsetX(S.glyphStartIndex),ae=n.getoffsetX(j-1),se=ai(h*X,s,p,f,b,_,S.segment,Y,$,C,I,L,O);if(!se)return null;const ue=ai(h*ae,s,p,f,b,_,S.segment,Y,$,C,I,L,O);return ue?{first:se,last:ue}:null}function oi(h,n,s,p){return h===c.WritingMode.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*p?{useVertical:!0}:(h===c.WritingMode.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function bt(h,n,s,p,f,b,_,S,C,I,L,O,j,Y,$){const X=n/24,ae=h.lineOffsetX*X,se=h.lineOffsetY*X;let ue;if(h.numGlyphs>1){const le=h.glyphStartIndex+h.numGlyphs,Se=h.lineStartIndex,xe=h.lineStartIndex+h.lineLength,_e=dn(X,S,ae,se,s,L,O,h,C,b,j,$);if(!_e)return{notEnoughRoom:!0};const Ae=nr(_e.first.point,_).point,Oe=nr(_e.last.point,_).point;if(p&&!s){const Ee=oi(h.writingMode,Ae,Oe,Y);if(Ee)return Ee}ue=[_e.first];for(let Ee=h.glyphStartIndex+1;Ee<le-1;Ee++)ue.push(ai(X*S.getoffsetX(Ee),ae,se,s,L,O,h.segment,Se,xe,C,b,j,$));ue.push(_e.last)}else{if(p&&!s){const Se=nr(O,f).point,xe=h.lineStartIndex+h.segment+1,_e=new c.pointGeometry(C.getx(xe),C.gety(xe)),Ae=nr(_e,f),Oe=Ae.signedDistanceFromCamera>0?Ae.point:bo(O,_e,Se,1,f),Ee=oi(h.writingMode,Se,Oe,Y);if(Ee)return Ee}const le=ai(X*S.getoffsetX(h.glyphStartIndex),ae,se,s,L,O,h.segment,h.lineStartIndex,h.lineStartIndex+h.lineLength,C,b,j,$);if(!le)return{notEnoughRoom:!0};ue=[le]}for(const le of ue)c.addDynamicAttributes(I,le.point,le.angle);return{}}function bo(h,n,s,p,f){const b=nr(h.add(h.sub(n)._unit()),f).point,_=s.sub(b);return s.add(_._mult(p/_.mag()))}function ai(h,n,s,p,f,b,_,S,C,I,L,O,j){const Y=p?h-n:h+n;let $=Y>0?1:-1,X=0;p&&($*=-1,X=Math.PI),$<0&&(X+=Math.PI);let ae=$>0?S+_:S+_+1,se=f,ue=f,le=0,Se=0;const xe=Math.abs(Y),_e=[];for(;le+Se<=xe;){if(ae+=$,ae<S||ae>=C)return null;if(ue=se,_e.push(se),se=O[ae],se===void 0){const Ge=new c.pointGeometry(I.getx(ae),I.gety(ae)),mt=nr(Ge,L);if(mt.signedDistanceFromCamera>0)se=O[ae]=mt.point;else{const Dt=ae-$;se=bo(le===0?b:new c.pointGeometry(I.getx(Dt),I.gety(Dt)),Ge,ue,xe-le+1,L)}}le+=Se,Se=ue.dist(se)}const Ae=(xe-le)/Se,Oe=se.sub(ue),Ee=Oe.mult(Ae)._add(ue);Ee._add(Oe._unit()._perp()._mult(s*$));const et=X+Math.atan2(se.y-ue.y,se.x-ue.x);return _e.push(Ee),{point:Ee,angle:j?et:0,path:_e}}const $i=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ir(h,n){for(let s=0;s<h;s++){const p=n.length;n.resize(p+4),n.float32.set($i,3*p)}}function Qt(h,n,s){const p=n[0],f=n[1];return h[0]=s[0]*p+s[4]*f+s[12],h[1]=s[1]*p+s[5]*f+s[13],h[3]=s[3]*p+s[7]*f+s[15],h}const Gn=100;class vo{constructor(n,s=new $n(n.width+200,n.height+200,25),p=new $n(n.width+200,n.height+200,25)){this.transform=n,this.grid=s,this.ignoredGrid=p,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Gn,this.screenBottomBoundary=n.height+Gn,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200}placeCollisionBox(n,s,p,f,b){const _=this.projectAndGetPerspectiveRatio(f,n.anchorPointX,n.anchorPointY),S=p*_.perspectiveRatio,C=n.x1*S+_.point.x,I=n.y1*S+_.point.y,L=n.x2*S+_.point.x,O=n.y2*S+_.point.y;return!this.isInsideGrid(C,I,L,O)||s!=="always"&&this.grid.hitTest(C,I,L,O,s,b)?{box:[],offscreen:!1}:{box:[C,I,L,O],offscreen:this.isOffscreen(C,I,L,O)}}placeCollisionCircles(n,s,p,f,b,_,S,C,I,L,O,j,Y){const $=[],X=new c.pointGeometry(s.anchorX,s.anchorY),ae=nr(X,_),se=Ne(this.transform.cameraToCenterDistance,ae.signedDistanceFromCamera),ue=(L?b/se:b*se)/c.ONE_EM,le=nr(X,S).point,Se=dn(ue,f,s.lineOffsetX*ue,s.lineOffsetY*ue,!1,le,X,s,p,S,{},!1);let xe=!1,_e=!1,Ae=!0;if(Se){const Oe=.5*j*se+Y,Ee=new c.pointGeometry(-100,-100),et=new c.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ge=new ji,mt=Se.first,Dt=Se.last;let Tt=[];for(let ft=mt.path.length-1;ft>=1;ft--)Tt.push(mt.path[ft]);for(let ft=1;ft<Dt.path.length;ft++)Tt.push(Dt.path[ft]);const Mt=2.5*Oe;if(C){const ft=Tt.map(Ot=>nr(Ot,C));Tt=ft.some(Ot=>Ot.signedDistanceFromCamera<=0)?[]:ft.map(Ot=>Ot.point)}let mr=[];if(Tt.length>0){const ft=Tt[0].clone(),Ot=Tt[0].clone();for(let Xt=1;Xt<Tt.length;Xt++)ft.x=Math.min(ft.x,Tt[Xt].x),ft.y=Math.min(ft.y,Tt[Xt].y),Ot.x=Math.max(Ot.x,Tt[Xt].x),Ot.y=Math.max(Ot.y,Tt[Xt].y);mr=ft.x>=Ee.x&&Ot.x<=et.x&&ft.y>=Ee.y&&Ot.y<=et.y?[Tt]:Ot.x<Ee.x||ft.x>et.x||Ot.y<Ee.y||ft.y>et.y?[]:c.clipLine([Tt],Ee.x,Ee.y,et.x,et.y)}for(const ft of mr){Ge.reset(ft,.25*Oe);let Ot=0;Ot=Ge.length<=.5*Oe?1:Math.ceil(Ge.paddedLength/Mt)+1;for(let Xt=0;Xt<Ot;Xt++){const Qr=Xt/Math.max(Ot-1,1),An=Ge.lerp(Qr),Zn=An.x+Gn,Hn=An.y+Gn;$.push(Zn,Hn,Oe,0);const ao=Zn-Oe,kn=Hn-Oe,Ei=Zn+Oe,Io=Hn+Oe;if(Ae=Ae&&this.isOffscreen(ao,kn,Ei,Io),_e=_e||this.isInsideGrid(ao,kn,Ei,Io),n!=="always"&&this.grid.hitTestCircle(Zn,Hn,Oe,n,O)&&(xe=!0,!I))return{circles:[],offscreen:!1,collisionDetected:xe}}}}return{circles:!I&&xe||!_e?[]:$,offscreen:Ae,collisionDetected:xe}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let p=1/0,f=1/0,b=-1/0,_=-1/0;for(const L of n){const O=new c.pointGeometry(L.x+Gn,L.y+Gn);p=Math.min(p,O.x),f=Math.min(f,O.y),b=Math.max(b,O.x),_=Math.max(_,O.y),s.push(O)}const S=this.grid.query(p,f,b,_).concat(this.ignoredGrid.query(p,f,b,_)),C={},I={};for(const L of S){const O=L.key;if(C[O.bucketInstanceId]===void 0&&(C[O.bucketInstanceId]={}),C[O.bucketInstanceId][O.featureIndex])continue;const j=[new c.pointGeometry(L.x1,L.y1),new c.pointGeometry(L.x2,L.y1),new c.pointGeometry(L.x2,L.y2),new c.pointGeometry(L.x1,L.y2)];c.polygonIntersectsPolygon(s,j)&&(C[O.bucketInstanceId][O.featureIndex]=!0,I[O.bucketInstanceId]===void 0&&(I[O.bucketInstanceId]=[]),I[O.bucketInstanceId].push(O.featureIndex))}return I}insertCollisionBox(n,s,p,f,b,_){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:b,collisionGroupID:_,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,p,f,b,_){const S=p?this.ignoredGrid:this.grid,C={bucketInstanceId:f,featureIndex:b,collisionGroupID:_,overlapMode:s};for(let I=0;I<n.length;I+=4)S.insertCircle(C,n[I],n[I+1],n[I+2])}projectAndGetPerspectiveRatio(n,s,p){const f=[s,p,0,1];return Qt(f,f,n),{point:new c.pointGeometry((f[0]/f[3]+1)/2*this.transform.width+Gn,(-f[1]/f[3]+1)/2*this.transform.height+Gn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/f[3]*.5}}isOffscreen(n,s,p,f){return p<Gn||n>=this.screenRightBoundary||f<Gn||s>this.screenBottomBoundary}isInsideGrid(n,s,p,f){return p>=0&&n<this.gridRightBoundary&&f>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=c.identity([]);return c.translate(n,n,[-100,-100,0]),n}}function Nr(h,n,s){return n*(c.EXTENT/(h.tileSize*Math.pow(2,s-h.tileID.overscaledZ)))}class si{constructor(n,s,p,f){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):f&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class li{constructor(n,s,p,f,b){this.text=new si(n?n.text:null,s,p,b),this.icon=new si(n?n.icon:null,s,f,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Za{constructor(n,s,p){this.text=n,this.icon=s,this.skipFade=p}}class ta{constructor(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]}}class ra{constructor(n,s,p,f,b){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=p,this.bucketIndex=f,this.tileID=b}}class G{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:p=>p.collisionGroupID===s}}return this.collisionGroups[n]}}function z(h,n,s,p,f){const{horizontalAlign:b,verticalAlign:_}=c.getAnchorAlignment(h),S=-(b-.5)*n,C=-(_-.5)*s,I=c.evaluateVariableOffset(h,p);return new c.pointGeometry(S+I[0]*f,C+I[1]*f)}function A(h,n,s,p,f,b){const{x1:_,x2:S,y1:C,y2:I,anchorPointX:L,anchorPointY:O}=h,j=new c.pointGeometry(n,s);return p&&j._rotate(f?b:-b),{x1:_+j.x,y1:C+j.y,x2:S+j.x,y2:I+j.y,anchorPointX:L,anchorPointY:O}}class U{constructor(n,s,p,f){this.transform=n.clone(),this.collisionIndex=new vo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new G(p),this.collisionCircleArrays={},this.prevPlacement=f,f&&(f.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,s,p,f){const b=p.getBucket(s),_=p.latestFeatureIndex;if(!b||!_||s.id!==b.layerIds[0])return;const S=p.collisionBoxArray,C=b.layers[0].layout,I=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),L=p.tileSize/c.EXTENT,O=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),j=C.get("text-pitch-alignment")==="map",Y=C.get("text-rotation-alignment")==="map",$=Nr(p,1,this.transform.zoom),X=pn(O,j,Y,this.transform,$);let ae=null;if(j){const ue=yo(O,j,Y,this.transform,$);ae=c.multiply([],this.transform.labelPlaneMatrix,ue)}this.retainedQueryData[b.bucketInstanceId]=new ra(b.bucketInstanceId,_,b.sourceLayerIndex,b.index,p.tileID);const se={bucket:b,layout:C,posMatrix:O,textLabelPlaneMatrix:X,labelToScreenMatrix:ae,scale:I,textPixelRatio:L,holdingForFade:p.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(f)for(const ue of b.sortKeyRanges){const{sortKey:le,symbolInstanceStart:Se,symbolInstanceEnd:xe}=ue;n.push({sortKey:le,symbolInstanceStart:Se,symbolInstanceEnd:xe,parameters:se})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:se})}attemptAnchorPlacement(n,s,p,f,b,_,S,C,I,L,O,j,Y,$,X){const ae=[j.textOffset0,j.textOffset1],se=z(n,p,f,ae,b),ue=this.collisionIndex.placeCollisionBox(A(s,se.x,se.y,_,S,this.transform.angle),O,C,I,L.predicate);if((!X||this.collisionIndex.placeCollisionBox(A(X,se.x,se.y,_,S,this.transform.angle),O,C,I,L.predicate).box.length!==0)&&ue.box.length>0){let le;return this.prevPlacement&&this.prevPlacement.variableOffsets[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID].text&&(le=this.prevPlacement.variableOffsets[j.crossTileID].anchor),this.variableOffsets[j.crossTileID]={textOffset:ae,width:p,height:f,anchor:n,textBoxScale:b,prevAnchor:le},this.markUsedJustification(Y,n,j,$),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,$,j),this.placedOrientations[j.crossTileID]=$),{shift:se,placedGlyphBoxes:ue}}}placeLayerBucketPart(n,s,p){const{bucket:f,layout:b,posMatrix:_,textLabelPlaneMatrix:S,labelToScreenMatrix:C,textPixelRatio:I,holdingForFade:L,collisionBoxArray:O,partiallyEvaluatedTextSize:j,collisionGroup:Y}=n.parameters,$=b.get("text-optional"),X=b.get("icon-optional"),ae=c.getOverlapMode(b,"text-overlap","text-allow-overlap"),se=ae==="always",ue=c.getOverlapMode(b,"icon-overlap","icon-allow-overlap"),le=ue==="always",Se=b.get("text-rotation-alignment")==="map",xe=b.get("text-pitch-alignment")==="map",_e=b.get("icon-text-fit")!=="none",Ae=b.get("symbol-z-order")==="viewport-y",Oe=se&&(le||!f.hasIconData()||X),Ee=le&&(se||!f.hasTextData()||$);!f.collisionArrays&&O&&f.deserializeCollisionBoxes(O);const et=(Ge,mt)=>{if(s[Ge.crossTileID])return;if(L)return void(this.placements[Ge.crossTileID]=new Za(!1,!1,!1));let Dt=!1,Tt=!1,Mt=!0,mr=null,ft={box:null,offscreen:null},Ot={box:null,offscreen:null},Xt=null,Qr=null,An=null,Zn=0,Hn=0,ao=0;mt.textFeatureIndex?Zn=mt.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(Zn=Ge.featureIndex),mt.verticalTextFeatureIndex&&(Hn=mt.verticalTextFeatureIndex);const kn=mt.textBox;if(kn){const Dn=$t=>{let Mr=c.WritingMode.horizontal;if(f.allowVerticalPlacement&&!$t&&this.prevPlacement){const hn=this.prevPlacement.placedOrientations[Ge.crossTileID];hn&&(this.placedOrientations[Ge.crossTileID]=hn,Mr=hn,this.markUsedOrientation(f,Mr,Ge))}return Mr},Bt=($t,Mr)=>{if(f.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&mt.verticalTextBox){for(const hn of f.writingModes)if(hn===c.WritingMode.vertical?(ft=Mr(),Ot=ft):ft=$t(),ft&&ft.box&&ft.box.length)break}else ft=$t()};if(b.get("text-variable-anchor")){let $t=b.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ge.crossTileID]){const lr=this.prevPlacement.variableOffsets[Ge.crossTileID];$t.indexOf(lr.anchor)>0&&($t=$t.filter(Po=>Po!==lr.anchor),$t.unshift(lr.anchor))}const Mr=(lr,Po,Si)=>{const ll=lr.x2-lr.x1,Wc=lr.y2-lr.y1,cl=Ge.textBoxScale,qp=_e&&ue==="never"?Po:null;let Mo={box:[],offscreen:!1};const ul=ae!=="never"?2*$t.length:$t.length;for(let Ci=0;Ci<ul;++Ci){const fa=this.attemptAnchorPlacement($t[Ci%$t.length],lr,ll,Wc,cl,Se,xe,I,_,Y,Ci>=$t.length?ae:"never",Ge,f,Si,qp);if(fa&&(Mo=fa.placedGlyphBoxes,Mo&&Mo.box&&Mo.box.length)){Dt=!0,mr=fa.shift;break}}return Mo};Bt(()=>Mr(kn,mt.iconBox,c.WritingMode.horizontal),()=>{const lr=mt.verticalTextBox;return f.allowVerticalPlacement&&!(ft&&ft.box&&ft.box.length)&&Ge.numVerticalGlyphVertices>0&&lr?Mr(lr,mt.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),ft&&(Dt=ft.box,Mt=ft.offscreen);const hn=Dn(ft&&ft.box);if(!Dt&&this.prevPlacement){const lr=this.prevPlacement.variableOffsets[Ge.crossTileID];lr&&(this.variableOffsets[Ge.crossTileID]=lr,this.markUsedJustification(f,lr.anchor,Ge,hn))}}else{const $t=(Mr,hn)=>{const lr=this.collisionIndex.placeCollisionBox(Mr,ae,I,_,Y.predicate);return lr&&lr.box&&lr.box.length&&(this.markUsedOrientation(f,hn,Ge),this.placedOrientations[Ge.crossTileID]=hn),lr};Bt(()=>$t(kn,c.WritingMode.horizontal),()=>{const Mr=mt.verticalTextBox;return f.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&Mr?$t(Mr,c.WritingMode.vertical):{box:null,offscreen:null}}),Dn(ft&&ft.box&&ft.box.length)}}if(Xt=ft,Dt=Xt&&Xt.box&&Xt.box.length>0,Mt=Xt&&Xt.offscreen,Ge.useRuntimeCollisionCircles){const Dn=f.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex),Bt=c.evaluateSizeForFeature(f.textSizeData,j,Dn),$t=b.get("text-padding");Qr=this.collisionIndex.placeCollisionCircles(ae,Dn,f.lineVertexArray,f.glyphOffsetArray,Bt,_,S,C,p,xe,Y.predicate,Ge.collisionCircleDiameter,$t),Dt=se||Qr.circles.length>0&&!Qr.collisionDetected,Mt=Mt&&Qr.offscreen}if(mt.iconFeatureIndex&&(ao=mt.iconFeatureIndex),mt.iconBox){const Dn=Bt=>{const $t=_e&&mr?A(Bt,mr.x,mr.y,Se,xe,this.transform.angle):Bt;return this.collisionIndex.placeCollisionBox($t,ue,I,_,Y.predicate)};Ot&&Ot.box&&Ot.box.length&&mt.verticalIconBox?(An=Dn(mt.verticalIconBox),Tt=An.box.length>0):(An=Dn(mt.iconBox),Tt=An.box.length>0),Mt=Mt&&An.offscreen}const Ei=$||Ge.numHorizontalGlyphVertices===0&&Ge.numVerticalGlyphVertices===0,Io=X||Ge.numIconVertices===0;if(Ei||Io?Io?Ei||(Tt=Tt&&Dt):Dt=Tt&&Dt:Tt=Dt=Tt&&Dt,Dt&&Xt&&Xt.box&&this.collisionIndex.insertCollisionBox(Xt.box,ae,b.get("text-ignore-placement"),f.bucketInstanceId,Ot&&Ot.box&&Hn?Hn:Zn,Y.ID),Tt&&An&&this.collisionIndex.insertCollisionBox(An.box,ue,b.get("icon-ignore-placement"),f.bucketInstanceId,ao,Y.ID),Qr&&(Dt&&this.collisionIndex.insertCollisionCircles(Qr.circles,ae,b.get("text-ignore-placement"),f.bucketInstanceId,Zn,Y.ID),p)){const Dn=f.bucketInstanceId;let Bt=this.collisionCircleArrays[Dn];Bt===void 0&&(Bt=this.collisionCircleArrays[Dn]=new ta);for(let $t=0;$t<Qr.circles.length;$t+=4)Bt.circles.push(Qr.circles[$t+0]),Bt.circles.push(Qr.circles[$t+1]),Bt.circles.push(Qr.circles[$t+2]),Bt.circles.push(Qr.collisionDetected?1:0)}this.placements[Ge.crossTileID]=new Za(Dt||Oe,Tt||Ee,Mt||f.justReloaded),s[Ge.crossTileID]=!0};if(Ae){const Ge=f.getSortedSymbolIndexes(this.transform.angle);for(let mt=Ge.length-1;mt>=0;--mt){const Dt=Ge[mt];et(f.symbolInstances.get(Dt),f.collisionArrays[Dt])}}else for(let Ge=n.symbolInstanceStart;Ge<n.symbolInstanceEnd;Ge++)et(f.symbolInstances.get(Ge),f.collisionArrays[Ge]);if(p&&f.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[f.bucketInstanceId];c.invert(Ge.invProjMatrix,_),Ge.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}markUsedJustification(n,s,p,f){let b;b=f===c.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(s)];const _=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const S of _)S>=0&&(n.text.placedSymbolArray.get(S).crossTileID=b>=0&&S!==b?0:p.crossTileID)}markUsedOrientation(n,s,p){const f=s===c.WritingMode.horizontal||s===c.WritingMode.horizontalOnly?s:0,b=s===c.WritingMode.vertical?s:0,_=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const S of _)n.text.placedSymbolArray.get(S).placedOrientation=f;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let p=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const f=s?s.symbolFadeChange(n):1,b=s?s.opacities:{},_=s?s.variableOffsets:{},S=s?s.placedOrientations:{};for(const C in this.placements){const I=this.placements[C],L=b[C];L?(this.opacities[C]=new li(L,f,I.text,I.icon),p=p||I.text!==L.text.placed||I.icon!==L.icon.placed):(this.opacities[C]=new li(null,f,I.text,I.icon,I.skipFade),p=p||I.text||I.icon)}for(const C in b){const I=b[C];if(!this.opacities[C]){const L=new li(I,f,!1,!1);L.isHidden()||(this.opacities[C]=L,p=p||I.text.placed||I.icon.placed)}}for(const C in _)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=_[C]);for(const C in S)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=S[C]);p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const p={};for(const f of s){const b=f.getBucket(n);b&&f.latestFeatureIndex&&n.id===b.layerIds[0]&&this.updateBucketOpacities(b,p,f.collisionBoxArray)}}updateBucketOpacities(n,s,p){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const f=n.layers[0].layout,b=new li(null,0,!1,!1,!0),_=f.get("text-allow-overlap"),S=f.get("icon-allow-overlap"),C=f.get("text-variable-anchor"),I=f.get("text-rotation-alignment")==="map",L=f.get("text-pitch-alignment")==="map",O=f.get("icon-text-fit")!=="none",j=new li(null,0,_&&(S||!n.hasIconData()||f.get("icon-optional")),S&&(_||!n.hasTextData()||f.get("text-optional")),!0);!n.collisionArrays&&p&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(p);const Y=($,X,ae)=>{for(let se=0;se<X/4;se++)$.opacityVertexArray.emplaceBack(ae)};for(let $=0;$<n.symbolInstances.length;$++){const X=n.symbolInstances.get($),{numHorizontalGlyphVertices:ae,numVerticalGlyphVertices:se,crossTileID:ue}=X;let le=this.opacities[ue];s[ue]?le=b:le||(le=j,this.opacities[ue]=le),s[ue]=!0;const Se=X.numIconVertices>0,xe=this.placedOrientations[X.crossTileID],_e=xe===c.WritingMode.vertical,Ae=xe===c.WritingMode.horizontal||xe===c.WritingMode.horizontalOnly;if(ae>0||se>0){const Oe=ge(le.text);Y(n.text,ae,_e?tt:Oe),Y(n.text,se,Ae?tt:Oe);const Ee=le.text.isHidden();[X.rightJustifiedTextSymbolIndex,X.centerJustifiedTextSymbolIndex,X.leftJustifiedTextSymbolIndex].forEach(mt=>{mt>=0&&(n.text.placedSymbolArray.get(mt).hidden=Ee||_e?1:0)}),X.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(X.verticalPlacedTextSymbolIndex).hidden=Ee||Ae?1:0);const et=this.variableOffsets[X.crossTileID];et&&this.markUsedJustification(n,et.anchor,X,xe);const Ge=this.placedOrientations[X.crossTileID];Ge&&(this.markUsedJustification(n,"left",X,Ge),this.markUsedOrientation(n,Ge,X))}if(Se){const Oe=ge(le.icon),Ee=!(O&&X.verticalPlacedIconSymbolIndex&&_e);X.placedIconSymbolIndex>=0&&(Y(n.icon,X.numIconVertices,Ee?Oe:tt),n.icon.placedSymbolArray.get(X.placedIconSymbolIndex).hidden=le.icon.isHidden()),X.verticalPlacedIconSymbolIndex>=0&&(Y(n.icon,X.numVerticalIconVertices,Ee?tt:Oe),n.icon.placedSymbolArray.get(X.verticalPlacedIconSymbolIndex).hidden=le.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Oe=n.collisionArrays[$];if(Oe){let Ee=new c.pointGeometry(0,0);if(Oe.textBox||Oe.verticalTextBox){let Ge=!0;if(C){const mt=this.variableOffsets[ue];mt?(Ee=z(mt.anchor,mt.width,mt.height,mt.textOffset,mt.textBoxScale),I&&Ee._rotate(L?this.transform.angle:-this.transform.angle)):Ge=!1}Oe.textBox&&q(n.textCollisionBox.collisionVertexArray,le.text.placed,!Ge||_e,Ee.x,Ee.y),Oe.verticalTextBox&&q(n.textCollisionBox.collisionVertexArray,le.text.placed,!Ge||Ae,Ee.x,Ee.y)}const et=Boolean(!Ae&&Oe.verticalIconBox);Oe.iconBox&&q(n.iconCollisionBox.collisionVertexArray,le.icon.placed,et,O?Ee.x:0,O?Ee.y:0),Oe.verticalIconBox&&q(n.iconCollisionBox.collisionVertexArray,le.icon.placed,!et,O?Ee.x:0,O?Ee.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){const $=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=$.invProjMatrix,n.placementViewportMatrix=$.viewportMatrix,n.collisionCircleArray=$.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const p=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function q(h,n,s,p,f){h.emplaceBack(n?1:0,s?1:0,p||0,f||0),h.emplaceBack(n?1:0,s?1:0,p||0,f||0),h.emplaceBack(n?1:0,s?1:0,p||0,f||0),h.emplaceBack(n?1:0,s?1:0,p||0,f||0)}const W=Math.pow(2,25),ie=Math.pow(2,24),te=Math.pow(2,17),ne=Math.pow(2,16),oe=Math.pow(2,9),ve=Math.pow(2,8),ze=Math.pow(2,1);function ge(h){if(h.opacity===0&&!h.placed)return 0;if(h.opacity===1&&h.placed)return 4294967295;const n=h.placed?1:0,s=Math.floor(127*h.opacity);return s*W+n*ie+s*te+n*ne+s*oe+n*ve+s*ze+n}const tt=0;class Xe{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,p,f,b){const _=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(_,f,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,_.sort((S,C)=>S.sortKey-C.sortKey));this._currentPartIndex<_.length;)if(s.placeLayerBucketPart(_[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,b())return!0;return!1}}class nt{constructor(n,s,p,f,b,_,S){this.placement=new U(n,b,_,S),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=f,this._done=!1}isDone(){return this._done}continuePlacement(n,s,p){const f=c.exported.now(),b=()=>{const _=c.exported.now()-f;return!this._forceFullPlacement&&_>2};for(;this._currentPlacementIndex>=0;){const _=s[n[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(_.type==="symbol"&&(!_.minzoom||_.minzoom<=S)&&(!_.maxzoom||_.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new Xe(_)),this._inProgressLayer.continuePlacement(p[_.source],this.placement,this._showCollisionBoxes,_,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const ct=512/c.EXTENT/2;class Lt{constructor(n,s,p){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let f=0;f<s.length;f++){const b=s.get(f),_=b.key;this.indexedSymbolInstances[_]||(this.indexedSymbolInstances[_]=[]),this.indexedSymbolInstances[_].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,n)})}}getScaledCoordinates(n,s){const p=ct/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*c.EXTENT+n.anchorX)*p),y:Math.floor((s.canonical.y*c.EXTENT+n.anchorY)*p)}}findMatches(n,s,p){const f=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let b=0;b<n.length;b++){const _=n.get(b);if(_.crossTileID)continue;const S=this.indexedSymbolInstances[_.key];if(!S)continue;const C=this.getScaledCoordinates(_,s);for(const I of S)if(Math.abs(I.coord.x-C.x)<=f&&Math.abs(I.coord.y-C.y)<=f&&!p[I.crossTileID]){p[I.crossTileID]=!0,_.crossTileID=I.crossTileID;break}}}}class Pt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ct{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const p in this.indexes){const f=this.indexes[p],b={};for(const _ in f){const S=f[_];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+s),b[S.tileID.key]=S}this.indexes[p]=b}this.lng=n}addBucket(n,s,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let b=0;b<s.symbolInstances.length;b++)s.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const f=this.usedCrossTileIDs[n.overscaledZ];for(const b in this.indexes){const _=this.indexes[b];if(Number(b)>n.overscaledZ)for(const S in _){const C=_[S];C.tileID.isChildOf(n)&&C.findMatches(s.symbolInstances,n,f)}else{const S=_[n.scaledTo(Number(b)).key];S&&S.findMatches(s.symbolInstances,n,f)}}for(let b=0;b<s.symbolInstances.length;b++){const _=s.symbolInstances.get(b);_.crossTileID||(_.crossTileID=p.generate(),f[_.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Lt(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const p in s.indexedSymbolInstances)for(const f of s.indexedSymbolInstances[p])delete this.usedCrossTileIDs[n][f.crossTileID]}removeStaleBuckets(n){let s=!1;for(const p in this.indexes){const f=this.indexes[p];for(const b in f)n[f[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,f[b]),delete f[b],s=!0)}return s}}class vt{constructor(){this.layerIndexes={},this.crossTileIDs=new Pt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,p){let f=this.layerIndexes[n.id];f===void 0&&(f=this.layerIndexes[n.id]=new Ct);let b=!1;const _={};f.handleWrapJump(p);for(const S of s){const C=S.getBucket(n);C&&n.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(S.tileID,C,this.crossTileIDs)&&(b=!0),_[C.bucketInstanceId]=!0)}return f.removeStaleBuckets(_)&&(b=!0),b}pruneUnusedLayers(n){const s={};n.forEach(p=>{s[p]=!0});for(const p in this.layerIndexes)s[p]||delete this.layerIndexes[p]}}const xt=(h,n)=>c.emitValidationErrors(h,n&&n.filter(s=>s.identifier!=="source.canvas")),wr=c.pick(zt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),xr=c.pick(zt,["setCenter","setZoom","setBearing","setPitch"]),qr=function(){const h={},n=c.spec.$version;for(const s in c.spec.$root){const p=c.spec.$root[s];if(p.required){let f=null;f=s==="version"?n:p.type==="array"?[]:{},f!=null&&(h[s]=f)}}return h}();class Jr extends c.Evented{constructor(n,s={}){super(),this.map=n,this.dispatcher=new Tr(Gr(),this),this.imageManager=new Te,this.imageManager.setEventedParent(this),this.glyphManager=new ht(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Rt(256,512),this.crossTileSymbolIndex=new vt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const p=this;this._rtlTextPluginCallback=Jr.registerForPluginStateChange(f=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:f.pluginStatus,pluginURL:f.pluginURL},(b,_)=>{if(c.triggerPluginCompletionEvent(b),_&&_.every(S=>S))for(const S in p.sourceCaches)p.sourceCaches[S].reload()})}),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const b=this.sourceCaches[f.sourceId];if(!b)return;const _=b.getSource();if(_&&_.vectorLayerIds)for(const S in this._layers){const C=this._layers[S];C.source===_.id&&this._validateLayer(C)}})}loadURL(n,s={}){this.fire(new c.Event("dataloading",{dataType:"style"}));const p=typeof s.validate!="boolean"||s.validate,f=this.map._requestManager.transformRequest(n,c.ResourceType.Style);this._request=c.getJSON(f,(b,_)=>{this._request=null,b?this.fire(new c.ErrorEvent(b)):_&&this._load(_,p)})}loadJSON(n,s={}){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,this._load(n,s.validate!==!1)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(qr,!1)}_load(n,s){if(s&&xt(this,c.validateStyle(n)))return;this._loaded=!0,this.stylesheet=n;for(const f in n.sources)this.addSource(f,n.sources[f],{validate:!1});n.sprite?this._loadSprite(n.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);const p=no(this.stylesheet.layers);this._order=p.map(f=>f.id),this._layers={},this._serializedLayers={};for(let f of p)f=c.createStyleLayer(f),f.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=f,this._serializedLayers[f.id]=f.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new qt(this.stylesheet.light),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}_loadSprite(n){this._spriteRequest=function(s,p,f,b){let _,S,C;const I=f>1?"@2x":"";let L=c.getJSON(p.transformRequest(p.normalizeSpriteURL(s,I,".json"),c.ResourceType.SpriteJSON),(Y,$)=>{L=null,C||(C=Y,_=$,j())}),O=c.getImage(p.transformRequest(p.normalizeSpriteURL(s,I,".png"),c.ResourceType.SpriteImage),(Y,$)=>{O=null,C||(C=Y,S=$,j())});function j(){if(C)b(C);else if(_&&S){const Y=c.exported.getImageData(S),$={};for(const X in _){const{width:ae,height:se,x:ue,y:le,sdf:Se,pixelRatio:xe,stretchX:_e,stretchY:Ae,content:Oe}=_[X],Ee=new c.RGBAImage({width:ae,height:se});c.RGBAImage.copy(Y,Ee,{x:ue,y:le},{x:0,y:0},{width:ae,height:se}),$[X]={data:Ee,pixelRatio:xe,sdf:Se,stretchX:_e,stretchY:Ae,content:Oe}}b(null,$)}}return{cancel(){L&&(L.cancel(),L=null),O&&(O.cancel(),O=null)}}}(n,this.map._requestManager,this.map.getPixelRatio(),(s,p)=>{if(this._spriteRequest=null,s)this.fire(new c.ErrorEvent(s));else if(p)for(const f in p)this.imageManager.addImage(f,p[f]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))})}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const p=n.sourceLayer;if(!p)return;const f=s.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${f.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(n){const s=[];for(const p of n){const f=this._layers[p];f.type!=="custom"&&s.push(f.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(this._changed){const f=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(f.length||b.length)&&this._updateWorkerLayers(f,b);for(const _ in this._updatedSources){const S=this._updatedSources[_];S==="reload"?this._reloadSource(_):S==="clear"&&this._clearSource(_)}this._updateTilesForChangedImages();for(const _ in this._updatedPaintProps)this._layers[_].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const p={};for(const f in this.sourceCaches){const b=this.sourceCaches[f];p[f]=b.used,b.used=!1}for(const f of this._order){const b=this._layers[f];b.recalculate(n,this._availableImages),!b.isHidden(n.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const f in p){const b=this.sourceCaches[f];p[f]!==b.used&&b.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),xt(this,c.validateStyle(n)))return!1;(n=c.clone$1(n)).layers=no(n.layers);const s=function(f,b){if(!f)return[{command:zt.setStyle,args:[b]}];let _=[];try{if(!H(f.version,b.version))return[{command:zt.setStyle,args:[b]}];H(f.center,b.center)||_.push({command:zt.setCenter,args:[b.center]}),H(f.zoom,b.zoom)||_.push({command:zt.setZoom,args:[b.zoom]}),H(f.bearing,b.bearing)||_.push({command:zt.setBearing,args:[b.bearing]}),H(f.pitch,b.pitch)||_.push({command:zt.setPitch,args:[b.pitch]}),H(f.sprite,b.sprite)||_.push({command:zt.setSprite,args:[b.sprite]}),H(f.glyphs,b.glyphs)||_.push({command:zt.setGlyphs,args:[b.glyphs]}),H(f.transition,b.transition)||_.push({command:zt.setTransition,args:[b.transition]}),H(f.light,b.light)||_.push({command:zt.setLight,args:[b.light]});const S={},C=[];(function(L,O,j,Y){let $;for($ in O=O||{},L=L||{})Object.prototype.hasOwnProperty.call(L,$)&&(Object.prototype.hasOwnProperty.call(O,$)||ii($,j,Y));for($ in O)Object.prototype.hasOwnProperty.call(O,$)&&(Object.prototype.hasOwnProperty.call(L,$)?H(L[$],O[$])||(L[$].type==="geojson"&&O[$].type==="geojson"&&io(L,O,$)?j.push({command:zt.setGeoJSONSourceData,args:[$,O[$].data]}):wi($,O,j,Y)):ni($,O,j))})(f.sources,b.sources,C,S);const I=[];f.layers&&f.layers.forEach(L=>{S[L.source]?_.push({command:zt.removeLayer,args:[L.id]}):I.push(L)}),_=_.concat(C),function(L,O,j){O=O||[];const Y=(L=L||[]).map($e),$=O.map($e),X=L.reduce(xo,{}),ae=O.reduce(xo,{}),se=Y.slice(),ue=Object.create(null);let le,Se,xe,_e,Ae,Oe,Ee;for(le=0,Se=0;le<Y.length;le++)xe=Y[le],Object.prototype.hasOwnProperty.call(ae,xe)?Se++:(j.push({command:zt.removeLayer,args:[xe]}),se.splice(se.indexOf(xe,Se),1));for(le=0,Se=0;le<$.length;le++)xe=$[$.length-1-le],se[se.length-1-le]!==xe&&(Object.prototype.hasOwnProperty.call(X,xe)?(j.push({command:zt.removeLayer,args:[xe]}),se.splice(se.lastIndexOf(xe,se.length-Se),1)):Se++,Oe=se[se.length-le],j.push({command:zt.addLayer,args:[ae[xe],Oe]}),se.splice(se.length-le,0,xe),ue[xe]=!0);for(le=0;le<$.length;le++)if(xe=$[le],_e=X[xe],Ae=ae[xe],!ue[xe]&&!H(_e,Ae))if(H(_e.source,Ae.source)&&H(_e["source-layer"],Ae["source-layer"])&&H(_e.type,Ae.type)){for(Ee in be(_e.layout,Ae.layout,j,xe,null,zt.setLayoutProperty),be(_e.paint,Ae.paint,j,xe,null,zt.setPaintProperty),H(_e.filter,Ae.filter)||j.push({command:zt.setFilter,args:[xe,Ae.filter]}),H(_e.minzoom,Ae.minzoom)&&H(_e.maxzoom,Ae.maxzoom)||j.push({command:zt.setLayerZoomRange,args:[xe,Ae.minzoom,Ae.maxzoom]}),_e)Object.prototype.hasOwnProperty.call(_e,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?be(_e[Ee],Ae[Ee],j,xe,Ee.slice(6),zt.setPaintProperty):H(_e[Ee],Ae[Ee])||j.push({command:zt.setLayerProperty,args:[xe,Ee,Ae[Ee]]}));for(Ee in Ae)Object.prototype.hasOwnProperty.call(Ae,Ee)&&!Object.prototype.hasOwnProperty.call(_e,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?be(_e[Ee],Ae[Ee],j,xe,Ee.slice(6),zt.setPaintProperty):H(_e[Ee],Ae[Ee])||j.push({command:zt.setLayerProperty,args:[xe,Ee,Ae[Ee]]}))}else j.push({command:zt.removeLayer,args:[xe]}),Oe=se[se.lastIndexOf(xe)+1],j.push({command:zt.addLayer,args:[Ae,Oe]})}(I,b.layers,_)}catch(S){console.warn("Unable to compute style diff:",S),_=[{command:zt.setStyle,args:[b]}]}return _}(this.serialize(),n).filter(f=>!(f.command in xr));if(s.length===0)return!1;const p=s.filter(f=>!(f.command in wr));if(p.length>0)throw new Error(`Unimplemented: ${p.map(f=>f.command).join(", ")}.`);return s.forEach(f=>{f.command!=="setTransition"&&this[f.command].apply(this,f.args)}),this.stylesheet=n,!0}addImage(n,s){if(this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,p={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(c.validateStyle.source,`sources.${n}`,s,null,p))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const f=this.sourceCaches[n]=new _r(n,s,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:f.serialize(),sourceId:n})),f.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new c.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){this._checkLoaded(),this.sourceCaches[n].getSource().setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,p={}){this._checkLoaded();const f=n.id;if(this.getLayer(f))return void this.fire(new c.ErrorEvent(new Error(`Layer "${f}" already exists on this map.`)));let b;if(n.type==="custom"){if(xt(this,c.validateCustomStyleLayer(n)))return;b=c.createStyleLayer(n)}else{if(typeof n.source=="object"&&(this.addSource(f,n.source),n=c.clone$1(n),n=c.extend(n,{source:f})),this._validate(c.validateStyle.layer,`layers.${f}`,n,{arrayIndex:-1},p))return;b=c.createStyleLayer(n),this._validateLayer(b),b.setEventedParent(this,{layer:{id:f}}),this._serializedLayers[b.id]=b.serialize()}const _=s?this._order.indexOf(s):this._order.length;if(s&&_===-1)this.fire(new c.ErrorEvent(new Error(`Cannot add layer "${f}" before non-existing layer "${s}".`)));else{if(this._order.splice(_,0,f),this._layerOrderChanged=!0,this._layers[f]=b,this._removedLayers[f]&&b.source&&b.type!=="custom"){const S=this._removedLayers[f];delete this._removedLayers[f],S.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const p=this._order.indexOf(n);this._order.splice(p,1);const f=s?this._order.indexOf(s):this._order.length;s&&f===-1?this.fire(new c.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new c.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,p){this._checkLoaded();const f=this.getLayer(n);f?f.minzoom===s&&f.maxzoom===p||(s!=null&&(f.minzoom=s),p!=null&&(f.maxzoom=p),this._updateLayer(f)):this.fire(new c.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,p={}){this._checkLoaded();const f=this.getLayer(n);if(f){if(!H(f.filter,s))return s==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(c.validateStyle.filter,`layers.${f.id}.filter`,s,null,p)||(f.filter=c.clone$1(s),this._updateLayer(f)))}else this.fire(new c.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,s,p,f={}){this._checkLoaded();const b=this.getLayer(n);b?H(b.getLayoutProperty(s),p)||(b.setLayoutProperty(s,p,f),this._updateLayer(b)):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const p=this.getLayer(n);if(p)return p.getLayoutProperty(s);this.fire(new c.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,p,f={}){this._checkLoaded();const b=this.getLayer(n);b?H(b.getPaintProperty(s),p)||(b.setPaintProperty(s,p,f)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const p=n.source,f=n.sourceLayer,b=this.sourceCaches[p];if(b===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const _=b.getSource().type;_==="geojson"&&f?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):_!=="vector"||f?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(f,n.id,s)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const p=n.source,f=this.sourceCaches[p];if(f===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const b=f.getSource().type,_=b==="vector"?n.sourceLayer:void 0;b!=="vector"||_?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(_,n.id,s):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,p=n.sourceLayer,f=this.sourceCaches[s];if(f!==void 0)return f.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),f.getFeatureState(p,n.id)):void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.ErrorEvent(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,n=>n.serialize()),layers:this._serializeLayers(this._order)},n=>n!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=_=>this._layers[_].type==="fill-extrusion",p={},f=[];for(let _=this._order.length-1;_>=0;_--){const S=this._order[_];if(s(S)){p[S]=_;for(const C of n){const I=C[S];if(I)for(const L of I)f.push(L)}}}f.sort((_,S)=>S.intersectionZ-_.intersectionZ);const b=[];for(let _=this._order.length-1;_>=0;_--){const S=this._order[_];if(s(S))for(let C=f.length-1;C>=0;C--){const I=f[C].feature;if(p[I.layer.id]<_)break;b.push(I),f.pop()}else for(const C of n){const I=C[S];if(I)for(const L of I)b.push(L.feature)}}return b}queryRenderedFeatures(n,s,p){s&&s.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);const f={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const _ of s.layers){const S=this._layers[_];if(!S)return this.fire(new c.ErrorEvent(new Error(`The layer '${_}' does not exist in the map's style and cannot be queried for features.`))),[];f[S.source]=!0}}const b=[];s.availableImages=this._availableImages;for(const _ in this.sourceCaches)s.layers&&!f[_]||b.push(Yr(this.sourceCaches[_],this._layers,this._serializedLayers,n,s,p));return this.placement&&b.push(function(_,S,C,I,L,O,j){const Y={},$=O.queryRenderedSymbols(I),X=[];for(const ae of Object.keys($).map(Number))X.push(j[ae]);X.sort(bi);for(const ae of X){const se=ae.featureIndex.lookupSymbolFeatures($[ae.bucketInstanceId],S,ae.bucketIndex,ae.sourceLayerIndex,L.filter,L.layers,L.availableImages,_);for(const ue in se){const le=Y[ue]=Y[ue]||[],Se=se[ue];Se.sort((xe,_e)=>{const Ae=ae.featureSortOrder;if(Ae){const Oe=Ae.indexOf(xe.featureIndex);return Ae.indexOf(_e.featureIndex)-Oe}return _e.featureIndex-xe.featureIndex});for(const xe of Se)le.push(xe)}}for(const ae in Y)Y[ae].forEach(se=>{const ue=se.feature,le=C[_[ae].source].getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=le});return Y}(this._layers,this._serializedLayers,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(n,s){s&&s.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);const p=this.sourceCaches[n];return p?function(f,b){const _=f.getRenderableIds().map(I=>f.getTileByID(I)),S=[],C={};for(let I=0;I<_.length;I++){const L=_[I],O=L.tileID.canonical.key;C[O]||(C[O]=!0,L.querySourceFeatures(S,b))}return S}(p,s):[]}addSourceType(n,s,p){return Jr.getSourceType(n)?p(new Error(`A source type called "${n}" already exists.`)):(Jr.setSourceType(n,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:s.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const p=this.light.getLight();let f=!1;for(const _ in n)if(!H(n[_],p[_])){f=!0;break}if(!f)return;const b={now:c.exported.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(b)}_validate(n,s,p,f,b={}){return(!b||b.validate!==!1)&&xt(this,n.call(c.validateStyle,c.extend({key:s,style:this.serialize(),value:p,styleSpec:c.spec},f)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches){const s=this.sourceCaches[n];s.setEventedParent(null),s.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,p,f,b=!1){let _=!1,S=!1;const C={};for(const I of this._order){const L=this._layers[I];if(L.type!=="symbol")continue;if(!C[L.source]){const j=this.sourceCaches[L.source];C[L.source]=j.getRenderableIds(!0).map(Y=>j.getTileByID(Y)).sort((Y,$)=>$.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan($.tileID)?-1:1))}const O=this.crossTileSymbolIndex.addLayer(L,C[L.source],n.center.lng);_=_||O}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),n.zoom))&&(this.pauseablePlacement=new nt(n,this._order,b,s,p,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),S=!0),_&&this.pauseablePlacement.placement.setStale()),S||_)for(const I of this._order){const L=this._layers[I];L.type==="symbol"&&this.placement.updateLayerOpacities(L,C[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s,p){this.imageManager.getImages(s.icons,p),this._updateTilesForChangedImages();const f=this.sourceCaches[s.source];f&&f.setDependencies(s.tileID.key,s.type,s.icons)}getGlyphs(n,s,p){this.glyphManager.getGlyphs(s.stacks,p)}getResource(n,s,p){return c.makeRequest(s,p)}}Jr.getSourceType=function(h){return or[h]},Jr.setSourceType=function(h,n){or[h]=n},Jr.registerForPluginStateChange=c.registerForPluginStateChange;var pc=c.createLayout([{name:"a_pos",type:"Int16",components:2}]),dc={prelude:er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:er(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:er(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:er(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function er(h,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/attribute ([\w]+) ([\w]+)/g),f=h.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=b?b.concat(f):f,S={};return{fragmentSource:h=h.replace(s,(C,I,L,O,j)=>(S[j]=!0,I==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${L} ${O} ${j};
#else
uniform ${L} ${O} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${L} ${O} ${j} = u_${j};
#endif
`)),vertexSource:n=n.replace(s,(C,I,L,O,j)=>{const Y=O==="float"?"vec2":"vec4",$=j.match(/color/)?"color":Y;return S[j]?I==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${L} ${Y} a_${j};
varying ${L} ${O} ${j};
#else
uniform ${L} ${O} u_${j};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${L} ${O} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${$}(a_${j}, u_${j}_t);
#else
    ${L} ${O} ${j} = u_${j};
#endif
`:I==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${L} ${Y} a_${j};
#else
uniform ${L} ${O} u_${j};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${L} ${O} ${j} = a_${j};
#else
    ${L} ${O} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${L} ${O} ${j} = unpack_mix_${$}(a_${j}, u_${j}_t);
#else
    ${L} ${O} ${j} = u_${j};
#endif
`}),staticAttributes:p,staticUniforms:_}}class qh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,p,f,b,_,S,C){this.context=n;let I=this.boundPaintVertexBuffers.length!==f.length;for(let L=0;!I&&L<f.length;L++)this.boundPaintVertexBuffers[L]!==f[L]&&(I=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===p&&!I&&this.boundIndexBuffer===b&&this.boundVertexOffset===_&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===C?(n.bindVertexArrayOES.set(this.vao),S&&S.bind(),b&&b.dynamicDraw&&b.bind(),C&&C.bind()):this.freshBind(s,p,f,b,_,S,C)}freshBind(n,s,p,f,b,_,S){let C;const I=n.numAttributes,L=this.context,O=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=f,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=_,this.boundDynamicVertexBuffer2=S;else{C=L.currentNumAttributes||0;for(let j=I;j<C;j++)O.disableVertexAttribArray(j)}s.enableAttributes(O,n);for(const j of p)j.enableAttributes(O,n);_&&_.enableAttributes(O,n),S&&S.enableAttributes(O,n),s.bind(),s.setVertexAttribPointers(O,n,b);for(const j of p)j.bind(),j.setVertexAttribPointers(O,n,b);_&&(_.bind(),_.setVertexAttribPointers(O,n,b)),f&&f.bind(),S&&(S.bind(),S.setVertexAttribPointers(O,n,b)),L.currentNumAttributes=I}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function hc(h){const n=[];for(let s=0;s<h.length;s++){if(h[s]===null)continue;const p=h[s].split(" ");n.push(p.pop())}return n}class Zh{constructor(n,s,p,f,b,_){const S=n.gl;this.program=S.createProgram();const C=hc(p.staticAttributes),I=f?f.getBinderAttributes():[],L=C.concat(I),O=p.staticUniforms?hc(p.staticUniforms):[],j=f?f.getBinderUniforms():[],Y=O.concat(j),$=[];for(const xe of Y)$.indexOf(xe)<0&&$.push(xe);const X=f?f.defines():[];_&&X.push("#define OVERDRAW_INSPECTOR;");const ae=X.concat(dc.prelude.fragmentSource,p.fragmentSource).join(`
`),se=X.concat(dc.prelude.vertexSource,p.vertexSource).join(`
`),ue=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(ue,ae),S.compileShader(ue),S.attachShader(this.program,ue);const le=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(le,se),S.compileShader(le),S.attachShader(this.program,le),this.attributes={};const Se={};this.numAttributes=L.length;for(let xe=0;xe<this.numAttributes;xe++)L[xe]&&(S.bindAttribLocation(this.program,xe,L[xe]),this.attributes[L[xe]]=xe);S.linkProgram(this.program),S.deleteShader(le),S.deleteShader(ue);for(let xe=0;xe<$.length;xe++){const _e=$[xe];if(_e&&!Se[_e]){const Ae=S.getUniformLocation(this.program,_e);Ae&&(Se[_e]=Ae)}}this.fixedUniforms=b(n,Se),this.binderUniforms=f?f.getUniforms(n,Se):[]}draw(n,s,p,f,b,_,S,C,I,L,O,j,Y,$,X,ae){const se=n.gl;if(this.failedToCreate)return;n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(f),n.setColorMode(b),n.setCullFace(_);for(const le in this.fixedUniforms)this.fixedUniforms[le].set(S[le]);$&&$.setUniforms(n,this.binderUniforms,j,{zoom:Y});const ue={[se.LINES]:2,[se.TRIANGLES]:3,[se.LINE_STRIP]:1}[s];for(const le of O.get()){const Se=le.vaos||(le.vaos={});(Se[C]||(Se[C]=new qh)).bind(n,this,I,$?$.getPaintVertexBuffers():[],L,le.vertexOffset,X,ae),se.drawElements(s,le.primitiveLength*ue,se.UNSIGNED_SHORT,le.primitiveOffset*ue*2)}}}function mc(h,n,s){const p=1/Nr(s,1,n.transform.tileZoom),f=Math.pow(2,s.tileID.overscaledZ),b=s.tileSize*Math.pow(2,n.transform.tileZoom)/f,_=b*(s.tileID.canonical.x+s.tileID.wrap*f),S=b*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[p,h.fromScale,h.toScale],u_fade:h.t,u_pixel_coord_upper:[_>>16,S>>16],u_pixel_coord_lower:[65535&_,65535&S]}}const hp=(h,n,s,p)=>{const f=n.style.light,b=f.properties.get("position"),_=[b.x,b.y,b.z],S=function(){var I=new c.ARRAY_TYPE(9);return c.ARRAY_TYPE!=Float32Array&&(I[1]=0,I[2]=0,I[3]=0,I[5]=0,I[6]=0,I[7]=0),I[0]=1,I[4]=1,I[8]=1,I}();f.properties.get("anchor")==="viewport"&&function(I,L){var O=Math.sin(L),j=Math.cos(L);I[0]=j,I[1]=O,I[2]=0,I[3]=-O,I[4]=j,I[5]=0,I[6]=0,I[7]=0,I[8]=1}(S,-n.transform.angle),function(I,L,O){var j=L[0],Y=L[1],$=L[2];I[0]=j*O[0]+Y*O[3]+$*O[6],I[1]=j*O[1]+Y*O[4]+$*O[7],I[2]=j*O[2]+Y*O[5]+$*O[8]}(_,_,S);const C=f.properties.get("color");return{u_matrix:h,u_lightpos:_,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+s,u_opacity:p}},fc=(h,n,s,p,f,b,_)=>c.extend(hp(h,n,s,p),mc(b,n,_),{u_height_factor:-Math.pow(2,f.overscaledZ)/_.tileSize/8}),gc=h=>({u_matrix:h}),xc=(h,n,s,p)=>c.extend(gc(h),mc(s,n,p)),mp=(h,n)=>({u_matrix:h,u_world:n}),fp=(h,n,s,p,f)=>c.extend(xc(h,n,s,p),{u_world:f}),_o=(h,n,s,p)=>{const f=h.transform;let b,_;if(p.paint.get("circle-pitch-alignment")==="map"){const S=Nr(s,1,f.zoom);b=!0,_=[S,S]}else b=!1,_=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:h.translatePosMatrix(n.posMatrix,s,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:h.pixelRatio,u_extrude_scale:_}},Rs=(h,n,s)=>{const p=Nr(s,1,n.zoom),f=Math.pow(2,n.zoom-s.tileID.overscaledZ),b=s.tileID.overscaleFactor();return{u_matrix:h,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[n.pixelsToGLUnits[0]/(p*f),n.pixelsToGLUnits[1]/(p*f)],u_overscale_factor:b}},na=(h,n,s=1)=>({u_matrix:h,u_color:n,u_overlay:0,u_overlay_scale:s}),Ha=h=>({u_matrix:h}),Os=(h,n,s,p)=>({u_matrix:h,u_extrude_scale:Nr(n,1,s),u_intensity:p});function Bs(h,n){const s=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new c.MercatorCoordinate(0,p/s).toLngLat().lat,new c.MercatorCoordinate(0,(p+1)/s).toLngLat().lat]}const Wa=(h,n,s)=>{const p=h.transform;return{u_matrix:yc(h,n,s),u_ratio:1/Nr(n,1,p.zoom),u_device_pixel_ratio:h.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Fs=(h,n,s,p)=>c.extend(Wa(h,n,s),{u_image:0,u_image_height:p}),Xa=(h,n,s,p)=>{const f=h.transform,b=Ka(n,f);return{u_matrix:yc(h,n,s),u_texsize:n.imageAtlasTexture.size,u_ratio:1/Nr(n,1,f.zoom),u_device_pixel_ratio:h.pixelRatio,u_image:0,u_scale:[b,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Pr=(h,n,s,p,f)=>{const b=h.lineAtlas,_=Ka(n,h.transform),S=s.layout.get("line-cap")==="round",C=b.getDash(p.from,S),I=b.getDash(p.to,S),L=C.width*f.fromScale,O=I.width*f.toScale;return c.extend(Wa(h,n,s),{u_patternscale_a:[_/L,-C.height/2],u_patternscale_b:[_/O,-I.height/2],u_sdfgamma:b.width/(256*Math.min(L,O)*h.pixelRatio)/2,u_image:0,u_tex_y_a:C.y,u_tex_y_b:I.y,u_mix:f.t})};function Ka(h,n){return 1/Nr(h,1,n.tileZoom)}function yc(h,n,s){return h.translatePosMatrix(n.tileID.posMatrix,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const gp=(h,n,s,p,f)=>{return{u_matrix:h,u_tl_parent:n,u_scale_parent:s,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(_=f.paint.get("raster-saturation"),_>0?1-1/(1.001-_):-_),u_contrast_factor:(b=f.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:xp(f.paint.get("raster-hue-rotate"))};var b,_};function xp(h){h*=Math.PI/180;const n=Math.sin(h),s=Math.cos(h);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const Ns=(h,n,s,p,f,b,_,S,C,I)=>{const L=f.transform;return{u_is_size_zoom_constant:+(h==="constant"||h==="source"),u_is_size_feature_constant:+(h==="constant"||h==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:L.width/L.height,u_fade_change:f.options.fadeDuration?f.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:_,u_coord_matrix:S,u_is_text:+C,u_pitch_with_map:+p,u_texsize:I,u_texture:0}},bc=(h,n,s,p,f,b,_,S,C,I,L)=>{const O=f.transform;return c.extend(Ns(h,n,s,p,f,b,_,S,C,I),{u_gamma_scale:p?Math.cos(O._pitch)*O.cameraToCenterDistance:1,u_device_pixel_ratio:f.pixelRatio,u_is_halo:+L})},Hh=(h,n,s,p,f,b,_,S,C,I)=>c.extend(bc(h,n,s,p,f,b,_,S,!0,C,!0),{u_texsize_icon:I,u_texture_icon:1}),Wh=(h,n,s)=>({u_matrix:h,u_opacity:n,u_color:s}),vc=(h,n,s,p,f,b)=>c.extend(function(_,S,C,I){const L=C.imageManager.getPattern(_.from.toString()),O=C.imageManager.getPattern(_.to.toString()),{width:j,height:Y}=C.imageManager.getPixelSize(),$=Math.pow(2,I.tileID.overscaledZ),X=I.tileSize*Math.pow(2,C.transform.tileZoom)/$,ae=X*(I.tileID.canonical.x+I.tileID.wrap*$),se=X*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[j,Y],u_mix:S.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/Nr(I,1,C.transform.tileZoom),u_pixel_coord_upper:[ae>>16,se>>16],u_pixel_coord_lower:[65535&ae,65535&se]}}(p,b,s,f),{u_matrix:h,u_opacity:n}),_c={fillExtrusion:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_lightpos:new c.Uniform3f(h,n.u_lightpos),u_lightintensity:new c.Uniform1f(h,n.u_lightintensity),u_lightcolor:new c.Uniform3f(h,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(h,n.u_vertical_gradient),u_opacity:new c.Uniform1f(h,n.u_opacity)}),fillExtrusionPattern:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_lightpos:new c.Uniform3f(h,n.u_lightpos),u_lightintensity:new c.Uniform1f(h,n.u_lightintensity),u_lightcolor:new c.Uniform3f(h,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(h,n.u_vertical_gradient),u_height_factor:new c.Uniform1f(h,n.u_height_factor),u_image:new c.Uniform1i(h,n.u_image),u_texsize:new c.Uniform2f(h,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(h,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(h,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(h,n.u_scale),u_fade:new c.Uniform1f(h,n.u_fade),u_opacity:new c.Uniform1f(h,n.u_opacity)}),fill:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix)}),fillPattern:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_image:new c.Uniform1i(h,n.u_image),u_texsize:new c.Uniform2f(h,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(h,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(h,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(h,n.u_scale),u_fade:new c.Uniform1f(h,n.u_fade)}),fillOutline:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_world:new c.Uniform2f(h,n.u_world)}),fillOutlinePattern:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_world:new c.Uniform2f(h,n.u_world),u_image:new c.Uniform1i(h,n.u_image),u_texsize:new c.Uniform2f(h,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(h,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(h,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(h,n.u_scale),u_fade:new c.Uniform1f(h,n.u_fade)}),circle:(h,n)=>({u_camera_to_center_distance:new c.Uniform1f(h,n.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(h,n.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(h,n.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(h,n.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(h,n.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(h,n.u_matrix)}),collisionBox:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_camera_to_center_distance:new c.Uniform1f(h,n.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(h,n.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(h,n.u_extrude_scale),u_overscale_factor:new c.Uniform1f(h,n.u_overscale_factor)}),collisionCircle:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_inv_matrix:new c.UniformMatrix4f(h,n.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(h,n.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(h,n.u_viewport_size)}),debug:(h,n)=>({u_color:new c.UniformColor(h,n.u_color),u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_overlay:new c.Uniform1i(h,n.u_overlay),u_overlay_scale:new c.Uniform1f(h,n.u_overlay_scale)}),clippingMask:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix)}),heatmap:(h,n)=>({u_extrude_scale:new c.Uniform1f(h,n.u_extrude_scale),u_intensity:new c.Uniform1f(h,n.u_intensity),u_matrix:new c.UniformMatrix4f(h,n.u_matrix)}),heatmapTexture:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_world:new c.Uniform2f(h,n.u_world),u_image:new c.Uniform1i(h,n.u_image),u_color_ramp:new c.Uniform1i(h,n.u_color_ramp),u_opacity:new c.Uniform1f(h,n.u_opacity)}),hillshade:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_image:new c.Uniform1i(h,n.u_image),u_latrange:new c.Uniform2f(h,n.u_latrange),u_light:new c.Uniform2f(h,n.u_light),u_shadow:new c.UniformColor(h,n.u_shadow),u_highlight:new c.UniformColor(h,n.u_highlight),u_accent:new c.UniformColor(h,n.u_accent)}),hillshadePrepare:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_image:new c.Uniform1i(h,n.u_image),u_dimension:new c.Uniform2f(h,n.u_dimension),u_zoom:new c.Uniform1f(h,n.u_zoom),u_unpack:new c.Uniform4f(h,n.u_unpack)}),line:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_ratio:new c.Uniform1f(h,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(h,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(h,n.u_units_to_pixels)}),lineGradient:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_ratio:new c.Uniform1f(h,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(h,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(h,n.u_units_to_pixels),u_image:new c.Uniform1i(h,n.u_image),u_image_height:new c.Uniform1f(h,n.u_image_height)}),linePattern:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_texsize:new c.Uniform2f(h,n.u_texsize),u_ratio:new c.Uniform1f(h,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(h,n.u_device_pixel_ratio),u_image:new c.Uniform1i(h,n.u_image),u_units_to_pixels:new c.Uniform2f(h,n.u_units_to_pixels),u_scale:new c.Uniform3f(h,n.u_scale),u_fade:new c.Uniform1f(h,n.u_fade)}),lineSDF:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_ratio:new c.Uniform1f(h,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(h,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(h,n.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(h,n.u_patternscale_a),u_patternscale_b:new c.Uniform2f(h,n.u_patternscale_b),u_sdfgamma:new c.Uniform1f(h,n.u_sdfgamma),u_image:new c.Uniform1i(h,n.u_image),u_tex_y_a:new c.Uniform1f(h,n.u_tex_y_a),u_tex_y_b:new c.Uniform1f(h,n.u_tex_y_b),u_mix:new c.Uniform1f(h,n.u_mix)}),raster:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_tl_parent:new c.Uniform2f(h,n.u_tl_parent),u_scale_parent:new c.Uniform1f(h,n.u_scale_parent),u_buffer_scale:new c.Uniform1f(h,n.u_buffer_scale),u_fade_t:new c.Uniform1f(h,n.u_fade_t),u_opacity:new c.Uniform1f(h,n.u_opacity),u_image0:new c.Uniform1i(h,n.u_image0),u_image1:new c.Uniform1i(h,n.u_image1),u_brightness_low:new c.Uniform1f(h,n.u_brightness_low),u_brightness_high:new c.Uniform1f(h,n.u_brightness_high),u_saturation_factor:new c.Uniform1f(h,n.u_saturation_factor),u_contrast_factor:new c.Uniform1f(h,n.u_contrast_factor),u_spin_weights:new c.Uniform3f(h,n.u_spin_weights)}),symbolIcon:(h,n)=>({u_is_size_zoom_constant:new c.Uniform1i(h,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(h,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(h,n.u_size_t),u_size:new c.Uniform1f(h,n.u_size),u_camera_to_center_distance:new c.Uniform1f(h,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(h,n.u_pitch),u_rotate_symbol:new c.Uniform1i(h,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(h,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(h,n.u_fade_change),u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(h,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(h,n.u_coord_matrix),u_is_text:new c.Uniform1i(h,n.u_is_text),u_pitch_with_map:new c.Uniform1i(h,n.u_pitch_with_map),u_texsize:new c.Uniform2f(h,n.u_texsize),u_texture:new c.Uniform1i(h,n.u_texture)}),symbolSDF:(h,n)=>({u_is_size_zoom_constant:new c.Uniform1i(h,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(h,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(h,n.u_size_t),u_size:new c.Uniform1f(h,n.u_size),u_camera_to_center_distance:new c.Uniform1f(h,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(h,n.u_pitch),u_rotate_symbol:new c.Uniform1i(h,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(h,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(h,n.u_fade_change),u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(h,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(h,n.u_coord_matrix),u_is_text:new c.Uniform1i(h,n.u_is_text),u_pitch_with_map:new c.Uniform1i(h,n.u_pitch_with_map),u_texsize:new c.Uniform2f(h,n.u_texsize),u_texture:new c.Uniform1i(h,n.u_texture),u_gamma_scale:new c.Uniform1f(h,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(h,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(h,n.u_is_halo)}),symbolTextAndIcon:(h,n)=>({u_is_size_zoom_constant:new c.Uniform1i(h,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(h,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(h,n.u_size_t),u_size:new c.Uniform1f(h,n.u_size),u_camera_to_center_distance:new c.Uniform1f(h,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(h,n.u_pitch),u_rotate_symbol:new c.Uniform1i(h,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(h,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(h,n.u_fade_change),u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(h,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(h,n.u_coord_matrix),u_is_text:new c.Uniform1i(h,n.u_is_text),u_pitch_with_map:new c.Uniform1i(h,n.u_pitch_with_map),u_texsize:new c.Uniform2f(h,n.u_texsize),u_texsize_icon:new c.Uniform2f(h,n.u_texsize_icon),u_texture:new c.Uniform1i(h,n.u_texture),u_texture_icon:new c.Uniform1i(h,n.u_texture_icon),u_gamma_scale:new c.Uniform1f(h,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(h,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(h,n.u_is_halo)}),background:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_opacity:new c.Uniform1f(h,n.u_opacity),u_color:new c.UniformColor(h,n.u_color)}),backgroundPattern:(h,n)=>({u_matrix:new c.UniformMatrix4f(h,n.u_matrix),u_opacity:new c.Uniform1f(h,n.u_opacity),u_image:new c.Uniform1i(h,n.u_image),u_pattern_tl_a:new c.Uniform2f(h,n.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(h,n.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(h,n.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(h,n.u_pattern_br_b),u_texsize:new c.Uniform2f(h,n.u_texsize),u_mix:new c.Uniform1f(h,n.u_mix),u_pattern_size_a:new c.Uniform2f(h,n.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(h,n.u_pattern_size_b),u_scale_a:new c.Uniform1f(h,n.u_scale_a),u_scale_b:new c.Uniform1f(h,n.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(h,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(h,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(h,n.u_tile_units_to_pixels)})};class wc{constructor(n,s,p){this.context=n;const f=n.gl;this.buffer=f.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yp{constructor(n,s,p,f){this.length=s.length,this.attributes=p,this.itemSize=s.bytesPerElement,this.dynamicDraw=f,this.context=n;const b=n.gl;this.buffer=b.createBuffer(),n.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let p=0;p<this.attributes.length;p++){const f=s.attributes[this.attributes[p].name];f!==void 0&&n.enableVertexAttribArray(f)}}setVertexAttribPointers(n,s,p){for(let f=0;f<this.attributes.length;f++){const b=this.attributes[f],_=s.attributes[b.name];_!==void 0&&n.vertexAttribPointer(_,b.components,n[kc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Vt{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Xh extends Vt{getDefault(){return c.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Ya extends Vt{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Ja extends Vt{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class bp extends Vt{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Pn extends Vt{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Ec extends Vt{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Us extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Vs extends Vt{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Sc extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class Cc extends Vt{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class js extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class Tc extends Vt{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class zc extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class $s extends Vt{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class vp extends Vt{getDefault(){return c.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class _p extends Vt{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class ia extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class Kh extends Vt{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Yh extends Vt{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Jh extends Vt{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Qh extends Vt{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class em extends Vt{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class tm extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Ic extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Pc extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class oa extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class wp extends Vt{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class kp extends Vt{constructor(n){super(n),this.vao=n.extVertexArrayObject}getDefault(){return null}set(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)}}class Mc extends Vt{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class wo extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Ep extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class ko extends Vt{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class aa extends ko{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Sp extends ko{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ac{constructor(n,s,p,f){this.context=n,this.width=s,this.height=p;const b=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new aa(n,b),f&&(this.depthAttachment=new Sp(n,b))}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class gt{constructor(n,s,p){this.blendFunction=n,this.blendColor=s,this.mask=p}}gt.Replace=[1,0],gt.disabled=new gt(gt.Replace,c.Color.transparent,[!1,!1,!1,!1]),gt.unblended=new gt(gt.Replace,c.Color.transparent,[!0,!0,!0,!0]),gt.alphaBlended=new gt([1,771],c.Color.transparent,[!0,!0,!0,!0]);class Gs{constructor(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Xh(this),this.clearDepth=new Ya(this),this.clearStencil=new Ja(this),this.colorMask=new bp(this),this.depthMask=new Pn(this),this.stencilMask=new Ec(this),this.stencilFunc=new Us(this),this.stencilOp=new Vs(this),this.stencilTest=new Sc(this),this.depthRange=new Cc(this),this.depthTest=new js(this),this.depthFunc=new Tc(this),this.blend=new zc(this),this.blendFunc=new $s(this),this.blendColor=new vp(this),this.blendEquation=new _p(this),this.cullFace=new ia(this),this.cullFaceSide=new Kh(this),this.frontFace=new Yh(this),this.program=new Jh(this),this.activeTexture=new Qh(this),this.viewport=new em(this),this.bindFramebuffer=new tm(this),this.bindRenderbuffer=new Ic(this),this.bindTexture=new Pc(this),this.bindVertexBuffer=new oa(this),this.bindElementBuffer=new wp(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new kp(this),this.pixelStoreUnpack=new Mc(this),this.pixelStoreUnpackPremultiplyAlpha=new wo(this),this.pixelStoreUnpackFlipY=new Ep(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new wc(this,n,s)}createVertexBuffer(n,s,p){return new yp(this,n,s,p)}createRenderbuffer(n,s,p){const f=this.gl,b=f.createRenderbuffer();return this.bindRenderbuffer.set(b),f.renderbufferStorage(f.RENDERBUFFER,n,s,p),this.bindRenderbuffer.set(null),b}createFramebuffer(n,s,p){return new Ac(this,n,s,p)}clear({color:n,depth:s}){const p=this.gl;let f=0;n&&(f|=p.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(f|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),p.clear(f)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){H(n.blendFunction,gt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Zt{constructor(n,s,p){this.func=n,this.mask=s,this.range=p}}Zt.ReadOnly=!1,Zt.ReadWrite=!0,Zt.disabled=new Zt(519,Zt.ReadOnly,[0,1]);const qs=7680;class ar{constructor(n,s,p,f,b,_){this.test=n,this.ref=s,this.mask=p,this.fail=f,this.depthFail=b,this.pass=_}}ar.disabled=new ar({func:519,mask:0},0,0,qs,qs,qs);class yr{constructor(n,s,p){this.enable=n,this.mode=s,this.frontFace=p}}let Zs;function Dc(h,n,s,p,f,b,_){const S=h.context,C=S.gl,I=h.useProgram("collisionBox"),L=[];let O=0,j=0;for(let le=0;le<p.length;le++){const Se=p[le],xe=n.getTile(Se),_e=xe.getBucket(s);if(!_e)continue;let Ae=Se.posMatrix;f[0]===0&&f[1]===0||(Ae=h.translatePosMatrix(Se.posMatrix,xe,f,b));const Oe=_?_e.textCollisionBox:_e.iconCollisionBox,Ee=_e.collisionCircleArray;if(Ee.length>0){const et=c.create(),Ge=Ae;c.mul(et,_e.placementInvProjMatrix,h.transform.glCoordMatrix),c.mul(et,et,_e.placementViewportMatrix),L.push({circleArray:Ee,circleOffset:j,transform:Ge,invTransform:et}),O+=Ee.length/4,j=O}Oe&&I.draw(S,C.LINES,Zt.disabled,ar.disabled,h.colorModeForRenderPass(),yr.disabled,Rs(Ae,h.transform,xe),s.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,null,h.transform.zoom,null,null,Oe.collisionVertexBuffer)}if(!_||!L.length)return;const Y=h.useProgram("collisionCircle"),$=new c.CollisionCircleLayoutArray;$.resize(4*O),$._trim();let X=0;for(const le of L)for(let Se=0;Se<le.circleArray.length/4;Se++){const xe=4*Se,_e=le.circleArray[xe+0],Ae=le.circleArray[xe+1],Oe=le.circleArray[xe+2],Ee=le.circleArray[xe+3];$.emplace(X++,_e,Ae,Oe,Ee,0),$.emplace(X++,_e,Ae,Oe,Ee,1),$.emplace(X++,_e,Ae,Oe,Ee,2),$.emplace(X++,_e,Ae,Oe,Ee,3)}(!Zs||Zs.length<2*O)&&(Zs=function(le){const Se=2*le,xe=new c.QuadTriangleArray;xe.resize(Se),xe._trim();for(let _e=0;_e<Se;_e++){const Ae=6*_e;xe.uint16[Ae+0]=4*_e+0,xe.uint16[Ae+1]=4*_e+1,xe.uint16[Ae+2]=4*_e+2,xe.uint16[Ae+3]=4*_e+2,xe.uint16[Ae+4]=4*_e+3,xe.uint16[Ae+5]=4*_e+0}return xe}(O));const ae=S.createIndexBuffer(Zs,!0),se=S.createVertexBuffer($,c.collisionCircleLayout.members,!0);for(const le of L){const Se={u_matrix:le.transform,u_inv_matrix:le.invTransform,u_camera_to_center_distance:(ue=h.transform).cameraToCenterDistance,u_viewport_size:[ue.width,ue.height]};Y.draw(S,C.TRIANGLES,Zt.disabled,ar.disabled,h.colorModeForRenderPass(),yr.disabled,Se,s.id,se,ae,c.SegmentVector.simpleSegment(0,2*le.circleOffset,le.circleArray.length,le.circleArray.length/2),null,h.transform.zoom,null,null,null)}var ue;se.destroy(),ae.destroy()}yr.disabled=new yr(!1,1029,2305),yr.backCCW=new yr(!0,1029,2305);const rm=c.identity(new Float32Array(16));function Lc(h,n,s,p,f,b){const{horizontalAlign:_,verticalAlign:S}=c.getAnchorAlignment(h),C=-(_-.5)*n,I=-(S-.5)*s,L=c.evaluateVariableOffset(h,p);return new c.pointGeometry((C/f+L[0])*b,(I/f+L[1])*b)}function Hs(h,n,s,p,f,b,_,S,C,I){const L=h.text.placedSymbolArray,O=h.text.dynamicLayoutVertexArray,j=h.icon.dynamicLayoutVertexArray,Y={};O.clear();for(let $=0;$<L.length;$++){const X=L.get($),ae=h.allowVerticalPlacement&&!X.placedOrientation,se=X.hidden||!X.crossTileID||ae?null:p[X.crossTileID];if(se){const ue=new c.pointGeometry(X.anchorX,X.anchorY),le=nr(ue,s?_:b),Se=Ne(f.cameraToCenterDistance,le.signedDistanceFromCamera);let xe=c.evaluateSizeForFeature(h.textSizeData,C,X)*Se/c.ONE_EM;s&&(xe*=h.tilePixelRatio/S);const{width:_e,height:Ae,anchor:Oe,textOffset:Ee,textBoxScale:et}=se,Ge=Lc(Oe,_e,Ae,Ee,et,xe),mt=s?nr(ue.add(Ge),b).point:le.point.add(n?Ge.rotate(-f.angle):Ge),Dt=h.allowVerticalPlacement&&X.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let Tt=0;Tt<X.numGlyphs;Tt++)c.addDynamicAttributes(O,mt,Dt);I&&X.associatedIconIndex>=0&&(Y[X.associatedIconIndex]={shiftedAnchor:mt,angle:Dt})}else Ir(X.numGlyphs,O)}if(I){j.clear();const $=h.icon.placedSymbolArray;for(let X=0;X<$.length;X++){const ae=$.get(X);if(ae.hidden)Ir(ae.numGlyphs,j);else{const se=Y[X];if(se)for(let ue=0;ue<ae.numGlyphs;ue++)c.addDynamicAttributes(j,se.shiftedAnchor,se.angle);else Ir(ae.numGlyphs,j)}}h.icon.dynamicLayoutVertexBuffer.updateData(j)}h.text.dynamicLayoutVertexBuffer.updateData(O)}function Ws(h,n,s){return s.iconsInText&&n?"symbolTextAndIcon":h?"symbolSDF":"symbolIcon"}function Xs(h,n,s,p,f,b,_,S,C,I,L,O){const j=h.context,Y=j.gl,$=h.transform,X=S==="map",ae=C==="map",se=S!=="viewport"&&s.layout.get("symbol-placement")!=="point",ue=X&&!ae&&!se,le=!s.layout.get("symbol-sort-key").isConstant();let Se=!1;const xe=h.depthModeForSublayer(0,Zt.ReadOnly),_e=s.layout.get("text-variable-anchor"),Ae=[];for(const Oe of p){const Ee=n.getTile(Oe),et=Ee.getBucket(s);if(!et)continue;const Ge=f?et.text:et.icon;if(!Ge||!Ge.segments.get().length)continue;const mt=Ge.programConfigurations.get(s.id),Dt=f||et.sdfIcons,Tt=f?et.textSizeData:et.iconSizeData,Mt=ae||$.pitch!==0,mr=h.useProgram(Ws(Dt,f,et),mt),ft=c.evaluateSizeForZoom(Tt,$.zoom);let Ot,Xt,Qr,An,Zn=[0,0],Hn=null;if(f){if(Xt=Ee.glyphAtlasTexture,Qr=Y.LINEAR,Ot=Ee.glyphAtlasTexture.size,et.iconsInText){Zn=Ee.imageAtlasTexture.size,Hn=Ee.imageAtlasTexture;const Si=Tt.kind==="composite"||Tt.kind==="camera";An=Mt||h.options.rotating||h.options.zooming||Si?Y.LINEAR:Y.NEAREST}}else{const Si=s.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;Xt=Ee.imageAtlasTexture,Qr=Dt||h.options.rotating||h.options.zooming||Si||Mt?Y.LINEAR:Y.NEAREST,Ot=Ee.imageAtlasTexture.size}const ao=Nr(Ee,1,h.transform.zoom),kn=pn(Oe.posMatrix,ae,X,h.transform,ao),Ei=yo(Oe.posMatrix,ae,X,h.transform,ao),Io=_e&&et.hasTextData(),Dn=s.layout.get("icon-text-fit")!=="none"&&Io&&et.hasIconData();if(se){const Si=s.layout.get("text-rotation-alignment")==="map";yt(et,Oe.posMatrix,h,f,kn,Ei,ae,I,Si)}const Bt=h.translatePosMatrix(Oe.posMatrix,Ee,b,_),$t=se||f&&_e||Dn?rm:kn,Mr=h.translatePosMatrix(Ei,Ee,b,_,!0),hn=Dt&&s.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let lr;lr=Dt?et.iconsInText?Hh(Tt.kind,ft,ue,ae,h,Bt,$t,Mr,Ot,Zn):bc(Tt.kind,ft,ue,ae,h,Bt,$t,Mr,f,Ot,!0):Ns(Tt.kind,ft,ue,ae,h,Bt,$t,Mr,f,Ot);const Po={program:mr,buffers:Ge,uniformValues:lr,atlasTexture:Xt,atlasTextureIcon:Hn,atlasInterpolation:Qr,atlasInterpolationIcon:An,isSDF:Dt,hasHalo:hn};if(le&&et.canOverlap){Se=!0;const Si=Ge.segments.get();for(const ll of Si)Ae.push({segments:new c.SegmentVector([ll]),sortKey:ll.sortKey,state:Po})}else Ae.push({segments:Ge.segments,sortKey:0,state:Po})}Se&&Ae.sort((Oe,Ee)=>Oe.sortKey-Ee.sortKey);for(const Oe of Ae){const Ee=Oe.state;if(j.activeTexture.set(Y.TEXTURE0),Ee.atlasTexture.bind(Ee.atlasInterpolation,Y.CLAMP_TO_EDGE),Ee.atlasTextureIcon&&(j.activeTexture.set(Y.TEXTURE1),Ee.atlasTextureIcon&&Ee.atlasTextureIcon.bind(Ee.atlasInterpolationIcon,Y.CLAMP_TO_EDGE)),Ee.isSDF){const et=Ee.uniformValues;Ee.hasHalo&&(et.u_is_halo=1,Ks(Ee.buffers,Oe.segments,s,h,Ee.program,xe,L,O,et)),et.u_is_halo=0}Ks(Ee.buffers,Oe.segments,s,h,Ee.program,xe,L,O,Ee.uniformValues)}}function Ks(h,n,s,p,f,b,_,S,C){const I=p.context;f.draw(I,I.gl.TRIANGLES,b,_,S,yr.disabled,C,s.id,h.layoutVertexBuffer,h.indexBuffer,n,s.paint,p.transform.zoom,h.programConfigurations.get(s.id),h.dynamicLayoutVertexBuffer,h.opacityVertexBuffer)}function Rc(h,n,s,p,f,b,_){const S=h.context.gl,C=s.paint.get("fill-pattern"),I=C&&C.constantOr(1),L=s.getCrossfadeParameters();let O,j,Y,$,X;_?(j=I&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",O=S.LINES):(j=I?"fillPattern":"fill",O=S.TRIANGLES);for(const ae of p){const se=n.getTile(ae);if(I&&!se.patternsLoaded())continue;const ue=se.getBucket(s);if(!ue)continue;const le=ue.programConfigurations.get(s.id),Se=h.useProgram(j,le);I&&(h.context.activeTexture.set(S.TEXTURE0),se.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),le.updatePaintBuffers(L));const xe=C.constantOr(null);if(xe&&se.imageAtlas){const Ae=se.imageAtlas,Oe=Ae.patternPositions[xe.to.toString()],Ee=Ae.patternPositions[xe.from.toString()];Oe&&Ee&&le.setConstantPatternPositions(Oe,Ee)}const _e=h.translatePosMatrix(ae.posMatrix,se,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(_){$=ue.indexBuffer2,X=ue.segments2;const Ae=[S.drawingBufferWidth,S.drawingBufferHeight];Y=j==="fillOutlinePattern"&&I?fp(_e,h,L,se,Ae):mp(_e,Ae)}else $=ue.indexBuffer,X=ue.segments,Y=I?xc(_e,h,L,se):gc(_e);Se.draw(h.context,O,f,h.stencilModeForClipping(ae),b,yr.disabled,Y,s.id,ue.layoutVertexBuffer,$,X,s.paint,h.transform.zoom,le)}}function sa(h,n,s,p,f,b,_){const S=h.context,C=S.gl,I=s.paint.get("fill-extrusion-pattern"),L=I.constantOr(1),O=s.getCrossfadeParameters(),j=s.paint.get("fill-extrusion-opacity");for(const Y of p){const $=n.getTile(Y),X=$.getBucket(s);if(!X)continue;const ae=X.programConfigurations.get(s.id),se=h.useProgram(L?"fillExtrusionPattern":"fillExtrusion",ae);L&&(h.context.activeTexture.set(C.TEXTURE0),$.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),ae.updatePaintBuffers(O));const ue=I.constantOr(null);if(ue&&$.imageAtlas){const _e=$.imageAtlas,Ae=_e.patternPositions[ue.to.toString()],Oe=_e.patternPositions[ue.from.toString()];Ae&&Oe&&ae.setConstantPatternPositions(Ae,Oe)}const le=h.translatePosMatrix(Y.posMatrix,$,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Se=s.paint.get("fill-extrusion-vertical-gradient"),xe=L?fc(le,h,Se,j,Y,O,$):hp(le,h,Se,j);se.draw(S,S.gl.TRIANGLES,f,b,_,yr.backCCW,xe,s.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,s.paint,h.transform.zoom,ae)}}function Ys(h,n,s,p,f,b){const _=h.context,S=_.gl,C=n.fbo;if(!C)return;const I=h.useProgram("hillshade");_.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,C.colorAttachment.get());const L=((O,j,Y)=>{const $=Y.paint.get("hillshade-shadow-color"),X=Y.paint.get("hillshade-highlight-color"),ae=Y.paint.get("hillshade-accent-color");let se=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=O.transform.angle);const ue=!O.options.moving;return{u_matrix:O.transform.calculatePosMatrix(j.tileID.toUnwrapped(),ue),u_image:0,u_latrange:Bs(0,j.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),se],u_shadow:$,u_highlight:X,u_accent:ae}})(h,n,s);I.draw(_,S.TRIANGLES,p,f,b,yr.disabled,L,s.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments)}function ci(h,n,s,p,f,b){const _=h.context,S=_.gl,C=n.dem;if(C&&C.data){const I=C.dim,L=C.stride,O=C.getPixels();if(_.activeTexture.set(S.TEXTURE1),_.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||h.getTileTexture(L),n.demTexture){const Y=n.demTexture;Y.update(O,{premultiply:!1}),Y.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else n.demTexture=new ee(_,O,S.RGBA,{premultiply:!1}),n.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);_.activeTexture.set(S.TEXTURE0);let j=n.fbo;if(!j){const Y=new ee(_,{width:I,height:I,data:null},S.RGBA);Y.bind(S.LINEAR,S.CLAMP_TO_EDGE),j=n.fbo=_.createFramebuffer(I,I,!0),j.colorAttachment.set(Y.texture)}_.bindFramebuffer.set(j.framebuffer),_.viewport.set([0,0,I,I]),h.useProgram("hillshadePrepare").draw(_,S.TRIANGLES,p,f,b,yr.disabled,((Y,$)=>{const X=$.stride,ae=c.create();return c.ortho(ae,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(ae,ae,[0,-c.EXTENT,0]),{u_matrix:ae,u_image:1,u_dimension:[X,X],u_zoom:Y.overscaledZ,u_unpack:$.getUnpackVector()}})(n.tileID,C),s.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Cp(h,n,s,p,f){const b=p.paint.get("raster-fade-duration");if(b>0){const _=c.exported.now(),S=(_-h.timeAdded)/b,C=n?(_-n.timeAdded)/b:-1,I=s.getSource(),L=f.coveringZoomLevel({tileSize:I.tileSize,roundZoom:I.roundZoom}),O=!n||Math.abs(n.tileID.overscaledZ-L)>Math.abs(h.tileID.overscaledZ-L),j=O&&h.refreshedUponExpiration?1:c.clamp(O?S:1-C,0,1);return h.refreshedUponExpiration&&S>=1&&(h.refreshedUponExpiration=!1),n?{opacity:1,mix:1-j}:{opacity:j,mix:0}}return{opacity:1,mix:0}}const Tp=new c.Color(1,0,0,1),zp=new c.Color(0,1,0,1),la=new c.Color(0,0,1,1),Js=new c.Color(1,0,1,1),Oc=new c.Color(0,1,1,1);function Ip(h,n,s,p){el(h,0,n+s/2,h.transform.width,s,p)}function Qs(h,n,s,p){el(h,n-s/2,0,s,h.transform.height,p)}function el(h,n,s,p,f,b){const _=h.context,S=_.gl;S.enable(S.SCISSOR_TEST),S.scissor(n*h.pixelRatio,s*h.pixelRatio,p*h.pixelRatio,f*h.pixelRatio),_.clear({color:b}),S.disable(S.SCISSOR_TEST)}function Pp(h,n,s){const p=h.context,f=p.gl,b=s.posMatrix,_=h.useProgram("debug"),S=Zt.disabled,C=ar.disabled,I=h.colorModeForRenderPass(),L="$debug";p.activeTexture.set(f.TEXTURE0),h.emptyTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),_.draw(p,f.LINE_STRIP,S,C,I,yr.disabled,na(b,c.Color.red),L,h.debugBuffer,h.tileBorderIndexBuffer,h.debugSegments);const O=n.getTileByID(s.key).latestRawTileData,j=Math.floor((O&&O.byteLength||0)/1024),Y=n.getTile(s).tileSize,$=512/Math.min(Y,512)*(s.overscaledZ/h.transform.zoom)*.5;let X=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(X+=` => ${s.overscaledZ}`),function(ae,se){ae.initDebugOverlayCanvas();const ue=ae.debugOverlayCanvas,le=ae.context.gl,Se=ae.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,ue.width,ue.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(se,5,5),Se.strokeText(se,5,5),ae.debugOverlayTexture.update(ue),ae.debugOverlayTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE)}(h,`${X} ${j}kb`),_.draw(p,f.TRIANGLES,S,C,gt.alphaBlended,yr.disabled,na(b,c.Color.transparent,$),L,h.debugBuffer,h.quadTriangleIndexBuffer,h.debugSegments)}const Qa={symbol:function(h,n,s,p,f){if(h.renderPass!=="translucent")return;const b=ar.disabled,_=h.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(S,C,I,L,O,j,Y){const $=C.transform,X=O==="map",ae=j==="map";for(const se of S){const ue=L.getTile(se),le=ue.getBucket(I);if(!le||!le.text||!le.text.segments.get().length)continue;const Se=c.evaluateSizeForZoom(le.textSizeData,$.zoom),xe=Nr(ue,1,C.transform.zoom),_e=pn(se.posMatrix,ae,X,C.transform,xe),Ae=I.layout.get("icon-text-fit")!=="none"&&le.hasIconData();if(Se){const Oe=Math.pow(2,$.zoom-ue.tileID.overscaledZ);Hs(le,X,ae,Y,$,_e,se.posMatrix,Oe,Se,Ae)}}}(p,h,s,n,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),f),s.paint.get("icon-opacity").constantOr(1)!==0&&Xs(h,n,s,p,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),b,_),s.paint.get("text-opacity").constantOr(1)!==0&&Xs(h,n,s,p,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),b,_),n.map.showCollisionBoxes&&(Dc(h,n,s,p,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),Dc(h,n,s,p,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))},circle:function(h,n,s,p){if(h.renderPass!=="translucent")return;const f=s.paint.get("circle-opacity"),b=s.paint.get("circle-stroke-width"),_=s.paint.get("circle-stroke-opacity"),S=!s.layout.get("circle-sort-key").isConstant();if(f.constantOr(1)===0&&(b.constantOr(1)===0||_.constantOr(1)===0))return;const C=h.context,I=C.gl,L=h.depthModeForSublayer(0,Zt.ReadOnly),O=ar.disabled,j=h.colorModeForRenderPass(),Y=[];for(let $=0;$<p.length;$++){const X=p[$],ae=n.getTile(X),se=ae.getBucket(s);if(!se)continue;const ue=se.programConfigurations.get(s.id),le={programConfiguration:ue,program:h.useProgram("circle",ue),layoutVertexBuffer:se.layoutVertexBuffer,indexBuffer:se.indexBuffer,uniformValues:_o(h,X,ae,s)};if(S){const Se=se.segments.get();for(const xe of Se)Y.push({segments:new c.SegmentVector([xe]),sortKey:xe.sortKey,state:le})}else Y.push({segments:se.segments,sortKey:0,state:le})}S&&Y.sort(($,X)=>$.sortKey-X.sortKey);for(const $ of Y){const{programConfiguration:X,program:ae,layoutVertexBuffer:se,indexBuffer:ue,uniformValues:le}=$.state;ae.draw(C,I.TRIANGLES,L,O,j,yr.disabled,le,s.id,se,ue,$.segments,s.paint,h.transform.zoom,X)}},heatmap:function(h,n,s,p){if(s.paint.get("heatmap-opacity")!==0)if(h.renderPass==="offscreen"){const f=h.context,b=f.gl,_=ar.disabled,S=new gt([b.ONE,b.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(C,I,L){const O=C.gl;C.activeTexture.set(O.TEXTURE1),C.viewport.set([0,0,I.width/4,I.height/4]);let j=L.heatmapFbo;if(j)O.bindTexture(O.TEXTURE_2D,j.colorAttachment.get()),C.bindFramebuffer.set(j.framebuffer);else{const Y=O.createTexture();O.bindTexture(O.TEXTURE_2D,Y),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.LINEAR),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.LINEAR),j=L.heatmapFbo=C.createFramebuffer(I.width/4,I.height/4,!1),function($,X,ae,se){const ue=$.gl;ue.texImage2D(ue.TEXTURE_2D,0,ue.RGBA,X.width/4,X.height/4,0,ue.RGBA,$.extRenderToTextureHalfFloat?$.extTextureHalfFloat.HALF_FLOAT_OES:ue.UNSIGNED_BYTE,null),se.colorAttachment.set(ae)}(C,I,Y,j)}})(f,h,s),f.clear({color:c.Color.transparent});for(let C=0;C<p.length;C++){const I=p[C];if(n.hasRenderableParent(I))continue;const L=n.getTile(I),O=L.getBucket(s);if(!O)continue;const j=O.programConfigurations.get(s.id),Y=h.useProgram("heatmap",j),{zoom:$}=h.transform;Y.draw(f,b.TRIANGLES,Zt.disabled,_,S,yr.disabled,Os(I.posMatrix,L,$,s.paint.get("heatmap-intensity")),s.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,s.paint,h.transform.zoom,j)}f.viewport.set([0,0,h.width,h.height])}else h.renderPass==="translucent"&&(h.context.setColorMode(h.colorModeForRenderPass()),function(f,b){const _=f.context,S=_.gl,C=b.heatmapFbo;if(!C)return;_.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,C.colorAttachment.get()),_.activeTexture.set(S.TEXTURE1);let I=b.colorRampTexture;I||(I=b.colorRampTexture=new ee(_,b.colorRamp,S.RGBA)),I.bind(S.LINEAR,S.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(_,S.TRIANGLES,Zt.disabled,ar.disabled,f.colorModeForRenderPass(),yr.disabled,((L,O,j,Y)=>{const $=c.create();c.ortho($,0,L.width,L.height,0,0,1);const X=L.context.gl;return{u_matrix:$,u_world:[X.drawingBufferWidth,X.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:O.paint.get("heatmap-opacity")}})(f,b),b.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments,b.paint,f.transform.zoom)}(h,s))},line:function(h,n,s,p){if(h.renderPass!=="translucent")return;const f=s.paint.get("line-opacity"),b=s.paint.get("line-width");if(f.constantOr(1)===0||b.constantOr(1)===0)return;const _=h.depthModeForSublayer(0,Zt.ReadOnly),S=h.colorModeForRenderPass(),C=s.paint.get("line-dasharray"),I=s.paint.get("line-pattern"),L=I.constantOr(1),O=s.paint.get("line-gradient"),j=s.getCrossfadeParameters(),Y=L?"linePattern":C?"lineSDF":O?"lineGradient":"line",$=h.context,X=$.gl;let ae=!0;for(const se of p){const ue=n.getTile(se);if(L&&!ue.patternsLoaded())continue;const le=ue.getBucket(s);if(!le)continue;const Se=le.programConfigurations.get(s.id),xe=h.context.program.get(),_e=h.useProgram(Y,Se),Ae=ae||_e.program!==xe,Oe=I.constantOr(null);if(Oe&&ue.imageAtlas){const et=ue.imageAtlas,Ge=et.patternPositions[Oe.to.toString()],mt=et.patternPositions[Oe.from.toString()];Ge&&mt&&Se.setConstantPatternPositions(Ge,mt)}const Ee=L?Xa(h,ue,s,j):C?Pr(h,ue,s,C,j):O?Fs(h,ue,s,le.lineClipsArray.length):Wa(h,ue,s);if(L)$.activeTexture.set(X.TEXTURE0),ue.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Se.updatePaintBuffers(j);else if(C&&(Ae||h.lineAtlas.dirty))$.activeTexture.set(X.TEXTURE0),h.lineAtlas.bind($);else if(O){const et=le.gradients[s.id];let Ge=et.texture;if(s.gradientVersion!==et.version){let mt=256;if(s.stepInterpolant){const Dt=n.getSource().maxzoom,Tt=se.canonical.z===Dt?Math.ceil(1<<h.transform.maxZoom-se.canonical.z):1;mt=c.clamp(c.nextPowerOfTwo(le.maxLineLength/c.EXTENT*1024*Tt),256,$.maxTextureSize)}et.gradient=c.renderColorRamp({expression:s.gradientExpression(),evaluationKey:"lineProgress",resolution:mt,image:et.gradient||void 0,clips:le.lineClipsArray}),et.texture?et.texture.update(et.gradient):et.texture=new ee($,et.gradient,X.RGBA),et.version=s.gradientVersion,Ge=et.texture}$.activeTexture.set(X.TEXTURE0),Ge.bind(s.stepInterpolant?X.NEAREST:X.LINEAR,X.CLAMP_TO_EDGE)}_e.draw($,X.TRIANGLES,_,h.stencilModeForClipping(se),S,yr.disabled,Ee,s.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,s.paint,h.transform.zoom,Se,le.layoutVertexBuffer2),ae=!1}},fill:function(h,n,s,p){const f=s.paint.get("fill-color"),b=s.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const _=h.colorModeForRenderPass(),S=s.paint.get("fill-pattern"),C=h.opaquePassEnabledForLayer()&&!S.constantOr(1)&&f.constantOr(c.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(h.renderPass===C){const I=h.depthModeForSublayer(1,h.renderPass==="opaque"?Zt.ReadWrite:Zt.ReadOnly);Rc(h,n,s,p,I,_,!1)}if(h.renderPass==="translucent"&&s.paint.get("fill-antialias")){const I=h.depthModeForSublayer(s.getPaintProperty("fill-outline-color")?2:0,Zt.ReadOnly);Rc(h,n,s,p,I,_,!0)}},"fill-extrusion":function(h,n,s,p){const f=s.paint.get("fill-extrusion-opacity");if(f!==0&&h.renderPass==="translucent"){const b=new Zt(h.context.gl.LEQUAL,Zt.ReadWrite,h.depthRangeFor3D);if(f!==1||s.paint.get("fill-extrusion-pattern").constantOr(1))sa(h,n,s,p,b,ar.disabled,gt.disabled),sa(h,n,s,p,b,h.stencilModeFor3D(),h.colorModeForRenderPass());else{const _=h.colorModeForRenderPass();sa(h,n,s,p,b,ar.disabled,_)}}},hillshade:function(h,n,s,p){if(h.renderPass!=="offscreen"&&h.renderPass!=="translucent")return;const f=h.context,b=h.depthModeForSublayer(0,Zt.ReadOnly),_=h.colorModeForRenderPass(),[S,C]=h.renderPass==="translucent"?h.stencilConfigForOverlap(p):[{},p];for(const I of C){const L=n.getTile(I);L.needsHillshadePrepare&&h.renderPass==="offscreen"?ci(h,L,s,b,ar.disabled,_):h.renderPass==="translucent"&&Ys(h,L,s,b,S[I.overscaledZ],_)}f.viewport.set([0,0,h.width,h.height])},raster:function(h,n,s,p){if(h.renderPass!=="translucent"||s.paint.get("raster-opacity")===0||!p.length)return;const f=h.context,b=f.gl,_=n.getSource(),S=h.useProgram("raster"),C=h.colorModeForRenderPass(),[I,L]=_ instanceof Br?[{},p]:h.stencilConfigForOverlap(p),O=L[L.length-1].overscaledZ,j=!h.options.moving;for(const Y of L){const $=h.depthModeForSublayer(Y.overscaledZ-O,s.paint.get("raster-opacity")===1?Zt.ReadWrite:Zt.ReadOnly,b.LESS),X=n.getTile(Y),ae=h.transform.calculatePosMatrix(Y.toUnwrapped(),j);X.registerFadeDuration(s.paint.get("raster-fade-duration"));const se=n.findLoadedParent(Y,0),ue=Cp(X,se,n,s,h.transform);let le,Se;const xe=s.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;f.activeTexture.set(b.TEXTURE0),X.texture.bind(xe,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),f.activeTexture.set(b.TEXTURE1),se?(se.texture.bind(xe,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),le=Math.pow(2,se.tileID.overscaledZ-X.tileID.overscaledZ),Se=[X.tileID.canonical.x*le%1,X.tileID.canonical.y*le%1]):X.texture.bind(xe,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);const _e=gp(ae,Se||[0,0],le||1,ue,s);_ instanceof Br?S.draw(f,b.TRIANGLES,$,ar.disabled,C,yr.disabled,_e,s.id,_.boundsBuffer,h.quadTriangleIndexBuffer,_.boundsSegments):S.draw(f,b.TRIANGLES,$,I[Y.overscaledZ],C,yr.disabled,_e,s.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments)}},background:function(h,n,s){const p=s.paint.get("background-color"),f=s.paint.get("background-opacity");if(f===0)return;const b=h.context,_=b.gl,S=h.transform,C=S.tileSize,I=s.paint.get("background-pattern");if(h.isPatternMissing(I))return;const L=!I&&p.a===1&&f===1&&h.opaquePassEnabledForLayer()?"opaque":"translucent";if(h.renderPass!==L)return;const O=ar.disabled,j=h.depthModeForSublayer(0,L==="opaque"?Zt.ReadWrite:Zt.ReadOnly),Y=h.colorModeForRenderPass(),$=h.useProgram(I?"backgroundPattern":"background"),X=S.coveringTiles({tileSize:C});I&&(b.activeTexture.set(_.TEXTURE0),h.imageManager.bind(h.context));const ae=s.getCrossfadeParameters();for(const se of X){const ue=h.transform.calculatePosMatrix(se.toUnwrapped()),le=I?vc(ue,f,h,I,{tileID:se,tileSize:C},ae):Wh(ue,f,p);$.draw(b,_.TRIANGLES,j,O,Y,yr.disabled,le,s.id,h.tileExtentBuffer,h.quadTriangleIndexBuffer,h.tileExtentSegments)}},debug:function(h,n,s){for(let p=0;p<s.length;p++)Pp(h,n,s[p])},custom:function(h,n,s){const p=h.context,f=s.implementation;if(h.renderPass==="offscreen"){const b=f.prerender;b&&(h.setCustomLayerDefaults(),p.setColorMode(h.colorModeForRenderPass()),b.call(f,p.gl,h.transform.customLayerMatrix()),p.setDirty(),h.setBaseState())}else if(h.renderPass==="translucent"){h.setCustomLayerDefaults(),p.setColorMode(h.colorModeForRenderPass()),p.setStencilMode(ar.disabled);const b=f.renderingMode==="3d"?new Zt(h.context.gl.LEQUAL,Zt.ReadWrite,h.depthRangeFor3D):h.depthModeForSublayer(0,Zt.ReadOnly);p.setDepthMode(b),f.render(p.gl,h.transform.customLayerMatrix()),p.setDirty(),h.setBaseState(),p.bindFramebuffer.set(null)}}};class Bc{constructor(n,s){this.context=new Gs(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=_r.maxUnderzooming+_r.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vt,this.gpuTimers={}}resize(n,s,p){if(this.width=n*p,this.height=s*p,this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const n=this.context,s=new c.PosArray;s.emplaceBack(0,0),s.emplaceBack(c.EXTENT,0),s.emplaceBack(0,c.EXTENT),s.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,pc.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const p=new c.PosArray;p.emplaceBack(0,0),p.emplaceBack(c.EXTENT,0),p.emplaceBack(0,c.EXTENT),p.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=n.createVertexBuffer(p,pc.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const f=new c.RasterBoundsArray;f.emplaceBack(0,0,0,0),f.emplaceBack(c.EXTENT,0,c.EXTENT,0),f.emplaceBack(0,c.EXTENT,0,c.EXTENT),f.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(f,jt.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const b=new c.PosArray;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(b,pc.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const _=new c.LineStripIndexArray;_.emplaceBack(0),_.emplaceBack(1),_.emplaceBack(3),_.emplaceBack(2),_.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(_);const S=new c.TriangleIndexArray;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(S),this.emptyTexture=new ee(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);const C=this.context.gl;this.stencilClearMode=new ar({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.create();c.ortho(p,0,this.width,this.height,0,0,1),c.scale(p,p,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,Zt.disabled,this.stencilClearMode,gt.disabled,yr.disabled,Ha(p),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source;const p=this.context,f=p.gl;this.nextStencilID+s.length>256&&this.clearStencil(),p.setColorMode(gt.disabled),p.setDepthMode(Zt.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const _ of s){const S=this._tileClippingMaskIDs[_.key]=this.nextStencilID++;b.draw(p,f.TRIANGLES,Zt.disabled,new ar({func:f.ALWAYS,mask:0},S,255,f.KEEP,f.KEEP,f.REPLACE),gt.disabled,yr.disabled,Ha(_.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new ar({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new ar({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(n){const s=this.context.gl,p=n.sort((_,S)=>S.overscaledZ-_.overscaledZ),f=p[p.length-1].overscaledZ,b=p[0].overscaledZ-f+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const _={};for(let S=0;S<b;S++)_[S+f]=new ar({func:s.GEQUAL,mask:255},S+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=b,[_,p]}return[{[f]:ar.disabled},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new gt([n.CONSTANT_COLOR,n.ONE],new c.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?gt.unblended:gt.alphaBlended}depthModeForSublayer(n,s,p){if(!this.opaquePassEnabledForLayer())return Zt.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Zt(p||this.context.gl.LEQUAL,s,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const p=this.style._order,f=this.style.sourceCaches;for(const C in f){const I=f[C];I.used&&I.prepare(this.context)}const b={},_={},S={};for(const C in f){const I=f[C];b[C]=I.getVisibleCoordinates(),_[C]=b[C].slice().reverse(),S[C]=I.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<p.length;C++)if(this.style._layers[p[C]].is3D()){this.opaquePassCutoff=C;break}this.renderPass="offscreen";for(const C of p){const I=this.style._layers[C];if(!I.hasOffscreenPass()||I.isHidden(this.transform.zoom))continue;const L=_[I.source];(I.type==="custom"||L.length)&&this.renderLayer(this,f[I.source],I,L)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const C=this.style._layers[p[this.currentLayer]],I=f[C.source],L=b[C.source];this._renderTileClippingMasks(C,L),this.renderLayer(this,I,C,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const C=this.style._layers[p[this.currentLayer]],I=f[C.source],L=(C.type==="symbol"?S:_)[C.source];this._renderTileClippingMasks(C,b[C.source]),this.renderLayer(this,I,C,L)}if(this.options.showTileBoundaries){let C,I;Object.values(this.style._layers).forEach(L=>{L.source&&!L.isHidden(this.transform.zoom)&&(L.source!==(I&&I.id)&&(I=this.style.sourceCaches[L.source]),(!C||C.getSource().maxzoom<I.getSource().maxzoom)&&(C=I))}),C&&Qa.debug(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){const I=C.transform.padding;Ip(C,C.transform.height-(I.top||0),3,Tp),Ip(C,I.bottom||0,3,zp),Qs(C,I.left||0,3,la),Qs(C,C.transform.width-(I.right||0),3,Js);const L=C.transform.centerPoint;(function(O,j,Y,$){el(O,j-1,Y-10,2,20,$),el(O,j-10,Y-1,20,2,$)})(C,L.x,C.transform.height-L.y,Oc)}(this),this.context.setDefault()}renderLayer(n,s,p,f){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||f.length)&&(this.id=p.id,this.gpuTimingStart(p),Qa[p.type](n,s,p,f,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;let p=this.gpuTimers[n.id];p||(p=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),p.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}queryGpuTimers(n){const s={};for(const p in n){const f=n[p],b=this.context.extTimerQuery,_=b.getQueryObjectEXT(f.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(f.query),s[p]=_}return s}translatePosMatrix(n,s,p,f,b){if(!p[0]&&!p[1])return n;const _=b?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(_){const I=Math.sin(_),L=Math.cos(_);p=[p[0]*L-p[1]*I,p[0]*I+p[1]*L]}const S=[b?p[0]:Nr(s,p[0],this.transform.zoom),b?p[1]:Nr(s,p[1],this.transform.zoom),0],C=new Float32Array(16);return c.translate(C,n,S),C}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!s||!p}useProgram(n,s){this.cache=this.cache||{};const p=`${n}${s?s.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[p]||(this.cache[p]=new Zh(this.context,n,dc[n],s,_c[n],this._showOverdrawInspector)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ee(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class tl{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,p){const f=Math.pow(2,p),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>c.transformMat4([],S,n)).map(S=>c.scale$1([],S,1/S[3]/s*f)),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const C=function(j,Y){var $=Y[0],X=Y[1],ae=Y[2],se=$*$+X*X+ae*ae;return se>0&&(se=1/Math.sqrt(se)),j[0]=Y[0]*se,j[1]=Y[1]*se,j[2]=Y[2]*se,j}([],function(j,Y,$){var X=Y[0],ae=Y[1],se=Y[2],ue=$[0],le=$[1],Se=$[2];return j[0]=ae*Se-se*le,j[1]=se*ue-X*Se,j[2]=X*le-ae*ue,j}([],re([],b[S[0]],b[S[1]]),re([],b[S[2]],b[S[1]]))),I=-((L=C)[0]*(O=b[S[1]])[0]+L[1]*O[1]+L[2]*O[2]);var L,O;return C.concat(I)});return new tl(b,_)}}class rl{constructor(n,s){this.min=n,this.max=s,this.center=function(p,f,b){return p[0]=.5*f[0],p[1]=.5*f[1],p[2]=.5*f[2],p}([],function(p,f,b){return p[0]=f[0]+b[0],p[1]=f[1]+b[1],p[2]=f[2]+b[2],p}([],this.min,this.max))}quadrant(n){const s=[n%2==0,n<2],p=ye(this.min),f=ye(this.max);for(let b=0;b<s.length;b++)p[b]=s[b]?this.min[b]:this.center[b],f[b]=s[b]?this.center[b]:this.max[b];return f[2]=this.max[2],new rl(p,f)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let p=!0;for(let f=0;f<n.planes.length;f++){const b=n.planes[f];let _=0;for(let S=0;S<s.length;S++)c.dot(b,s[S])>=0&&_++;if(_===0)return 0;_!==s.length&&(p=!1)}if(p)return 2;for(let f=0;f<3;f++){let b=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let S=0;S<n.points.length;S++){const C=n.points[S][f]-this.min[f];b=Math.min(b,C),_=Math.max(_,C)}if(_<0||b>this.max[f]-this.min[f])return 0}return 1}}class ca{constructor(n=0,s=0,p=0,f=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(p)||p<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=p,this.right=f}interpolate(n,s,p){return s.top!=null&&n.top!=null&&(this.top=c.number(n.top,s.top,p)),s.bottom!=null&&n.bottom!=null&&(this.bottom=c.number(n.bottom,s.bottom,p)),s.left!=null&&n.left!=null&&(this.left=c.number(n.left,s.left,p)),s.right!=null&&n.right!=null&&(this.right=c.number(n.right,s.right,p)),this}getCenter(n,s){const p=c.clamp((this.left+n-this.right)/2,0,n),f=c.clamp((this.top+s-this.bottom)/2,0,s);return new c.pointGeometry(p,f)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new ca(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class es{constructor(n,s,p,f,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=p==null?0:p,this._maxPitch=f==null?60:f,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ca,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new es(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const s=-c.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=function(){var p=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,f,b){var _=f[0],S=f[1],C=f[2],I=f[3],L=Math.sin(b),O=Math.cos(b);p[0]=_*O+C*L,p[1]=S*O+I*L,p[2]=_*-L+C*O,p[3]=S*-L+I*O}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const s=c.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,p){this._unmodified=!1,this._edgeInsets.interpolate(n,s,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(n){const s=[new c.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const p=this.pointCoordinate(new c.pointGeometry(0,0)),f=this.pointCoordinate(new c.pointGeometry(this.width,0)),b=this.pointCoordinate(new c.pointGeometry(this.width,this.height)),_=this.pointCoordinate(new c.pointGeometry(0,this.height)),S=Math.floor(Math.min(p.x,f.x,b.x,_.x)),C=Math.floor(Math.max(p.x,f.x,b.x,_.x)),I=1;for(let L=S-I;L<=C+I;L++)L!==0&&s.push(new c.UnwrappedTileID(L,n))}return s}coveringTiles(n){let s=this.coveringZoomLevel(n);const p=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);const f=c.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,s),_=[b*f.x,b*f.y,0],S=tl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s);let C=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(C=s);const I=$=>({aabb:new rl([$*b,0,0],[($+1)*b,b,0]),zoom:0,x:0,y:0,wrap:$,fullyVisible:!1}),L=[],O=[],j=s,Y=n.reparseOverscaled?p:s;if(this._renderWorldCopies)for(let $=1;$<=3;$++)L.push(I(-$)),L.push(I($));for(L.push(I(0));L.length>0;){const $=L.pop(),X=$.x,ae=$.y;let se=$.fullyVisible;if(!se){const _e=$.aabb.intersects(S);if(_e===0)continue;se=_e===2}const ue=$.aabb.distanceX(_),le=$.aabb.distanceY(_),Se=Math.max(Math.abs(ue),Math.abs(le)),xe=3+(1<<j-$.zoom)-2;if($.zoom===j||Se>xe&&$.zoom>=C)O.push({tileID:new c.OverscaledTileID($.zoom===j?Y:$.zoom,$.wrap,$.zoom,X,ae),distanceSq:K([_[0]-.5-X,_[1]-.5-ae])});else for(let _e=0;_e<4;_e++){const Ae=(X<<1)+_e%2,Oe=(ae<<1)+(_e>>1);L.push({aabb:$.aabb.quadrant(_e),zoom:$.zoom+1,x:Ae,y:Oe,wrap:$.wrap,fullyVisible:se})}}return O.sort(($,X)=>$.distanceSq-X.distanceSq).map($=>$.tileID)}resize(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const s=c.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.pointGeometry(c.mercatorXfromLng(n.lng)*this.worldSize,c.mercatorYfromLat(s)*this.worldSize)}unproject(n){return new c.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(n,s){const p=this.pointCoordinate(s),f=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(n),_=new c.MercatorCoordinate(b.x-(p.x-f.x),b.y-(p.y-f.y));this.center=this.coordinateLocation(_),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n){return this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n){return this.coordinateLocation(this.pointCoordinate(n))}locationCoordinate(n){return c.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n.toLngLat()}pointCoordinate(n){const s=[n.x,n.y,0,1],p=[n.x,n.y,1,1];c.transformMat4(s,s,this.pixelMatrixInverse),c.transformMat4(p,p,this.pixelMatrixInverse);const f=s[3],b=p[3],_=s[1]/f,S=p[1]/b,C=s[2]/f,I=p[2]/b,L=C===I?0:(0-C)/(I-C);return new c.MercatorCoordinate(c.number(s[0]/f,p[0]/b,L)/this.worldSize,c.number(_,S,L)/this.worldSize)}coordinatePoint(n){const s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.transformMat4(s,s,this.pixelMatrix),new c.pointGeometry(s[0]/s[3],s[1]/s[3])}getBounds(){return new c.LngLatBounds().extend(this.pointLocation(new c.pointGeometry(0,0))).extend(this.pointLocation(new c.pointGeometry(this.width,0))).extend(this.pointLocation(new c.pointGeometry(this.width,this.height))).extend(this.pointLocation(new c.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,s=!1){const p=n.key,f=s?this._alignedPosMatrixCache:this._posMatrixCache;if(f[p])return f[p];const b=n.canonical,_=this.worldSize/this.zoomScale(b.z),S=b.x+Math.pow(2,b.z)*n.wrap,C=c.identity(new Float64Array(16));return c.translate(C,C,[S*_,b.y*_,0]),c.scale(C,C,[_/c.EXTENT,_/c.EXTENT,1]),c.multiply(C,s?this.alignedProjMatrix:this.projMatrix,C),f[p]=new Float32Array(C),f[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,s,p,f,b=-90,_=90,S=-180,C=180;const I=this.size,L=this._unmodified;if(this.latRange){const Y=this.latRange;b=c.mercatorYfromLat(Y[1])*this.worldSize,_=c.mercatorYfromLat(Y[0])*this.worldSize,n=_-b<I.y?I.y/(_-b):0}if(this.lngRange){const Y=this.lngRange;S=c.mercatorXfromLng(Y[0])*this.worldSize,C=c.mercatorXfromLng(Y[1])*this.worldSize,s=C-S<I.x?I.x/(C-S):0}const O=this.point,j=Math.max(s||0,n||0);if(j)return this.center=this.unproject(new c.pointGeometry(s?(C+S)/2:O.x,n?(_+b)/2:O.y)),this.zoom+=this.scaleZoom(j),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const Y=O.y,$=I.y/2;Y-$<b&&(f=b+$),Y+$>_&&(f=_-$)}if(this.lngRange){const Y=O.x,$=I.x/2;Y-$<S&&(p=S+$),Y+$>C&&(p=C-$)}p===void 0&&f===void 0||(this.center=this.unproject(new c.pointGeometry(p!==void 0?p:O.x,f!==void 0?f:O.y))),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const s=Math.PI/2+this._pitch,p=this._fov*(.5+n.y/this.height),f=Math.sin(p)*this.cameraToCenterDistance/Math.sin(c.clamp(Math.PI-s-p,.01,Math.PI-.01)),b=this.point,_=b.x,S=b.y,C=1.01*(Math.cos(Math.PI/2-this._pitch)*f+this.cameraToCenterDistance),I=this.height/50;let L=new Float64Array(16);c.perspective(L,this._fov,this.width/this.height,I,C),L[8]=2*-n.x/this.width,L[9]=2*n.y/this.height,c.scale(L,L,[1,-1,1]),c.translate(L,L,[0,0,-this.cameraToCenterDistance]),c.rotateX(L,L,this._pitch),c.rotateZ(L,L,this.angle),c.translate(L,L,[-_,-S,0]),this.mercatorMatrix=c.scale([],L,[this.worldSize,this.worldSize,this.worldSize]),c.scale(L,L,[1,1,c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=L,this.invProjMatrix=c.invert([],this.projMatrix);const O=this.width%2/2,j=this.height%2/2,Y=Math.cos(this.angle),$=Math.sin(this.angle),X=_-Math.round(_)+Y*O+$*j,ae=S-Math.round(S)+Y*j+$*O,se=new Float64Array(L);if(c.translate(se,se,[X>.5?X-1:X,ae>.5?ae-1:ae,0]),this.alignedProjMatrix=se,L=c.create(),c.scale(L,L,[this.width/2,-this.height/2,1]),c.translate(L,L,[1,-1,0]),this.labelPlaneMatrix=L,L=c.create(),c.scale(L,L,[1,-1,1]),c.translate(L,L,[-1,-1,0]),c.scale(L,L,[2/this.width,2/this.height,1]),this.glCoordMatrix=L,this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),L=c.invert(new Float64Array(16),this.pixelMatrix),!L)throw new Error("failed to invert matrix");this.pixelMatrixInverse=L,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new c.pointGeometry(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.pointGeometry(0,n))}getCameraQueryGeometry(n){const s=this.getCameraPoint();if(n.length===1)return[n[0],s];{let p=s.x,f=s.y,b=s.x,_=s.y;for(const S of n)p=Math.min(p,S.x),f=Math.min(f,S.y),b=Math.max(b,S.x),_=Math.max(_,S.y);return[new c.pointGeometry(p,f),new c.pointGeometry(b,f),new c.pointGeometry(b,_),new c.pointGeometry(p,_),new c.pointGeometry(p,f)]}}}class Mp{constructor(n){this._hashName=n&&encodeURIComponent(n),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(s,p){let f=!1,b=null;const _=()=>{b=null,f&&(s(),b=setTimeout(_,300),f=!1)};return()=>(f=!0,b||_(),b)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const s=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,f=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,f),_=Math.round(s.lng*b)/b,S=Math.round(s.lat*b)/b,C=this._map.getBearing(),I=this._map.getPitch();let L="";if(L+=n?`/${_}/${S}/${p}`:`${p}/${S}/${_}`,(C||I)&&(L+="/"+Math.round(10*C)/10),I&&(L+=`/${Math.round(I)}`),this._hashName){const O=this._hashName;let j=!1;const Y=window.location.hash.slice(1).split("&").map($=>{const X=$.split("=")[0];return X===O?(j=!0,`${X}=${L}`):$}).filter($=>$);return j||Y.push(`${O}=${L}`),`#${Y.join("&")}`}return`#${L}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let s;return n.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(s=p)}),(s&&s[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(s=>isNaN(s))){const s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const ts={linearity:.3,easing:c.bezier(0,0,.3,1)},Ap=c.extend({deceleration:2500,maxSpeed:1400},ts),Dp=c.extend({deceleration:20,maxSpeed:1400},ts),Lp=c.extend({deceleration:1e3,maxSpeed:360},ts),ua=c.extend({deceleration:1e3,maxSpeed:90},ts);class Rp{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=c.exported.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new c.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)s.zoom+=b.zoomDelta||0,s.bearing+=b.bearingDelta||0,s.pitch+=b.pitchDelta||0,b.panDelta&&s.pan._add(b.panDelta),b.around&&(s.around=b.around),b.pinchAround&&(s.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(s.pan.mag()){const b=ns(s.pan.mag(),p,c.extend({},Ap,n||{}));f.offset=s.pan.mult(b.amount/s.pan.mag()),f.center=this._map.transform.center,rs(f,b)}if(s.zoom){const b=ns(s.zoom,p,Dp);f.zoom=this._map.transform.zoom+b.amount,rs(f,b)}if(s.bearing){const b=ns(s.bearing,p,Lp);f.bearing=this._map.transform.bearing+c.clamp(b.amount,-179,179),rs(f,b)}if(s.pitch){const b=ns(s.pitch,p,ua);f.pitch=this._map.transform.pitch+b.amount,rs(f,b)}if(f.zoom||f.bearing){const b=s.pinchAround===void 0?s.around:s.pinchAround;f.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),c.extend(f,{noMoveStart:!0})}}function rs(h,n){(!h.duration||h.duration<n.duration)&&(h.duration=n.duration,h.easing=n.easing)}function ns(h,n,s){const{maxSpeed:p,linearity:f,deceleration:b}=s,_=c.clamp(h*f/(n/1e3),-p,p),S=Math.abs(_)/(b*f);return{easing:s.easing,duration:1e3*S,amount:_*(S/2)}}class Mn extends c.Event{constructor(n,s,p,f={}){const b=V.mousePos(s.getCanvasContainer(),p),_=s.unproject(b);super(n,c.extend({point:b,lngLat:_,originalEvent:p},f)),this._defaultPrevented=!1,this.target=s}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class vn extends c.Event{constructor(n,s,p){const f=n==="touchend"?p.changedTouches:p.touches,b=V.touchPos(s.getCanvasContainer(),f),_=b.map(C=>s.unproject(C)),S=b.reduce((C,I,L,O)=>C.add(I.div(O.length)),new c.pointGeometry(0,0));super(n,{points:b,point:S,lngLats:_,lngLat:s.unproject(S),originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class nm extends c.Event{constructor(n,s,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Eo{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new nm(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new Mn(n.type,this._map,n))}mouseup(n){this._map.fire(new Mn(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Mn(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Mn(n.type,this._map,n))}mouseover(n){this._map.fire(new Mn(n.type,this._map,n))}mouseout(n){this._map.fire(new Mn(n.type,this._map,n))}touchstart(n){return this._firePreventable(new vn(n.type,this._map,n))}touchmove(n){this._map.fire(new vn(n.type,this._map,n))}touchend(n){this._map.fire(new vn(n.type,this._map,n))}touchcancel(n){this._map.fire(new vn(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Op{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Mn(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Mn(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pa{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(V.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const p=s;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=p,this._box||(this._box=V.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));const b=Math.min(f.x,p.x),_=Math.max(f.x,p.x),S=Math.min(f.y,p.y),C=Math.max(f.y,p.y);V.setTransform(this._box,`translate(${b}px,${S}px)`),this._box.style.width=_-b+"px",this._box.style.height=C-S+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const p=this._startPos,f=s;if(this.reset(),V.suppressClick(),p.x!==f.x||p.y!==f.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:b=>b.fitScreenCoordinates(p,f,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(V.remove(this._box),this._box=null),V.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new c.Event(n,{originalEvent:s}))}}function So(h,n){const s={};for(let p=0;p<h.length;p++)s[h[p].identifier]=n[p];return s}class im{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=function(f){const b=new c.pointGeometry(0,0);for(const _ of f)b._add(_);return b.div(f.length)}(s),this.touches=So(p,s)))}touchmove(n,s,p){if(this.aborted||!this.centroid)return;const f=So(p,s);for(const b in this.touches){const _=this.touches[b],S=f[b];(!S||S.dist(_)>30)&&(this.aborted=!0)}}touchend(n,s,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Fc{constructor(n){this.singleTap=new im(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,p){this.singleTap.touchstart(n,s,p)}touchmove(n,s,p){this.singleTap.touchmove(n,s,p)}touchend(n,s,p){const f=this.singleTap.touchend(n,s,p);if(f){const b=n.timeStamp-this.lastTime<500,_=!this.lastTap||this.lastTap.dist(f)<30;if(b&&_||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class om{constructor(){this._zoomIn=new Fc({numTouches:1,numTaps:2}),this._zoomOut=new Fc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,p){this._zoomIn.touchstart(n,s,p),this._zoomOut.touchstart(n,s,p)}touchmove(n,s,p){this._zoomIn.touchmove(n,s,p),this._zoomOut.touchmove(n,s,p)}touchend(n,s,p){const f=this._zoomIn.touchend(n,s,p),b=this._zoomOut.touchend(n,s,p);return f?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:_=>_.easeTo({duration:300,zoom:_.getZoom()+1,around:_.unproject(f)},{originalEvent:n})}):b?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:_=>_.easeTo({duration:300,zoom:_.getZoom()-1,around:_.unproject(b)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Bp={0:1,2:2};class Co{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(n,s){return!1}_move(n,s){return{}}mousedown(n,s){if(this._lastPoint)return;const p=V.mouseButton(n);this._correctButton(n,p)&&(this._lastPoint=s,this._eventButton=p)}mousemoveWindow(n,s){const p=this._lastPoint;if(p){if(n.preventDefault(),function(f,b){const _=Bp[b];return f.buttons===void 0||(f.buttons&_)!==_}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(p,s)}}mouseupWindow(n){this._lastPoint&&V.mouseButton(n)===this._eventButton&&(this._moved&&V.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class da extends Co{mousedown(n,s){super.mousedown(n,s),this._lastPoint&&(this._active=!0)}_correctButton(n,s){return s===0&&!n.ctrlKey}_move(n,s){return{around:s,panDelta:s.sub(n)}}}class Ye extends Co{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const p=.8*(s.x-n.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(n){n.preventDefault()}}class Nc extends Co{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const p=-.5*(s.y-n.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(n){n.preventDefault()}}class is{constructor(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.pointGeometry(0,0)}touchstart(n,s,p){return this._calculateTransform(n,s,p)}touchmove(n,s,p){if(this._active&&!(p.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,p)}touchend(n,s,p){this._calculateTransform(n,s,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,p){p.length>0&&(this._active=!0);const f=So(p,s),b=new c.pointGeometry(0,0),_=new c.pointGeometry(0,0);let S=0;for(const I in f){const L=f[I],O=this._touches[I];O&&(b._add(L),_._add(L.sub(O)),S++,f[I]=L)}if(this._touches=f,S<this._minTouches||!_.mag())return;const C=_.div(S);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(S),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class To{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,s,p){return{}}touchstart(n,s,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,p){if(!this._firstTwoTouches)return;n.preventDefault();const[f,b]=this._firstTwoTouches,_=os(p,s,f),S=os(p,s,b);if(!_||!S)return;const C=this._aroundCenter?null:_.add(S).div(2);return this._move([_,S],C,n)}touchend(n,s,p){if(!this._firstTwoTouches)return;const[f,b]=this._firstTwoTouches,_=os(p,s,f),S=os(p,s,b);_&&S||(this._active&&V.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function os(h,n,s){for(let p=0;p<h.length;p++)if(h[p].identifier===s)return n[p]}function Ve(h,n){return Math.log(h/n)/Math.LN2}class Uc extends To{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Ve(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ve(this._distance,p),pinchAround:s}}}function Fp(h,n){return 180*h.angleWith(n)/Math.PI}class am extends To{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s){const p=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fp(this._vector,p),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,p=Fp(n,this._startVector);return Math.abs(p)<s}}function as(h){return Math.abs(h.y)>Math.abs(h.x)}class Np extends To{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(n){this._lastPoints=n,as(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,p){const f=n[0].sub(this._lastPoints[0]),b=n[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(f,b,p.timeStamp),this._valid)return this._lastPoints=n,this._active=!0,{pitchDelta:(f.y+b.y)/2*-.5}}gestureBeginsVertically(n,s,p){if(this._valid!==void 0)return this._valid;const f=n.mag()>=2,b=s.mag()>=2;if(!f&&!b)return;if(!f||!b)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const _=n.y>0==s.y>0;return as(n)&&as(s)&&_}}const Up={panStep:100,bearingStep:15,pitchStep:10};class sm{constructor(){const n=Up;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,p=0,f=0,b=0,_=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),b=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),b=1);break;case 38:n.shiftKey?f=1:(n.preventDefault(),_=-1);break;case 40:n.shiftKey?f=-1:(n.preventDefault(),_=1);break;default:return}return this._rotationDisabled&&(p=0,f=0),{cameraAnimation:S=>{const C=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:lm,zoom:s?Math.round(C)+s*(n.shiftKey?2:1):C,bearing:S.getBearing()+p*this._bearingStep,pitch:S.getPitch()+f*this._pitchStep,offset:[-b*this._panStep,-_*this._panStep],center:S.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function lm(h){return h*(2-h)}const nl=4.000244140625;class Vc{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=c.exported.now(),f=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,s!==0&&s%nl==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(f*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=V.mousePos(this._el,n);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>nl?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&C!==0&&(C=1/C);const I=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(I*C))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,p=this._startZoom,f=this._easing;let b,_=!1;if(this._type==="wheel"&&p&&f){const S=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),C=f(S);b=c.number(p,s,C),S<1?this._frameId||(this._frameId=!0):_=!0}else b=s,_=!0;return this._active=!0,_&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!_,zoomDelta:b-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=c.ease;if(this._prevEase){const p=this._prevEase,f=(c.exported.now()-p.start)/p.duration,b=p.easing(f+.01)-p.easing(f),_=.27/Math.sqrt(b*b+1e-4)*.01,S=Math.sqrt(.0729-_*_);s=c.bezier(_,S,.25,1)}return this._prevEase={start:c.exported.now(),duration:n,easing:s},s}reset(){this._active=!1}}class jc{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $c{constructor(){this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(n.shiftKey?-1:1),around:p.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _n{constructor(){this._tap=new Fc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,s,p){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=s[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(n,s,p))}touchmove(n,s,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const f=s[0],b=f.y-this._swipePoint.y;return this._swipePoint=f,n.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(n,s,p)}touchend(n,s,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(n,s,p)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oo{constructor(n,s,p){this._el=n,this._mousePan=s,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vp{constructor(n,s,p){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gc{constructor(n,s,p,f){this._el=n,this._touchZoom=s,this._touchRotate=p,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ha=h=>h.zoom||h.drag||h.pitch||h.rotate;class qc extends c.Event{}function il(h){return h.panDelta&&h.panDelta.mag()||h.zoomDelta||h.bearingDelta||h.pitchDelta}class qn{constructor(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Rp(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),c.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,b,_]of this._listeners)V.addEventListener(f,b,f===document?this.handleWindowEvent:this.handleEvent,_)}destroy(){for(const[n,s,p]of this._listeners)V.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const s=this._map,p=s.getCanvasContainer();this._add("mapEvent",new Eo(s,n));const f=s.boxZoom=new pa(s,n);this._add("boxZoom",f);const b=new om,_=new $c;s.doubleClickZoom=new jc(_,b),this._add("tapZoom",b),this._add("clickZoom",_);const S=new _n;this._add("tapDragZoom",S);const C=s.touchPitch=new Np;this._add("touchPitch",C);const I=new Ye(n),L=new Nc(n);s.dragRotate=new Vp(n,I,L),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const O=new da(n),j=new is(n);s.dragPan=new oo(p,O,j),this._add("mousePan",O),this._add("touchPan",j,["touchZoom","touchRotate"]);const Y=new am,$=new Uc;s.touchZoomRotate=new Gc(p,$,Y,S),this._add("touchRotate",Y,["touchPan","touchZoom"]),this._add("touchZoom",$,["touchPan","touchRotate"]);const X=s.scrollZoom=new Vc(s,this);this._add("scrollZoom",X,["mousePan"]);const ae=s.keyboard=new sm;this._add("keyboard",ae),this._add("blockableMapEvent",new Op(s));for(const se of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[se]&&s[se].enable(n[se])}_add(n,s,p){this._handlers.push({handlerName:n,handler:s,allowed:p}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(ha(this._eventsInProgress))||this.isZooming()}_blockedByActive(n,s,p){for(const f in n)if(f!==p&&(!s||s.indexOf(f)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const s=[];for(const p of n)this._el.contains(p.target)&&s.push(p);return s}handleEvent(n,s){if(n.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const p=n.type==="renderFrame"?void 0:n,f={needsRenderFrame:!1},b={},_={},S=n.touches,C=S?this._getMapTouches(S):void 0,I=C?V.touchPos(this._el,C):V.mousePos(this._el,n);for(const{handlerName:j,handler:Y,allowed:$}of this._handlers){if(!Y.isEnabled())continue;let X;this._blockedByActive(_,$,j)?Y.reset():Y[s||n.type]&&(X=Y[s||n.type](n,I,C),this.mergeHandlerResult(f,b,X,j,p),X&&X.needsRenderFrame&&this._triggerRenderFrame()),(X||Y.isActive())&&(_[j]=Y)}const L={};for(const j in this._previousActiveHandlers)_[j]||(L[j]=p);this._previousActiveHandlers=_,(Object.keys(L).length||il(f))&&(this._changes.push([f,b,L]),this._triggerRenderFrame()),(Object.keys(_).length||il(f))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:O}=f;O&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],O(this._map))}mergeHandlerResult(n,s,p,f,b){if(!p)return;c.extend(n,p);const _={handlerName:f,originalEvent:p.originalEvent||b};p.zoomDelta!==void 0&&(s.zoom=_),p.panDelta!==void 0&&(s.drag=_),p.pitchDelta!==void 0&&(s.pitch=_),p.bearingDelta!==void 0&&(s.rotate=_)}_applyChanges(){const n={},s={},p={};for(const[f,b,_]of this._changes)f.panDelta&&(n.panDelta=(n.panDelta||new c.pointGeometry(0,0))._add(f.panDelta)),f.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(n.around=f.around),f.pinchAround!==void 0&&(n.pinchAround=f.pinchAround),f.noInertia&&(n.noInertia=f.noInertia),c.extend(s,b),c.extend(p,_);this._updateMapTransform(n,s,p),this._changes=[]}_updateMapTransform(n,s,p){const f=this._map,b=f.transform;if(!il(n))return this._fireEvents(s,p,!0);let{panDelta:_,zoomDelta:S,bearingDelta:C,pitchDelta:I,around:L,pinchAround:O}=n;O!==void 0&&(L=O),f._stop(!0),L=L||f.transform.centerPoint;const j=b.pointLocation(_?L.sub(_):L);C&&(b.bearing+=C),I&&(b.pitch+=I),S&&(b.zoom+=S),b.setLocationAtPoint(j,L),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,p,!0)}_fireEvents(n,s,p){const f=ha(this._eventsInProgress),b=ha(n),_={};for(const L in n){const{originalEvent:O}=n[L];this._eventsInProgress[L]||(_[`${L}start`]=O),this._eventsInProgress[L]=n[L]}!f&&b&&this._fireEvent("movestart",b.originalEvent);for(const L in _)this._fireEvent(L,_[L]);b&&this._fireEvent("move",b.originalEvent);for(const L in n){const{originalEvent:O}=n[L];this._fireEvent(L,O)}const S={};let C;for(const L in this._eventsInProgress){const{handlerName:O,originalEvent:j}=this._eventsInProgress[L];this._handlersById[O].isActive()||(delete this._eventsInProgress[L],C=s[O]||j,S[`${L}end`]=C)}for(const L in S)this._fireEvent(L,S[L]);const I=ha(this._eventsInProgress);if(p&&(f||b)&&!I){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),O=j=>j!==0&&-this._bearingSnap<j&&j<this._bearingSnap;L?(O(L.bearing||this._map.getBearing())&&(L.bearing=0),this._map.easeTo(L,{originalEvent:C})):(this._map.fire(new c.Event("moveend",{originalEvent:C})),O(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new c.Event(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new qc("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const sr={extend:(h,...n)=>c.extend(h,...n),run(h){h()},logToElement(h,n=!1,s="log"){const p=window.document.getElementById(s);p&&(n&&(p.innerHTML=""),p.innerHTML+=`<br>${h}`)}};class ol extends c.Evented{constructor(n,s){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}panBy(n,s,p){return n=c.pointGeometry.convert(n).mult(-1),this.panTo(this.transform.center,c.extend({offset:n},s),p)}panTo(n,s,p){return this.easeTo(c.extend({center:n},s),p)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,p){return this.easeTo(c.extend({zoom:n},s),p)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,p){return this.easeTo(c.extend({bearing:n},s),p)}resetNorth(n,s){return this.rotateTo(0,c.extend({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}cameraForBounds(n,s){n=c.LngLatBounds.convert(n);const p=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,s)}_cameraForBoxAndBearing(n,s,p,f){const b={top:0,bottom:0,right:0,left:0};if(typeof(f=c.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const xe=f.padding;f.padding={top:xe,bottom:xe,right:xe,left:xe}}f.padding=c.extend(b,f.padding);const _=this.transform,S=_.padding,C=_.project(c.LngLat.convert(n)),I=_.project(c.LngLat.convert(s)),L=C.rotate(-p*Math.PI/180),O=I.rotate(-p*Math.PI/180),j=new c.pointGeometry(Math.max(L.x,O.x),Math.max(L.y,O.y)),Y=new c.pointGeometry(Math.min(L.x,O.x),Math.min(L.y,O.y)),$=j.sub(Y),X=(_.width-(S.left+S.right+f.padding.left+f.padding.right))/$.x,ae=(_.height-(S.top+S.bottom+f.padding.top+f.padding.bottom))/$.y;if(ae<0||X<0)return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const se=Math.min(_.scaleZoom(_.scale*Math.min(X,ae)),f.maxZoom),ue=c.pointGeometry.convert(f.offset),le=new c.pointGeometry((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(p*Math.PI/180),Se=ue.add(le).mult(_.scale/_.zoomScale(se));return{center:_.unproject(C.add(I).div(2).sub(Se)),zoom:se,bearing:p}}fitBounds(n,s,p){return this._fitInternal(this.cameraForBounds(n,s),s,p)}fitScreenCoordinates(n,s,p,f,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.pointGeometry.convert(n)),this.transform.pointLocation(c.pointGeometry.convert(s)),p,f),f,b)}_fitInternal(n,s,p){return n?(delete(s=c.extend(n,s)).padding,s.linear?this.easeTo(s,p):this.flyTo(s,p)):this}jumpTo(n,s){this.stop();const p=this.transform;let f=!1,b=!1,_=!1;return"zoom"in n&&p.zoom!==+n.zoom&&(f=!0,p.zoom=+n.zoom),n.center!==void 0&&(p.center=c.LngLat.convert(n.center)),"bearing"in n&&p.bearing!==+n.bearing&&(b=!0,p.bearing=+n.bearing),"pitch"in n&&p.pitch!==+n.pitch&&(_=!0,p.pitch=+n.pitch),n.padding==null||p.isPaddingEqual(n.padding)||(p.padding=n.padding),this.fire(new c.Event("movestart",s)).fire(new c.Event("move",s)),f&&this.fire(new c.Event("zoomstart",s)).fire(new c.Event("zoom",s)).fire(new c.Event("zoomend",s)),b&&this.fire(new c.Event("rotatestart",s)).fire(new c.Event("rotate",s)).fire(new c.Event("rotateend",s)),_&&this.fire(new c.Event("pitchstart",s)).fire(new c.Event("pitch",s)).fire(new c.Event("pitchend",s)),this.fire(new c.Event("moveend",s))}easeTo(n,s){this._stop(!1,n.easeId),((n=c.extend({offset:[0,0],duration:500,easing:c.ease},n)).animate===!1||!n.essential&&c.exported.prefersReducedMotion)&&(n.duration=0);const p=this.transform,f=this.getZoom(),b=this.getBearing(),_=this.getPitch(),S=this.getPadding(),C="zoom"in n?+n.zoom:f,I="bearing"in n?this._normalizeBearing(n.bearing,b):b,L="pitch"in n?+n.pitch:_,O="padding"in n?n.padding:p.padding,j=c.pointGeometry.convert(n.offset);let Y=p.centerPoint.add(j);const $=p.pointLocation(Y),X=c.LngLat.convert(n.center||$);this._normalizeCenter(X);const ae=p.project($),se=p.project(X).sub(ae),ue=p.zoomScale(C-f);let le,Se;n.around&&(le=c.LngLat.convert(n.around),Se=p.locationPoint(le));const xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||C!==f,this._rotating=this._rotating||b!==I,this._pitching=this._pitching||L!==_,this._padding=!p.isPaddingEqual(O),this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,xe),this._ease(_e=>{if(this._zooming&&(p.zoom=c.number(f,C,_e)),this._rotating&&(p.bearing=c.number(b,I,_e)),this._pitching&&(p.pitch=c.number(_,L,_e)),this._padding&&(p.interpolatePadding(S,O,_e),Y=p.centerPoint.add(j)),le)p.setLocationAtPoint(le,Se);else{const Ae=p.zoomScale(p.zoom-f),Oe=C>f?Math.min(2,ue):Math.max(.5,ue),Ee=Math.pow(Oe,1-_e),et=p.unproject(ae.add(se.mult(_e*Ee)).mult(Ae));p.setLocationAtPoint(p.renderWorldCopies?et.wrap():et,Y)}this._fireMoveEvents(s)},_e=>{this._afterEase(s,_e)},n),this}_prepareEase(n,s,p={}){this._moving=!0,s||p.moving||this.fire(new c.Event("movestart",n)),this._zooming&&!p.zooming&&this.fire(new c.Event("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new c.Event("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new c.Event("pitchstart",n))}_fireMoveEvents(n){this.fire(new c.Event("move",n)),this._zooming&&this.fire(new c.Event("zoom",n)),this._rotating&&this.fire(new c.Event("rotate",n)),this._pitching&&this.fire(new c.Event("pitch",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const p=this._zooming,f=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new c.Event("zoomend",n)),f&&this.fire(new c.Event("rotateend",n)),b&&this.fire(new c.Event("pitchend",n)),this.fire(new c.Event("moveend",n))}flyTo(n,s){if(!n.essential&&c.exported.prefersReducedMotion){const Mt=c.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Mt,s)}this.stop(),n=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},n);const p=this.transform,f=this.getZoom(),b=this.getBearing(),_=this.getPitch(),S=this.getPadding(),C="zoom"in n?c.clamp(+n.zoom,p.minZoom,p.maxZoom):f,I="bearing"in n?this._normalizeBearing(n.bearing,b):b,L="pitch"in n?+n.pitch:_,O="padding"in n?n.padding:p.padding,j=p.zoomScale(C-f),Y=c.pointGeometry.convert(n.offset);let $=p.centerPoint.add(Y);const X=p.pointLocation($),ae=c.LngLat.convert(n.center||X);this._normalizeCenter(ae);const se=p.project(X),ue=p.project(ae).sub(se);let le=n.curve;const Se=Math.max(p.width,p.height),xe=Se/j,_e=ue.mag();if("minZoom"in n){const Mt=c.clamp(Math.min(n.minZoom,f,C),p.minZoom,p.maxZoom),mr=Se/p.zoomScale(Mt-f);le=Math.sqrt(mr/_e*2)}const Ae=le*le;function Oe(Mt){const mr=(xe*xe-Se*Se+(Mt?-1:1)*Ae*Ae*_e*_e)/(2*(Mt?xe:Se)*Ae*_e);return Math.log(Math.sqrt(mr*mr+1)-mr)}function Ee(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function et(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}const Ge=Oe(0);let mt=function(Mt){return et(Ge)/et(Ge+le*Mt)},Dt=function(Mt){return Se*((et(Ge)*(Ee(mr=Ge+le*Mt)/et(mr))-Ee(Ge))/Ae)/_e;var mr},Tt=(Oe(1)-Ge)/le;if(Math.abs(_e)<1e-6||!isFinite(Tt)){if(Math.abs(Se-xe)<1e-6)return this.easeTo(n,s);const Mt=xe<Se?-1:1;Tt=Math.abs(Math.log(xe/Se))/le,Dt=function(){return 0},mt=function(mr){return Math.exp(Mt*le*mr)}}return n.duration="duration"in n?+n.duration:1e3*Tt/("screenSpeed"in n?+n.screenSpeed/le:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=b!==I,this._pitching=L!==_,this._padding=!p.isPaddingEqual(O),this._prepareEase(s,!1),this._ease(Mt=>{const mr=Mt*Tt,ft=1/mt(mr);p.zoom=Mt===1?C:f+p.scaleZoom(ft),this._rotating&&(p.bearing=c.number(b,I,Mt)),this._pitching&&(p.pitch=c.number(_,L,Mt)),this._padding&&(p.interpolatePadding(S,O,Mt),$=p.centerPoint.add(Y));const Ot=Mt===1?ae:p.unproject(se.add(ue.mult(Dt(mr))).mult(ft));p.setLocationAtPoint(p.renderWorldCopies?Ot.wrap():Ot,$),this._fireMoveEvents(s)},()=>this._afterEase(s),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,s)}if(!n){const p=this.handlers;p&&p.stop(!1)}return this}_ease(n,s,p){p.animate===!1||p.duration===0?(n(1),s()):(this._easeStart=c.exported.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,s){n=c.wrap(n,-180,180);const p=Math.abs(n-s);return Math.abs(n-360-s)<p&&(n-=360),Math.abs(n+360-s)<p&&(n+=360),n}_normalizeCenter(n){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const p=n.lng-s.center.lng;n.lng+=p>180?-360:p<-180?360:0}}class al{constructor(n={}){this.options=n,c.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=V.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=V.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=V.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){V.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const p=this._map._getUIString(`AttributionControl.${s}`);n.title=p,n.setAttribute("aria-label",p)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const s=this._map.style.sourceCaches;for(const f in s){const b=s[f];if(b.used){const _=b.getSource();_.attribution&&n.indexOf(_.attribution)<0&&n.push(_.attribution)}}n=n.filter(f=>String(f).trim()),n.sort((f,b)=>f.length-b.length),n=n.filter((f,b)=>{for(let _=b+1;_<n.length;_++)if(n[_].indexOf(f)>=0)return!1;return!0});const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Zc{constructor(n={}){this.options=n,c.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=V.create("div","maplibregl-ctrl mapboxgl-ctrl");const s=V.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){V.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const n=this._container.children;if(n.length){const s=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&s.classList.add("maplibregl-compact","mapboxgl-compact"):s.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class jp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,p=s?this._queue.concat(s):this._queue;for(const f of p)if(f.id===n)return void(f.cancelled=!0)}run(n=0){const s=this._currentlyRunning=this._queue;this._queue=[];for(const p of s)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const $p={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},cm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ki={showCompass:!0,showZoom:!0,visualizePitch:!1};class sl{constructor(n,s,p=!1){this._clickTolerance=10,this.element=s,this.mouseRotate=new Ye({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,p&&(this.mousePitch=new Nc({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),V.addEventListener(s,"mousedown",this.mousedown),V.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),V.addEventListener(s,"touchmove",this.touchmove),V.addEventListener(s,"touchend",this.touchend),V.addEventListener(s,"touchcancel",this.reset)}down(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),V.disableDrag()}move(n,s){const p=this.map,f=this.mouseRotate.mousemoveWindow(n,s);if(f&&f.bearingDelta&&p.setBearing(p.getBearing()+f.bearingDelta),this.mousePitch){const b=this.mousePitch.mousemoveWindow(n,s);b&&b.pitchDelta&&p.setPitch(p.getPitch()+b.pitchDelta)}}off(){const n=this.element;V.removeEventListener(n,"mousedown",this.mousedown),V.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),V.removeEventListener(n,"touchmove",this.touchmove),V.removeEventListener(n,"touchend",this.touchend),V.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){V.enableDrag(),V.removeEventListener(window,"mousemove",this.mousemove),V.removeEventListener(window,"mouseup",this.mouseup)}mousedown(n){this.down(c.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),V.mousePos(this.element,n)),V.addEventListener(window,"mousemove",this.mousemove),V.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.move(n,V.mousePos(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=V.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=V.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function rt(h,n,s){if(h=new c.LngLat(h.lng,h.lat),n){const p=new c.LngLat(h.lng-360,h.lat),f=new c.LngLat(h.lng+360,h.lat),b=s.locationPoint(h).distSqr(n);s.locationPoint(p).distSqr(n)<b?h=p:s.locationPoint(f).distSqr(n)<b&&(h=f)}for(;Math.abs(h.lng-s.center.lng)>180;){const p=s.locationPoint(h);if(p.x>=0&&p.y>=0&&p.x<=s.width&&p.y<=s.height)break;h.lng>s.center.lng?h.lng-=360:h.lng+=360}return h}const ut={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ss(h,n,s){const p=h.classList;for(const f in ut)p.remove(`maplibregl-${s}-anchor-${f}`,`mapboxgl-${s}-anchor-${f}`);p.add(`maplibregl-${s}-anchor-${n}`,`mapboxgl-${s}-anchor-${n}`)}class ls extends c.Evented{constructor(n,s){if(super(),(n instanceof HTMLElement||s)&&(n=c.extend({element:n},s)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=c.pointGeometry.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=V.create("div"),this._element.setAttribute("aria-label","Map marker");const p=V.createNS("http://www.w3.org/2000/svg","svg"),f=41,b=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${f}px`),p.setAttributeNS(null,"width",`${b}px`),p.setAttributeNS(null,"viewBox",`0 0 ${b} ${f}`);const _=V.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const S=V.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const C=V.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ue of I){const le=V.createNS("http://www.w3.org/2000/svg","ellipse");le.setAttributeNS(null,"opacity","0.04"),le.setAttributeNS(null,"cx","10.5"),le.setAttributeNS(null,"cy","5.80029008"),le.setAttributeNS(null,"rx",ue.rx),le.setAttributeNS(null,"ry",ue.ry),C.appendChild(le)}const L=V.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const O=V.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(O);const j=V.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"opacity","0.25"),j.setAttributeNS(null,"fill","#000000");const Y=V.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),j.appendChild(Y);const $=V.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$.setAttributeNS(null,"fill","#FFFFFF");const X=V.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ae=V.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");const se=V.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#FFFFFF"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962"),X.appendChild(ae),X.appendChild(se),S.appendChild(C),S.appendChild(L),S.appendChild(j),S.appendChild($),S.appendChild(X),p.appendChild(S),p.setAttributeNS(null,"height",f*this._scale+"px"),p.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(p),this._offset=c.pointGeometry.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),ss(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),V.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const f=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const s=n.code,p=n.charCode||n.keyCode;s!=="Space"&&s!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(n){const s=n.originalEvent.target,p=this._element;this._popup&&(s===p||p.contains(s))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=rt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let s="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?s=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(s=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let p="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?p="rotateX(0deg)":this._pitchAlignment==="map"&&(p=`rotateX(${this._map.getPitch()}deg)`),n&&n.type!=="moveend"||(this._pos=this._pos.round()),V.setTransform(this._element,`${ut[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${p} ${s}`)}getOffset(){return this._offset}setOffset(n){return this._offset=c.pointGeometry.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const s=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=s}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Hc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ur,zo=0,wn=!1;const um={maxWidth:100,unit:"metric"};function cs(h,n,s){const p=s&&s.maxWidth||100,f=h._container.clientHeight/2,b=h.unproject([0,f]),_=h.unproject([p,f]),S=b.distanceTo(_);if(s&&s.unit==="imperial"){const C=3.2808*S;C>5280?ir(n,p,C/5280,h._getUIString("ScaleControl.Miles")):ir(n,p,C,h._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?ir(n,p,S/1852,h._getUIString("ScaleControl.NauticalMiles")):S>=1e3?ir(n,p,S/1e3,h._getUIString("ScaleControl.Kilometers")):ir(n,p,S,h._getUIString("ScaleControl.Meters"))}function ir(h,n,s,p){const f=function(b){const _=Math.pow(10,`${Math.floor(b)}`.length-1);let S=b/_;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(C){const I=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*I)/I}(S),_*S}(s);h.style.width=n*(f/s)+"px",h.innerHTML=`${f}&nbsp;${p}`}const Vr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Gp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ma(h){if(h){if(typeof h=="number"){const n=Math.round(Math.sqrt(.5*Math.pow(h,2)));return{center:new c.pointGeometry(0,0),top:new c.pointGeometry(0,h),"top-left":new c.pointGeometry(n,n),"top-right":new c.pointGeometry(-n,n),bottom:new c.pointGeometry(0,-h),"bottom-left":new c.pointGeometry(n,-n),"bottom-right":new c.pointGeometry(-n,-n),left:new c.pointGeometry(h,0),right:new c.pointGeometry(-h,0)}}if(h instanceof c.pointGeometry||Array.isArray(h)){const n=c.pointGeometry.convert(h);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.pointGeometry.convert(h.center||[0,0]),top:c.pointGeometry.convert(h.top||[0,0]),"top-left":c.pointGeometry.convert(h["top-left"]||[0,0]),"top-right":c.pointGeometry.convert(h["top-right"]||[0,0]),bottom:c.pointGeometry.convert(h.bottom||[0,0]),"bottom-left":c.pointGeometry.convert(h["bottom-left"]||[0,0]),"bottom-right":c.pointGeometry.convert(h["bottom-right"]||[0,0]),left:c.pointGeometry.convert(h.left||[0,0]),right:c.pointGeometry.convert(h.right||[0,0])}}return ma(new c.pointGeometry(0,0))}const us={supported:P,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends ol{constructor(h){var n;if(c.PerformanceUtils.mark(c.PerformanceMarkers.create),(h=c.extend({},cm,h)).minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new es(h.minZoom,h.maxZoom,h.minPitch,h.maxPitch,h.renderWorldCopies),{bearingSnap:h.bearingSnap}),this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._failIfMajorPerformanceCaveat=h.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=h.preserveDrawingBuffer,this._antialias=h.antialias,this._trackResize=h.trackResize,this._bearingSnap=h.bearingSnap,this._refreshExpiredTiles=h.refreshExpiredTiles,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=h.collectResourceTiming,this._renderTaskQueue=new jp,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},$p,h.locale),this._clickTolerance=h.clickTolerance,this._pixelRatio=(n=h.pixelRatio)!==null&&n!==void 0?n:devicePixelRatio,this._requestManager=new pe(h.transformRequest),typeof h.container=="string"){if(this._container=document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new qn(this,h),this._hash=h.hash&&new Mp(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,c.extend({},h.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=h.localIdeographFontFamily,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new al({customAttribution:h.customAttribution})),h.maplibreLogo&&this.addControl(new Zc,h.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new c.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new c.Event(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new c.Event("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(h,n){if(n===void 0&&(n=h.getDefaultPosition?h.getDefaultPosition():"top-right"),!h||!h.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=h.onAdd(this);this._controls.push(h);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(s,p.firstChild):p.appendChild(s),this}removeControl(h){if(!h||!h.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(h);return n>-1&&this._controls.splice(n,1),h.onRemove(this),this}hasControl(h){return this._controls.indexOf(h)>-1}resize(h){const n=this._containerDimensions(),s=n[0],p=n[1];this._resizeCanvas(s,p,this.getPixelRatio()),this.transform.resize(s,p),this.painter.resize(s,p,this.getPixelRatio());const f=!this._moving;return f&&(this.stop(),this.fire(new c.Event("movestart",h)).fire(new c.Event("move",h))),this.fire(new c.Event("resize",h)),f&&this.fire(new c.Event("moveend",h)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(h){const[n,s]=this._containerDimensions();this._pixelRatio=h,this._resizeCanvas(n,s,h),this.painter.resize(n,s,h)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(h){return this.transform.setMaxBounds(c.LngLatBounds.convert(h)),this._update()}setMinZoom(h){if((h=h==null?-2:h)>=-2&&h<=this.transform.maxZoom)return this.transform.minZoom=h,this._update(),this.getZoom()<h&&this.setZoom(h),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(h){if((h=h==null?22:h)>=this.transform.minZoom)return this.transform.maxZoom=h,this._update(),this.getZoom()>h&&this.setZoom(h),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(h){if((h=h==null?0:h)<0)throw new Error("minPitch must be greater than or equal to 0");if(h>=0&&h<=this.transform.maxPitch)return this.transform.minPitch=h,this._update(),this.getPitch()<h&&this.setPitch(h),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(h){if((h=h==null?60:h)>85)throw new Error("maxPitch must be less than or equal to 85");if(h>=this.transform.minPitch)return this.transform.maxPitch=h,this._update(),this.getPitch()>h&&this.setPitch(h),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(h){return this.transform.renderWorldCopies=h,this._update()}project(h){return this.transform.locationPoint(c.LngLat.convert(h))}unproject(h){return this.transform.pointLocation(c.pointGeometry.convert(h))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(h,n,s){if(h==="mouseenter"||h==="mouseover"){let p=!1;return{layer:n,listener:s,delegates:{mousemove:b=>{const _=this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[];_.length?p||(p=!0,s.call(this,new Mn(h,this,b.originalEvent,{features:_}))):p=!1},mouseout:()=>{p=!1}}}}if(h==="mouseleave"||h==="mouseout"){let p=!1;return{layer:n,listener:s,delegates:{mousemove:_=>{(this.getLayer(n)?this.queryRenderedFeatures(_.point,{layers:[n]}):[]).length?p=!0:p&&(p=!1,s.call(this,new Mn(h,this,_.originalEvent)))},mouseout:_=>{p&&(p=!1,s.call(this,new Mn(h,this,_.originalEvent)))}}}}{const p=f=>{const b=this.getLayer(n)?this.queryRenderedFeatures(f.point,{layers:[n]}):[];b.length&&(f.features=b,s.call(this,f),delete f.features)};return{layer:n,listener:s,delegates:{[h]:p}}}}on(h,n,s){if(s===void 0)return super.on(h,n);const p=this._createDelegatedListener(h,n,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[h]=this._delegatedListeners[h]||[],this._delegatedListeners[h].push(p);for(const f in p.delegates)this.on(f,p.delegates[f]);return this}once(h,n,s){if(s===void 0)return super.once(h,n);const p=this._createDelegatedListener(h,n,s);for(const f in p.delegates)this.once(f,p.delegates[f]);return this}off(h,n,s){return s===void 0?super.off(h,n):(this._delegatedListeners&&this._delegatedListeners[h]&&(p=>{const f=this._delegatedListeners[h];for(let b=0;b<f.length;b++){const _=f[b];if(_.layer===n&&_.listener===s){for(const S in _.delegates)this.off(S,_.delegates[S]);return f.splice(b,1),this}}})(),this)}queryRenderedFeatures(h,n){if(!this.style)return[];let s;if(n!==void 0||h===void 0||h instanceof c.pointGeometry||Array.isArray(h)||(n=h,h=void 0),n=n||{},(h=h||[[0,0],[this.transform.width,this.transform.height]])instanceof c.pointGeometry||typeof h[0]=="number")s=[c.pointGeometry.convert(h)];else{const p=c.pointGeometry.convert(h[0]),f=c.pointGeometry.convert(h[1]);s=[p,new c.pointGeometry(f.x,p.y),f,new c.pointGeometry(p.x,f.y),p]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(h,n){return this.style.querySourceFeatures(h,n)}setStyle(h,n){return(n=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&h?(this._diffStyle(h,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(h,n))}setTransformRequest(h){return this._requestManager.setTransformRequest(h),this}_getUIString(h){const n=this._locale[h];if(n==null)throw new Error(`Missing UI string '${h}'`);return n}_updateStyle(h,n){return this.style&&(this.style.setEventedParent(null),this.style._remove()),h?(this.style=new Jr(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof h=="string"?this.style.loadURL(h):this.style.loadJSON(h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Jr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(h,n){if(typeof h=="string"){const s=this._requestManager.transformRequest(h,c.ResourceType.Style);c.getJSON(s,(p,f)=>{p?this.fire(new c.ErrorEvent(p)):f&&this._updateDiff(f,n)})}else typeof h=="object"&&this._updateDiff(h,n)}_updateDiff(h,n){try{this.style.setState(h)&&this._update(!0)}catch(s){c.warnOnce(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(h,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")}addSource(h,n){return this._lazyInitEmptyStyle(),this.style.addSource(h,n),this._update(!0)}isSourceLoaded(h){const n=this.style&&this.style.sourceCaches[h];if(n!==void 0)return n.loaded();this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${h}'`)))}areTilesLoaded(){const h=this.style&&this.style.sourceCaches;for(const n in h){const s=h[n]._tiles;for(const p in s){const f=s[p];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}addSourceType(h,n,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(h,n,s)}removeSource(h){return this.style.removeSource(h),this._update(!0)}getSource(h){return this.style.getSource(h)}addImage(h,n,{pixelRatio:s=1,sdf:p=!1,stretchX:f,stretchY:b,content:_}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||c.isImageBitmap(n)){const{width:S,height:C,data:I}=c.exported.getImageData(n);this.style.addImage(h,{data:new c.RGBAImage({width:S,height:C},I),pixelRatio:s,stretchX:f,stretchY:b,content:_,sdf:p,version:0})}else{if(n.width===void 0||n.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:S,height:C,data:I}=n,L=n;this.style.addImage(h,{data:new c.RGBAImage({width:S,height:C},new Uint8Array(I)),pixelRatio:s,stretchX:f,stretchY:b,content:_,sdf:p,version:0,userImage:L}),L.onAdd&&L.onAdd(this,h)}}}updateImage(h,n){const s=this.style.getImage(h);if(!s)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||c.isImageBitmap(n)?c.exported.getImageData(n):n,{width:f,height:b,data:_}=p;if(f===void 0||b===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==s.data.width||b!==s.data.height)return this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(n instanceof HTMLImageElement||c.isImageBitmap(n));s.data.replace(_,S),this.style.updateImage(h,s)}hasImage(h){return h?!!this.style.getImage(h):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(h){this.style.removeImage(h)}loadImage(h,n){c.getImage(this._requestManager.transformRequest(h,c.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(h,n){return this._lazyInitEmptyStyle(),this.style.addLayer(h,n),this._update(!0)}moveLayer(h,n){return this.style.moveLayer(h,n),this._update(!0)}removeLayer(h){return this.style.removeLayer(h),this._update(!0)}getLayer(h){return this.style.getLayer(h)}setLayerZoomRange(h,n,s){return this.style.setLayerZoomRange(h,n,s),this._update(!0)}setFilter(h,n,s={}){return this.style.setFilter(h,n,s),this._update(!0)}getFilter(h){return this.style.getFilter(h)}setPaintProperty(h,n,s,p={}){return this.style.setPaintProperty(h,n,s,p),this._update(!0)}getPaintProperty(h,n){return this.style.getPaintProperty(h,n)}setLayoutProperty(h,n,s,p={}){return this.style.setLayoutProperty(h,n,s,p),this._update(!0)}getLayoutProperty(h,n){return this.style.getLayoutProperty(h,n)}setLight(h,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(h,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(h,n){return this.style.setFeatureState(h,n),this._update()}removeFeatureState(h,n){return this.style.removeFeatureState(h,n),this._update()}getFeatureState(h){return this.style.getFeatureState(h)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let h=0,n=0;return this._container&&(h=this._container.clientWidth||400,n=this._container.clientHeight||300),[h,n]}_setupContainer(){const h=this._container;h.classList.add("maplibregl-map","mapboxgl-map");const n=this._canvasContainer=V.create("div","maplibregl-canvas-container mapboxgl-canvas-container",h);this._interactive&&n.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=V.create("canvas","maplibregl-canvas mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const s=this._containerDimensions();this._resizeCanvas(s[0],s[1],this.getPixelRatio());const p=this._controlContainer=V.create("div","maplibregl-control-container mapboxgl-control-container",h),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{f[b]=V.create("div",`maplibregl-ctrl-${b} mapboxgl-ctrl-${b}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(h,n,s){this._canvas.width=s*h,this._canvas.height=s*n,this._canvas.style.width=`${h}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const h=c.extend({},P.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",h)||this._canvas.getContext("experimental-webgl",h);n?(this.painter=new Bc(n,this.transform),c.exported$1.testSupport(n)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(h){h.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:h}))}_contextRestored(h){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:h}))}_onMapScroll(h){if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(h){return this.style?(this._styleDirty=this._styleDirty||h,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(h){return this._update(),this._renderTaskQueue.add(h)}_cancelRenderFrame(h){this._renderTaskQueue.remove(h)}_render(h){let n,s=0;const p=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,n),s=c.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(h),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const _=this.transform.zoom,S=c.exported.now();this.style.zoomHistory.update(_,S);const C=new c.EvaluationParameters(_,{now:S,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=C.crossFadingFactor();I===1&&I===this._crossFadingFactor||(f=!0,this._crossFadingFactor=I),this.style.update(C)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.load),this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const _=c.exported.now()-s;p.endQueryEXT(p.TIME_ELAPSED_EXT,n),setTimeout(()=>{const S=p.getQueryObjectEXT(n,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(n),this.fire(new c.Event("gpu-timing-frame",{cpuTime:_,gpuTime:S}))},50)}if(this.listens("gpu-timing-layer")){const _=this.painter.collectGpuTimers();setTimeout(()=>{const S=this.painter.queryGpuTimers(_);this.fire(new c.Event("gpu-timing-layer",{layerTimes:S}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const h=this.painter.context.gl.getExtension("WEBGL_lose_context");h&&h.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),V.remove(this._canvasContainer),V.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),c.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.exported.frame(h=>{c.PerformanceUtils.frame(h),this._frame=null,this._render(h)}))}_onWindowOnline(){this._update()}_onWindowResize(h){this._trackResize&&this.resize({originalEvent:h})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(h){this._showTileBoundaries!==h&&(this._showTileBoundaries=h,this._update())}get showPadding(){return!!this._showPadding}set showPadding(h){this._showPadding!==h&&(this._showPadding=h,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(h){this._showCollisionBoxes!==h&&(this._showCollisionBoxes=h,h?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(h){this._showOverdrawInspector!==h&&(this._showOverdrawInspector=h,this._update())}get repaint(){return!!this._repaint}set repaint(h){this._repaint!==h&&(this._repaint=h,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(h){this._vertices=h,this._update()}_setCacheLimits(h,n){c.setCacheLimits(h,n)}},NavigationControl:class{constructor(h){this.options=c.extend({},ki,h),this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const h=this._map.getZoom(),n=h===this._map.getMaxZoom(),s=h===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=s,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",s.toString())}_rotateCompassArrow(){const h=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=h}onAdd(h){return this._map=h,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new sl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){V.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(h,n){const s=V.create("button",h,this._container);return s.type="button",s.addEventListener("click",n),s}_setButtonTitle(h,n){const s=this._map._getUIString(`NavigationControl.${n}`);h.title=s,h.setAttribute("aria-label",s)}},GeolocateControl:class extends c.Evented{constructor(h){super(),this.options=c.extend({},Hc,h),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(h){var n;return this._map=h,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,Ur!==void 0?n(Ur):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(s=>{Ur=s.state!=="denied",n(Ur)}):(Ur=!!window.navigator.geolocation,n(Ur)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),V.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,zo=0,wn=!1}_isOutOfMapMaxBounds(h){const n=this._map.getMaxBounds(),s=h.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(h),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",h)),this._finish()}}_updateCamera(h){const n=new c.LngLat(h.coords.longitude,h.coords.latitude),s=h.coords.accuracy,p=this._map.getBearing(),f=c.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(s),f,{geolocateSource:!0})}_updateMarker(h){if(h){const n=new c.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const h=this._map._container.clientHeight/2,n=this._map.unproject([0,h]),s=this._map.unproject([1,h]),p=n.distanceTo(s),f=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(h){if(this._map){if(this.options.trackUserLocation)if(h.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(h.code===3&&wn)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",h)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(h){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=V.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",h===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=V.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ls(this._dotElement),this._circleElement=V.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ls({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":zo--,wn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let h;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),zo++,zo>1?(h={maximumAge:6e5,timeout:0},wn=!0):(h=this.options.positionOptions,wn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,h)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:al,LogoControl:Zc,ScaleControl:class{constructor(h){this.options=c.extend({},um,h),c.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){cs(this._map,this._container,this.options)}onAdd(h){return this._map=h,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",h.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){V.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(h){this.options.unit=h,cs(this._map,this._container,this.options)}},FullscreenControl:class{constructor(h){this._fullscreen=!1,h&&h.container&&(h.container instanceof HTMLElement?this._container=h.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(h){return this._map=h,this._container||(this._container=this._map.getContainer()),this._controlContainer=V.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){V.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const h=this._fullscreenButton=V.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);V.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",h).setAttribute("aria-hidden","true"),h.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const h=this._getTitle();this._fullscreenButton.setAttribute("aria-label",h),this._fullscreenButton.title=h}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends c.Evented{constructor(h){super(),this.options=c.extend(Object.create(Vr),h),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&V.remove(this._content),this._container&&(V.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(h){return this._lngLat=c.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(h){return this.setDOMContent(document.createTextNode(h))}setHTML(h){const n=document.createDocumentFragment(),s=document.createElement("body");let p;for(s.innerHTML=h;p=s.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(h){return this.options.maxWidth=h,this._update(),this}setDOMContent(h){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=V.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(h),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(h){this._container&&this._container.classList.add(h)}removeClassName(h){this._container&&this._container.classList.remove(h)}setOffset(h){return this.options.offset=h,this._update(),this}toggleClassName(h){if(this._container)return this._container.classList.toggle(h)}_createCloseButton(){this.options.closeButton&&(this._closeButton=V.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(h){this._update(h.point)}_onMouseMove(h){this._update(h.point)}_onDrag(h){this._update(h.point)}_update(h){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=V.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=V.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(b=>this._container.classList.add(b)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=rt(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!h))return;const n=this._pos=this._trackPointer&&h?h:this._map.project(this._lngLat);let s=this.options.anchor;const p=ma(this.options.offset);if(!s){const b=this._container.offsetWidth,_=this._container.offsetHeight;let S;S=n.y+p.bottom.y<_?["top"]:n.y>this._map.transform.height-_?["bottom"]:[],n.x<b/2?S.push("left"):n.x>this._map.transform.width-b/2&&S.push("right"),s=S.length===0?"bottom":S.join("-")}const f=n.add(p[s]).round();V.setTransform(this._container,`${ut[s]} translate(${f.x}px,${f.y}px)`),ss(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const h=this._container.querySelector(Gp);h&&h.focus()}_onClose(){this.remove()}},Marker:ls,Style:Jr,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.pointGeometry,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,AJAXError:c.AJAXError,config:c.config,CanvasSource:zr,GeoJSONSource:Ut,ImageSource:Br,RasterDEMTileSource:dt,RasterTileSource:qe,VectorTileSource:Yt,VideoSource:hr,prewarm:function(){Gr().acquire(_i)},clearPrewarmedResources:function(){const h=ri;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(_i),ri=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return In.workerCount},set workerCount(h){In.workerCount=h},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(h){c.config.MAX_PARALLEL_IMAGE_REQUESTS=h},clearStorage(h){c.clearTileCache(h)},workerUrl:"",addProtocol(h,n){c.config.REGISTERED_PROTOCOLS[h]=n},removeProtocol(h){delete c.config.REGISTERED_PROTOCOLS[h]}};return sr.extend(us,{isSafari:c.isSafari,getPerformanceMetrics:c.PerformanceUtils.getPerformanceMetrics}),us});var k=m;return k})})(u2);var M8=u2.exports,A8="/assets/favicon.b21c384c.svg";const D8="_whiteShadow_76r46_7",L8="_funky_76r46_11",R8="_shimmy_76r46_1",O8="_hero_76r46_73";var Cl={whiteShadow:D8,funky:L8,"text-reveal":"_text-reveal_76r46_1",shimmy:R8,"block-reveal":"_block-reveal_76r46_1",hero:O8};const Jy={longitude:6.133,latitude:45.916};function B8(){return Wt(W6,{children:[ke("div",{className:wu("vw-100 vh-100 overflow-hidden text-center d-flex justify-content-center mw-100",Cl.funky,Cl.hero),children:Wt("h1",{className:"fw-bold d-inline-flex flex-column align-items-center align-self-center",children:[ke("span",{children:"Cody"}),ke("span",{children:"Zuschlag"})]})}),Wt(Oy,{className:"mt-5",children:[Wt(_u,{className:wu("flex-lg-row-reverse align-items-center mb-5 p-5 mx-3 rounded",Cl.whiteShadow),children:[ke(Pi,{lg:6,className:"mb-3 mb-lg-0",children:ke("div",{className:"ratio ratio-16x9",children:ke("img",{src:A8,className:"d-block mx-lg-auto rounded img-fluid",alt:"Bootstrap Themes",loading:"lazy",style:{objectFit:"contain"}})})}),Wt(Pi,{className:"align-self-start",children:[ke("h2",{className:"display-5 fw-bold lh-1 mb-3",children:"About me"}),ke("h5",{children:"International Speaker"}),Wt("h5",{children:["Developer Relations Engineer @"," ",ke("a",{href:"https://nearform.com",className:"text-decoration-none",children:"NearForm"})]}),Wt("h5",{children:["University Instructor @"," ",ke("a",{href:"https://www.iut-acy.univ-smb.fr/",className:"text-decoration-none",children:"IUT Annecy"})]})]})]}),ke(_u,{className:wu("flex-lg-row-reverse align-items-center mb-5 p-5 mx-3 rounded",Cl.whiteShadow),children:Wt(Pi,{className:"align-self-start",children:[ke("h1",{className:"display-5 fw-bold lh-1 mb-3",children:"Socials"}),ke("p",{className:"lead",children:"Find me at these places"}),ke(Oy,{fluid:!0,children:Wt(_u,{className:"justify-content-center gx-5",children:[ke(Pi,{xs:"auto",children:ke("span",{className:"h4",children:Wt("a",{href:"https://twitter.com/codyzus",className:"text-decoration-none",children:[ke(i8,{})," @codyzus"]})})}),ke(Pi,{xs:"auto",children:ke("h4",{children:Wt("a",{href:"https://github.com/codyzu",className:"text-decoration-none",children:[ke(t8,{})," @codyzu"]})})}),ke(Pi,{xs:"auto",className:"align-middle",children:ke("h4",{children:Wt("a",{href:"https://www.linkedin.com/in/cody-zuschlag",className:"text-decoration-none",children:[ke(r8,{})," LinkedIn"]})})}),ke(Pi,{xs:"auto",children:ke("h4",{children:Wt("a",{href:"https://medium.com/@codyzus",className:"text-decoration-none",children:[ke(n8,{})," Medium"]})})}),ke(Pi,{xs:"auto",children:ke("h4",{children:Wt("a",{href:"https://www.nearform.com/author/cody-zuschlag/",className:"text-decoration-none",children:[ke(o8,{})," Blog"]})})})]})})]})}),ke(_u,{className:wu("flex-lg-row-reverse align-items-center mb-5 p-5 mx-3 rounded",Cl.whiteShadow),children:Wt(Pi,{className:"align-self-start",children:[ke("h1",{className:"display-5 fw-bold lh-1 mb-3",children:"My Talks"}),ke("p",{className:"lead",children:"All of my previous and planned future speaking experience"}),Wt(T7,{responsive:!0,children:[ke("thead",{children:Wt("tr",{children:[ke("th",{children:"Conference"}),ke("th",{children:"Talk"}),ke("th",{children:"Location"}),ke("th",{children:"Date"}),ke("th",{children:"Video"})]})}),Wt("tbody",{children:[Wt("tr",{children:[ke("th",{scope:"row",children:"ReactSummit"}),ke("td",{children:"Modern Full-Stack"}),ke("td",{children:"Amsterdam, Netherlands"}),ke("td",{children:new Date("2022-06-17").toLocaleDateString()}),ke("td",{children:ke(Ny,{pill:!0,color:"secondary",children:"Coming soon"})})]}),Wt("tr",{children:[ke("th",{scope:"row",children:"Caribbean Developers Conference"}),ke("td",{children:"Design Tokens"}),ke("td",{children:"Dominican Republic"}),ke("td",{children:new Date("2022-11-03").toLocaleDateString()}),ke("td",{children:ke(Ny,{pill:!0,color:"secondary",children:"Coming soon"})})]})]})]})]})}),Wt(_u,{className:wu("flex-lg-row-reverse align-items-center mb-5 p-5 mx-3 rounded",Cl.whiteShadow),children:[ke(Pi,{lg:6,className:"mb-3 mb-lg-0",children:ke("div",{className:"ratio ratio-16x9",children:ke("div",{children:ke(Z0,{mapLib:M8,initialViewState:{...Jy,zoom:8},mapStyle:"https://api.maptiler.com/maps/basic/style.json?key=qlckteTnKEl9ZBax9Thw",children:ke(S8,{...Jy,anchor:"bottom"})})})})}),Wt(Pi,{className:"align-self-start",children:[ke("h1",{className:"display-5 fw-bold lh-1 mb-3",children:"Based from"}),ke("p",{className:"lead",children:"Annecy, France"})]})]})]})]})}function F8(){return ke(B8,{})}Cf.createRoot(document.querySelector("#root")).render(ke(Ft.StrictMode,{children:ke(F8,{})}));
